(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function s(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(r){if(r.ep)return;r.ep=!0;const u=s(r);fetch(r.href,u)}})();function _c(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Uu={exports:{}},Uo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kp;function oA(){if(kp)return Uo;kp=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(o,r,u){var d=null;if(u!==void 0&&(d=""+u),r.key!==void 0&&(d=""+r.key),"key"in r){u={};for(var p in r)p!=="key"&&(u[p]=r[p])}else u=r;return r=u.ref,{$$typeof:i,type:o,key:d,ref:r!==void 0?r:null,props:u}}return Uo.Fragment=e,Uo.jsx=s,Uo.jsxs=s,Uo}var Fp;function aA(){return Fp||(Fp=1,Uu.exports=oA()),Uu.exports}var B=aA(),Ou={exports:{}},qt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Up;function rA(){if(Up)return qt;Up=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),E=Symbol.iterator;function R(z){return z===null||typeof z!="object"?null:(z=E&&z[E]||z["@@iterator"],typeof z=="function"?z:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,v={};function x(z,K,at){this.props=z,this.context=K,this.refs=v,this.updater=at||C}x.prototype.isReactComponent={},x.prototype.setState=function(z,K){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,K,"setState")},x.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function I(){}I.prototype=x.prototype;function P(z,K,at){this.props=z,this.context=K,this.refs=v,this.updater=at||C}var k=P.prototype=new I;k.constructor=P,_(k,x.prototype),k.isPureReactComponent=!0;var V=Array.isArray;function O(){}var q={H:null,A:null,T:null,S:null},et=Object.prototype.hasOwnProperty;function W(z,K,at){var ft=at.ref;return{$$typeof:i,type:z,key:K,ref:ft!==void 0?ft:null,props:at}}function lt(z,K){return W(z.type,K,z.props)}function gt(z){return typeof z=="object"&&z!==null&&z.$$typeof===i}function Rt(z){var K={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(at){return K[at]})}var _t=/\/+/g;function Tt(z,K){return typeof z=="object"&&z!==null&&z.key!=null?Rt(""+z.key):K.toString(36)}function j(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(O,O):(z.status="pending",z.then(function(K){z.status==="pending"&&(z.status="fulfilled",z.value=K)},function(K){z.status==="pending"&&(z.status="rejected",z.reason=K)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function X(z,K,at,ft,Ct){var yt=typeof z;(yt==="undefined"||yt==="boolean")&&(z=null);var F=!1;if(z===null)F=!0;else switch(yt){case"bigint":case"string":case"number":F=!0;break;case"object":switch(z.$$typeof){case i:case e:F=!0;break;case g:return F=z._init,X(F(z._payload),K,at,ft,Ct)}}if(F)return Ct=Ct(z),F=ft===""?"."+Tt(z,0):ft,V(Ct)?(at="",F!=null&&(at=F.replace(_t,"$&/")+"/"),X(Ct,K,at,"",function(T){return T})):Ct!=null&&(gt(Ct)&&(Ct=lt(Ct,at+(Ct.key==null||z&&z.key===Ct.key?"":(""+Ct.key).replace(_t,"$&/")+"/")+F)),K.push(Ct)),1;F=0;var N=ft===""?".":ft+":";if(V(z))for(var b=0;b<z.length;b++)ft=z[b],yt=N+Tt(ft,b),F+=X(ft,K,at,yt,Ct);else if(b=R(z),typeof b=="function")for(z=b.call(z),b=0;!(ft=z.next()).done;)ft=ft.value,yt=N+Tt(ft,b++),F+=X(ft,K,at,yt,Ct);else if(yt==="object"){if(typeof z.then=="function")return X(j(z),K,at,ft,Ct);throw K=String(z),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return F}function dt(z,K,at){if(z==null)return z;var ft=[],Ct=0;return X(z,ft,"","",function(yt){return K.call(at,yt,Ct++)}),ft}function vt(z){if(z._status===-1){var K=z._result;K=K(),K.then(function(at){(z._status===0||z._status===-1)&&(z._status=1,z._result=at)},function(at){(z._status===0||z._status===-1)&&(z._status=2,z._result=at)}),z._status===-1&&(z._status=0,z._result=K)}if(z._status===1)return z._result.default;throw z._result}var ot=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},ct={map:dt,forEach:function(z,K,at){dt(z,function(){K.apply(this,arguments)},at)},count:function(z){var K=0;return dt(z,function(){K++}),K},toArray:function(z){return dt(z,function(K){return K})||[]},only:function(z){if(!gt(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return qt.Activity=A,qt.Children=ct,qt.Component=x,qt.Fragment=s,qt.Profiler=r,qt.PureComponent=P,qt.StrictMode=o,qt.Suspense=y,qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,qt.__COMPILER_RUNTIME={__proto__:null,c:function(z){return q.H.useMemoCache(z)}},qt.cache=function(z){return function(){return z.apply(null,arguments)}},qt.cacheSignal=function(){return null},qt.cloneElement=function(z,K,at){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ft=_({},z.props),Ct=z.key;if(K!=null)for(yt in K.key!==void 0&&(Ct=""+K.key),K)!et.call(K,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&K.ref===void 0||(ft[yt]=K[yt]);var yt=arguments.length-2;if(yt===1)ft.children=at;else if(1<yt){for(var F=Array(yt),N=0;N<yt;N++)F[N]=arguments[N+2];ft.children=F}return W(z.type,Ct,ft)},qt.createContext=function(z){return z={$$typeof:d,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:u,_context:z},z},qt.createElement=function(z,K,at){var ft,Ct={},yt=null;if(K!=null)for(ft in K.key!==void 0&&(yt=""+K.key),K)et.call(K,ft)&&ft!=="key"&&ft!=="__self"&&ft!=="__source"&&(Ct[ft]=K[ft]);var F=arguments.length-2;if(F===1)Ct.children=at;else if(1<F){for(var N=Array(F),b=0;b<F;b++)N[b]=arguments[b+2];Ct.children=N}if(z&&z.defaultProps)for(ft in F=z.defaultProps,F)Ct[ft]===void 0&&(Ct[ft]=F[ft]);return W(z,yt,Ct)},qt.createRef=function(){return{current:null}},qt.forwardRef=function(z){return{$$typeof:p,render:z}},qt.isValidElement=gt,qt.lazy=function(z){return{$$typeof:g,_payload:{_status:-1,_result:z},_init:vt}},qt.memo=function(z,K){return{$$typeof:h,type:z,compare:K===void 0?null:K}},qt.startTransition=function(z){var K=q.T,at={};q.T=at;try{var ft=z(),Ct=q.S;Ct!==null&&Ct(at,ft),typeof ft=="object"&&ft!==null&&typeof ft.then=="function"&&ft.then(O,ot)}catch(yt){ot(yt)}finally{K!==null&&at.types!==null&&(K.types=at.types),q.T=K}},qt.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},qt.use=function(z){return q.H.use(z)},qt.useActionState=function(z,K,at){return q.H.useActionState(z,K,at)},qt.useCallback=function(z,K){return q.H.useCallback(z,K)},qt.useContext=function(z){return q.H.useContext(z)},qt.useDebugValue=function(){},qt.useDeferredValue=function(z,K){return q.H.useDeferredValue(z,K)},qt.useEffect=function(z,K){return q.H.useEffect(z,K)},qt.useEffectEvent=function(z){return q.H.useEffectEvent(z)},qt.useId=function(){return q.H.useId()},qt.useImperativeHandle=function(z,K,at){return q.H.useImperativeHandle(z,K,at)},qt.useInsertionEffect=function(z,K){return q.H.useInsertionEffect(z,K)},qt.useLayoutEffect=function(z,K){return q.H.useLayoutEffect(z,K)},qt.useMemo=function(z,K){return q.H.useMemo(z,K)},qt.useOptimistic=function(z,K){return q.H.useOptimistic(z,K)},qt.useReducer=function(z,K,at){return q.H.useReducer(z,K,at)},qt.useRef=function(z){return q.H.useRef(z)},qt.useState=function(z){return q.H.useState(z)},qt.useSyncExternalStore=function(z,K,at){return q.H.useSyncExternalStore(z,K,at)},qt.useTransition=function(){return q.H.useTransition()},qt.version="19.2.4",qt}var Op;function Mc(){return Op||(Op=1,Ou.exports=rA()),Ou.exports}var te=Mc();const lA=_c(te);var Gu={exports:{}},Oo={},Hu={exports:{}},Vu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gp;function uA(){return Gp||(Gp=1,(function(i){function e(X,dt){var vt=X.length;X.push(dt);t:for(;0<vt;){var ot=vt-1>>>1,ct=X[ot];if(0<r(ct,dt))X[ot]=dt,X[vt]=ct,vt=ot;else break t}}function s(X){return X.length===0?null:X[0]}function o(X){if(X.length===0)return null;var dt=X[0],vt=X.pop();if(vt!==dt){X[0]=vt;t:for(var ot=0,ct=X.length,z=ct>>>1;ot<z;){var K=2*(ot+1)-1,at=X[K],ft=K+1,Ct=X[ft];if(0>r(at,vt))ft<ct&&0>r(Ct,at)?(X[ot]=Ct,X[ft]=vt,ot=ft):(X[ot]=at,X[K]=vt,ot=K);else if(ft<ct&&0>r(Ct,vt))X[ot]=Ct,X[ft]=vt,ot=ft;else break t}}return dt}function r(X,dt){var vt=X.sortIndex-dt.sortIndex;return vt!==0?vt:X.id-dt.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();i.unstable_now=function(){return d.now()-p}}var y=[],h=[],g=1,A=null,E=3,R=!1,C=!1,_=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function k(X){for(var dt=s(h);dt!==null;){if(dt.callback===null)o(h);else if(dt.startTime<=X)o(h),dt.sortIndex=dt.expirationTime,e(y,dt);else break;dt=s(h)}}function V(X){if(_=!1,k(X),!C)if(s(y)!==null)C=!0,O||(O=!0,Rt());else{var dt=s(h);dt!==null&&j(V,dt.startTime-X)}}var O=!1,q=-1,et=5,W=-1;function lt(){return v?!0:!(i.unstable_now()-W<et)}function gt(){if(v=!1,O){var X=i.unstable_now();W=X;var dt=!0;try{t:{C=!1,_&&(_=!1,I(q),q=-1),R=!0;var vt=E;try{e:{for(k(X),A=s(y);A!==null&&!(A.expirationTime>X&&lt());){var ot=A.callback;if(typeof ot=="function"){A.callback=null,E=A.priorityLevel;var ct=ot(A.expirationTime<=X);if(X=i.unstable_now(),typeof ct=="function"){A.callback=ct,k(X),dt=!0;break e}A===s(y)&&o(y),k(X)}else o(y);A=s(y)}if(A!==null)dt=!0;else{var z=s(h);z!==null&&j(V,z.startTime-X),dt=!1}}break t}finally{A=null,E=vt,R=!1}dt=void 0}}finally{dt?Rt():O=!1}}}var Rt;if(typeof P=="function")Rt=function(){P(gt)};else if(typeof MessageChannel<"u"){var _t=new MessageChannel,Tt=_t.port2;_t.port1.onmessage=gt,Rt=function(){Tt.postMessage(null)}}else Rt=function(){x(gt,0)};function j(X,dt){q=x(function(){X(i.unstable_now())},dt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):et=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return E},i.unstable_next=function(X){switch(E){case 1:case 2:case 3:var dt=3;break;default:dt=E}var vt=E;E=dt;try{return X()}finally{E=vt}},i.unstable_requestPaint=function(){v=!0},i.unstable_runWithPriority=function(X,dt){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var vt=E;E=X;try{return dt()}finally{E=vt}},i.unstable_scheduleCallback=function(X,dt,vt){var ot=i.unstable_now();switch(typeof vt=="object"&&vt!==null?(vt=vt.delay,vt=typeof vt=="number"&&0<vt?ot+vt:ot):vt=ot,X){case 1:var ct=-1;break;case 2:ct=250;break;case 5:ct=1073741823;break;case 4:ct=1e4;break;default:ct=5e3}return ct=vt+ct,X={id:g++,callback:dt,priorityLevel:X,startTime:vt,expirationTime:ct,sortIndex:-1},vt>ot?(X.sortIndex=vt,e(h,X),s(y)===null&&X===s(h)&&(_?(I(q),q=-1):_=!0,j(V,vt-ot))):(X.sortIndex=ct,e(y,X),C||R||(C=!0,O||(O=!0,Rt()))),X},i.unstable_shouldYield=lt,i.unstable_wrapCallback=function(X){var dt=E;return function(){var vt=E;E=dt;try{return X.apply(this,arguments)}finally{E=vt}}}})(Vu)),Vu}var Hp;function cA(){return Hp||(Hp=1,Hu.exports=uA()),Hu.exports}var zu={exports:{}},qe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp;function dA(){if(Vp)return qe;Vp=1;var i=Mc();function e(y){var h="https://react.dev/errors/"+y;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+y+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},r=Symbol.for("react.portal");function u(y,h,g){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:A==null?null:""+A,children:y,containerInfo:h,implementation:g}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,h){if(y==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return qe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,qe.createPortal=function(y,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return u(y,h,null,g)},qe.flushSync=function(y){var h=d.T,g=o.p;try{if(d.T=null,o.p=2,y)return y()}finally{d.T=h,o.p=g,o.d.f()}},qe.preconnect=function(y,h){typeof y=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,o.d.C(y,h))},qe.prefetchDNS=function(y){typeof y=="string"&&o.d.D(y)},qe.preinit=function(y,h){if(typeof y=="string"&&h&&typeof h.as=="string"){var g=h.as,A=p(g,h.crossOrigin),E=typeof h.integrity=="string"?h.integrity:void 0,R=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?o.d.S(y,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:A,integrity:E,fetchPriority:R}):g==="script"&&o.d.X(y,{crossOrigin:A,integrity:E,fetchPriority:R,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},qe.preinitModule=function(y,h){if(typeof y=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=p(h.as,h.crossOrigin);o.d.M(y,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&o.d.M(y)},qe.preload=function(y,h){if(typeof y=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,A=p(g,h.crossOrigin);o.d.L(y,g,{crossOrigin:A,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},qe.preloadModule=function(y,h){if(typeof y=="string")if(h){var g=p(h.as,h.crossOrigin);o.d.m(y,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else o.d.m(y)},qe.requestFormReset=function(y){o.d.r(y)},qe.unstable_batchedUpdates=function(y,h){return y(h)},qe.useFormState=function(y,h,g){return d.H.useFormState(y,h,g)},qe.useFormStatus=function(){return d.H.useHostTransitionStatus()},qe.version="19.2.4",qe}var zp;function fA(){if(zp)return zu.exports;zp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),zu.exports=dA(),zu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qp;function hA(){if(qp)return Oo;qp=1;var i=cA(),e=Mc(),s=fA();function o(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function d(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function y(t){if(u(t)!==t)throw Error(o(188))}function h(t){var n=t.alternate;if(!n){if(n=u(t),n===null)throw Error(o(188));return n!==t?null:t}for(var a=t,l=n;;){var m=a.return;if(m===null)break;var S=m.alternate;if(S===null){if(l=m.return,l!==null){a=l;continue}break}if(m.child===S.child){for(S=m.child;S;){if(S===a)return y(m),t;if(S===l)return y(m),n;S=S.sibling}throw Error(o(188))}if(a.return!==l.return)a=m,l=S;else{for(var D=!1,G=m.child;G;){if(G===a){D=!0,a=m,l=S;break}if(G===l){D=!0,l=m,a=S;break}G=G.sibling}if(!D){for(G=S.child;G;){if(G===a){D=!0,a=S,l=m;break}if(G===l){D=!0,l=S,a=m;break}G=G.sibling}if(!D)throw Error(o(189))}}if(a.alternate!==l)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?t:n}function g(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=g(t),n!==null)return n;t=t.sibling}return null}var A=Object.assign,E=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),P=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),et=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),lt=Symbol.for("react.memo_cache_sentinel"),gt=Symbol.iterator;function Rt(t){return t===null||typeof t!="object"?null:(t=gt&&t[gt]||t["@@iterator"],typeof t=="function"?t:null)}var _t=Symbol.for("react.client.reference");function Tt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===_t?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _:return"Fragment";case x:return"Profiler";case v:return"StrictMode";case V:return"Suspense";case O:return"SuspenseList";case W:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case C:return"Portal";case P:return t.displayName||"Context";case I:return(t._context.displayName||"Context")+".Consumer";case k:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case q:return n=t.displayName||null,n!==null?n:Tt(t.type)||"Memo";case et:n=t._payload,t=t._init;try{return Tt(t(n))}catch{}}return null}var j=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dt=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt={pending:!1,data:null,method:null,action:null},ot=[],ct=-1;function z(t){return{current:t}}function K(t){0>ct||(t.current=ot[ct],ot[ct]=null,ct--)}function at(t,n){ct++,ot[ct]=t.current,t.current=n}var ft=z(null),Ct=z(null),yt=z(null),F=z(null);function N(t,n){switch(at(yt,n),at(Ct,t),at(ft,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?sp(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=sp(n),t=op(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}K(ft),at(ft,t)}function b(){K(ft),K(Ct),K(yt)}function T(t){t.memoizedState!==null&&at(F,t);var n=ft.current,a=op(n,t.type);n!==a&&(at(Ct,t),at(ft,a))}function w(t){Ct.current===t&&(K(ft),K(Ct)),F.current===t&&(K(F),Lo._currentValue=vt)}var M,L;function U(t){if(M===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);M=n&&n[1]||"",L=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+M+t+L}var H=!1;function Y(t,n){if(!t||H)return"";H=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var wt=function(){throw Error()};if(Object.defineProperty(wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wt,[])}catch(At){var mt=At}Reflect.construct(t,[],wt)}else{try{wt.call()}catch(At){mt=At}t.call(wt.prototype)}}else{try{throw Error()}catch(At){mt=At}(wt=t())&&typeof wt.catch=="function"&&wt.catch(function(){})}}catch(At){if(At&&mt&&typeof At.stack=="string")return[At.stack,mt.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=l.DetermineComponentFrameRoot(),D=S[0],G=S[1];if(D&&G){var tt=D.split(`
`),pt=G.split(`
`);for(m=l=0;l<tt.length&&!tt[l].includes("DetermineComponentFrameRoot");)l++;for(;m<pt.length&&!pt[m].includes("DetermineComponentFrameRoot");)m++;if(l===tt.length||m===pt.length)for(l=tt.length-1,m=pt.length-1;1<=l&&0<=m&&tt[l]!==pt[m];)m--;for(;1<=l&&0<=m;l--,m--)if(tt[l]!==pt[m]){if(l!==1||m!==1)do if(l--,m--,0>m||tt[l]!==pt[m]){var bt=`
`+tt[l].replace(" at new "," at ");return t.displayName&&bt.includes("<anonymous>")&&(bt=bt.replace("<anonymous>",t.displayName)),bt}while(1<=l&&0<=m);break}}}finally{H=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?U(a):""}function $(t,n){switch(t.tag){case 26:case 27:case 5:return U(t.type);case 16:return U("Lazy");case 13:return t.child!==n&&n!==null?U("Suspense Fallback"):U("Suspense");case 19:return U("SuspenseList");case 0:case 15:return Y(t.type,!1);case 11:return Y(t.type.render,!1);case 1:return Y(t.type,!0);case 31:return U("Activity");default:return""}}function Q(t){try{var n="",a=null;do n+=$(t,a),a=t,t=t.return;while(t);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var nt=Object.prototype.hasOwnProperty,rt=i.unstable_scheduleCallback,it=i.unstable_cancelCallback,J=i.unstable_shouldYield,Z=i.unstable_requestPaint,Et=i.unstable_now,St=i.unstable_getCurrentPriorityLevel,Mt=i.unstable_ImmediatePriority,Dt=i.unstable_UserBlockingPriority,Nt=i.unstable_NormalPriority,Ft=i.unstable_LowPriority,Pt=i.unstable_IdlePriority,Gt=i.log,Jt=i.unstable_setDisableYieldValue,Xt=null,$t=null;function Ut(t){if(typeof Gt=="function"&&Jt(t),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(Xt,t)}catch{}}var ae=Math.clz32?Math.clz32:ve,Se=Math.log,ke=Math.LN2;function ve(t){return t>>>=0,t===0?32:31-(Se(t)/ke|0)|0}var pe=256,fe=262144,Ie=4194304;function ze(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Pn(t,n,a){var l=t.pendingLanes;if(l===0)return 0;var m=0,S=t.suspendedLanes,D=t.pingedLanes;t=t.warmLanes;var G=l&134217727;return G!==0?(l=G&~S,l!==0?m=ze(l):(D&=G,D!==0?m=ze(D):a||(a=G&~t,a!==0&&(m=ze(a))))):(G=l&~S,G!==0?m=ze(G):D!==0?m=ze(D):a||(a=l&~t,a!==0&&(m=ze(a)))),m===0?0:n!==0&&n!==m&&(n&S)===0&&(S=m&-m,a=n&-n,S>=a||S===32&&(a&4194048)!==0)?n:m}function _n(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Fe(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xe(){var t=Ie;return Ie<<=1,(Ie&62914560)===0&&(Ie=4194304),t}function ni(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function en(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ii(t,n,a,l,m,S){var D=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var G=t.entanglements,tt=t.expirationTimes,pt=t.hiddenUpdates;for(a=D&~a;0<a;){var bt=31-ae(a),wt=1<<bt;G[bt]=0,tt[bt]=-1;var mt=pt[bt];if(mt!==null)for(pt[bt]=null,bt=0;bt<mt.length;bt++){var At=mt[bt];At!==null&&(At.lane&=-536870913)}a&=~wt}l!==0&&Ae(t,l,0),S!==0&&m===0&&t.tag!==0&&(t.suspendedLanes|=S&~(D&~n))}function Ae(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-ae(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function si(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var l=31-ae(a),m=1<<l;m&n|t[l]&n&&(t[l]|=n),a&=~m}}function Zi(t,n){var a=n&-n;return a=(a&42)!==0?1:Mn(a),(a&(t.suspendedLanes|n))!==0?0:a}function Mn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Rr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function zc(){var t=dt.p;return t!==0?t:(t=window.event,t===void 0?32:_p(t.type))}function qc(t,n){var a=dt.p;try{return dt.p=t,n()}finally{dt.p=a}}var oi=Math.random().toString(36).slice(2),Ue="__reactFiber$"+oi,$e="__reactProps$"+oi,ji="__reactContainer$"+oi,_r="__reactEvents$"+oi,$v="__reactListeners$"+oi,Kv="__reactHandles$"+oi,Bc="__reactResources$"+oi,Js="__reactMarker$"+oi;function Mr(t){delete t[Ue],delete t[$e],delete t[_r],delete t[$v],delete t[Kv]}function ts(t){var n=t[Ue];if(n)return n;for(var a=t.parentNode;a;){if(n=a[ji]||a[Ue]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=fp(t);t!==null;){if(a=t[Ue])return a;t=fp(t)}return n}t=a,a=t.parentNode}return null}function es(t){if(t=t[Ue]||t[ji]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function $s(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(o(33))}function ns(t){var n=t[Bc];return n||(n=t[Bc]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function De(t){t[Js]=!0}var Yc=new Set,Xc={};function Ni(t,n){is(t,n),is(t+"Capture",n)}function is(t,n){for(Xc[t]=n,t=0;t<n.length;t++)Yc.add(n[t])}var Qv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jc={},$c={};function Wv(t){return nt.call($c,t)?!0:nt.call(Jc,t)?!1:Qv.test(t)?$c[t]=!0:(Jc[t]=!0,!1)}function Bo(t,n,a){if(Wv(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function Yo(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function kn(t,n,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+l)}}function cn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Kc(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Zv(t,n,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,S=l.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return m.call(this)},set:function(D){a=""+D,S.call(this,D)}}),Object.defineProperty(t,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(D){a=""+D},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Ir(t){if(!t._valueTracker){var n=Kc(t)?"checked":"value";t._valueTracker=Zv(t,n,""+t[n])}}function Qc(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return t&&(l=Kc(t)?t.checked?"true":"false":t.value),t=l,t!==a?(n.setValue(t),!0):!1}function Xo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var jv=/[\n"\\]/g;function dn(t){return t.replace(jv,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Nr(t,n,a,l,m,S,D,G){t.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?t.type=D:t.removeAttribute("type"),n!=null?D==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+cn(n)):t.value!==""+cn(n)&&(t.value=""+cn(n)):D!=="submit"&&D!=="reset"||t.removeAttribute("value"),n!=null?Dr(t,D,cn(n)):a!=null?Dr(t,D,cn(a)):l!=null&&t.removeAttribute("value"),m==null&&S!=null&&(t.defaultChecked=!!S),m!=null&&(t.checked=m&&typeof m!="function"&&typeof m!="symbol"),G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?t.name=""+cn(G):t.removeAttribute("name")}function Wc(t,n,a,l,m,S,D,G){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(t.type=S),n!=null||a!=null){if(!(S!=="submit"&&S!=="reset"||n!=null)){Ir(t);return}a=a!=null?""+cn(a):"",n=n!=null?""+cn(n):a,G||n===t.value||(t.value=n),t.defaultValue=n}l=l??m,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=G?t.checked:!!l,t.defaultChecked=!!l,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(t.name=D),Ir(t)}function Dr(t,n,a){n==="number"&&Xo(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ss(t,n,a,l){if(t=t.options,n){n={};for(var m=0;m<a.length;m++)n["$"+a[m]]=!0;for(a=0;a<t.length;a++)m=n.hasOwnProperty("$"+t[a].value),t[a].selected!==m&&(t[a].selected=m),m&&l&&(t[a].defaultSelected=!0)}else{for(a=""+cn(a),n=null,m=0;m<t.length;m++){if(t[m].value===a){t[m].selected=!0,l&&(t[m].defaultSelected=!0);return}n!==null||t[m].disabled||(n=t[m])}n!==null&&(n.selected=!0)}}function Zc(t,n,a){if(n!=null&&(n=""+cn(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+cn(a):""}function jc(t,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(o(92));if(j(l)){if(1<l.length)throw Error(o(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=cn(n),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Ir(t)}function os(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var ty=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function td(t,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,a):typeof a!="number"||a===0||ty.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function ed(t,n,a){if(n!=null&&typeof n!="object")throw Error(o(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var m in n)l=n[m],n.hasOwnProperty(m)&&a[m]!==l&&td(t,m,l)}else for(var S in n)n.hasOwnProperty(S)&&td(t,S,n[S])}function Lr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ey=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ny=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jo(t){return ny.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Fn(){}var Pr=null;function kr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var as=null,rs=null;function nd(t){var n=es(t);if(n&&(t=n.stateNode)){var a=t[$e]||null;t:switch(t=n.stateNode,n.type){case"input":if(Nr(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+dn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==t&&l.form===t.form){var m=l[$e]||null;if(!m)throw Error(o(90));Nr(l,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===t.form&&Qc(l)}break t;case"textarea":Zc(t,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&ss(t,!!a.multiple,n,!1)}}}var Fr=!1;function id(t,n,a){if(Fr)return t(n,a);Fr=!0;try{var l=t(n);return l}finally{if(Fr=!1,(as!==null||rs!==null)&&(Pa(),as&&(n=as,t=rs,rs=as=null,nd(n),t)))for(n=0;n<t.length;n++)nd(t[n])}}function Ks(t,n){var a=t.stateNode;if(a===null)return null;var l=a[$e]||null;if(l===null)return null;a=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break t;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(o(231,n,typeof a));return a}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ur=!1;if(Un)try{var Qs={};Object.defineProperty(Qs,"passive",{get:function(){Ur=!0}}),window.addEventListener("test",Qs,Qs),window.removeEventListener("test",Qs,Qs)}catch{Ur=!1}var ai=null,Or=null,$o=null;function sd(){if($o)return $o;var t,n=Or,a=n.length,l,m="value"in ai?ai.value:ai.textContent,S=m.length;for(t=0;t<a&&n[t]===m[t];t++);var D=a-t;for(l=1;l<=D&&n[a-l]===m[S-l];l++);return $o=m.slice(t,1<l?1-l:void 0)}function Ko(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Qo(){return!0}function od(){return!1}function Ke(t){function n(a,l,m,S,D){this._reactName=a,this._targetInst=m,this.type=l,this.nativeEvent=S,this.target=D,this.currentTarget=null;for(var G in t)t.hasOwnProperty(G)&&(a=t[G],this[G]=a?a(S):S[G]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Qo:od,this.isPropagationStopped=od,this}return A(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Qo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Qo)},persist:function(){},isPersistent:Qo}),n}var Di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wo=Ke(Di),Ws=A({},Di,{view:0,detail:0}),iy=Ke(Ws),Gr,Hr,Zs,Zo=A({},Ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zs&&(Zs&&t.type==="mousemove"?(Gr=t.screenX-Zs.screenX,Hr=t.screenY-Zs.screenY):Hr=Gr=0,Zs=t),Gr)},movementY:function(t){return"movementY"in t?t.movementY:Hr}}),ad=Ke(Zo),sy=A({},Zo,{dataTransfer:0}),oy=Ke(sy),ay=A({},Ws,{relatedTarget:0}),Vr=Ke(ay),ry=A({},Di,{animationName:0,elapsedTime:0,pseudoElement:0}),ly=Ke(ry),uy=A({},Di,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cy=Ke(uy),dy=A({},Di,{data:0}),rd=Ke(dy),fy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},py={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function my(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=py[t])?!!n[t]:!1}function zr(){return my}var gy=A({},Ws,{key:function(t){if(t.key){var n=fy[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ko(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zr,charCode:function(t){return t.type==="keypress"?Ko(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ko(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vy=Ke(gy),yy=A({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ld=Ke(yy),Ay=A({},Ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zr}),Sy=Ke(Ay),Ty=A({},Di,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ey=Ke(Ty),by=A({},Zo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cy=Ke(by),xy=A({},Di,{newState:0,oldState:0}),wy=Ke(xy),Ry=[9,13,27,32],qr=Un&&"CompositionEvent"in window,js=null;Un&&"documentMode"in document&&(js=document.documentMode);var _y=Un&&"TextEvent"in window&&!js,ud=Un&&(!qr||js&&8<js&&11>=js),cd=" ",dd=!1;function fd(t,n){switch(t){case"keyup":return Ry.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ls=!1;function My(t,n){switch(t){case"compositionend":return hd(n);case"keypress":return n.which!==32?null:(dd=!0,cd);case"textInput":return t=n.data,t===cd&&dd?null:t;default:return null}}function Iy(t,n){if(ls)return t==="compositionend"||!qr&&fd(t,n)?(t=sd(),$o=Or=ai=null,ls=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ud&&n.locale!=="ko"?null:n.data;default:return null}}var Ny={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Ny[t.type]:n==="textarea"}function md(t,n,a,l){as?rs?rs.push(l):rs=[l]:as=l,n=Va(n,"onChange"),0<n.length&&(a=new Wo("onChange","change",null,a,l),t.push({event:a,listeners:n}))}var to=null,eo=null;function Dy(t){Zh(t,0)}function jo(t){var n=$s(t);if(Qc(n))return t}function gd(t,n){if(t==="change")return n}var vd=!1;if(Un){var Br;if(Un){var Yr="oninput"in document;if(!Yr){var yd=document.createElement("div");yd.setAttribute("oninput","return;"),Yr=typeof yd.oninput=="function"}Br=Yr}else Br=!1;vd=Br&&(!document.documentMode||9<document.documentMode)}function Ad(){to&&(to.detachEvent("onpropertychange",Sd),eo=to=null)}function Sd(t){if(t.propertyName==="value"&&jo(eo)){var n=[];md(n,eo,t,kr(t)),id(Dy,n)}}function Ly(t,n,a){t==="focusin"?(Ad(),to=n,eo=a,to.attachEvent("onpropertychange",Sd)):t==="focusout"&&Ad()}function Py(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jo(eo)}function ky(t,n){if(t==="click")return jo(n)}function Fy(t,n){if(t==="input"||t==="change")return jo(n)}function Uy(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var nn=typeof Object.is=="function"?Object.is:Uy;function no(t,n){if(nn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var m=a[l];if(!nt.call(n,m)||!nn(t[m],n[m]))return!1}return!0}function Td(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ed(t,n){var a=Td(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=n&&l>=n)return{node:a,offset:n-t};t=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Td(a)}}function bd(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?bd(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Cd(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Xo(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=Xo(t.document)}return n}function Xr(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var Oy=Un&&"documentMode"in document&&11>=document.documentMode,us=null,Jr=null,io=null,$r=!1;function xd(t,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;$r||us==null||us!==Xo(l)||(l=us,"selectionStart"in l&&Xr(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),io&&no(io,l)||(io=l,l=Va(Jr,"onSelect"),0<l.length&&(n=new Wo("onSelect","select",null,n,a),t.push({event:n,listeners:l}),n.target=us)))}function Li(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var cs={animationend:Li("Animation","AnimationEnd"),animationiteration:Li("Animation","AnimationIteration"),animationstart:Li("Animation","AnimationStart"),transitionrun:Li("Transition","TransitionRun"),transitionstart:Li("Transition","TransitionStart"),transitioncancel:Li("Transition","TransitionCancel"),transitionend:Li("Transition","TransitionEnd")},Kr={},wd={};Un&&(wd=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);function Pi(t){if(Kr[t])return Kr[t];if(!cs[t])return t;var n=cs[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in wd)return Kr[t]=n[a];return t}var Rd=Pi("animationend"),_d=Pi("animationiteration"),Md=Pi("animationstart"),Gy=Pi("transitionrun"),Hy=Pi("transitionstart"),Vy=Pi("transitioncancel"),Id=Pi("transitionend"),Nd=new Map,Qr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qr.push("scrollEnd");function En(t,n){Nd.set(t,n),Ni(n,[t])}var ta=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},fn=[],ds=0,Wr=0;function ea(){for(var t=ds,n=Wr=ds=0;n<t;){var a=fn[n];fn[n++]=null;var l=fn[n];fn[n++]=null;var m=fn[n];fn[n++]=null;var S=fn[n];if(fn[n++]=null,l!==null&&m!==null){var D=l.pending;D===null?m.next=m:(m.next=D.next,D.next=m),l.pending=m}S!==0&&Dd(a,m,S)}}function na(t,n,a,l){fn[ds++]=t,fn[ds++]=n,fn[ds++]=a,fn[ds++]=l,Wr|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Zr(t,n,a,l){return na(t,n,a,l),ia(t)}function ki(t,n){return na(t,null,null,n),ia(t)}function Dd(t,n,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var m=!1,S=t.return;S!==null;)S.childLanes|=a,l=S.alternate,l!==null&&(l.childLanes|=a),S.tag===22&&(t=S.stateNode,t===null||t._visibility&1||(m=!0)),t=S,S=S.return;return t.tag===3?(S=t.stateNode,m&&n!==null&&(m=31-ae(a),t=S.hiddenUpdates,l=t[m],l===null?t[m]=[n]:l.push(n),n.lane=a|536870912),S):null}function ia(t){if(50<wo)throw wo=0,ru=null,Error(o(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var fs={};function zy(t,n,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(t,n,a,l){return new zy(t,n,a,l)}function jr(t){return t=t.prototype,!(!t||!t.isReactComponent)}function On(t,n){var a=t.alternate;return a===null?(a=sn(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Ld(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function sa(t,n,a,l,m,S){var D=0;if(l=t,typeof t=="function")jr(t)&&(D=1);else if(typeof t=="string")D=J0(t,a,ft.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case W:return t=sn(31,a,n,m),t.elementType=W,t.lanes=S,t;case _:return Fi(a.children,m,S,n);case v:D=8,m|=24;break;case x:return t=sn(12,a,n,m|2),t.elementType=x,t.lanes=S,t;case V:return t=sn(13,a,n,m),t.elementType=V,t.lanes=S,t;case O:return t=sn(19,a,n,m),t.elementType=O,t.lanes=S,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case P:D=10;break t;case I:D=9;break t;case k:D=11;break t;case q:D=14;break t;case et:D=16,l=null;break t}D=29,a=Error(o(130,t===null?"null":typeof t,"")),l=null}return n=sn(D,a,n,m),n.elementType=t,n.type=l,n.lanes=S,n}function Fi(t,n,a,l){return t=sn(7,t,l,n),t.lanes=a,t}function tl(t,n,a){return t=sn(6,t,null,n),t.lanes=a,t}function Pd(t){var n=sn(18,null,null,0);return n.stateNode=t,n}function el(t,n,a){return n=sn(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var kd=new WeakMap;function hn(t,n){if(typeof t=="object"&&t!==null){var a=kd.get(t);return a!==void 0?a:(n={value:t,source:n,stack:Q(n)},kd.set(t,n),n)}return{value:t,source:n,stack:Q(n)}}var hs=[],ps=0,oa=null,so=0,pn=[],mn=0,ri=null,In=1,Nn="";function Gn(t,n){hs[ps++]=so,hs[ps++]=oa,oa=t,so=n}function Fd(t,n,a){pn[mn++]=In,pn[mn++]=Nn,pn[mn++]=ri,ri=t;var l=In;t=Nn;var m=32-ae(l)-1;l&=~(1<<m),a+=1;var S=32-ae(n)+m;if(30<S){var D=m-m%5;S=(l&(1<<D)-1).toString(32),l>>=D,m-=D,In=1<<32-ae(n)+m|a<<m|l,Nn=S+t}else In=1<<S|a<<m|l,Nn=t}function nl(t){t.return!==null&&(Gn(t,1),Fd(t,1,0))}function il(t){for(;t===oa;)oa=hs[--ps],hs[ps]=null,so=hs[--ps],hs[ps]=null;for(;t===ri;)ri=pn[--mn],pn[mn]=null,Nn=pn[--mn],pn[mn]=null,In=pn[--mn],pn[mn]=null}function Ud(t,n){pn[mn++]=In,pn[mn++]=Nn,pn[mn++]=ri,In=n.id,Nn=n.overflow,ri=t}var Oe=null,me=null,jt=!1,li=null,gn=!1,sl=Error(o(519));function ui(t){var n=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw oo(hn(n,t)),sl}function Od(t){var n=t.stateNode,a=t.type,l=t.memoizedProps;switch(n[Ue]=t,n[$e]=l,a){case"dialog":Qt("cancel",n),Qt("close",n);break;case"iframe":case"object":case"embed":Qt("load",n);break;case"video":case"audio":for(a=0;a<_o.length;a++)Qt(_o[a],n);break;case"source":Qt("error",n);break;case"img":case"image":case"link":Qt("error",n),Qt("load",n);break;case"details":Qt("toggle",n);break;case"input":Qt("invalid",n),Wc(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Qt("invalid",n);break;case"textarea":Qt("invalid",n),jc(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||np(n.textContent,a)?(l.popover!=null&&(Qt("beforetoggle",n),Qt("toggle",n)),l.onScroll!=null&&Qt("scroll",n),l.onScrollEnd!=null&&Qt("scrollend",n),l.onClick!=null&&(n.onclick=Fn),n=!0):n=!1,n||ui(t,!0)}function Gd(t){for(Oe=t.return;Oe;)switch(Oe.tag){case 5:case 31:case 13:gn=!1;return;case 27:case 3:gn=!0;return;default:Oe=Oe.return}}function ms(t){if(t!==Oe)return!1;if(!jt)return Gd(t),jt=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Eu(t.type,t.memoizedProps)),a=!a),a&&me&&ui(t),Gd(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));me=dp(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));me=dp(t)}else n===27?(n=me,bi(t.type)?(t=Ru,Ru=null,me=t):me=n):me=Oe?yn(t.stateNode.nextSibling):null;return!0}function Ui(){me=Oe=null,jt=!1}function ol(){var t=li;return t!==null&&(je===null?je=t:je.push.apply(je,t),li=null),t}function oo(t){li===null?li=[t]:li.push(t)}var al=z(null),Oi=null,Hn=null;function ci(t,n,a){at(al,n._currentValue),n._currentValue=a}function Vn(t){t._currentValue=al.current,K(al)}function rl(t,n,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===a)break;t=t.return}}function ll(t,n,a,l){var m=t.child;for(m!==null&&(m.return=t);m!==null;){var S=m.dependencies;if(S!==null){var D=m.child;S=S.firstContext;t:for(;S!==null;){var G=S;S=m;for(var tt=0;tt<n.length;tt++)if(G.context===n[tt]){S.lanes|=a,G=S.alternate,G!==null&&(G.lanes|=a),rl(S.return,a,t),l||(D=null);break t}S=G.next}}else if(m.tag===18){if(D=m.return,D===null)throw Error(o(341));D.lanes|=a,S=D.alternate,S!==null&&(S.lanes|=a),rl(D,a,t),D=null}else D=m.child;if(D!==null)D.return=m;else for(D=m;D!==null;){if(D===t){D=null;break}if(m=D.sibling,m!==null){m.return=D.return,D=m;break}D=D.return}m=D}}function gs(t,n,a,l){t=null;for(var m=n,S=!1;m!==null;){if(!S){if((m.flags&524288)!==0)S=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var D=m.alternate;if(D===null)throw Error(o(387));if(D=D.memoizedProps,D!==null){var G=m.type;nn(m.pendingProps.value,D.value)||(t!==null?t.push(G):t=[G])}}else if(m===F.current){if(D=m.alternate,D===null)throw Error(o(387));D.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(t!==null?t.push(Lo):t=[Lo])}m=m.return}t!==null&&ll(n,t,a,l),n.flags|=262144}function aa(t){for(t=t.firstContext;t!==null;){if(!nn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Gi(t){Oi=t,Hn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ge(t){return Hd(Oi,t)}function ra(t,n){return Oi===null&&Gi(t),Hd(t,n)}function Hd(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Hn===null){if(t===null)throw Error(o(308));Hn=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Hn=Hn.next=n;return a}var qy=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},By=i.unstable_scheduleCallback,Yy=i.unstable_NormalPriority,we={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ul(){return{controller:new qy,data:new Map,refCount:0}}function ao(t){t.refCount--,t.refCount===0&&By(Yy,function(){t.controller.abort()})}var ro=null,cl=0,vs=0,ys=null;function Xy(t,n){if(ro===null){var a=ro=[];cl=0,vs=hu(),ys={status:"pending",value:void 0,then:function(l){a.push(l)}}}return cl++,n.then(Vd,Vd),n}function Vd(){if(--cl===0&&ro!==null){ys!==null&&(ys.status="fulfilled");var t=ro;ro=null,vs=0,ys=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function Jy(t,n){var a=[],l={status:"pending",value:null,reason:null,then:function(m){a.push(m)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var m=0;m<a.length;m++)(0,a[m])(n)},function(m){for(l.status="rejected",l.reason=m,m=0;m<a.length;m++)(0,a[m])(void 0)}),l}var zd=X.S;X.S=function(t,n){wh=Et(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Xy(t,n),zd!==null&&zd(t,n)};var Hi=z(null);function dl(){var t=Hi.current;return t!==null?t:he.pooledCache}function la(t,n){n===null?at(Hi,Hi.current):at(Hi,n.pool)}function qd(){var t=dl();return t===null?null:{parent:we._currentValue,pool:t}}var As=Error(o(460)),fl=Error(o(474)),ua=Error(o(542)),ca={then:function(){}};function Bd(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Yd(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(Fn,Fn),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Jd(t),t;default:if(typeof n.status=="string")n.then(Fn,Fn);else{if(t=he,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var m=n;m.status="fulfilled",m.value=l}},function(l){if(n.status==="pending"){var m=n;m.status="rejected",m.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Jd(t),t}throw zi=n,As}}function Vi(t){try{var n=t._init;return n(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(zi=a,As):a}}var zi=null;function Xd(){if(zi===null)throw Error(o(459));var t=zi;return zi=null,t}function Jd(t){if(t===As||t===ua)throw Error(o(483))}var Ss=null,lo=0;function da(t){var n=lo;return lo+=1,Ss===null&&(Ss=[]),Yd(Ss,t,n)}function uo(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function fa(t,n){throw n.$$typeof===E?Error(o(525)):(t=Object.prototype.toString.call(n),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function $d(t){function n(ut,st){if(t){var ht=ut.deletions;ht===null?(ut.deletions=[st],ut.flags|=16):ht.push(st)}}function a(ut,st){if(!t)return null;for(;st!==null;)n(ut,st),st=st.sibling;return null}function l(ut){for(var st=new Map;ut!==null;)ut.key!==null?st.set(ut.key,ut):st.set(ut.index,ut),ut=ut.sibling;return st}function m(ut,st){return ut=On(ut,st),ut.index=0,ut.sibling=null,ut}function S(ut,st,ht){return ut.index=ht,t?(ht=ut.alternate,ht!==null?(ht=ht.index,ht<st?(ut.flags|=67108866,st):ht):(ut.flags|=67108866,st)):(ut.flags|=1048576,st)}function D(ut){return t&&ut.alternate===null&&(ut.flags|=67108866),ut}function G(ut,st,ht,xt){return st===null||st.tag!==6?(st=tl(ht,ut.mode,xt),st.return=ut,st):(st=m(st,ht),st.return=ut,st)}function tt(ut,st,ht,xt){var Ot=ht.type;return Ot===_?bt(ut,st,ht.props.children,xt,ht.key):st!==null&&(st.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===et&&Vi(Ot)===st.type)?(st=m(st,ht.props),uo(st,ht),st.return=ut,st):(st=sa(ht.type,ht.key,ht.props,null,ut.mode,xt),uo(st,ht),st.return=ut,st)}function pt(ut,st,ht,xt){return st===null||st.tag!==4||st.stateNode.containerInfo!==ht.containerInfo||st.stateNode.implementation!==ht.implementation?(st=el(ht,ut.mode,xt),st.return=ut,st):(st=m(st,ht.children||[]),st.return=ut,st)}function bt(ut,st,ht,xt,Ot){return st===null||st.tag!==7?(st=Fi(ht,ut.mode,xt,Ot),st.return=ut,st):(st=m(st,ht),st.return=ut,st)}function wt(ut,st,ht){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return st=tl(""+st,ut.mode,ht),st.return=ut,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case R:return ht=sa(st.type,st.key,st.props,null,ut.mode,ht),uo(ht,st),ht.return=ut,ht;case C:return st=el(st,ut.mode,ht),st.return=ut,st;case et:return st=Vi(st),wt(ut,st,ht)}if(j(st)||Rt(st))return st=Fi(st,ut.mode,ht,null),st.return=ut,st;if(typeof st.then=="function")return wt(ut,da(st),ht);if(st.$$typeof===P)return wt(ut,ra(ut,st),ht);fa(ut,st)}return null}function mt(ut,st,ht,xt){var Ot=st!==null?st.key:null;if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return Ot!==null?null:G(ut,st,""+ht,xt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case R:return ht.key===Ot?tt(ut,st,ht,xt):null;case C:return ht.key===Ot?pt(ut,st,ht,xt):null;case et:return ht=Vi(ht),mt(ut,st,ht,xt)}if(j(ht)||Rt(ht))return Ot!==null?null:bt(ut,st,ht,xt,null);if(typeof ht.then=="function")return mt(ut,st,da(ht),xt);if(ht.$$typeof===P)return mt(ut,st,ra(ut,ht),xt);fa(ut,ht)}return null}function At(ut,st,ht,xt,Ot){if(typeof xt=="string"&&xt!==""||typeof xt=="number"||typeof xt=="bigint")return ut=ut.get(ht)||null,G(st,ut,""+xt,Ot);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case R:return ut=ut.get(xt.key===null?ht:xt.key)||null,tt(st,ut,xt,Ot);case C:return ut=ut.get(xt.key===null?ht:xt.key)||null,pt(st,ut,xt,Ot);case et:return xt=Vi(xt),At(ut,st,ht,xt,Ot)}if(j(xt)||Rt(xt))return ut=ut.get(ht)||null,bt(st,ut,xt,Ot,null);if(typeof xt.then=="function")return At(ut,st,ht,da(xt),Ot);if(xt.$$typeof===P)return At(ut,st,ht,ra(st,xt),Ot);fa(st,xt)}return null}function Lt(ut,st,ht,xt){for(var Ot=null,ne=null,kt=st,Yt=st=0,Zt=null;kt!==null&&Yt<ht.length;Yt++){kt.index>Yt?(Zt=kt,kt=null):Zt=kt.sibling;var ie=mt(ut,kt,ht[Yt],xt);if(ie===null){kt===null&&(kt=Zt);break}t&&kt&&ie.alternate===null&&n(ut,kt),st=S(ie,st,Yt),ne===null?Ot=ie:ne.sibling=ie,ne=ie,kt=Zt}if(Yt===ht.length)return a(ut,kt),jt&&Gn(ut,Yt),Ot;if(kt===null){for(;Yt<ht.length;Yt++)kt=wt(ut,ht[Yt],xt),kt!==null&&(st=S(kt,st,Yt),ne===null?Ot=kt:ne.sibling=kt,ne=kt);return jt&&Gn(ut,Yt),Ot}for(kt=l(kt);Yt<ht.length;Yt++)Zt=At(kt,ut,Yt,ht[Yt],xt),Zt!==null&&(t&&Zt.alternate!==null&&kt.delete(Zt.key===null?Yt:Zt.key),st=S(Zt,st,Yt),ne===null?Ot=Zt:ne.sibling=Zt,ne=Zt);return t&&kt.forEach(function(_i){return n(ut,_i)}),jt&&Gn(ut,Yt),Ot}function Ht(ut,st,ht,xt){if(ht==null)throw Error(o(151));for(var Ot=null,ne=null,kt=st,Yt=st=0,Zt=null,ie=ht.next();kt!==null&&!ie.done;Yt++,ie=ht.next()){kt.index>Yt?(Zt=kt,kt=null):Zt=kt.sibling;var _i=mt(ut,kt,ie.value,xt);if(_i===null){kt===null&&(kt=Zt);break}t&&kt&&_i.alternate===null&&n(ut,kt),st=S(_i,st,Yt),ne===null?Ot=_i:ne.sibling=_i,ne=_i,kt=Zt}if(ie.done)return a(ut,kt),jt&&Gn(ut,Yt),Ot;if(kt===null){for(;!ie.done;Yt++,ie=ht.next())ie=wt(ut,ie.value,xt),ie!==null&&(st=S(ie,st,Yt),ne===null?Ot=ie:ne.sibling=ie,ne=ie);return jt&&Gn(ut,Yt),Ot}for(kt=l(kt);!ie.done;Yt++,ie=ht.next())ie=At(kt,ut,Yt,ie.value,xt),ie!==null&&(t&&ie.alternate!==null&&kt.delete(ie.key===null?Yt:ie.key),st=S(ie,st,Yt),ne===null?Ot=ie:ne.sibling=ie,ne=ie);return t&&kt.forEach(function(sA){return n(ut,sA)}),jt&&Gn(ut,Yt),Ot}function de(ut,st,ht,xt){if(typeof ht=="object"&&ht!==null&&ht.type===_&&ht.key===null&&(ht=ht.props.children),typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case R:t:{for(var Ot=ht.key;st!==null;){if(st.key===Ot){if(Ot=ht.type,Ot===_){if(st.tag===7){a(ut,st.sibling),xt=m(st,ht.props.children),xt.return=ut,ut=xt;break t}}else if(st.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===et&&Vi(Ot)===st.type){a(ut,st.sibling),xt=m(st,ht.props),uo(xt,ht),xt.return=ut,ut=xt;break t}a(ut,st);break}else n(ut,st);st=st.sibling}ht.type===_?(xt=Fi(ht.props.children,ut.mode,xt,ht.key),xt.return=ut,ut=xt):(xt=sa(ht.type,ht.key,ht.props,null,ut.mode,xt),uo(xt,ht),xt.return=ut,ut=xt)}return D(ut);case C:t:{for(Ot=ht.key;st!==null;){if(st.key===Ot)if(st.tag===4&&st.stateNode.containerInfo===ht.containerInfo&&st.stateNode.implementation===ht.implementation){a(ut,st.sibling),xt=m(st,ht.children||[]),xt.return=ut,ut=xt;break t}else{a(ut,st);break}else n(ut,st);st=st.sibling}xt=el(ht,ut.mode,xt),xt.return=ut,ut=xt}return D(ut);case et:return ht=Vi(ht),de(ut,st,ht,xt)}if(j(ht))return Lt(ut,st,ht,xt);if(Rt(ht)){if(Ot=Rt(ht),typeof Ot!="function")throw Error(o(150));return ht=Ot.call(ht),Ht(ut,st,ht,xt)}if(typeof ht.then=="function")return de(ut,st,da(ht),xt);if(ht.$$typeof===P)return de(ut,st,ra(ut,ht),xt);fa(ut,ht)}return typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint"?(ht=""+ht,st!==null&&st.tag===6?(a(ut,st.sibling),xt=m(st,ht),xt.return=ut,ut=xt):(a(ut,st),xt=tl(ht,ut.mode,xt),xt.return=ut,ut=xt),D(ut)):a(ut,st)}return function(ut,st,ht,xt){try{lo=0;var Ot=de(ut,st,ht,xt);return Ss=null,Ot}catch(kt){if(kt===As||kt===ua)throw kt;var ne=sn(29,kt,null,ut.mode);return ne.lanes=xt,ne.return=ut,ne}finally{}}}var qi=$d(!0),Kd=$d(!1),di=!1;function hl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pl(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function fi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function hi(t,n,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(oe&2)!==0){var m=l.pending;return m===null?n.next=n:(n.next=m.next,m.next=n),l.pending=n,n=ia(t),Dd(t,null,a),n}return na(t,l,n,a),ia(t)}function co(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,si(t,a)}}function ml(t,n){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var m=null,S=null;if(a=a.firstBaseUpdate,a!==null){do{var D={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};S===null?m=S=D:S=S.next=D,a=a.next}while(a!==null);S===null?m=S=n:S=S.next=n}else m=S=n;a={baseState:l.baseState,firstBaseUpdate:m,lastBaseUpdate:S,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var gl=!1;function fo(){if(gl){var t=ys;if(t!==null)throw t}}function ho(t,n,a,l){gl=!1;var m=t.updateQueue;di=!1;var S=m.firstBaseUpdate,D=m.lastBaseUpdate,G=m.shared.pending;if(G!==null){m.shared.pending=null;var tt=G,pt=tt.next;tt.next=null,D===null?S=pt:D.next=pt,D=tt;var bt=t.alternate;bt!==null&&(bt=bt.updateQueue,G=bt.lastBaseUpdate,G!==D&&(G===null?bt.firstBaseUpdate=pt:G.next=pt,bt.lastBaseUpdate=tt))}if(S!==null){var wt=m.baseState;D=0,bt=pt=tt=null,G=S;do{var mt=G.lane&-536870913,At=mt!==G.lane;if(At?(Wt&mt)===mt:(l&mt)===mt){mt!==0&&mt===vs&&(gl=!0),bt!==null&&(bt=bt.next={lane:0,tag:G.tag,payload:G.payload,callback:null,next:null});t:{var Lt=t,Ht=G;mt=n;var de=a;switch(Ht.tag){case 1:if(Lt=Ht.payload,typeof Lt=="function"){wt=Lt.call(de,wt,mt);break t}wt=Lt;break t;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Ht.payload,mt=typeof Lt=="function"?Lt.call(de,wt,mt):Lt,mt==null)break t;wt=A({},wt,mt);break t;case 2:di=!0}}mt=G.callback,mt!==null&&(t.flags|=64,At&&(t.flags|=8192),At=m.callbacks,At===null?m.callbacks=[mt]:At.push(mt))}else At={lane:mt,tag:G.tag,payload:G.payload,callback:G.callback,next:null},bt===null?(pt=bt=At,tt=wt):bt=bt.next=At,D|=mt;if(G=G.next,G===null){if(G=m.shared.pending,G===null)break;At=G,G=At.next,At.next=null,m.lastBaseUpdate=At,m.shared.pending=null}}while(!0);bt===null&&(tt=wt),m.baseState=tt,m.firstBaseUpdate=pt,m.lastBaseUpdate=bt,S===null&&(m.shared.lanes=0),yi|=D,t.lanes=D,t.memoizedState=wt}}function Qd(t,n){if(typeof t!="function")throw Error(o(191,t));t.call(n)}function Wd(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Qd(a[t],n)}var Ts=z(null),ha=z(0);function Zd(t,n){t=Qn,at(ha,t),at(Ts,n),Qn=t|n.baseLanes}function vl(){at(ha,Qn),at(Ts,Ts.current)}function yl(){Qn=ha.current,K(Ts),K(ha)}var on=z(null),vn=null;function pi(t){var n=t.alternate;at(be,be.current&1),at(on,t),vn===null&&(n===null||Ts.current!==null||n.memoizedState!==null)&&(vn=t)}function Al(t){at(be,be.current),at(on,t),vn===null&&(vn=t)}function jd(t){t.tag===22?(at(be,be.current),at(on,t),vn===null&&(vn=t)):mi()}function mi(){at(be,be.current),at(on,on.current)}function an(t){K(on),vn===t&&(vn=null),K(be)}var be=z(0);function pa(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||xu(a)||wu(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var zn=0,Bt=null,ue=null,Re=null,ma=!1,Es=!1,Bi=!1,ga=0,po=0,bs=null,$y=0;function Te(){throw Error(o(321))}function Sl(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!nn(t[a],n[a]))return!1;return!0}function Tl(t,n,a,l,m,S){return zn=S,Bt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,X.H=t===null||t.memoizedState===null?Uf:Fl,Bi=!1,S=a(l,m),Bi=!1,Es&&(S=ef(n,a,l,m)),tf(t),S}function tf(t){X.H=vo;var n=ue!==null&&ue.next!==null;if(zn=0,Re=ue=Bt=null,ma=!1,po=0,bs=null,n)throw Error(o(300));t===null||_e||(t=t.dependencies,t!==null&&aa(t)&&(_e=!0))}function ef(t,n,a,l){Bt=t;var m=0;do{if(Es&&(bs=null),po=0,Es=!1,25<=m)throw Error(o(301));if(m+=1,Re=ue=null,t.updateQueue!=null){var S=t.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}X.H=Of,S=n(a,l)}while(Es);return S}function Ky(){var t=X.H,n=t.useState()[0];return n=typeof n.then=="function"?mo(n):n,t=t.useState()[0],(ue!==null?ue.memoizedState:null)!==t&&(Bt.flags|=1024),n}function El(){var t=ga!==0;return ga=0,t}function bl(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function Cl(t){if(ma){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}ma=!1}zn=0,Re=ue=Bt=null,Es=!1,po=ga=0,bs=null}function Ye(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?Bt.memoizedState=Re=t:Re=Re.next=t,Re}function Ce(){if(ue===null){var t=Bt.alternate;t=t!==null?t.memoizedState:null}else t=ue.next;var n=Re===null?Bt.memoizedState:Re.next;if(n!==null)Re=n,ue=t;else{if(t===null)throw Bt.alternate===null?Error(o(467)):Error(o(310));ue=t,t={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},Re===null?Bt.memoizedState=Re=t:Re=Re.next=t}return Re}function va(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mo(t){var n=po;return po+=1,bs===null&&(bs=[]),t=Yd(bs,t,n),n=Bt,(Re===null?n.memoizedState:Re.next)===null&&(n=n.alternate,X.H=n===null||n.memoizedState===null?Uf:Fl),t}function ya(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return mo(t);if(t.$$typeof===P)return Ge(t)}throw Error(o(438,String(t)))}function xl(t){var n=null,a=Bt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=Bt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(m){return m.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=va(),Bt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),l=0;l<t;l++)a[l]=lt;return n.index++,a}function qn(t,n){return typeof n=="function"?n(t):n}function Aa(t){var n=Ce();return wl(n,ue,t)}function wl(t,n,a){var l=t.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=a;var m=t.baseQueue,S=l.pending;if(S!==null){if(m!==null){var D=m.next;m.next=S.next,S.next=D}n.baseQueue=m=S,l.pending=null}if(S=t.baseState,m===null)t.memoizedState=S;else{n=m.next;var G=D=null,tt=null,pt=n,bt=!1;do{var wt=pt.lane&-536870913;if(wt!==pt.lane?(Wt&wt)===wt:(zn&wt)===wt){var mt=pt.revertLane;if(mt===0)tt!==null&&(tt=tt.next={lane:0,revertLane:0,gesture:null,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null}),wt===vs&&(bt=!0);else if((zn&mt)===mt){pt=pt.next,mt===vs&&(bt=!0);continue}else wt={lane:0,revertLane:pt.revertLane,gesture:null,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null},tt===null?(G=tt=wt,D=S):tt=tt.next=wt,Bt.lanes|=mt,yi|=mt;wt=pt.action,Bi&&a(S,wt),S=pt.hasEagerState?pt.eagerState:a(S,wt)}else mt={lane:wt,revertLane:pt.revertLane,gesture:pt.gesture,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null},tt===null?(G=tt=mt,D=S):tt=tt.next=mt,Bt.lanes|=wt,yi|=wt;pt=pt.next}while(pt!==null&&pt!==n);if(tt===null?D=S:tt.next=G,!nn(S,t.memoizedState)&&(_e=!0,bt&&(a=ys,a!==null)))throw a;t.memoizedState=S,t.baseState=D,t.baseQueue=tt,l.lastRenderedState=S}return m===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Rl(t){var n=Ce(),a=n.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=t;var l=a.dispatch,m=a.pending,S=n.memoizedState;if(m!==null){a.pending=null;var D=m=m.next;do S=t(S,D.action),D=D.next;while(D!==m);nn(S,n.memoizedState)||(_e=!0),n.memoizedState=S,n.baseQueue===null&&(n.baseState=S),a.lastRenderedState=S}return[S,l]}function nf(t,n,a){var l=Bt,m=Ce(),S=jt;if(S){if(a===void 0)throw Error(o(407));a=a()}else a=n();var D=!nn((ue||m).memoizedState,a);if(D&&(m.memoizedState=a,_e=!0),m=m.queue,Il(af.bind(null,l,m,t),[t]),m.getSnapshot!==n||D||Re!==null&&Re.memoizedState.tag&1){if(l.flags|=2048,Cs(9,{destroy:void 0},of.bind(null,l,m,a,n),null),he===null)throw Error(o(349));S||(zn&127)!==0||sf(l,n,a)}return a}function sf(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=Bt.updateQueue,n===null?(n=va(),Bt.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function of(t,n,a,l){n.value=a,n.getSnapshot=l,rf(n)&&lf(t)}function af(t,n,a){return a(function(){rf(n)&&lf(t)})}function rf(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!nn(t,a)}catch{return!0}}function lf(t){var n=ki(t,2);n!==null&&tn(n,t,2)}function _l(t){var n=Ye();if(typeof t=="function"){var a=t;if(t=a(),Bi){Ut(!0);try{a()}finally{Ut(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:t},n}function uf(t,n,a,l){return t.baseState=a,wl(t,ue,typeof l=="function"?l:qn)}function Qy(t,n,a,l,m){if(Ea(t))throw Error(o(485));if(t=n.action,t!==null){var S={payload:m,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){S.listeners.push(D)}};X.T!==null?a(!0):S.isTransition=!1,l(S),a=n.pending,a===null?(S.next=n.pending=S,cf(n,S)):(S.next=a.next,n.pending=a.next=S)}}function cf(t,n){var a=n.action,l=n.payload,m=t.state;if(n.isTransition){var S=X.T,D={};X.T=D;try{var G=a(m,l),tt=X.S;tt!==null&&tt(D,G),df(t,n,G)}catch(pt){Ml(t,n,pt)}finally{S!==null&&D.types!==null&&(S.types=D.types),X.T=S}}else try{S=a(m,l),df(t,n,S)}catch(pt){Ml(t,n,pt)}}function df(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){ff(t,n,l)},function(l){return Ml(t,n,l)}):ff(t,n,a)}function ff(t,n,a){n.status="fulfilled",n.value=a,hf(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,cf(t,a)))}function Ml(t,n,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,hf(n),n=n.next;while(n!==l)}t.action=null}function hf(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function pf(t,n){return n}function mf(t,n){if(jt){var a=he.formState;if(a!==null){t:{var l=Bt;if(jt){if(me){e:{for(var m=me,S=gn;m.nodeType!==8;){if(!S){m=null;break e}if(m=yn(m.nextSibling),m===null){m=null;break e}}S=m.data,m=S==="F!"||S==="F"?m:null}if(m){me=yn(m.nextSibling),l=m.data==="F!";break t}}ui(l)}l=!1}l&&(n=a[0])}}return a=Ye(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pf,lastRenderedState:n},a.queue=l,a=Pf.bind(null,Bt,l),l.dispatch=a,l=_l(!1),S=kl.bind(null,Bt,!1,l.queue),l=Ye(),m={state:n,dispatch:null,action:t,pending:null},l.queue=m,a=Qy.bind(null,Bt,m,S,a),m.dispatch=a,l.memoizedState=t,[n,a,!1]}function gf(t){var n=Ce();return vf(n,ue,t)}function vf(t,n,a){if(n=wl(t,n,pf)[0],t=Aa(qn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=mo(n)}catch(D){throw D===As?ua:D}else l=n;n=Ce();var m=n.queue,S=m.dispatch;return a!==n.memoizedState&&(Bt.flags|=2048,Cs(9,{destroy:void 0},Wy.bind(null,m,a),null)),[l,S,t]}function Wy(t,n){t.action=n}function yf(t){var n=Ce(),a=ue;if(a!==null)return vf(n,a,t);Ce(),n=n.memoizedState,a=Ce();var l=a.queue.dispatch;return a.memoizedState=t,[n,l,!1]}function Cs(t,n,a,l){return t={tag:t,create:a,deps:l,inst:n,next:null},n=Bt.updateQueue,n===null&&(n=va(),Bt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,n.lastEffect=t),t}function Af(){return Ce().memoizedState}function Sa(t,n,a,l){var m=Ye();Bt.flags|=t,m.memoizedState=Cs(1|n,{destroy:void 0},a,l===void 0?null:l)}function Ta(t,n,a,l){var m=Ce();l=l===void 0?null:l;var S=m.memoizedState.inst;ue!==null&&l!==null&&Sl(l,ue.memoizedState.deps)?m.memoizedState=Cs(n,S,a,l):(Bt.flags|=t,m.memoizedState=Cs(1|n,S,a,l))}function Sf(t,n){Sa(8390656,8,t,n)}function Il(t,n){Ta(2048,8,t,n)}function Zy(t){Bt.flags|=4;var n=Bt.updateQueue;if(n===null)n=va(),Bt.updateQueue=n,n.events=[t];else{var a=n.events;a===null?n.events=[t]:a.push(t)}}function Tf(t){var n=Ce().memoizedState;return Zy({ref:n,nextImpl:t}),function(){if((oe&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}function Ef(t,n){return Ta(4,2,t,n)}function bf(t,n){return Ta(4,4,t,n)}function Cf(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function xf(t,n,a){a=a!=null?a.concat([t]):null,Ta(4,4,Cf.bind(null,n,t),a)}function Nl(){}function wf(t,n){var a=Ce();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Sl(n,l[1])?l[0]:(a.memoizedState=[t,n],t)}function Rf(t,n){var a=Ce();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Sl(n,l[1]))return l[0];if(l=t(),Bi){Ut(!0);try{t()}finally{Ut(!1)}}return a.memoizedState=[l,n],l}function Dl(t,n,a){return a===void 0||(zn&1073741824)!==0&&(Wt&261930)===0?t.memoizedState=n:(t.memoizedState=a,t=_h(),Bt.lanes|=t,yi|=t,a)}function _f(t,n,a,l){return nn(a,n)?a:Ts.current!==null?(t=Dl(t,a,l),nn(t,n)||(_e=!0),t):(zn&42)===0||(zn&1073741824)!==0&&(Wt&261930)===0?(_e=!0,t.memoizedState=a):(t=_h(),Bt.lanes|=t,yi|=t,n)}function Mf(t,n,a,l,m){var S=dt.p;dt.p=S!==0&&8>S?S:8;var D=X.T,G={};X.T=G,kl(t,!1,n,a);try{var tt=m(),pt=X.S;if(pt!==null&&pt(G,tt),tt!==null&&typeof tt=="object"&&typeof tt.then=="function"){var bt=Jy(tt,l);go(t,n,bt,un(t))}else go(t,n,l,un(t))}catch(wt){go(t,n,{then:function(){},status:"rejected",reason:wt},un())}finally{dt.p=S,D!==null&&G.types!==null&&(D.types=G.types),X.T=D}}function jy(){}function Ll(t,n,a,l){if(t.tag!==5)throw Error(o(476));var m=If(t).queue;Mf(t,m,n,vt,a===null?jy:function(){return Nf(t),a(l)})}function If(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:vt,baseState:vt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:vt},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Nf(t){var n=If(t);n.next===null&&(n=t.alternate.memoizedState),go(t,n.next.queue,{},un())}function Pl(){return Ge(Lo)}function Df(){return Ce().memoizedState}function Lf(){return Ce().memoizedState}function t0(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=un();t=fi(a);var l=hi(n,t,a);l!==null&&(tn(l,n,a),co(l,n,a)),n={cache:ul()},t.payload=n;return}n=n.return}}function e0(t,n,a){var l=un();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ea(t)?kf(n,a):(a=Zr(t,n,a,l),a!==null&&(tn(a,t,l),Ff(a,n,l)))}function Pf(t,n,a){var l=un();go(t,n,a,l)}function go(t,n,a,l){var m={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ea(t))kf(n,m);else{var S=t.alternate;if(t.lanes===0&&(S===null||S.lanes===0)&&(S=n.lastRenderedReducer,S!==null))try{var D=n.lastRenderedState,G=S(D,a);if(m.hasEagerState=!0,m.eagerState=G,nn(G,D))return na(t,n,m,0),he===null&&ea(),!1}catch{}finally{}if(a=Zr(t,n,m,l),a!==null)return tn(a,t,l),Ff(a,n,l),!0}return!1}function kl(t,n,a,l){if(l={lane:2,revertLane:hu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ea(t)){if(n)throw Error(o(479))}else n=Zr(t,a,l,2),n!==null&&tn(n,t,2)}function Ea(t){var n=t.alternate;return t===Bt||n!==null&&n===Bt}function kf(t,n){Es=ma=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function Ff(t,n,a){if((a&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,si(t,a)}}var vo={readContext:Ge,use:ya,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useLayoutEffect:Te,useInsertionEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useSyncExternalStore:Te,useId:Te,useHostTransitionStatus:Te,useFormState:Te,useActionState:Te,useOptimistic:Te,useMemoCache:Te,useCacheRefresh:Te};vo.useEffectEvent=Te;var Uf={readContext:Ge,use:ya,useCallback:function(t,n){return Ye().memoizedState=[t,n===void 0?null:n],t},useContext:Ge,useEffect:Sf,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,Sa(4194308,4,Cf.bind(null,n,t),a)},useLayoutEffect:function(t,n){return Sa(4194308,4,t,n)},useInsertionEffect:function(t,n){Sa(4,2,t,n)},useMemo:function(t,n){var a=Ye();n=n===void 0?null:n;var l=t();if(Bi){Ut(!0);try{t()}finally{Ut(!1)}}return a.memoizedState=[l,n],l},useReducer:function(t,n,a){var l=Ye();if(a!==void 0){var m=a(n);if(Bi){Ut(!0);try{a(n)}finally{Ut(!1)}}}else m=n;return l.memoizedState=l.baseState=m,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:m},l.queue=t,t=t.dispatch=e0.bind(null,Bt,t),[l.memoizedState,t]},useRef:function(t){var n=Ye();return t={current:t},n.memoizedState=t},useState:function(t){t=_l(t);var n=t.queue,a=Pf.bind(null,Bt,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:Nl,useDeferredValue:function(t,n){var a=Ye();return Dl(a,t,n)},useTransition:function(){var t=_l(!1);return t=Mf.bind(null,Bt,t.queue,!0,!1),Ye().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var l=Bt,m=Ye();if(jt){if(a===void 0)throw Error(o(407));a=a()}else{if(a=n(),he===null)throw Error(o(349));(Wt&127)!==0||sf(l,n,a)}m.memoizedState=a;var S={value:a,getSnapshot:n};return m.queue=S,Sf(af.bind(null,l,S,t),[t]),l.flags|=2048,Cs(9,{destroy:void 0},of.bind(null,l,S,a,n),null),a},useId:function(){var t=Ye(),n=he.identifierPrefix;if(jt){var a=Nn,l=In;a=(l&~(1<<32-ae(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=ga++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=$y++,n="_"+n+"r_"+a.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Pl,useFormState:mf,useActionState:mf,useOptimistic:function(t){var n=Ye();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=kl.bind(null,Bt,!0,a),a.dispatch=n,[t,n]},useMemoCache:xl,useCacheRefresh:function(){return Ye().memoizedState=t0.bind(null,Bt)},useEffectEvent:function(t){var n=Ye(),a={impl:t};return n.memoizedState=a,function(){if((oe&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Fl={readContext:Ge,use:ya,useCallback:wf,useContext:Ge,useEffect:Il,useImperativeHandle:xf,useInsertionEffect:Ef,useLayoutEffect:bf,useMemo:Rf,useReducer:Aa,useRef:Af,useState:function(){return Aa(qn)},useDebugValue:Nl,useDeferredValue:function(t,n){var a=Ce();return _f(a,ue.memoizedState,t,n)},useTransition:function(){var t=Aa(qn)[0],n=Ce().memoizedState;return[typeof t=="boolean"?t:mo(t),n]},useSyncExternalStore:nf,useId:Df,useHostTransitionStatus:Pl,useFormState:gf,useActionState:gf,useOptimistic:function(t,n){var a=Ce();return uf(a,ue,t,n)},useMemoCache:xl,useCacheRefresh:Lf};Fl.useEffectEvent=Tf;var Of={readContext:Ge,use:ya,useCallback:wf,useContext:Ge,useEffect:Il,useImperativeHandle:xf,useInsertionEffect:Ef,useLayoutEffect:bf,useMemo:Rf,useReducer:Rl,useRef:Af,useState:function(){return Rl(qn)},useDebugValue:Nl,useDeferredValue:function(t,n){var a=Ce();return ue===null?Dl(a,t,n):_f(a,ue.memoizedState,t,n)},useTransition:function(){var t=Rl(qn)[0],n=Ce().memoizedState;return[typeof t=="boolean"?t:mo(t),n]},useSyncExternalStore:nf,useId:Df,useHostTransitionStatus:Pl,useFormState:yf,useActionState:yf,useOptimistic:function(t,n){var a=Ce();return ue!==null?uf(a,ue,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:xl,useCacheRefresh:Lf};Of.useEffectEvent=Tf;function Ul(t,n,a,l){n=t.memoizedState,a=a(l,n),a=a==null?n:A({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Ol={enqueueSetState:function(t,n,a){t=t._reactInternals;var l=un(),m=fi(l);m.payload=n,a!=null&&(m.callback=a),n=hi(t,m,l),n!==null&&(tn(n,t,l),co(n,t,l))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var l=un(),m=fi(l);m.tag=1,m.payload=n,a!=null&&(m.callback=a),n=hi(t,m,l),n!==null&&(tn(n,t,l),co(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=un(),l=fi(a);l.tag=2,n!=null&&(l.callback=n),n=hi(t,l,a),n!==null&&(tn(n,t,a),co(n,t,a))}};function Gf(t,n,a,l,m,S,D){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,S,D):n.prototype&&n.prototype.isPureReactComponent?!no(a,l)||!no(m,S):!0}function Hf(t,n,a,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==t&&Ol.enqueueReplaceState(n,n.state,null)}function Yi(t,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(t=t.defaultProps){a===n&&(a=A({},a));for(var m in t)a[m]===void 0&&(a[m]=t[m])}return a}function Vf(t){ta(t)}function zf(t){console.error(t)}function qf(t){ta(t)}function ba(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Bf(t,n,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Gl(t,n,a){return a=fi(a),a.tag=3,a.payload={element:null},a.callback=function(){ba(t,n)},a}function Yf(t){return t=fi(t),t.tag=3,t}function Xf(t,n,a,l){var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var S=l.value;t.payload=function(){return m(S)},t.callback=function(){Bf(n,a,l)}}var D=a.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(t.callback=function(){Bf(n,a,l),typeof m!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var G=l.stack;this.componentDidCatch(l.value,{componentStack:G!==null?G:""})})}function n0(t,n,a,l,m){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&gs(n,a,m,!0),a=on.current,a!==null){switch(a.tag){case 31:case 13:return vn===null?ka():a.alternate===null&&Ee===0&&(Ee=3),a.flags&=-257,a.flags|=65536,a.lanes=m,l===ca?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),cu(t,l,m)),!1;case 22:return a.flags|=65536,l===ca?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),cu(t,l,m)),!1}throw Error(o(435,a.tag))}return cu(t,l,m),ka(),!1}if(jt)return n=on.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=m,l!==sl&&(t=Error(o(422),{cause:l}),oo(hn(t,a)))):(l!==sl&&(n=Error(o(423),{cause:l}),oo(hn(n,a))),t=t.current.alternate,t.flags|=65536,m&=-m,t.lanes|=m,l=hn(l,a),m=Gl(t.stateNode,l,m),ml(t,m),Ee!==4&&(Ee=2)),!1;var S=Error(o(520),{cause:l});if(S=hn(S,a),xo===null?xo=[S]:xo.push(S),Ee!==4&&(Ee=2),n===null)return!0;l=hn(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=m&-m,a.lanes|=t,t=Gl(a.stateNode,l,t),ml(a,t),!1;case 1:if(n=a.type,S=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ai===null||!Ai.has(S))))return a.flags|=65536,m&=-m,a.lanes|=m,m=Yf(m),Xf(m,t,a,l),ml(a,m),!1}a=a.return}while(a!==null);return!1}var Hl=Error(o(461)),_e=!1;function He(t,n,a,l){n.child=t===null?Kd(n,null,a,l):qi(n,t.child,a,l)}function Jf(t,n,a,l,m){a=a.render;var S=n.ref;if("ref"in l){var D={};for(var G in l)G!=="ref"&&(D[G]=l[G])}else D=l;return Gi(n),l=Tl(t,n,a,D,S,m),G=El(),t!==null&&!_e?(bl(t,n,m),Bn(t,n,m)):(jt&&G&&nl(n),n.flags|=1,He(t,n,l,m),n.child)}function $f(t,n,a,l,m){if(t===null){var S=a.type;return typeof S=="function"&&!jr(S)&&S.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=S,Kf(t,n,S,l,m)):(t=sa(a.type,null,l,n,n.mode,m),t.ref=n.ref,t.return=n,n.child=t)}if(S=t.child,!$l(t,m)){var D=S.memoizedProps;if(a=a.compare,a=a!==null?a:no,a(D,l)&&t.ref===n.ref)return Bn(t,n,m)}return n.flags|=1,t=On(S,l),t.ref=n.ref,t.return=n,n.child=t}function Kf(t,n,a,l,m){if(t!==null){var S=t.memoizedProps;if(no(S,l)&&t.ref===n.ref)if(_e=!1,n.pendingProps=l=S,$l(t,m))(t.flags&131072)!==0&&(_e=!0);else return n.lanes=t.lanes,Bn(t,n,m)}return Vl(t,n,a,l,m)}function Qf(t,n,a,l){var m=l.children,S=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(S=S!==null?S.baseLanes|a:a,t!==null){for(l=n.child=t.child,m=0;l!==null;)m=m|l.lanes|l.childLanes,l=l.sibling;l=m&~S}else l=0,n.child=null;return Wf(t,n,S,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&la(n,S!==null?S.cachePool:null),S!==null?Zd(n,S):vl(),jd(n);else return l=n.lanes=536870912,Wf(t,n,S!==null?S.baseLanes|a:a,a,l)}else S!==null?(la(n,S.cachePool),Zd(n,S),mi(),n.memoizedState=null):(t!==null&&la(n,null),vl(),mi());return He(t,n,m,a),n.child}function yo(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Wf(t,n,a,l,m){var S=dl();return S=S===null?null:{parent:we._currentValue,pool:S},n.memoizedState={baseLanes:a,cachePool:S},t!==null&&la(n,null),vl(),jd(n),t!==null&&gs(t,n,l,!0),n.childLanes=m,null}function Ca(t,n){return n=wa({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function Zf(t,n,a){return qi(n,t.child,null,a),t=Ca(n,n.pendingProps),t.flags|=2,an(n),n.memoizedState=null,t}function i0(t,n,a){var l=n.pendingProps,m=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(jt){if(l.mode==="hidden")return t=Ca(n,l),n.lanes=536870912,yo(null,t);if(Al(n),(t=me)?(t=cp(t,gn),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:ri!==null?{id:In,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},a=Pd(t),a.return=n,n.child=a,Oe=n,me=null)):t=null,t===null)throw ui(n);return n.lanes=536870912,null}return Ca(n,l)}var S=t.memoizedState;if(S!==null){var D=S.dehydrated;if(Al(n),m)if(n.flags&256)n.flags&=-257,n=Zf(t,n,a);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(o(558));else if(_e||gs(t,n,a,!1),m=(a&t.childLanes)!==0,_e||m){if(l=he,l!==null&&(D=Zi(l,a),D!==0&&D!==S.retryLane))throw S.retryLane=D,ki(t,D),tn(l,t,D),Hl;ka(),n=Zf(t,n,a)}else t=S.treeContext,me=yn(D.nextSibling),Oe=n,jt=!0,li=null,gn=!1,t!==null&&Ud(n,t),n=Ca(n,l),n.flags|=4096;return n}return t=On(t.child,{mode:l.mode,children:l.children}),t.ref=n.ref,n.child=t,t.return=n,t}function xa(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function Vl(t,n,a,l,m){return Gi(n),a=Tl(t,n,a,l,void 0,m),l=El(),t!==null&&!_e?(bl(t,n,m),Bn(t,n,m)):(jt&&l&&nl(n),n.flags|=1,He(t,n,a,m),n.child)}function jf(t,n,a,l,m,S){return Gi(n),n.updateQueue=null,a=ef(n,l,a,m),tf(t),l=El(),t!==null&&!_e?(bl(t,n,S),Bn(t,n,S)):(jt&&l&&nl(n),n.flags|=1,He(t,n,a,S),n.child)}function th(t,n,a,l,m){if(Gi(n),n.stateNode===null){var S=fs,D=a.contextType;typeof D=="object"&&D!==null&&(S=Ge(D)),S=new a(l,S),n.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Ol,n.stateNode=S,S._reactInternals=n,S=n.stateNode,S.props=l,S.state=n.memoizedState,S.refs={},hl(n),D=a.contextType,S.context=typeof D=="object"&&D!==null?Ge(D):fs,S.state=n.memoizedState,D=a.getDerivedStateFromProps,typeof D=="function"&&(Ul(n,a,D,l),S.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(D=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),D!==S.state&&Ol.enqueueReplaceState(S,S.state,null),ho(n,l,S,m),fo(),S.state=n.memoizedState),typeof S.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){S=n.stateNode;var G=n.memoizedProps,tt=Yi(a,G);S.props=tt;var pt=S.context,bt=a.contextType;D=fs,typeof bt=="object"&&bt!==null&&(D=Ge(bt));var wt=a.getDerivedStateFromProps;bt=typeof wt=="function"||typeof S.getSnapshotBeforeUpdate=="function",G=n.pendingProps!==G,bt||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(G||pt!==D)&&Hf(n,S,l,D),di=!1;var mt=n.memoizedState;S.state=mt,ho(n,l,S,m),fo(),pt=n.memoizedState,G||mt!==pt||di?(typeof wt=="function"&&(Ul(n,a,wt,l),pt=n.memoizedState),(tt=di||Gf(n,a,tt,l,mt,pt,D))?(bt||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(n.flags|=4194308)):(typeof S.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=pt),S.props=l,S.state=pt,S.context=D,l=tt):(typeof S.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{S=n.stateNode,pl(t,n),D=n.memoizedProps,bt=Yi(a,D),S.props=bt,wt=n.pendingProps,mt=S.context,pt=a.contextType,tt=fs,typeof pt=="object"&&pt!==null&&(tt=Ge(pt)),G=a.getDerivedStateFromProps,(pt=typeof G=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==wt||mt!==tt)&&Hf(n,S,l,tt),di=!1,mt=n.memoizedState,S.state=mt,ho(n,l,S,m),fo();var At=n.memoizedState;D!==wt||mt!==At||di||t!==null&&t.dependencies!==null&&aa(t.dependencies)?(typeof G=="function"&&(Ul(n,a,G,l),At=n.memoizedState),(bt=di||Gf(n,a,bt,l,mt,At,tt)||t!==null&&t.dependencies!==null&&aa(t.dependencies))?(pt||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(l,At,tt),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(l,At,tt)),typeof S.componentDidUpdate=="function"&&(n.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof S.componentDidUpdate!="function"||D===t.memoizedProps&&mt===t.memoizedState||(n.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===t.memoizedProps&&mt===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=At),S.props=l,S.state=At,S.context=tt,l=bt):(typeof S.componentDidUpdate!="function"||D===t.memoizedProps&&mt===t.memoizedState||(n.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===t.memoizedProps&&mt===t.memoizedState||(n.flags|=1024),l=!1)}return S=l,xa(t,n),l=(n.flags&128)!==0,S||l?(S=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:S.render(),n.flags|=1,t!==null&&l?(n.child=qi(n,t.child,null,m),n.child=qi(n,null,a,m)):He(t,n,a,m),n.memoizedState=S.state,t=n.child):t=Bn(t,n,m),t}function eh(t,n,a,l){return Ui(),n.flags|=256,He(t,n,a,l),n.child}var zl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ql(t){return{baseLanes:t,cachePool:qd()}}function Bl(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=ln),t}function nh(t,n,a){var l=n.pendingProps,m=!1,S=(n.flags&128)!==0,D;if((D=S)||(D=t!==null&&t.memoizedState===null?!1:(be.current&2)!==0),D&&(m=!0,n.flags&=-129),D=(n.flags&32)!==0,n.flags&=-33,t===null){if(jt){if(m?pi(n):mi(),(t=me)?(t=cp(t,gn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:ri!==null?{id:In,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},a=Pd(t),a.return=n,n.child=a,Oe=n,me=null)):t=null,t===null)throw ui(n);return wu(t)?n.lanes=32:n.lanes=536870912,null}var G=l.children;return l=l.fallback,m?(mi(),m=n.mode,G=wa({mode:"hidden",children:G},m),l=Fi(l,m,a,null),G.return=n,l.return=n,G.sibling=l,n.child=G,l=n.child,l.memoizedState=ql(a),l.childLanes=Bl(t,D,a),n.memoizedState=zl,yo(null,l)):(pi(n),Yl(n,G))}var tt=t.memoizedState;if(tt!==null&&(G=tt.dehydrated,G!==null)){if(S)n.flags&256?(pi(n),n.flags&=-257,n=Xl(t,n,a)):n.memoizedState!==null?(mi(),n.child=t.child,n.flags|=128,n=null):(mi(),G=l.fallback,m=n.mode,l=wa({mode:"visible",children:l.children},m),G=Fi(G,m,a,null),G.flags|=2,l.return=n,G.return=n,l.sibling=G,n.child=l,qi(n,t.child,null,a),l=n.child,l.memoizedState=ql(a),l.childLanes=Bl(t,D,a),n.memoizedState=zl,n=yo(null,l));else if(pi(n),wu(G)){if(D=G.nextSibling&&G.nextSibling.dataset,D)var pt=D.dgst;D=pt,l=Error(o(419)),l.stack="",l.digest=D,oo({value:l,source:null,stack:null}),n=Xl(t,n,a)}else if(_e||gs(t,n,a,!1),D=(a&t.childLanes)!==0,_e||D){if(D=he,D!==null&&(l=Zi(D,a),l!==0&&l!==tt.retryLane))throw tt.retryLane=l,ki(t,l),tn(D,t,l),Hl;xu(G)||ka(),n=Xl(t,n,a)}else xu(G)?(n.flags|=192,n.child=t.child,n=null):(t=tt.treeContext,me=yn(G.nextSibling),Oe=n,jt=!0,li=null,gn=!1,t!==null&&Ud(n,t),n=Yl(n,l.children),n.flags|=4096);return n}return m?(mi(),G=l.fallback,m=n.mode,tt=t.child,pt=tt.sibling,l=On(tt,{mode:"hidden",children:l.children}),l.subtreeFlags=tt.subtreeFlags&65011712,pt!==null?G=On(pt,G):(G=Fi(G,m,a,null),G.flags|=2),G.return=n,l.return=n,l.sibling=G,n.child=l,yo(null,l),l=n.child,G=t.child.memoizedState,G===null?G=ql(a):(m=G.cachePool,m!==null?(tt=we._currentValue,m=m.parent!==tt?{parent:tt,pool:tt}:m):m=qd(),G={baseLanes:G.baseLanes|a,cachePool:m}),l.memoizedState=G,l.childLanes=Bl(t,D,a),n.memoizedState=zl,yo(t.child,l)):(pi(n),a=t.child,t=a.sibling,a=On(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,t!==null&&(D=n.deletions,D===null?(n.deletions=[t],n.flags|=16):D.push(t)),n.child=a,n.memoizedState=null,a)}function Yl(t,n){return n=wa({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function wa(t,n){return t=sn(22,t,null,n),t.lanes=0,t}function Xl(t,n,a){return qi(n,t.child,null,a),t=Yl(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function ih(t,n,a){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),rl(t.return,n,a)}function Jl(t,n,a,l,m,S){var D=t.memoizedState;D===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:m,treeForkCount:S}:(D.isBackwards=n,D.rendering=null,D.renderingStartTime=0,D.last=l,D.tail=a,D.tailMode=m,D.treeForkCount=S)}function sh(t,n,a){var l=n.pendingProps,m=l.revealOrder,S=l.tail;l=l.children;var D=be.current,G=(D&2)!==0;if(G?(D=D&1|2,n.flags|=128):D&=1,at(be,D),He(t,n,l,a),l=jt?so:0,!G&&t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ih(t,a,n);else if(t.tag===19)ih(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(m){case"forwards":for(a=n.child,m=null;a!==null;)t=a.alternate,t!==null&&pa(t)===null&&(m=a),a=a.sibling;a=m,a===null?(m=n.child,n.child=null):(m=a.sibling,a.sibling=null),Jl(n,!1,m,a,S,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,m=n.child,n.child=null;m!==null;){if(t=m.alternate,t!==null&&pa(t)===null){n.child=m;break}t=m.sibling,m.sibling=a,a=m,m=t}Jl(n,!0,a,null,S,l);break;case"together":Jl(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Bn(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),yi|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(gs(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(o(153));if(n.child!==null){for(t=n.child,a=On(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=On(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function $l(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&aa(t)))}function s0(t,n,a){switch(n.tag){case 3:N(n,n.stateNode.containerInfo),ci(n,we,t.memoizedState.cache),Ui();break;case 27:case 5:T(n);break;case 4:N(n,n.stateNode.containerInfo);break;case 10:ci(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Al(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(pi(n),n.flags|=128,null):(a&n.child.childLanes)!==0?nh(t,n,a):(pi(n),t=Bn(t,n,a),t!==null?t.sibling:null);pi(n);break;case 19:var m=(t.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(gs(t,n,a,!1),l=(a&n.childLanes)!==0),m){if(l)return sh(t,n,a);n.flags|=128}if(m=n.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),at(be,be.current),l)break;return null;case 22:return n.lanes=0,Qf(t,n,a,n.pendingProps);case 24:ci(n,we,t.memoizedState.cache)}return Bn(t,n,a)}function oh(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)_e=!0;else{if(!$l(t,a)&&(n.flags&128)===0)return _e=!1,s0(t,n,a);_e=(t.flags&131072)!==0}else _e=!1,jt&&(n.flags&1048576)!==0&&Fd(n,so,n.index);switch(n.lanes=0,n.tag){case 16:t:{var l=n.pendingProps;if(t=Vi(n.elementType),n.type=t,typeof t=="function")jr(t)?(l=Yi(t,l),n.tag=1,n=th(null,n,t,l,a)):(n.tag=0,n=Vl(null,n,t,l,a));else{if(t!=null){var m=t.$$typeof;if(m===k){n.tag=11,n=Jf(null,n,t,l,a);break t}else if(m===q){n.tag=14,n=$f(null,n,t,l,a);break t}}throw n=Tt(t)||t,Error(o(306,n,""))}}return n;case 0:return Vl(t,n,n.type,n.pendingProps,a);case 1:return l=n.type,m=Yi(l,n.pendingProps),th(t,n,l,m,a);case 3:t:{if(N(n,n.stateNode.containerInfo),t===null)throw Error(o(387));l=n.pendingProps;var S=n.memoizedState;m=S.element,pl(t,n),ho(n,l,null,a);var D=n.memoizedState;if(l=D.cache,ci(n,we,l),l!==S.cache&&ll(n,[we],a,!0),fo(),l=D.element,S.isDehydrated)if(S={element:l,isDehydrated:!1,cache:D.cache},n.updateQueue.baseState=S,n.memoizedState=S,n.flags&256){n=eh(t,n,l,a);break t}else if(l!==m){m=hn(Error(o(424)),n),oo(m),n=eh(t,n,l,a);break t}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(me=yn(t.firstChild),Oe=n,jt=!0,li=null,gn=!0,a=Kd(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ui(),l===m){n=Bn(t,n,a);break t}He(t,n,l,a)}n=n.child}return n;case 26:return xa(t,n),t===null?(a=gp(n.type,null,n.pendingProps,null))?n.memoizedState=a:jt||(a=n.type,t=n.pendingProps,l=za(yt.current).createElement(a),l[Ue]=n,l[$e]=t,Ve(l,a,t),De(l),n.stateNode=l):n.memoizedState=gp(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return T(n),t===null&&jt&&(l=n.stateNode=hp(n.type,n.pendingProps,yt.current),Oe=n,gn=!0,m=me,bi(n.type)?(Ru=m,me=yn(l.firstChild)):me=m),He(t,n,n.pendingProps.children,a),xa(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&jt&&((m=l=me)&&(l=P0(l,n.type,n.pendingProps,gn),l!==null?(n.stateNode=l,Oe=n,me=yn(l.firstChild),gn=!1,m=!0):m=!1),m||ui(n)),T(n),m=n.type,S=n.pendingProps,D=t!==null?t.memoizedProps:null,l=S.children,Eu(m,S)?l=null:D!==null&&Eu(m,D)&&(n.flags|=32),n.memoizedState!==null&&(m=Tl(t,n,Ky,null,null,a),Lo._currentValue=m),xa(t,n),He(t,n,l,a),n.child;case 6:return t===null&&jt&&((t=a=me)&&(a=k0(a,n.pendingProps,gn),a!==null?(n.stateNode=a,Oe=n,me=null,t=!0):t=!1),t||ui(n)),null;case 13:return nh(t,n,a);case 4:return N(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=qi(n,null,l,a):He(t,n,l,a),n.child;case 11:return Jf(t,n,n.type,n.pendingProps,a);case 7:return He(t,n,n.pendingProps,a),n.child;case 8:return He(t,n,n.pendingProps.children,a),n.child;case 12:return He(t,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,ci(n,n.type,l.value),He(t,n,l.children,a),n.child;case 9:return m=n.type._context,l=n.pendingProps.children,Gi(n),m=Ge(m),l=l(m),n.flags|=1,He(t,n,l,a),n.child;case 14:return $f(t,n,n.type,n.pendingProps,a);case 15:return Kf(t,n,n.type,n.pendingProps,a);case 19:return sh(t,n,a);case 31:return i0(t,n,a);case 22:return Qf(t,n,a,n.pendingProps);case 24:return Gi(n),l=Ge(we),t===null?(m=dl(),m===null&&(m=he,S=ul(),m.pooledCache=S,S.refCount++,S!==null&&(m.pooledCacheLanes|=a),m=S),n.memoizedState={parent:l,cache:m},hl(n),ci(n,we,m)):((t.lanes&a)!==0&&(pl(t,n),ho(n,null,null,a),fo()),m=t.memoizedState,S=n.memoizedState,m.parent!==l?(m={parent:l,cache:l},n.memoizedState=m,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=m),ci(n,we,l)):(l=S.cache,ci(n,we,l),l!==m.cache&&ll(n,[we],a,!0))),He(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(o(156,n.tag))}function Yn(t){t.flags|=4}function Kl(t,n,a,l,m){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(m&335544128)===m)if(t.stateNode.complete)t.flags|=8192;else if(Dh())t.flags|=8192;else throw zi=ca,fl}else t.flags&=-16777217}function ah(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Tp(n))if(Dh())t.flags|=8192;else throw zi=ca,fl}function Ra(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?xe():536870912,t.lanes|=n,_s|=n)}function Ao(t,n){if(!jt)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ge(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(n)for(var m=t.child;m!==null;)a|=m.lanes|m.childLanes,l|=m.subtreeFlags&65011712,l|=m.flags&65011712,m.return=t,m=m.sibling;else for(m=t.child;m!==null;)a|=m.lanes|m.childLanes,l|=m.subtreeFlags,l|=m.flags,m.return=t,m=m.sibling;return t.subtreeFlags|=l,t.childLanes=a,n}function o0(t,n,a){var l=n.pendingProps;switch(il(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ge(n),null;case 1:return ge(n),null;case 3:return a=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Vn(we),b(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ms(n)?Yn(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,ol())),ge(n),null;case 26:var m=n.type,S=n.memoizedState;return t===null?(Yn(n),S!==null?(ge(n),ah(n,S)):(ge(n),Kl(n,m,null,l,a))):S?S!==t.memoizedState?(Yn(n),ge(n),ah(n,S)):(ge(n),n.flags&=-16777217):(t=t.memoizedProps,t!==l&&Yn(n),ge(n),Kl(n,m,t,l,a)),null;case 27:if(w(n),a=yt.current,m=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Yn(n);else{if(!l){if(n.stateNode===null)throw Error(o(166));return ge(n),null}t=ft.current,ms(n)?Od(n):(t=hp(m,l,a),n.stateNode=t,Yn(n))}return ge(n),null;case 5:if(w(n),m=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Yn(n);else{if(!l){if(n.stateNode===null)throw Error(o(166));return ge(n),null}if(S=ft.current,ms(n))Od(n);else{var D=za(yt.current);switch(S){case 1:S=D.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:S=D.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":S=D.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":S=D.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":S=D.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof l.is=="string"?D.createElement("select",{is:l.is}):D.createElement("select"),l.multiple?S.multiple=!0:l.size&&(S.size=l.size);break;default:S=typeof l.is=="string"?D.createElement(m,{is:l.is}):D.createElement(m)}}S[Ue]=n,S[$e]=l;t:for(D=n.child;D!==null;){if(D.tag===5||D.tag===6)S.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===n)break t;for(;D.sibling===null;){if(D.return===null||D.return===n)break t;D=D.return}D.sibling.return=D.return,D=D.sibling}n.stateNode=S;t:switch(Ve(S,m,l),m){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&Yn(n)}}return ge(n),Kl(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,a),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&Yn(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(o(166));if(t=yt.current,ms(n)){if(t=n.stateNode,a=n.memoizedProps,l=null,m=Oe,m!==null)switch(m.tag){case 27:case 5:l=m.memoizedProps}t[Ue]=n,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||np(t.nodeValue,a)),t||ui(n,!0)}else t=za(t).createTextNode(l),t[Ue]=n,n.stateNode=t}return ge(n),null;case 31:if(a=n.memoizedState,t===null||t.memoizedState!==null){if(l=ms(n),a!==null){if(t===null){if(!l)throw Error(o(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[Ue]=n}else Ui(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ge(n),t=!1}else a=ol(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return n.flags&256?(an(n),n):(an(n),null);if((n.flags&128)!==0)throw Error(o(558))}return ge(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(m=ms(n),l!==null&&l.dehydrated!==null){if(t===null){if(!m)throw Error(o(318));if(m=n.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(o(317));m[Ue]=n}else Ui(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ge(n),m=!1}else m=ol(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=m),m=!0;if(!m)return n.flags&256?(an(n),n):(an(n),null)}return an(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=n.child,m=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(m=l.alternate.memoizedState.cachePool.pool),S=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(S=l.memoizedState.cachePool.pool),S!==m&&(l.flags|=2048)),a!==t&&a&&(n.child.flags|=8192),Ra(n,n.updateQueue),ge(n),null);case 4:return b(),t===null&&vu(n.stateNode.containerInfo),ge(n),null;case 10:return Vn(n.type),ge(n),null;case 19:if(K(be),l=n.memoizedState,l===null)return ge(n),null;if(m=(n.flags&128)!==0,S=l.rendering,S===null)if(m)Ao(l,!1);else{if(Ee!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(S=pa(t),S!==null){for(n.flags|=128,Ao(l,!1),t=S.updateQueue,n.updateQueue=t,Ra(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)Ld(a,t),a=a.sibling;return at(be,be.current&1|2),jt&&Gn(n,l.treeForkCount),n.child}t=t.sibling}l.tail!==null&&Et()>Da&&(n.flags|=128,m=!0,Ao(l,!1),n.lanes=4194304)}else{if(!m)if(t=pa(S),t!==null){if(n.flags|=128,m=!0,t=t.updateQueue,n.updateQueue=t,Ra(n,t),Ao(l,!0),l.tail===null&&l.tailMode==="hidden"&&!S.alternate&&!jt)return ge(n),null}else 2*Et()-l.renderingStartTime>Da&&a!==536870912&&(n.flags|=128,m=!0,Ao(l,!1),n.lanes=4194304);l.isBackwards?(S.sibling=n.child,n.child=S):(t=l.last,t!==null?t.sibling=S:n.child=S,l.last=S)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Et(),t.sibling=null,a=be.current,at(be,m?a&1|2:a&1),jt&&Gn(n,l.treeForkCount),t):(ge(n),null);case 22:case 23:return an(n),yl(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(ge(n),n.subtreeFlags&6&&(n.flags|=8192)):ge(n),a=n.updateQueue,a!==null&&Ra(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),t!==null&&K(Hi),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Vn(we),ge(n),null;case 25:return null;case 30:return null}throw Error(o(156,n.tag))}function a0(t,n){switch(il(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Vn(we),b(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return w(n),null;case 31:if(n.memoizedState!==null){if(an(n),n.alternate===null)throw Error(o(340));Ui()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(an(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(o(340));Ui()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return K(be),null;case 4:return b(),null;case 10:return Vn(n.type),null;case 22:case 23:return an(n),yl(),t!==null&&K(Hi),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Vn(we),null;case 25:return null;default:return null}}function rh(t,n){switch(il(n),n.tag){case 3:Vn(we),b();break;case 26:case 27:case 5:w(n);break;case 4:b();break;case 31:n.memoizedState!==null&&an(n);break;case 13:an(n);break;case 19:K(be);break;case 10:Vn(n.type);break;case 22:case 23:an(n),yl(),t!==null&&K(Hi);break;case 24:Vn(we)}}function So(t,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var m=l.next;a=m;do{if((a.tag&t)===t){l=void 0;var S=a.create,D=a.inst;l=S(),D.destroy=l}a=a.next}while(a!==m)}}catch(G){le(n,n.return,G)}}function gi(t,n,a){try{var l=n.updateQueue,m=l!==null?l.lastEffect:null;if(m!==null){var S=m.next;l=S;do{if((l.tag&t)===t){var D=l.inst,G=D.destroy;if(G!==void 0){D.destroy=void 0,m=n;var tt=a,pt=G;try{pt()}catch(bt){le(m,tt,bt)}}}l=l.next}while(l!==S)}}catch(bt){le(n,n.return,bt)}}function lh(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{Wd(n,a)}catch(l){le(t,t.return,l)}}}function uh(t,n,a){a.props=Yi(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){le(t,n,l)}}function To(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(m){le(t,n,m)}}function Dn(t,n){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(m){le(t,n,m)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(m){le(t,n,m)}else a.current=null}function ch(t){var n=t.type,a=t.memoizedProps,l=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(m){le(t,t.return,m)}}function Ql(t,n,a){try{var l=t.stateNode;_0(l,t.type,a,n),l[$e]=n}catch(m){le(t,t.return,m)}}function dh(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&bi(t.type)||t.tag===4}function Wl(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||dh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&bi(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zl(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Fn));else if(l!==4&&(l===27&&bi(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(Zl(t,n,a),t=t.sibling;t!==null;)Zl(t,n,a),t=t.sibling}function _a(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(l!==4&&(l===27&&bi(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(_a(t,n,a),t=t.sibling;t!==null;)_a(t,n,a),t=t.sibling}function fh(t){var n=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,m=n.attributes;m.length;)n.removeAttributeNode(m[0]);Ve(n,l,a),n[Ue]=t,n[$e]=a}catch(S){le(t,t.return,S)}}var Xn=!1,Me=!1,jl=!1,hh=typeof WeakSet=="function"?WeakSet:Set,Le=null;function r0(t,n){if(t=t.containerInfo,Su=Ka,t=Cd(t),Xr(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else t:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var m=l.anchorOffset,S=l.focusNode;l=l.focusOffset;try{a.nodeType,S.nodeType}catch{a=null;break t}var D=0,G=-1,tt=-1,pt=0,bt=0,wt=t,mt=null;e:for(;;){for(var At;wt!==a||m!==0&&wt.nodeType!==3||(G=D+m),wt!==S||l!==0&&wt.nodeType!==3||(tt=D+l),wt.nodeType===3&&(D+=wt.nodeValue.length),(At=wt.firstChild)!==null;)mt=wt,wt=At;for(;;){if(wt===t)break e;if(mt===a&&++pt===m&&(G=D),mt===S&&++bt===l&&(tt=D),(At=wt.nextSibling)!==null)break;wt=mt,mt=wt.parentNode}wt=At}a=G===-1||tt===-1?null:{start:G,end:tt}}else a=null}a=a||{start:0,end:0}}else a=null;for(Tu={focusedElem:t,selectionRange:a},Ka=!1,Le=n;Le!==null;)if(n=Le,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Le=t;else for(;Le!==null;){switch(n=Le,S=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)m=t[a],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&S!==null){t=void 0,a=n,m=S.memoizedProps,S=S.memoizedState,l=a.stateNode;try{var Lt=Yi(a.type,m);t=l.getSnapshotBeforeUpdate(Lt,S),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ht){le(a,a.return,Ht)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)Cu(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Cu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=n.sibling,t!==null){t.return=n.return,Le=t;break}Le=n.return}}function ph(t,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:$n(t,a),l&4&&So(5,a);break;case 1:if($n(t,a),l&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(D){le(a,a.return,D)}else{var m=Yi(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(m,n,t.__reactInternalSnapshotBeforeUpdate)}catch(D){le(a,a.return,D)}}l&64&&lh(a),l&512&&To(a,a.return);break;case 3:if($n(t,a),l&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Wd(t,n)}catch(D){le(a,a.return,D)}}break;case 27:n===null&&l&4&&fh(a);case 26:case 5:$n(t,a),n===null&&l&4&&ch(a),l&512&&To(a,a.return);break;case 12:$n(t,a);break;case 31:$n(t,a),l&4&&vh(t,a);break;case 13:$n(t,a),l&4&&yh(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=g0.bind(null,a),F0(t,a))));break;case 22:if(l=a.memoizedState!==null||Xn,!l){n=n!==null&&n.memoizedState!==null||Me,m=Xn;var S=Me;Xn=l,(Me=n)&&!S?Kn(t,a,(a.subtreeFlags&8772)!==0):$n(t,a),Xn=m,Me=S}break;case 30:break;default:$n(t,a)}}function mh(t){var n=t.alternate;n!==null&&(t.alternate=null,mh(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Mr(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ye=null,Qe=!1;function Jn(t,n,a){for(a=a.child;a!==null;)gh(t,n,a),a=a.sibling}function gh(t,n,a){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(Xt,a)}catch{}switch(a.tag){case 26:Me||Dn(a,n),Jn(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Me||Dn(a,n);var l=ye,m=Qe;bi(a.type)&&(ye=a.stateNode,Qe=!1),Jn(t,n,a),Io(a.stateNode),ye=l,Qe=m;break;case 5:Me||Dn(a,n);case 6:if(l=ye,m=Qe,ye=null,Jn(t,n,a),ye=l,Qe=m,ye!==null)if(Qe)try{(ye.nodeType===9?ye.body:ye.nodeName==="HTML"?ye.ownerDocument.body:ye).removeChild(a.stateNode)}catch(S){le(a,n,S)}else try{ye.removeChild(a.stateNode)}catch(S){le(a,n,S)}break;case 18:ye!==null&&(Qe?(t=ye,lp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Fs(t)):lp(ye,a.stateNode));break;case 4:l=ye,m=Qe,ye=a.stateNode.containerInfo,Qe=!0,Jn(t,n,a),ye=l,Qe=m;break;case 0:case 11:case 14:case 15:gi(2,a,n),Me||gi(4,a,n),Jn(t,n,a);break;case 1:Me||(Dn(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&uh(a,n,l)),Jn(t,n,a);break;case 21:Jn(t,n,a);break;case 22:Me=(l=Me)||a.memoizedState!==null,Jn(t,n,a),Me=l;break;default:Jn(t,n,a)}}function vh(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Fs(t)}catch(a){le(n,n.return,a)}}}function yh(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Fs(t)}catch(a){le(n,n.return,a)}}function l0(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new hh),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new hh),n;default:throw Error(o(435,t.tag))}}function Ma(t,n){var a=l0(t);n.forEach(function(l){if(!a.has(l)){a.add(l);var m=v0.bind(null,t,l);l.then(m,m)}})}function We(t,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var m=a[l],S=t,D=n,G=D;t:for(;G!==null;){switch(G.tag){case 27:if(bi(G.type)){ye=G.stateNode,Qe=!1;break t}break;case 5:ye=G.stateNode,Qe=!1;break t;case 3:case 4:ye=G.stateNode.containerInfo,Qe=!0;break t}G=G.return}if(ye===null)throw Error(o(160));gh(S,D,m),ye=null,Qe=!1,S=m.alternate,S!==null&&(S.return=null),m.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Ah(n,t),n=n.sibling}var bn=null;function Ah(t,n){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:We(n,t),Ze(t),l&4&&(gi(3,t,t.return),So(3,t),gi(5,t,t.return));break;case 1:We(n,t),Ze(t),l&512&&(Me||a===null||Dn(a,a.return)),l&64&&Xn&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var m=bn;if(We(n,t),Ze(t),l&512&&(Me||a===null||Dn(a,a.return)),l&4){var S=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){t:{l=t.type,a=t.memoizedProps,m=m.ownerDocument||m;e:switch(l){case"title":S=m.getElementsByTagName("title")[0],(!S||S[Js]||S[Ue]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=m.createElement(l),m.head.insertBefore(S,m.querySelector("head > title"))),Ve(S,l,a),S[Ue]=t,De(S),l=S;break t;case"link":var D=Ap("link","href",m).get(l+(a.href||""));if(D){for(var G=0;G<D.length;G++)if(S=D[G],S.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&S.getAttribute("rel")===(a.rel==null?null:a.rel)&&S.getAttribute("title")===(a.title==null?null:a.title)&&S.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){D.splice(G,1);break e}}S=m.createElement(l),Ve(S,l,a),m.head.appendChild(S);break;case"meta":if(D=Ap("meta","content",m).get(l+(a.content||""))){for(G=0;G<D.length;G++)if(S=D[G],S.getAttribute("content")===(a.content==null?null:""+a.content)&&S.getAttribute("name")===(a.name==null?null:a.name)&&S.getAttribute("property")===(a.property==null?null:a.property)&&S.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&S.getAttribute("charset")===(a.charSet==null?null:a.charSet)){D.splice(G,1);break e}}S=m.createElement(l),Ve(S,l,a),m.head.appendChild(S);break;default:throw Error(o(468,l))}S[Ue]=t,De(S),l=S}t.stateNode=l}else Sp(m,t.type,t.stateNode);else t.stateNode=yp(m,l,t.memoizedProps);else S!==l?(S===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):S.count--,l===null?Sp(m,t.type,t.stateNode):yp(m,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Ql(t,t.memoizedProps,a.memoizedProps)}break;case 27:We(n,t),Ze(t),l&512&&(Me||a===null||Dn(a,a.return)),a!==null&&l&4&&Ql(t,t.memoizedProps,a.memoizedProps);break;case 5:if(We(n,t),Ze(t),l&512&&(Me||a===null||Dn(a,a.return)),t.flags&32){m=t.stateNode;try{os(m,"")}catch(Lt){le(t,t.return,Lt)}}l&4&&t.stateNode!=null&&(m=t.memoizedProps,Ql(t,m,a!==null?a.memoizedProps:m)),l&1024&&(jl=!0);break;case 6:if(We(n,t),Ze(t),l&4){if(t.stateNode===null)throw Error(o(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Lt){le(t,t.return,Lt)}}break;case 3:if(Ya=null,m=bn,bn=qa(n.containerInfo),We(n,t),bn=m,Ze(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Fs(n.containerInfo)}catch(Lt){le(t,t.return,Lt)}jl&&(jl=!1,Sh(t));break;case 4:l=bn,bn=qa(t.stateNode.containerInfo),We(n,t),Ze(t),bn=l;break;case 12:We(n,t),Ze(t);break;case 31:We(n,t),Ze(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ma(t,l)));break;case 13:We(n,t),Ze(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Na=Et()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ma(t,l)));break;case 22:m=t.memoizedState!==null;var tt=a!==null&&a.memoizedState!==null,pt=Xn,bt=Me;if(Xn=pt||m,Me=bt||tt,We(n,t),Me=bt,Xn=pt,Ze(t),l&8192)t:for(n=t.stateNode,n._visibility=m?n._visibility&-2:n._visibility|1,m&&(a===null||tt||Xn||Me||Xi(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){tt=a=n;try{if(S=tt.stateNode,m)D=S.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{G=tt.stateNode;var wt=tt.memoizedProps.style,mt=wt!=null&&wt.hasOwnProperty("display")?wt.display:null;G.style.display=mt==null||typeof mt=="boolean"?"":(""+mt).trim()}}catch(Lt){le(tt,tt.return,Lt)}}}else if(n.tag===6){if(a===null){tt=n;try{tt.stateNode.nodeValue=m?"":tt.memoizedProps}catch(Lt){le(tt,tt.return,Lt)}}}else if(n.tag===18){if(a===null){tt=n;try{var At=tt.stateNode;m?up(At,!0):up(tt.stateNode,!1)}catch(Lt){le(tt,tt.return,Lt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Ma(t,a))));break;case 19:We(n,t),Ze(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ma(t,l)));break;case 30:break;case 21:break;default:We(n,t),Ze(t)}}function Ze(t){var n=t.flags;if(n&2){try{for(var a,l=t.return;l!==null;){if(dh(l)){a=l;break}l=l.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var m=a.stateNode,S=Wl(t);_a(t,S,m);break;case 5:var D=a.stateNode;a.flags&32&&(os(D,""),a.flags&=-33);var G=Wl(t);_a(t,G,D);break;case 3:case 4:var tt=a.stateNode.containerInfo,pt=Wl(t);Zl(t,pt,tt);break;default:throw Error(o(161))}}catch(bt){le(t,t.return,bt)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Sh(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Sh(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function $n(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)ph(t,n.alternate,n),n=n.sibling}function Xi(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:gi(4,n,n.return),Xi(n);break;case 1:Dn(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&uh(n,n.return,a),Xi(n);break;case 27:Io(n.stateNode);case 26:case 5:Dn(n,n.return),Xi(n);break;case 22:n.memoizedState===null&&Xi(n);break;case 30:Xi(n);break;default:Xi(n)}t=t.sibling}}function Kn(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,m=t,S=n,D=S.flags;switch(S.tag){case 0:case 11:case 15:Kn(m,S,a),So(4,S);break;case 1:if(Kn(m,S,a),l=S,m=l.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(pt){le(l,l.return,pt)}if(l=S,m=l.updateQueue,m!==null){var G=l.stateNode;try{var tt=m.shared.hiddenCallbacks;if(tt!==null)for(m.shared.hiddenCallbacks=null,m=0;m<tt.length;m++)Qd(tt[m],G)}catch(pt){le(l,l.return,pt)}}a&&D&64&&lh(S),To(S,S.return);break;case 27:fh(S);case 26:case 5:Kn(m,S,a),a&&l===null&&D&4&&ch(S),To(S,S.return);break;case 12:Kn(m,S,a);break;case 31:Kn(m,S,a),a&&D&4&&vh(m,S);break;case 13:Kn(m,S,a),a&&D&4&&yh(m,S);break;case 22:S.memoizedState===null&&Kn(m,S,a),To(S,S.return);break;case 30:break;default:Kn(m,S,a)}n=n.sibling}}function tu(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ao(a))}function eu(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&ao(t))}function Cn(t,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Th(t,n,a,l),n=n.sibling}function Th(t,n,a,l){var m=n.flags;switch(n.tag){case 0:case 11:case 15:Cn(t,n,a,l),m&2048&&So(9,n);break;case 1:Cn(t,n,a,l);break;case 3:Cn(t,n,a,l),m&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&ao(t)));break;case 12:if(m&2048){Cn(t,n,a,l),t=n.stateNode;try{var S=n.memoizedProps,D=S.id,G=S.onPostCommit;typeof G=="function"&&G(D,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(tt){le(n,n.return,tt)}}else Cn(t,n,a,l);break;case 31:Cn(t,n,a,l);break;case 13:Cn(t,n,a,l);break;case 23:break;case 22:S=n.stateNode,D=n.alternate,n.memoizedState!==null?S._visibility&2?Cn(t,n,a,l):Eo(t,n):S._visibility&2?Cn(t,n,a,l):(S._visibility|=2,xs(t,n,a,l,(n.subtreeFlags&10256)!==0||!1)),m&2048&&tu(D,n);break;case 24:Cn(t,n,a,l),m&2048&&eu(n.alternate,n);break;default:Cn(t,n,a,l)}}function xs(t,n,a,l,m){for(m=m&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var S=t,D=n,G=a,tt=l,pt=D.flags;switch(D.tag){case 0:case 11:case 15:xs(S,D,G,tt,m),So(8,D);break;case 23:break;case 22:var bt=D.stateNode;D.memoizedState!==null?bt._visibility&2?xs(S,D,G,tt,m):Eo(S,D):(bt._visibility|=2,xs(S,D,G,tt,m)),m&&pt&2048&&tu(D.alternate,D);break;case 24:xs(S,D,G,tt,m),m&&pt&2048&&eu(D.alternate,D);break;default:xs(S,D,G,tt,m)}n=n.sibling}}function Eo(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,l=n,m=l.flags;switch(l.tag){case 22:Eo(a,l),m&2048&&tu(l.alternate,l);break;case 24:Eo(a,l),m&2048&&eu(l.alternate,l);break;default:Eo(a,l)}n=n.sibling}}var bo=8192;function ws(t,n,a){if(t.subtreeFlags&bo)for(t=t.child;t!==null;)Eh(t,n,a),t=t.sibling}function Eh(t,n,a){switch(t.tag){case 26:ws(t,n,a),t.flags&bo&&t.memoizedState!==null&&$0(a,bn,t.memoizedState,t.memoizedProps);break;case 5:ws(t,n,a);break;case 3:case 4:var l=bn;bn=qa(t.stateNode.containerInfo),ws(t,n,a),bn=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=bo,bo=16777216,ws(t,n,a),bo=l):ws(t,n,a));break;default:ws(t,n,a)}}function bh(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Co(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Le=l,xh(l,t)}bh(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ch(t),t=t.sibling}function Ch(t){switch(t.tag){case 0:case 11:case 15:Co(t),t.flags&2048&&gi(9,t,t.return);break;case 3:Co(t);break;case 12:Co(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Ia(t)):Co(t);break;default:Co(t)}}function Ia(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Le=l,xh(l,t)}bh(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:gi(8,n,n.return),Ia(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Ia(n));break;default:Ia(n)}t=t.sibling}}function xh(t,n){for(;Le!==null;){var a=Le;switch(a.tag){case 0:case 11:case 15:gi(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ao(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Le=l;else t:for(a=t;Le!==null;){l=Le;var m=l.sibling,S=l.return;if(mh(l),l===a){Le=null;break t}if(m!==null){m.return=S,Le=m;break t}Le=S}}}var u0={getCacheForType:function(t){var n=Ge(we),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a},cacheSignal:function(){return Ge(we).controller.signal}},c0=typeof WeakMap=="function"?WeakMap:Map,oe=0,he=null,Kt=null,Wt=0,re=0,rn=null,vi=!1,Rs=!1,nu=!1,Qn=0,Ee=0,yi=0,Ji=0,iu=0,ln=0,_s=0,xo=null,je=null,su=!1,Na=0,wh=0,Da=1/0,La=null,Ai=null,Ne=0,Si=null,Ms=null,Wn=0,ou=0,au=null,Rh=null,wo=0,ru=null;function un(){return(oe&2)!==0&&Wt!==0?Wt&-Wt:X.T!==null?hu():zc()}function _h(){if(ln===0)if((Wt&536870912)===0||jt){var t=fe;fe<<=1,(fe&3932160)===0&&(fe=262144),ln=t}else ln=536870912;return t=on.current,t!==null&&(t.flags|=32),ln}function tn(t,n,a){(t===he&&(re===2||re===9)||t.cancelPendingCommit!==null)&&(Is(t,0),Ti(t,Wt,ln,!1)),en(t,a),((oe&2)===0||t!==he)&&(t===he&&((oe&2)===0&&(Ji|=a),Ee===4&&Ti(t,Wt,ln,!1)),Ln(t))}function Mh(t,n,a){if((oe&6)!==0)throw Error(o(327));var l=!a&&(n&127)===0&&(n&t.expiredLanes)===0||_n(t,n),m=l?h0(t,n):uu(t,n,!0),S=l;do{if(m===0){Rs&&!l&&Ti(t,n,0,!1);break}else{if(a=t.current.alternate,S&&!d0(a)){m=uu(t,n,!1),S=!1;continue}if(m===2){if(S=n,t.errorRecoveryDisabledLanes&S)var D=0;else D=t.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){n=D;t:{var G=t;m=xo;var tt=G.current.memoizedState.isDehydrated;if(tt&&(Is(G,D).flags|=256),D=uu(G,D,!1),D!==2){if(nu&&!tt){G.errorRecoveryDisabledLanes|=S,Ji|=S,m=4;break t}S=je,je=m,S!==null&&(je===null?je=S:je.push.apply(je,S))}m=D}if(S=!1,m!==2)continue}}if(m===1){Is(t,0),Ti(t,n,0,!0);break}t:{switch(l=t,S=m,S){case 0:case 1:throw Error(o(345));case 4:if((n&4194048)!==n)break;case 6:Ti(l,n,ln,!vi);break t;case 2:je=null;break;case 3:case 5:break;default:throw Error(o(329))}if((n&62914560)===n&&(m=Na+300-Et(),10<m)){if(Ti(l,n,ln,!vi),Pn(l,0,!0)!==0)break t;Wn=n,l.timeoutHandle=ap(Ih.bind(null,l,a,je,La,su,n,ln,Ji,_s,vi,S,"Throttled",-0,0),m);break t}Ih(l,a,je,La,su,n,ln,Ji,_s,vi,S,null,-0,0)}}break}while(!0);Ln(t)}function Ih(t,n,a,l,m,S,D,G,tt,pt,bt,wt,mt,At){if(t.timeoutHandle=-1,wt=n.subtreeFlags,wt&8192||(wt&16785408)===16785408){wt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fn},Eh(n,S,wt);var Lt=(S&62914560)===S?Na-Et():(S&4194048)===S?wh-Et():0;if(Lt=K0(wt,Lt),Lt!==null){Wn=S,t.cancelPendingCommit=Lt(Oh.bind(null,t,n,S,a,l,m,D,G,tt,bt,wt,null,mt,At)),Ti(t,S,D,!pt);return}}Oh(t,n,S,a,l,m,D,G,tt)}function d0(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var m=a[l],S=m.getSnapshot;m=m.value;try{if(!nn(S(),m))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ti(t,n,a,l){n&=~iu,n&=~Ji,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var m=n;0<m;){var S=31-ae(m),D=1<<S;l[S]=-1,m&=~D}a!==0&&Ae(t,a,n)}function Pa(){return(oe&6)===0?(Ro(0),!1):!0}function lu(){if(Kt!==null){if(re===0)var t=Kt.return;else t=Kt,Hn=Oi=null,Cl(t),Ss=null,lo=0,t=Kt;for(;t!==null;)rh(t.alternate,t),t=t.return;Kt=null}}function Is(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,N0(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Wn=0,lu(),he=t,Kt=a=On(t.current,null),Wt=n,re=0,rn=null,vi=!1,Rs=_n(t,n),nu=!1,_s=ln=iu=Ji=yi=Ee=0,je=xo=null,su=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var m=31-ae(l),S=1<<m;n|=t[m],l&=~S}return Qn=n,ea(),a}function Nh(t,n){Bt=null,X.H=vo,n===As||n===ua?(n=Xd(),re=3):n===fl?(n=Xd(),re=4):re=n===Hl?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,rn=n,Kt===null&&(Ee=1,ba(t,hn(n,t.current)))}function Dh(){var t=on.current;return t===null?!0:(Wt&4194048)===Wt?vn===null:(Wt&62914560)===Wt||(Wt&536870912)!==0?t===vn:!1}function Lh(){var t=X.H;return X.H=vo,t===null?vo:t}function Ph(){var t=X.A;return X.A=u0,t}function ka(){Ee=4,vi||(Wt&4194048)!==Wt&&on.current!==null||(Rs=!0),(yi&134217727)===0&&(Ji&134217727)===0||he===null||Ti(he,Wt,ln,!1)}function uu(t,n,a){var l=oe;oe|=2;var m=Lh(),S=Ph();(he!==t||Wt!==n)&&(La=null,Is(t,n)),n=!1;var D=Ee;t:do try{if(re!==0&&Kt!==null){var G=Kt,tt=rn;switch(re){case 8:lu(),D=6;break t;case 3:case 2:case 9:case 6:on.current===null&&(n=!0);var pt=re;if(re=0,rn=null,Ns(t,G,tt,pt),a&&Rs){D=0;break t}break;default:pt=re,re=0,rn=null,Ns(t,G,tt,pt)}}f0(),D=Ee;break}catch(bt){Nh(t,bt)}while(!0);return n&&t.shellSuspendCounter++,Hn=Oi=null,oe=l,X.H=m,X.A=S,Kt===null&&(he=null,Wt=0,ea()),D}function f0(){for(;Kt!==null;)kh(Kt)}function h0(t,n){var a=oe;oe|=2;var l=Lh(),m=Ph();he!==t||Wt!==n?(La=null,Da=Et()+500,Is(t,n)):Rs=_n(t,n);t:do try{if(re!==0&&Kt!==null){n=Kt;var S=rn;e:switch(re){case 1:re=0,rn=null,Ns(t,n,S,1);break;case 2:case 9:if(Bd(S)){re=0,rn=null,Fh(n);break}n=function(){re!==2&&re!==9||he!==t||(re=7),Ln(t)},S.then(n,n);break t;case 3:re=7;break t;case 4:re=5;break t;case 7:Bd(S)?(re=0,rn=null,Fh(n)):(re=0,rn=null,Ns(t,n,S,7));break;case 5:var D=null;switch(Kt.tag){case 26:D=Kt.memoizedState;case 5:case 27:var G=Kt;if(D?Tp(D):G.stateNode.complete){re=0,rn=null;var tt=G.sibling;if(tt!==null)Kt=tt;else{var pt=G.return;pt!==null?(Kt=pt,Fa(pt)):Kt=null}break e}}re=0,rn=null,Ns(t,n,S,5);break;case 6:re=0,rn=null,Ns(t,n,S,6);break;case 8:lu(),Ee=6;break t;default:throw Error(o(462))}}p0();break}catch(bt){Nh(t,bt)}while(!0);return Hn=Oi=null,X.H=l,X.A=m,oe=a,Kt!==null?0:(he=null,Wt=0,ea(),Ee)}function p0(){for(;Kt!==null&&!J();)kh(Kt)}function kh(t){var n=oh(t.alternate,t,Qn);t.memoizedProps=t.pendingProps,n===null?Fa(t):Kt=n}function Fh(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=jf(a,n,n.pendingProps,n.type,void 0,Wt);break;case 11:n=jf(a,n,n.pendingProps,n.type.render,n.ref,Wt);break;case 5:Cl(n);default:rh(a,n),n=Kt=Ld(n,Qn),n=oh(a,n,Qn)}t.memoizedProps=t.pendingProps,n===null?Fa(t):Kt=n}function Ns(t,n,a,l){Hn=Oi=null,Cl(n),Ss=null,lo=0;var m=n.return;try{if(n0(t,m,n,a,Wt)){Ee=1,ba(t,hn(a,t.current)),Kt=null;return}}catch(S){if(m!==null)throw Kt=m,S;Ee=1,ba(t,hn(a,t.current)),Kt=null;return}n.flags&32768?(jt||l===1?t=!0:Rs||(Wt&536870912)!==0?t=!1:(vi=t=!0,(l===2||l===9||l===3||l===6)&&(l=on.current,l!==null&&l.tag===13&&(l.flags|=16384))),Uh(n,t)):Fa(n)}function Fa(t){var n=t;do{if((n.flags&32768)!==0){Uh(n,vi);return}t=n.return;var a=o0(n.alternate,n,Qn);if(a!==null){Kt=a;return}if(n=n.sibling,n!==null){Kt=n;return}Kt=n=t}while(n!==null);Ee===0&&(Ee=5)}function Uh(t,n){do{var a=a0(t.alternate,t);if(a!==null){a.flags&=32767,Kt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){Kt=t;return}Kt=t=a}while(t!==null);Ee=6,Kt=null}function Oh(t,n,a,l,m,S,D,G,tt){t.cancelPendingCommit=null;do Ua();while(Ne!==0);if((oe&6)!==0)throw Error(o(327));if(n!==null){if(n===t.current)throw Error(o(177));if(S=n.lanes|n.childLanes,S|=Wr,ii(t,a,S,D,G,tt),t===he&&(Kt=he=null,Wt=0),Ms=n,Si=t,Wn=a,ou=S,au=m,Rh=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,y0(Nt,function(){return qh(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,m=dt.p,dt.p=2,D=oe,oe|=4;try{r0(t,n,a)}finally{oe=D,dt.p=m,X.T=l}}Ne=1,Gh(),Hh(),Vh()}}function Gh(){if(Ne===1){Ne=0;var t=Si,n=Ms,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var l=dt.p;dt.p=2;var m=oe;oe|=4;try{Ah(n,t);var S=Tu,D=Cd(t.containerInfo),G=S.focusedElem,tt=S.selectionRange;if(D!==G&&G&&G.ownerDocument&&bd(G.ownerDocument.documentElement,G)){if(tt!==null&&Xr(G)){var pt=tt.start,bt=tt.end;if(bt===void 0&&(bt=pt),"selectionStart"in G)G.selectionStart=pt,G.selectionEnd=Math.min(bt,G.value.length);else{var wt=G.ownerDocument||document,mt=wt&&wt.defaultView||window;if(mt.getSelection){var At=mt.getSelection(),Lt=G.textContent.length,Ht=Math.min(tt.start,Lt),de=tt.end===void 0?Ht:Math.min(tt.end,Lt);!At.extend&&Ht>de&&(D=de,de=Ht,Ht=D);var ut=Ed(G,Ht),st=Ed(G,de);if(ut&&st&&(At.rangeCount!==1||At.anchorNode!==ut.node||At.anchorOffset!==ut.offset||At.focusNode!==st.node||At.focusOffset!==st.offset)){var ht=wt.createRange();ht.setStart(ut.node,ut.offset),At.removeAllRanges(),Ht>de?(At.addRange(ht),At.extend(st.node,st.offset)):(ht.setEnd(st.node,st.offset),At.addRange(ht))}}}}for(wt=[],At=G;At=At.parentNode;)At.nodeType===1&&wt.push({element:At,left:At.scrollLeft,top:At.scrollTop});for(typeof G.focus=="function"&&G.focus(),G=0;G<wt.length;G++){var xt=wt[G];xt.element.scrollLeft=xt.left,xt.element.scrollTop=xt.top}}Ka=!!Su,Tu=Su=null}finally{oe=m,dt.p=l,X.T=a}}t.current=n,Ne=2}}function Hh(){if(Ne===2){Ne=0;var t=Si,n=Ms,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var l=dt.p;dt.p=2;var m=oe;oe|=4;try{ph(t,n.alternate,n)}finally{oe=m,dt.p=l,X.T=a}}Ne=3}}function Vh(){if(Ne===4||Ne===3){Ne=0,Z();var t=Si,n=Ms,a=Wn,l=Rh;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ne=5:(Ne=0,Ms=Si=null,zh(t,t.pendingLanes));var m=t.pendingLanes;if(m===0&&(Ai=null),Rr(a),n=n.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(Xt,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=X.T,m=dt.p,dt.p=2,X.T=null;try{for(var S=t.onRecoverableError,D=0;D<l.length;D++){var G=l[D];S(G.value,{componentStack:G.stack})}}finally{X.T=n,dt.p=m}}(Wn&3)!==0&&Ua(),Ln(t),m=t.pendingLanes,(a&261930)!==0&&(m&42)!==0?t===ru?wo++:(wo=0,ru=t):wo=0,Ro(0)}}function zh(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,ao(n)))}function Ua(){return Gh(),Hh(),Vh(),qh()}function qh(){if(Ne!==5)return!1;var t=Si,n=ou;ou=0;var a=Rr(Wn),l=X.T,m=dt.p;try{dt.p=32>a?32:a,X.T=null,a=au,au=null;var S=Si,D=Wn;if(Ne=0,Ms=Si=null,Wn=0,(oe&6)!==0)throw Error(o(331));var G=oe;if(oe|=4,Ch(S.current),Th(S,S.current,D,a),oe=G,Ro(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(Xt,S)}catch{}return!0}finally{dt.p=m,X.T=l,zh(t,n)}}function Bh(t,n,a){n=hn(a,n),n=Gl(t.stateNode,n,2),t=hi(t,n,2),t!==null&&(en(t,2),Ln(t))}function le(t,n,a){if(t.tag===3)Bh(t,t,a);else for(;n!==null;){if(n.tag===3){Bh(n,t,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ai===null||!Ai.has(l))){t=hn(a,t),a=Yf(2),l=hi(n,a,2),l!==null&&(Xf(a,l,n,t),en(l,2),Ln(l));break}}n=n.return}}function cu(t,n,a){var l=t.pingCache;if(l===null){l=t.pingCache=new c0;var m=new Set;l.set(n,m)}else m=l.get(n),m===void 0&&(m=new Set,l.set(n,m));m.has(a)||(nu=!0,m.add(a),t=m0.bind(null,t,n,a),n.then(t,t))}function m0(t,n,a){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,he===t&&(Wt&a)===a&&(Ee===4||Ee===3&&(Wt&62914560)===Wt&&300>Et()-Na?(oe&2)===0&&Is(t,0):iu|=a,_s===Wt&&(_s=0)),Ln(t)}function Yh(t,n){n===0&&(n=xe()),t=ki(t,n),t!==null&&(en(t,n),Ln(t))}function g0(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),Yh(t,a)}function v0(t,n){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,m=t.memoizedState;m!==null&&(a=m.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(n),Yh(t,a)}function y0(t,n){return rt(t,n)}var Oa=null,Ds=null,du=!1,Ga=!1,fu=!1,Ei=0;function Ln(t){t!==Ds&&t.next===null&&(Ds===null?Oa=Ds=t:Ds=Ds.next=t),Ga=!0,du||(du=!0,S0())}function Ro(t,n){if(!fu&&Ga){fu=!0;do for(var a=!1,l=Oa;l!==null;){if(t!==0){var m=l.pendingLanes;if(m===0)var S=0;else{var D=l.suspendedLanes,G=l.pingedLanes;S=(1<<31-ae(42|t)+1)-1,S&=m&~(D&~G),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(a=!0,Kh(l,S))}else S=Wt,S=Pn(l,l===he?S:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(S&3)===0||_n(l,S)||(a=!0,Kh(l,S));l=l.next}while(a);fu=!1}}function A0(){Xh()}function Xh(){Ga=du=!1;var t=0;Ei!==0&&I0()&&(t=Ei);for(var n=Et(),a=null,l=Oa;l!==null;){var m=l.next,S=Jh(l,n);S===0?(l.next=null,a===null?Oa=m:a.next=m,m===null&&(Ds=a)):(a=l,(t!==0||(S&3)!==0)&&(Ga=!0)),l=m}Ne!==0&&Ne!==5||Ro(t),Ei!==0&&(Ei=0)}function Jh(t,n){for(var a=t.suspendedLanes,l=t.pingedLanes,m=t.expirationTimes,S=t.pendingLanes&-62914561;0<S;){var D=31-ae(S),G=1<<D,tt=m[D];tt===-1?((G&a)===0||(G&l)!==0)&&(m[D]=Fe(G,n)):tt<=n&&(t.expiredLanes|=G),S&=~G}if(n=he,a=Wt,a=Pn(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===n&&(re===2||re===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&it(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||_n(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(l!==null&&it(l),Rr(a)){case 2:case 8:a=Dt;break;case 32:a=Nt;break;case 268435456:a=Pt;break;default:a=Nt}return l=$h.bind(null,t),a=rt(a,l),t.callbackPriority=n,t.callbackNode=a,n}return l!==null&&l!==null&&it(l),t.callbackPriority=2,t.callbackNode=null,2}function $h(t,n){if(Ne!==0&&Ne!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Ua()&&t.callbackNode!==a)return null;var l=Wt;return l=Pn(t,t===he?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Mh(t,l,n),Jh(t,Et()),t.callbackNode!=null&&t.callbackNode===a?$h.bind(null,t):null)}function Kh(t,n){if(Ua())return null;Mh(t,n,!0)}function S0(){D0(function(){(oe&6)!==0?rt(Mt,A0):Xh()})}function hu(){if(Ei===0){var t=vs;t===0&&(t=pe,pe<<=1,(pe&261888)===0&&(pe=256)),Ei=t}return Ei}function Qh(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Jo(""+t)}function Wh(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function T0(t,n,a,l,m){if(n==="submit"&&a&&a.stateNode===m){var S=Qh((m[$e]||null).action),D=l.submitter;D&&(n=(n=D[$e]||null)?Qh(n.formAction):D.getAttribute("formAction"),n!==null&&(S=n,D=null));var G=new Wo("action","action",null,l,m);t.push({event:G,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ei!==0){var tt=D?Wh(m,D):new FormData(m);Ll(a,{pending:!0,data:tt,method:m.method,action:S},null,tt)}}else typeof S=="function"&&(G.preventDefault(),tt=D?Wh(m,D):new FormData(m),Ll(a,{pending:!0,data:tt,method:m.method,action:S},S,tt))},currentTarget:m}]})}}for(var pu=0;pu<Qr.length;pu++){var mu=Qr[pu],E0=mu.toLowerCase(),b0=mu[0].toUpperCase()+mu.slice(1);En(E0,"on"+b0)}En(Rd,"onAnimationEnd"),En(_d,"onAnimationIteration"),En(Md,"onAnimationStart"),En("dblclick","onDoubleClick"),En("focusin","onFocus"),En("focusout","onBlur"),En(Gy,"onTransitionRun"),En(Hy,"onTransitionStart"),En(Vy,"onTransitionCancel"),En(Id,"onTransitionEnd"),is("onMouseEnter",["mouseout","mouseover"]),is("onMouseLeave",["mouseout","mouseover"]),is("onPointerEnter",["pointerout","pointerover"]),is("onPointerLeave",["pointerout","pointerover"]),Ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_o));function Zh(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],m=l.event;l=l.listeners;t:{var S=void 0;if(n)for(var D=l.length-1;0<=D;D--){var G=l[D],tt=G.instance,pt=G.currentTarget;if(G=G.listener,tt!==S&&m.isPropagationStopped())break t;S=G,m.currentTarget=pt;try{S(m)}catch(bt){ta(bt)}m.currentTarget=null,S=tt}else for(D=0;D<l.length;D++){if(G=l[D],tt=G.instance,pt=G.currentTarget,G=G.listener,tt!==S&&m.isPropagationStopped())break t;S=G,m.currentTarget=pt;try{S(m)}catch(bt){ta(bt)}m.currentTarget=null,S=tt}}}}function Qt(t,n){var a=n[_r];a===void 0&&(a=n[_r]=new Set);var l=t+"__bubble";a.has(l)||(jh(n,t,2,!1),a.add(l))}function gu(t,n,a){var l=0;n&&(l|=4),jh(a,t,l,n)}var Ha="_reactListening"+Math.random().toString(36).slice(2);function vu(t){if(!t[Ha]){t[Ha]=!0,Yc.forEach(function(a){a!=="selectionchange"&&(C0.has(a)||gu(a,!1,t),gu(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Ha]||(n[Ha]=!0,gu("selectionchange",!1,n))}}function jh(t,n,a,l){switch(_p(n)){case 2:var m=Z0;break;case 8:m=j0;break;default:m=Du}a=m.bind(null,n,a,t),m=void 0,!Ur||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(m=!0),l?m!==void 0?t.addEventListener(n,a,{capture:!0,passive:m}):t.addEventListener(n,a,!0):m!==void 0?t.addEventListener(n,a,{passive:m}):t.addEventListener(n,a,!1)}function yu(t,n,a,l,m){var S=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var D=l.tag;if(D===3||D===4){var G=l.stateNode.containerInfo;if(G===m)break;if(D===4)for(D=l.return;D!==null;){var tt=D.tag;if((tt===3||tt===4)&&D.stateNode.containerInfo===m)return;D=D.return}for(;G!==null;){if(D=ts(G),D===null)return;if(tt=D.tag,tt===5||tt===6||tt===26||tt===27){l=S=D;continue t}G=G.parentNode}}l=l.return}id(function(){var pt=S,bt=kr(a),wt=[];t:{var mt=Nd.get(t);if(mt!==void 0){var At=Wo,Lt=t;switch(t){case"keypress":if(Ko(a)===0)break t;case"keydown":case"keyup":At=vy;break;case"focusin":Lt="focus",At=Vr;break;case"focusout":Lt="blur",At=Vr;break;case"beforeblur":case"afterblur":At=Vr;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":At=ad;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":At=oy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":At=Sy;break;case Rd:case _d:case Md:At=ly;break;case Id:At=Ey;break;case"scroll":case"scrollend":At=iy;break;case"wheel":At=Cy;break;case"copy":case"cut":case"paste":At=cy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":At=ld;break;case"toggle":case"beforetoggle":At=wy}var Ht=(n&4)!==0,de=!Ht&&(t==="scroll"||t==="scrollend"),ut=Ht?mt!==null?mt+"Capture":null:mt;Ht=[];for(var st=pt,ht;st!==null;){var xt=st;if(ht=xt.stateNode,xt=xt.tag,xt!==5&&xt!==26&&xt!==27||ht===null||ut===null||(xt=Ks(st,ut),xt!=null&&Ht.push(Mo(st,xt,ht))),de)break;st=st.return}0<Ht.length&&(mt=new At(mt,Lt,null,a,bt),wt.push({event:mt,listeners:Ht}))}}if((n&7)===0){t:{if(mt=t==="mouseover"||t==="pointerover",At=t==="mouseout"||t==="pointerout",mt&&a!==Pr&&(Lt=a.relatedTarget||a.fromElement)&&(ts(Lt)||Lt[ji]))break t;if((At||mt)&&(mt=bt.window===bt?bt:(mt=bt.ownerDocument)?mt.defaultView||mt.parentWindow:window,At?(Lt=a.relatedTarget||a.toElement,At=pt,Lt=Lt?ts(Lt):null,Lt!==null&&(de=u(Lt),Ht=Lt.tag,Lt!==de||Ht!==5&&Ht!==27&&Ht!==6)&&(Lt=null)):(At=null,Lt=pt),At!==Lt)){if(Ht=ad,xt="onMouseLeave",ut="onMouseEnter",st="mouse",(t==="pointerout"||t==="pointerover")&&(Ht=ld,xt="onPointerLeave",ut="onPointerEnter",st="pointer"),de=At==null?mt:$s(At),ht=Lt==null?mt:$s(Lt),mt=new Ht(xt,st+"leave",At,a,bt),mt.target=de,mt.relatedTarget=ht,xt=null,ts(bt)===pt&&(Ht=new Ht(ut,st+"enter",Lt,a,bt),Ht.target=ht,Ht.relatedTarget=de,xt=Ht),de=xt,At&&Lt)e:{for(Ht=x0,ut=At,st=Lt,ht=0,xt=ut;xt;xt=Ht(xt))ht++;xt=0;for(var Ot=st;Ot;Ot=Ht(Ot))xt++;for(;0<ht-xt;)ut=Ht(ut),ht--;for(;0<xt-ht;)st=Ht(st),xt--;for(;ht--;){if(ut===st||st!==null&&ut===st.alternate){Ht=ut;break e}ut=Ht(ut),st=Ht(st)}Ht=null}else Ht=null;At!==null&&tp(wt,mt,At,Ht,!1),Lt!==null&&de!==null&&tp(wt,de,Lt,Ht,!0)}}t:{if(mt=pt?$s(pt):window,At=mt.nodeName&&mt.nodeName.toLowerCase(),At==="select"||At==="input"&&mt.type==="file")var ne=gd;else if(pd(mt))if(vd)ne=Fy;else{ne=Py;var kt=Ly}else At=mt.nodeName,!At||At.toLowerCase()!=="input"||mt.type!=="checkbox"&&mt.type!=="radio"?pt&&Lr(pt.elementType)&&(ne=gd):ne=ky;if(ne&&(ne=ne(t,pt))){md(wt,ne,a,bt);break t}kt&&kt(t,mt,pt),t==="focusout"&&pt&&mt.type==="number"&&pt.memoizedProps.value!=null&&Dr(mt,"number",mt.value)}switch(kt=pt?$s(pt):window,t){case"focusin":(pd(kt)||kt.contentEditable==="true")&&(us=kt,Jr=pt,io=null);break;case"focusout":io=Jr=us=null;break;case"mousedown":$r=!0;break;case"contextmenu":case"mouseup":case"dragend":$r=!1,xd(wt,a,bt);break;case"selectionchange":if(Oy)break;case"keydown":case"keyup":xd(wt,a,bt)}var Yt;if(qr)t:{switch(t){case"compositionstart":var Zt="onCompositionStart";break t;case"compositionend":Zt="onCompositionEnd";break t;case"compositionupdate":Zt="onCompositionUpdate";break t}Zt=void 0}else ls?fd(t,a)&&(Zt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Zt="onCompositionStart");Zt&&(ud&&a.locale!=="ko"&&(ls||Zt!=="onCompositionStart"?Zt==="onCompositionEnd"&&ls&&(Yt=sd()):(ai=bt,Or="value"in ai?ai.value:ai.textContent,ls=!0)),kt=Va(pt,Zt),0<kt.length&&(Zt=new rd(Zt,t,null,a,bt),wt.push({event:Zt,listeners:kt}),Yt?Zt.data=Yt:(Yt=hd(a),Yt!==null&&(Zt.data=Yt)))),(Yt=_y?My(t,a):Iy(t,a))&&(Zt=Va(pt,"onBeforeInput"),0<Zt.length&&(kt=new rd("onBeforeInput","beforeinput",null,a,bt),wt.push({event:kt,listeners:Zt}),kt.data=Yt)),T0(wt,t,pt,a,bt)}Zh(wt,n)})}function Mo(t,n,a){return{instance:t,listener:n,currentTarget:a}}function Va(t,n){for(var a=n+"Capture",l=[];t!==null;){var m=t,S=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||S===null||(m=Ks(t,a),m!=null&&l.unshift(Mo(t,m,S)),m=Ks(t,n),m!=null&&l.push(Mo(t,m,S))),t.tag===3)return l;t=t.return}return[]}function x0(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function tp(t,n,a,l,m){for(var S=n._reactName,D=[];a!==null&&a!==l;){var G=a,tt=G.alternate,pt=G.stateNode;if(G=G.tag,tt!==null&&tt===l)break;G!==5&&G!==26&&G!==27||pt===null||(tt=pt,m?(pt=Ks(a,S),pt!=null&&D.unshift(Mo(a,pt,tt))):m||(pt=Ks(a,S),pt!=null&&D.push(Mo(a,pt,tt)))),a=a.return}D.length!==0&&t.push({event:n,listeners:D})}var w0=/\r\n?/g,R0=/\u0000|\uFFFD/g;function ep(t){return(typeof t=="string"?t:""+t).replace(w0,`
`).replace(R0,"")}function np(t,n){return n=ep(n),ep(t)===n}function ce(t,n,a,l,m,S){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||os(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&os(t,""+l);break;case"className":Yo(t,"class",l);break;case"tabIndex":Yo(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Yo(t,a,l);break;case"style":ed(t,l,S);break;case"data":if(n!=="object"){Yo(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Jo(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(a==="formAction"?(n!=="input"&&ce(t,n,"name",m.name,m,null),ce(t,n,"formEncType",m.formEncType,m,null),ce(t,n,"formMethod",m.formMethod,m,null),ce(t,n,"formTarget",m.formTarget,m,null)):(ce(t,n,"encType",m.encType,m,null),ce(t,n,"method",m.method,m,null),ce(t,n,"target",m.target,m,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Jo(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Fn);break;case"onScroll":l!=null&&Qt("scroll",t);break;case"onScrollEnd":l!=null&&Qt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(a=l.__html,a!=null){if(m.children!=null)throw Error(o(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Jo(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Qt("beforetoggle",t),Qt("toggle",t),Bo(t,"popover",l);break;case"xlinkActuate":kn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":kn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":kn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":kn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":kn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":kn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":kn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":kn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":kn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Bo(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ey.get(a)||a,Bo(t,a,l))}}function Au(t,n,a,l,m,S){switch(a){case"style":ed(t,l,S);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(a=l.__html,a!=null){if(m.children!=null)throw Error(o(60));t.innerHTML=a}}break;case"children":typeof l=="string"?os(t,l):(typeof l=="number"||typeof l=="bigint")&&os(t,""+l);break;case"onScroll":l!=null&&Qt("scroll",t);break;case"onScrollEnd":l!=null&&Qt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Fn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xc.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(m=a.endsWith("Capture"),n=a.slice(2,m?a.length-7:void 0),S=t[$e]||null,S=S!=null?S[a]:null,typeof S=="function"&&t.removeEventListener(n,S,m),typeof l=="function")){typeof S!="function"&&S!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,l,m);break t}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Bo(t,a,l)}}}function Ve(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qt("error",t),Qt("load",t);var l=!1,m=!1,S;for(S in a)if(a.hasOwnProperty(S)){var D=a[S];if(D!=null)switch(S){case"src":l=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:ce(t,n,S,D,a,null)}}m&&ce(t,n,"srcSet",a.srcSet,a,null),l&&ce(t,n,"src",a.src,a,null);return;case"input":Qt("invalid",t);var G=S=D=m=null,tt=null,pt=null;for(l in a)if(a.hasOwnProperty(l)){var bt=a[l];if(bt!=null)switch(l){case"name":m=bt;break;case"type":D=bt;break;case"checked":tt=bt;break;case"defaultChecked":pt=bt;break;case"value":S=bt;break;case"defaultValue":G=bt;break;case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(o(137,n));break;default:ce(t,n,l,bt,a,null)}}Wc(t,S,G,tt,pt,D,m,!1);return;case"select":Qt("invalid",t),l=D=S=null;for(m in a)if(a.hasOwnProperty(m)&&(G=a[m],G!=null))switch(m){case"value":S=G;break;case"defaultValue":D=G;break;case"multiple":l=G;default:ce(t,n,m,G,a,null)}n=S,a=D,t.multiple=!!l,n!=null?ss(t,!!l,n,!1):a!=null&&ss(t,!!l,a,!0);return;case"textarea":Qt("invalid",t),S=m=l=null;for(D in a)if(a.hasOwnProperty(D)&&(G=a[D],G!=null))switch(D){case"value":l=G;break;case"defaultValue":m=G;break;case"children":S=G;break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(o(91));break;default:ce(t,n,D,G,a,null)}jc(t,l,m,S);return;case"option":for(tt in a)if(a.hasOwnProperty(tt)&&(l=a[tt],l!=null))switch(tt){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ce(t,n,tt,l,a,null)}return;case"dialog":Qt("beforetoggle",t),Qt("toggle",t),Qt("cancel",t),Qt("close",t);break;case"iframe":case"object":Qt("load",t);break;case"video":case"audio":for(l=0;l<_o.length;l++)Qt(_o[l],t);break;case"image":Qt("error",t),Qt("load",t);break;case"details":Qt("toggle",t);break;case"embed":case"source":case"link":Qt("error",t),Qt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pt in a)if(a.hasOwnProperty(pt)&&(l=a[pt],l!=null))switch(pt){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:ce(t,n,pt,l,a,null)}return;default:if(Lr(n)){for(bt in a)a.hasOwnProperty(bt)&&(l=a[bt],l!==void 0&&Au(t,n,bt,l,a,void 0));return}}for(G in a)a.hasOwnProperty(G)&&(l=a[G],l!=null&&ce(t,n,G,l,a,null))}function _0(t,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,S=null,D=null,G=null,tt=null,pt=null,bt=null;for(At in a){var wt=a[At];if(a.hasOwnProperty(At)&&wt!=null)switch(At){case"checked":break;case"value":break;case"defaultValue":tt=wt;default:l.hasOwnProperty(At)||ce(t,n,At,null,l,wt)}}for(var mt in l){var At=l[mt];if(wt=a[mt],l.hasOwnProperty(mt)&&(At!=null||wt!=null))switch(mt){case"type":S=At;break;case"name":m=At;break;case"checked":pt=At;break;case"defaultChecked":bt=At;break;case"value":D=At;break;case"defaultValue":G=At;break;case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(o(137,n));break;default:At!==wt&&ce(t,n,mt,At,l,wt)}}Nr(t,D,G,tt,pt,bt,S,m);return;case"select":At=D=G=mt=null;for(S in a)if(tt=a[S],a.hasOwnProperty(S)&&tt!=null)switch(S){case"value":break;case"multiple":At=tt;default:l.hasOwnProperty(S)||ce(t,n,S,null,l,tt)}for(m in l)if(S=l[m],tt=a[m],l.hasOwnProperty(m)&&(S!=null||tt!=null))switch(m){case"value":mt=S;break;case"defaultValue":G=S;break;case"multiple":D=S;default:S!==tt&&ce(t,n,m,S,l,tt)}n=G,a=D,l=At,mt!=null?ss(t,!!a,mt,!1):!!l!=!!a&&(n!=null?ss(t,!!a,n,!0):ss(t,!!a,a?[]:"",!1));return;case"textarea":At=mt=null;for(G in a)if(m=a[G],a.hasOwnProperty(G)&&m!=null&&!l.hasOwnProperty(G))switch(G){case"value":break;case"children":break;default:ce(t,n,G,null,l,m)}for(D in l)if(m=l[D],S=a[D],l.hasOwnProperty(D)&&(m!=null||S!=null))switch(D){case"value":mt=m;break;case"defaultValue":At=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(o(91));break;default:m!==S&&ce(t,n,D,m,l,S)}Zc(t,mt,At);return;case"option":for(var Lt in a)if(mt=a[Lt],a.hasOwnProperty(Lt)&&mt!=null&&!l.hasOwnProperty(Lt))switch(Lt){case"selected":t.selected=!1;break;default:ce(t,n,Lt,null,l,mt)}for(tt in l)if(mt=l[tt],At=a[tt],l.hasOwnProperty(tt)&&mt!==At&&(mt!=null||At!=null))switch(tt){case"selected":t.selected=mt&&typeof mt!="function"&&typeof mt!="symbol";break;default:ce(t,n,tt,mt,l,At)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ht in a)mt=a[Ht],a.hasOwnProperty(Ht)&&mt!=null&&!l.hasOwnProperty(Ht)&&ce(t,n,Ht,null,l,mt);for(pt in l)if(mt=l[pt],At=a[pt],l.hasOwnProperty(pt)&&mt!==At&&(mt!=null||At!=null))switch(pt){case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(o(137,n));break;default:ce(t,n,pt,mt,l,At)}return;default:if(Lr(n)){for(var de in a)mt=a[de],a.hasOwnProperty(de)&&mt!==void 0&&!l.hasOwnProperty(de)&&Au(t,n,de,void 0,l,mt);for(bt in l)mt=l[bt],At=a[bt],!l.hasOwnProperty(bt)||mt===At||mt===void 0&&At===void 0||Au(t,n,bt,mt,l,At);return}}for(var ut in a)mt=a[ut],a.hasOwnProperty(ut)&&mt!=null&&!l.hasOwnProperty(ut)&&ce(t,n,ut,null,l,mt);for(wt in l)mt=l[wt],At=a[wt],!l.hasOwnProperty(wt)||mt===At||mt==null&&At==null||ce(t,n,wt,mt,l,At)}function ip(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function M0(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var m=a[l],S=m.transferSize,D=m.initiatorType,G=m.duration;if(S&&G&&ip(D)){for(D=0,G=m.responseEnd,l+=1;l<a.length;l++){var tt=a[l],pt=tt.startTime;if(pt>G)break;var bt=tt.transferSize,wt=tt.initiatorType;bt&&ip(wt)&&(tt=tt.responseEnd,D+=bt*(tt<G?1:(G-pt)/(tt-pt)))}if(--l,n+=8*(S+D)/(m.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Su=null,Tu=null;function za(t){return t.nodeType===9?t:t.ownerDocument}function sp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function op(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Eu(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var bu=null;function I0(){var t=window.event;return t&&t.type==="popstate"?t===bu?!1:(bu=t,!0):(bu=null,!1)}var ap=typeof setTimeout=="function"?setTimeout:void 0,N0=typeof clearTimeout=="function"?clearTimeout:void 0,rp=typeof Promise=="function"?Promise:void 0,D0=typeof queueMicrotask=="function"?queueMicrotask:typeof rp<"u"?function(t){return rp.resolve(null).then(t).catch(L0)}:ap;function L0(t){setTimeout(function(){throw t})}function bi(t){return t==="head"}function lp(t,n){var a=n,l=0;do{var m=a.nextSibling;if(t.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(m),Fs(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Io(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Io(a);for(var S=a.firstChild;S;){var D=S.nextSibling,G=S.nodeName;S[Js]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&S.rel.toLowerCase()==="stylesheet"||a.removeChild(S),S=D}}else a==="body"&&Io(t.ownerDocument.body);a=m}while(a);Fs(n)}function up(t,n){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Cu(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Cu(a),Mr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function P0(t,n,a,l){for(;t.nodeType===1;){var m=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Js])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(S=t.getAttribute("rel"),S==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(S!==m.rel||t.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||t.getAttribute("title")!==(m.title==null?null:m.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(S=t.getAttribute("src"),(S!==(m.src==null?null:m.src)||t.getAttribute("type")!==(m.type==null?null:m.type)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&S&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var S=m.name==null?null:""+m.name;if(m.type==="hidden"&&t.getAttribute("name")===S)return t}else return t;if(t=yn(t.nextSibling),t===null)break}return null}function k0(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=yn(t.nextSibling),t===null))return null;return t}function cp(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=yn(t.nextSibling),t===null))return null;return t}function xu(t){return t.data==="$?"||t.data==="$~"}function wu(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function F0(t,n){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function yn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Ru=null;function dp(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(n===0)return yn(t.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}t=t.nextSibling}return null}function fp(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return t;n--}else a!=="/$"&&a!=="/&"||n++}t=t.previousSibling}return null}function hp(t,n,a){switch(n=za(a),t){case"html":if(t=n.documentElement,!t)throw Error(o(452));return t;case"head":if(t=n.head,!t)throw Error(o(453));return t;case"body":if(t=n.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Io(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Mr(t)}var An=new Map,pp=new Set;function qa(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Zn=dt.d;dt.d={f:U0,r:O0,D:G0,C:H0,L:V0,m:z0,X:B0,S:q0,M:Y0};function U0(){var t=Zn.f(),n=Pa();return t||n}function O0(t){var n=es(t);n!==null&&n.tag===5&&n.type==="form"?Nf(n):Zn.r(t)}var Ls=typeof document>"u"?null:document;function mp(t,n,a){var l=Ls;if(l&&typeof n=="string"&&n){var m=dn(n);m='link[rel="'+t+'"][href="'+m+'"]',typeof a=="string"&&(m+='[crossorigin="'+a+'"]'),pp.has(m)||(pp.add(m),t={rel:t,crossOrigin:a,href:n},l.querySelector(m)===null&&(n=l.createElement("link"),Ve(n,"link",t),De(n),l.head.appendChild(n)))}}function G0(t){Zn.D(t),mp("dns-prefetch",t,null)}function H0(t,n){Zn.C(t,n),mp("preconnect",t,n)}function V0(t,n,a){Zn.L(t,n,a);var l=Ls;if(l&&t&&n){var m='link[rel="preload"][as="'+dn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(m+='[imagesrcset="'+dn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(m+='[imagesizes="'+dn(a.imageSizes)+'"]')):m+='[href="'+dn(t)+'"]';var S=m;switch(n){case"style":S=Ps(t);break;case"script":S=ks(t)}An.has(S)||(t=A({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),An.set(S,t),l.querySelector(m)!==null||n==="style"&&l.querySelector(No(S))||n==="script"&&l.querySelector(Do(S))||(n=l.createElement("link"),Ve(n,"link",t),De(n),l.head.appendChild(n)))}}function z0(t,n){Zn.m(t,n);var a=Ls;if(a&&t){var l=n&&typeof n.as=="string"?n.as:"script",m='link[rel="modulepreload"][as="'+dn(l)+'"][href="'+dn(t)+'"]',S=m;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=ks(t)}if(!An.has(S)&&(t=A({rel:"modulepreload",href:t},n),An.set(S,t),a.querySelector(m)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Do(S)))return}l=a.createElement("link"),Ve(l,"link",t),De(l),a.head.appendChild(l)}}}function q0(t,n,a){Zn.S(t,n,a);var l=Ls;if(l&&t){var m=ns(l).hoistableStyles,S=Ps(t);n=n||"default";var D=m.get(S);if(!D){var G={loading:0,preload:null};if(D=l.querySelector(No(S)))G.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":n},a),(a=An.get(S))&&_u(t,a);var tt=D=l.createElement("link");De(tt),Ve(tt,"link",t),tt._p=new Promise(function(pt,bt){tt.onload=pt,tt.onerror=bt}),tt.addEventListener("load",function(){G.loading|=1}),tt.addEventListener("error",function(){G.loading|=2}),G.loading|=4,Ba(D,n,l)}D={type:"stylesheet",instance:D,count:1,state:G},m.set(S,D)}}}function B0(t,n){Zn.X(t,n);var a=Ls;if(a&&t){var l=ns(a).hoistableScripts,m=ks(t),S=l.get(m);S||(S=a.querySelector(Do(m)),S||(t=A({src:t,async:!0},n),(n=An.get(m))&&Mu(t,n),S=a.createElement("script"),De(S),Ve(S,"link",t),a.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},l.set(m,S))}}function Y0(t,n){Zn.M(t,n);var a=Ls;if(a&&t){var l=ns(a).hoistableScripts,m=ks(t),S=l.get(m);S||(S=a.querySelector(Do(m)),S||(t=A({src:t,async:!0,type:"module"},n),(n=An.get(m))&&Mu(t,n),S=a.createElement("script"),De(S),Ve(S,"link",t),a.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},l.set(m,S))}}function gp(t,n,a,l){var m=(m=yt.current)?qa(m):null;if(!m)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Ps(a.href),a=ns(m).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ps(a.href);var S=ns(m).hoistableStyles,D=S.get(t);if(D||(m=m.ownerDocument||m,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(t,D),(S=m.querySelector(No(t)))&&!S._p&&(D.instance=S,D.state.loading=5),An.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},An.set(t,a),S||X0(m,t,a,D.state))),n&&l===null)throw Error(o(528,""));return D}if(n&&l!==null)throw Error(o(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ks(a),a=ns(m).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Ps(t){return'href="'+dn(t)+'"'}function No(t){return'link[rel="stylesheet"]['+t+"]"}function vp(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function X0(t,n,a,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Ve(n,"link",a),De(n),t.head.appendChild(n))}function ks(t){return'[src="'+dn(t)+'"]'}function Do(t){return"script[async]"+t}function yp(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+dn(a.href)+'"]');if(l)return n.instance=l,De(l),l;var m=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),De(l),Ve(l,"style",m),Ba(l,a.precedence,t),n.instance=l;case"stylesheet":m=Ps(a.href);var S=t.querySelector(No(m));if(S)return n.state.loading|=4,n.instance=S,De(S),S;l=vp(a),(m=An.get(m))&&_u(l,m),S=(t.ownerDocument||t).createElement("link"),De(S);var D=S;return D._p=new Promise(function(G,tt){D.onload=G,D.onerror=tt}),Ve(S,"link",l),n.state.loading|=4,Ba(S,a.precedence,t),n.instance=S;case"script":return S=ks(a.src),(m=t.querySelector(Do(S)))?(n.instance=m,De(m),m):(l=a,(m=An.get(S))&&(l=A({},a),Mu(l,m)),t=t.ownerDocument||t,m=t.createElement("script"),De(m),Ve(m,"link",l),t.head.appendChild(m),n.instance=m);case"void":return null;default:throw Error(o(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Ba(l,a.precedence,t));return n.instance}function Ba(t,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=l.length?l[l.length-1]:null,S=m,D=0;D<l.length;D++){var G=l[D];if(G.dataset.precedence===n)S=G;else if(S!==m)break}S?S.parentNode.insertBefore(t,S.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function _u(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Mu(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Ya=null;function Ap(t,n,a){if(Ya===null){var l=new Map,m=Ya=new Map;m.set(a,l)}else m=Ya,l=m.get(a),l||(l=new Map,m.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),m=0;m<a.length;m++){var S=a[m];if(!(S[Js]||S[Ue]||t==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var D=S.getAttribute(n)||"";D=t+D;var G=l.get(D);G?G.push(S):l.set(D,[S])}}return l}function Sp(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function J0(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Tp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function $0(t,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=Ps(l.href),S=n.querySelector(No(m));if(S){n=S._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=Xa.bind(t),n.then(t,t)),a.state.loading|=4,a.instance=S,De(S);return}S=n.ownerDocument||n,l=vp(l),(m=An.get(m))&&_u(l,m),S=S.createElement("link"),De(S);var D=S;D._p=new Promise(function(G,tt){D.onload=G,D.onerror=tt}),Ve(S,"link",l),a.instance=S}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Xa.bind(t),n.addEventListener("load",a),n.addEventListener("error",a))}}var Iu=0;function K0(t,n){return t.stylesheets&&t.count===0&&$a(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&$a(t,t.stylesheets),t.unsuspend){var S=t.unsuspend;t.unsuspend=null,S()}},6e4+n);0<t.imgBytes&&Iu===0&&(Iu=62500*M0());var m=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&$a(t,t.stylesheets),t.unsuspend)){var S=t.unsuspend;t.unsuspend=null,S()}},(t.imgBytes>Iu?50:800)+n);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(m)}}:null}function Xa(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$a(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ja=null;function $a(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ja=new Map,n.forEach(Q0,t),Ja=null,Xa.call(t))}function Q0(t,n){if(!(n.state.loading&4)){var a=Ja.get(t);if(a)var l=a.get(null);else{a=new Map,Ja.set(t,a);for(var m=t.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<m.length;S++){var D=m[S];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(a.set(D.dataset.precedence,D),l=D)}l&&a.set(null,l)}m=n.instance,D=m.getAttribute("data-precedence"),S=a.get(D)||l,S===l&&a.set(null,m),a.set(D,m),this.count++,l=Xa.bind(this),m.addEventListener("load",l),m.addEventListener("error",l),S?S.parentNode.insertBefore(m,S.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(m,t.firstChild)),n.state.loading|=4}}var Lo={$$typeof:P,Provider:null,Consumer:null,_currentValue:vt,_currentValue2:vt,_threadCount:0};function W0(t,n,a,l,m,S,D,G,tt){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ni(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ni(0),this.hiddenUpdates=ni(null),this.identifierPrefix=l,this.onUncaughtError=m,this.onCaughtError=S,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=tt,this.incompleteTransitions=new Map}function Ep(t,n,a,l,m,S,D,G,tt,pt,bt,wt){return t=new W0(t,n,a,D,tt,pt,bt,wt,G),n=1,S===!0&&(n|=24),S=sn(3,null,null,n),t.current=S,S.stateNode=t,n=ul(),n.refCount++,t.pooledCache=n,n.refCount++,S.memoizedState={element:l,isDehydrated:a,cache:n},hl(S),t}function bp(t){return t?(t=fs,t):fs}function Cp(t,n,a,l,m,S){m=bp(m),l.context===null?l.context=m:l.pendingContext=m,l=fi(n),l.payload={element:a},S=S===void 0?null:S,S!==null&&(l.callback=S),a=hi(t,l,n),a!==null&&(tn(a,t,n),co(a,t,n))}function xp(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function Nu(t,n){xp(t,n),(t=t.alternate)&&xp(t,n)}function wp(t){if(t.tag===13||t.tag===31){var n=ki(t,67108864);n!==null&&tn(n,t,67108864),Nu(t,67108864)}}function Rp(t){if(t.tag===13||t.tag===31){var n=un();n=Mn(n);var a=ki(t,n);a!==null&&tn(a,t,n),Nu(t,n)}}var Ka=!0;function Z0(t,n,a,l){var m=X.T;X.T=null;var S=dt.p;try{dt.p=2,Du(t,n,a,l)}finally{dt.p=S,X.T=m}}function j0(t,n,a,l){var m=X.T;X.T=null;var S=dt.p;try{dt.p=8,Du(t,n,a,l)}finally{dt.p=S,X.T=m}}function Du(t,n,a,l){if(Ka){var m=Lu(l);if(m===null)yu(t,n,l,Qa,a),Mp(t,l);else if(eA(m,t,n,a,l))l.stopPropagation();else if(Mp(t,l),n&4&&-1<tA.indexOf(t)){for(;m!==null;){var S=es(m);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var D=ze(S.pendingLanes);if(D!==0){var G=S;for(G.pendingLanes|=2,G.entangledLanes|=2;D;){var tt=1<<31-ae(D);G.entanglements[1]|=tt,D&=~tt}Ln(S),(oe&6)===0&&(Da=Et()+500,Ro(0))}}break;case 31:case 13:G=ki(S,2),G!==null&&tn(G,S,2),Pa(),Nu(S,2)}if(S=Lu(l),S===null&&yu(t,n,l,Qa,a),S===m)break;m=S}m!==null&&l.stopPropagation()}else yu(t,n,l,null,a)}}function Lu(t){return t=kr(t),Pu(t)}var Qa=null;function Pu(t){if(Qa=null,t=ts(t),t!==null){var n=u(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=d(n),t!==null)return t;t=null}else if(a===31){if(t=p(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Qa=t,null}function _p(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(St()){case Mt:return 2;case Dt:return 8;case Nt:case Ft:return 32;case Pt:return 268435456;default:return 32}default:return 32}}var ku=!1,Ci=null,xi=null,wi=null,Po=new Map,ko=new Map,Ri=[],tA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mp(t,n){switch(t){case"focusin":case"focusout":Ci=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":wi=null;break;case"pointerover":case"pointerout":Po.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ko.delete(n.pointerId)}}function Fo(t,n,a,l,m,S){return t===null||t.nativeEvent!==S?(t={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:S,targetContainers:[m]},n!==null&&(n=es(n),n!==null&&wp(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,m!==null&&n.indexOf(m)===-1&&n.push(m),t)}function eA(t,n,a,l,m){switch(n){case"focusin":return Ci=Fo(Ci,t,n,a,l,m),!0;case"dragenter":return xi=Fo(xi,t,n,a,l,m),!0;case"mouseover":return wi=Fo(wi,t,n,a,l,m),!0;case"pointerover":var S=m.pointerId;return Po.set(S,Fo(Po.get(S)||null,t,n,a,l,m)),!0;case"gotpointercapture":return S=m.pointerId,ko.set(S,Fo(ko.get(S)||null,t,n,a,l,m)),!0}return!1}function Ip(t){var n=ts(t.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=d(a),n!==null){t.blockedOn=n,qc(t.priority,function(){Rp(a)});return}}else if(n===31){if(n=p(a),n!==null){t.blockedOn=n,qc(t.priority,function(){Rp(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wa(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=Lu(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Pr=l,a.target.dispatchEvent(l),Pr=null}else return n=es(a),n!==null&&wp(n),t.blockedOn=a,!1;n.shift()}return!0}function Np(t,n,a){Wa(t)&&a.delete(n)}function nA(){ku=!1,Ci!==null&&Wa(Ci)&&(Ci=null),xi!==null&&Wa(xi)&&(xi=null),wi!==null&&Wa(wi)&&(wi=null),Po.forEach(Np),ko.forEach(Np)}function Za(t,n){t.blockedOn===n&&(t.blockedOn=null,ku||(ku=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,nA)))}var ja=null;function Dp(t){ja!==t&&(ja=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ja===t&&(ja=null);for(var n=0;n<t.length;n+=3){var a=t[n],l=t[n+1],m=t[n+2];if(typeof l!="function"){if(Pu(l||a)===null)continue;break}var S=es(a);S!==null&&(t.splice(n,3),n-=3,Ll(S,{pending:!0,data:m,method:a.method,action:l},l,m))}}))}function Fs(t){function n(tt){return Za(tt,t)}Ci!==null&&Za(Ci,t),xi!==null&&Za(xi,t),wi!==null&&Za(wi,t),Po.forEach(n),ko.forEach(n);for(var a=0;a<Ri.length;a++){var l=Ri[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ri.length&&(a=Ri[0],a.blockedOn===null);)Ip(a),a.blockedOn===null&&Ri.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var m=a[l],S=a[l+1],D=m[$e]||null;if(typeof S=="function")D||Dp(a);else if(D){var G=null;if(S&&S.hasAttribute("formAction")){if(m=S,D=S[$e]||null)G=D.formAction;else if(Pu(m)!==null)continue}else G=D.action;typeof G=="function"?a[l+1]=G:(a.splice(l,3),l-=3),Dp(a)}}}function Lp(){function t(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(D){return m=D})},focusReset:"manual",scroll:"manual"})}function n(){m!==null&&(m(),m=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,m=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),m!==null&&(m(),m=null)}}}function Fu(t){this._internalRoot=t}tr.prototype.render=Fu.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(o(409));var a=n.current,l=un();Cp(a,l,t,n,null,null)},tr.prototype.unmount=Fu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Cp(t.current,2,null,t,null,null),Pa(),n[ji]=null}};function tr(t){this._internalRoot=t}tr.prototype.unstable_scheduleHydration=function(t){if(t){var n=zc();t={blockedOn:null,target:t,priority:n};for(var a=0;a<Ri.length&&n!==0&&n<Ri[a].priority;a++);Ri.splice(a,0,t),a===0&&Ip(t)}};var Pp=e.version;if(Pp!=="19.2.4")throw Error(o(527,Pp,"19.2.4"));dt.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=h(n),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var iA={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var er=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!er.isDisabled&&er.supportsFiber)try{Xt=er.inject(iA),$t=er}catch{}}return Oo.createRoot=function(t,n){if(!r(t))throw Error(o(299));var a=!1,l="",m=Vf,S=zf,D=qf;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(m=n.onUncaughtError),n.onCaughtError!==void 0&&(S=n.onCaughtError),n.onRecoverableError!==void 0&&(D=n.onRecoverableError)),n=Ep(t,1,!1,null,null,a,l,null,m,S,D,Lp),t[ji]=n.current,vu(t),new Fu(n)},Oo.hydrateRoot=function(t,n,a){if(!r(t))throw Error(o(299));var l=!1,m="",S=Vf,D=zf,G=qf,tt=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(S=a.onUncaughtError),a.onCaughtError!==void 0&&(D=a.onCaughtError),a.onRecoverableError!==void 0&&(G=a.onRecoverableError),a.formState!==void 0&&(tt=a.formState)),n=Ep(t,1,!0,n,a??null,l,m,tt,S,D,G,Lp),n.context=bp(null),a=n.current,l=un(),l=Mn(l),m=fi(l),m.callback=null,hi(a,m,l),a=l,n.current.lanes=a,en(n,a),Ln(n),t[ji]=n.current,vu(t),new tr(n)},Oo.version="19.2.4",Oo}var Bp;function pA(){if(Bp)return Gu.exports;Bp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Gu.exports=hA(),Gu.exports}var mA=pA();const gA=_c(mA),vA=({onOpenProtocol:i,onUploadClick:e,onOpenSettings:s,hasApiKey:o})=>B.jsxs("header",{className:"bg-card border-b border-border px-6 py-4 flex justify-between items-center flex-wrap gap-4",children:[B.jsxs("div",{className:"flex items-center gap-3",children:[B.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-red-500 rounded-lg flex items-center justify-center text-xl shadow-lg",children:""}),B.jsxs("div",{children:[B.jsx("h1",{className:"text-lg font-bold leading-tight",children:"GenAI Transparency Coder"}),B.jsxs("span",{className:"text-xs text-muted uppercase tracking-wider font-medium flex items-center gap-2",children:["Protocol v2.0 ",B.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-br from-blue-600 to-red-600 rounded text-[10px] text-white font-bold",children:" Powered by Gemini"})]})]})]}),B.jsxs("div",{className:"flex gap-3 items-center flex-wrap",children:[B.jsx("button",{onClick:s,className:`px-4 py-2 rounded-lg font-semibold text-sm border transition-colors flex items-center gap-2 ${o?"border-success/40 text-success hover:bg-success/10":"border-warning/60 text-warning hover:bg-warning/10 animate-pulse"}`,title:o?"API Key is set":"No API Key  click to configure",children:o?" API Key ":" Set API Key"}),B.jsx("button",{onClick:i,className:"px-4 py-2 rounded-lg font-semibold text-sm border border-border hover:bg-input transition-colors flex items-center gap-2",children:" Protocol"}),B.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg font-semibold text-sm bg-gradient-to-br from-blue-500 to-blue-400 text-white hover:opacity-90 transition-opacity flex items-center gap-2 shadow-lg shadow-blue-500/20",children:" Upload PDF"})]})]}),yA=({isOpen:i,onClose:e})=>i?B.jsx("div",{className:"fixed inset-0 bg-slate-900/90 flex items-center justify-center z-50 p-8",onClick:e,children:B.jsxs("div",{className:"bg-card rounded-2xl max-w-3xl w-full max-h-[85vh] overflow-hidden flex flex-col shadow-2xl border border-border",onClick:s=>s.stopPropagation(),children:[B.jsxs("div",{className:"p-5 border-b border-border flex justify-between items-center bg-card",children:[B.jsxs("div",{children:[B.jsx("h2",{className:"text-xl font-bold",children:" GenAI Transparency Protocol v2.0"}),B.jsx("p",{className:"text-xs text-muted mt-1",children:"Revised February 2026  Based on Expert Panel Review"})]}),B.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center rounded-lg border border-border hover:bg-danger hover:border-danger hover:text-white transition-colors text-xl leading-none",children:""})]}),B.jsxs("div",{className:"p-6 overflow-y-auto space-y-8 text-sm",children:[B.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 p-4 rounded-lg space-y-2",children:[B.jsx("h3",{className:"text-primary font-bold text-sm uppercase tracking-wider mb-3",children:"General Coding Rules"}),B.jsx(nr,{num:"1",text:"MULTIPLE LOCATIONS: Code the HIGHEST transparency level observed."}),B.jsx(nr,{num:"2",text:"MULTIPLE TOOLS: Code the MOST SPECIFICALLY identified tool (and note others)."}),B.jsx(nr,{num:"3",text:"MULTIPLE PURPOSES: Code the MOST CONSEQUENTIAL use for the research."}),B.jsx(nr,{num:"4",text:"SELF-DECLARATION: Code based on author self-declaration only."})]}),B.jsxs(Us,{title:"V1. Location of Statement (1-5)",question:"Where is GenAI use reported?",children:[B.jsx(ee,{code:"1",text:"Footnotes / Brief Notes",desc:"Footnote, First page note, Author notes, Parenthetical mention"}),B.jsx(ee,{code:"2",text:"Standard End Sections",desc:"Acknowledgments, Statement, Disclosure sections"}),B.jsx(ee,{code:"3",text:"Formal GenAI Declaration",desc:"Dedicated GenAI declaration section with specific heading"}),B.jsx(ee,{code:"4",text:"Main Text Integration",desc:"Methodology, Data Analysis, Results, Findings"}),B.jsx(ee,{code:"5",text:"Full Transparency + Evidence",desc:"Appendix, Supplementary Material, Web Appendix with evidence"})]}),B.jsxs(Us,{title:"V2. Tool Specificity (1-5)",question:"Which tool was used and how specifically was it identified?",children:[B.jsx(ee,{code:"1",text:"Generic Terms Only",desc:"LLM, Generative AI, GenAI, AI tool (No brand)"}),B.jsx(ee,{code:"2",text:"Brand/Model Name",desc:"ChatGPT, Gemini, Claude (No version)"}),B.jsx(ee,{code:"3",text:"Version Number",desc:"ChatGPT 4.0, GPT-3.5, ChatGPT 4o, Claude 3"}),B.jsx(ee,{code:"4",text:"Version + Access Date",desc:"Version plus specific access date"}),B.jsx(ee,{code:"5",text:"Technical Identifier / API",desc:"gpt-4o-2024-05-13, custom GPT links"})]}),B.jsxs(Us,{title:"V3. Purpose of Use (0-5)",question:"What was GenAI used for in the research process?",children:[B.jsx(ee,{code:"0",text:"No Specific Action",desc:"Generic 'used/employed' only, no action verb"}),B.jsx(ee,{code:"1",text:"Language Editing (Passive)",desc:"Grammar, spelling, polish, readability, flow"}),B.jsx(ee,{code:"2",text:"Writing Support (Active)",desc:"Paraphrasing, summarizing, rewriting, restructuring"}),B.jsx(ee,{code:"3",text:"Content/Stimuli Generation",desc:"Scenarios, images, ads, stimuli, survey items"}),B.jsx(ee,{code:"4",text:"Analytic/Technical Tasks",desc:"Classification, sentiment analysis, coding"}),B.jsx(ee,{code:"5",text:"Methodological Integration",desc:"Synthetic data, simulated participants, core method"})]}),B.jsxs(Us,{title:"V4. Prompt Disclosure (0-5)",question:"Were prompts or instructions shared?",children:[B.jsx(ee,{code:"0",text:"No Prompt Information",desc:"Or 'improved readability' only"}),B.jsx(ee,{code:"1",text:"General Statement",desc:"'Prompts were given' (no examples)"}),B.jsx(ee,{code:"2",text:"Single Example",desc:"One quoted command or single summarized prompt"}),B.jsx(ee,{code:"3",text:"Multiple Examples",desc:"Two or more distinct prompt examples"}),B.jsx(ee,{code:"4",text:"Prompt + Rationale",desc:"Prompts plus explanation of design logic/strategy"}),B.jsx(ee,{code:"5",text:"Complete Prompt Archive",desc:"Full sequence in appendix or accessible link"})]}),B.jsxs(Us,{title:"V5. Human Verification (0-5)",question:"Did humans verify, review, or validate outputs?",children:[B.jsx(ee,{code:"0",text:"No Statement",desc:"No mention of verification"}),B.jsx(ee,{code:"1",text:"General Statement",desc:"Passive 'outputs were checked'"}),B.jsx(ee,{code:"2",text:"Author-Specific Statement",desc:"'The authors reviewed and edited...'"}),B.jsx(ee,{code:"3",text:"Procedural Detail",desc:"Specific method (line-by-line) or threshold"}),B.jsx(ee,{code:"4",text:"Multiple Verification Methods",desc:"Two or more approaches (e.g., Authors + External)"}),B.jsx(ee,{code:"5",text:"Systematic Validation",desc:"Comparison with human benchmark, stats agreement"})]}),B.jsxs(Us,{title:"V6. Limitation Acknowledgment (0-5)",question:"Were limitations, risks, or biases acknowledged?",children:[B.jsx(ee,{code:"0",text:"No Information",desc:"No mention of risk/error"}),B.jsx(ee,{code:"1",text:"General Warning",desc:"'AI can make mistakes', 'not perfect'"}),B.jsx(ee,{code:"2",text:"Specific Limitation Type",desc:"Hallucination, bias, specific error type"}),B.jsx(ee,{code:"3",text:"Tool-Specific Limitation",desc:"Specific model/tool paired with limitation"}),B.jsx(ee,{code:"4",text:"Research Impact Statement",desc:"How limitation impacted THIS study"}),B.jsx(ee,{code:"5",text:"Comprehensive Risk Analysis",desc:"Extended discussion (ethics, privacy, validity)"})]}),B.jsxs("div",{className:"bg-card border border-border p-5 rounded-xl",children:[B.jsx("h3",{className:"text-primary font-bold mb-3 text-sm uppercase",children:"Total Score Interpretation"}),B.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-xs",children:[B.jsxs("div",{className:"bg-bg p-3 rounded border border-border flex flex-col gap-1",children:[B.jsx("span",{className:"font-mono text-lg font-bold text-primary",children:"2-12"}),B.jsx("span",{className:"font-bold",children:"Low Transparency"}),B.jsx("span",{className:"text-muted",children:"Minimal disclosure, reproducibility concerns."})]}),B.jsxs("div",{className:"bg-bg p-3 rounded border border-border flex flex-col gap-1",children:[B.jsx("span",{className:"font-mono text-lg font-bold text-primary",children:"13-21"}),B.jsx("span",{className:"font-bold",children:"Moderate Transparency"}),B.jsx("span",{className:"text-muted",children:"Partial disclosure, some gaps remain."})]}),B.jsxs("div",{className:"bg-bg p-3 rounded border border-border flex flex-col gap-1",children:[B.jsx("span",{className:"font-mono text-lg font-bold text-primary",children:"22-30"}),B.jsx("span",{className:"font-bold",children:"High Transparency"}),B.jsx("span",{className:"text-muted",children:"Comprehensive disclosure, good reproducibility."})]})]})]})]})]})}):null,Us=({title:i,question:e,children:s})=>B.jsxs("div",{children:[B.jsxs("div",{className:"mb-3",children:[B.jsx("h3",{className:"text-primary font-bold text-base",children:i}),e&&B.jsx("p",{className:"text-muted italic text-xs",children:e})]}),B.jsx("div",{className:"grid gap-2",children:s})]}),ee=({code:i,text:e,desc:s})=>B.jsxs("div",{className:"flex gap-4 px-4 py-3 bg-input/50 border border-transparent hover:border-border rounded-lg items-center transition-colors",children:[B.jsx("span",{className:"font-mono font-bold text-primary text-lg min-w-[24px] text-center",children:i}),B.jsxs("div",{className:"flex-1",children:[B.jsx("div",{className:"font-semibold text-text",children:e}),B.jsx("div",{className:"text-dim text-xs",children:s})]})]}),nr=({num:i,text:e})=>B.jsxs("div",{className:"flex gap-2 text-xs text-text/90",children:[B.jsxs("span",{className:"font-bold text-primary",children:["RULE ",i,":"]}),B.jsx("span",{children:e})]}),AA="modulepreload",SA=function(i){return"/genai-transparency-coder/"+i},Yp={},$i=function(e,s,o){let r=Promise.resolve();if(s&&s.length>0){let d=function(h){return Promise.all(h.map(g=>Promise.resolve(g).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),y=p?.nonce||p?.getAttribute("nonce");r=d(s.map(h=>{if(h=SA(h),h in Yp)return;Yp[h]=!0;const g=h.endsWith(".css"),A=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${A}`))return;const E=document.createElement("link");if(E.rel=g?"stylesheet":AA,g||(E.as="script"),E.crossOrigin="",E.href=h,y&&E.setAttribute("nonce",y),document.head.appendChild(E),g)return new Promise((R,C)=>{E.addEventListener("load",R),E.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${h}`)))})}))}function u(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return r.then(d=>{for(const p of d||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var TA={640:((i,e,s)=>{s.d(e,{AnnotationLayer:()=>Ct,FreeTextAnnotationElement:()=>gt,InkAnnotationElement:()=>vt,StampAnnotationElement:()=>at});var o=s(266),r=s(473),u=s(780);function d(yt){return Math.floor(Math.max(0,Math.min(1,yt))*255).toString(16).padStart(2,"0")}function p(yt){return Math.max(0,Math.min(255,255*yt))}class y{static CMYK_G([F,N,b,T]){return["G",1-Math.min(1,.3*F+.59*b+.11*N+T)]}static G_CMYK([F]){return["CMYK",0,0,0,1-F]}static G_RGB([F]){return["RGB",F,F,F]}static G_rgb([F]){return F=p(F),[F,F,F]}static G_HTML([F]){const N=d(F);return`#${N}${N}${N}`}static RGB_G([F,N,b]){return["G",.3*F+.59*N+.11*b]}static RGB_rgb(F){return F.map(p)}static RGB_HTML(F){return`#${F.map(d).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([F,N,b,T]){return["RGB",1-Math.min(1,F+T),1-Math.min(1,b+T),1-Math.min(1,N+T)]}static CMYK_rgb([F,N,b,T]){return[p(1-Math.min(1,F+T)),p(1-Math.min(1,b+T)),p(1-Math.min(1,N+T))]}static CMYK_HTML(F){const N=this.CMYK_RGB(F).slice(1);return this.RGB_HTML(N)}static RGB_CMYK([F,N,b]){const T=1-F,w=1-N,M=1-b,L=Math.min(T,w,M);return["CMYK",T,w,M,L]}}var h=s(160);const g=1e3,A=9,E=new WeakSet;function R(yt){return{width:yt[2]-yt[0],height:yt[3]-yt[1]}}class C{static create(F){switch(F.data.annotationType){case o.AnnotationType.LINK:return new v(F);case o.AnnotationType.TEXT:return new x(F);case o.AnnotationType.WIDGET:switch(F.data.fieldType){case"Tx":return new P(F);case"Btn":return F.data.radioButton?new O(F):F.data.checkBox?new V(F):new q(F);case"Ch":return new et(F);case"Sig":return new k(F)}return new I(F);case o.AnnotationType.POPUP:return new W(F);case o.AnnotationType.FREETEXT:return new gt(F);case o.AnnotationType.LINE:return new Rt(F);case o.AnnotationType.SQUARE:return new _t(F);case o.AnnotationType.CIRCLE:return new Tt(F);case o.AnnotationType.POLYLINE:return new j(F);case o.AnnotationType.CARET:return new dt(F);case o.AnnotationType.INK:return new vt(F);case o.AnnotationType.POLYGON:return new X(F);case o.AnnotationType.HIGHLIGHT:return new ot(F);case o.AnnotationType.UNDERLINE:return new ct(F);case o.AnnotationType.SQUIGGLY:return new z(F);case o.AnnotationType.STRIKEOUT:return new K(F);case o.AnnotationType.STAMP:return new at(F);case o.AnnotationType.FILEATTACHMENT:return new ft(F);default:return new _(F)}}}class _{#t=!1;constructor(F,{isRenderable:N=!1,ignoreBorder:b=!1,createQuadrilaterals:T=!1}={}){this.isRenderable=N,this.data=F.data,this.layer=F.layer,this.linkService=F.linkService,this.downloadManager=F.downloadManager,this.imageResourcesPath=F.imageResourcesPath,this.renderForms=F.renderForms,this.svgFactory=F.svgFactory,this.annotationStorage=F.annotationStorage,this.enableScripting=F.enableScripting,this.hasJSActions=F.hasJSActions,this._fieldObjects=F.fieldObjects,this.parent=F.parent,N&&(this.container=this._createContainer(b)),T&&this._createQuadrilaterals()}static _hasPopupData({titleObj:F,contentsObj:N,richText:b}){return!!(F?.str||N?.str||b?.str)}get hasPopupData(){return _._hasPopupData(this.data)}_createContainer(F){const{data:N,parent:{page:b,viewport:T}}=this,w=document.createElement("section");w.setAttribute("data-annotation-id",N.id),this instanceof I||(w.tabIndex=g),w.style.zIndex=this.parent.zIndex++,this.data.popupRef&&w.setAttribute("aria-haspopup","dialog"),N.noRotate&&w.classList.add("norotate");const{pageWidth:M,pageHeight:L,pageX:U,pageY:H}=T.rawDims;if(!N.rect||this instanceof W){const{rotation:rt}=N;return!N.hasOwnCanvas&&rt!==0&&this.setRotation(rt,w),w}const{width:Y,height:$}=R(N.rect),Q=o.Util.normalizeRect([N.rect[0],b.view[3]-N.rect[1]+b.view[1],N.rect[2],b.view[3]-N.rect[3]+b.view[1]]);if(!F&&N.borderStyle.width>0){w.style.borderWidth=`${N.borderStyle.width}px`;const rt=N.borderStyle.horizontalCornerRadius,it=N.borderStyle.verticalCornerRadius;if(rt>0||it>0){const Z=`calc(${rt}px * var(--scale-factor)) / calc(${it}px * var(--scale-factor))`;w.style.borderRadius=Z}else if(this instanceof O){const Z=`calc(${Y}px * var(--scale-factor)) / calc(${$}px * var(--scale-factor))`;w.style.borderRadius=Z}switch(N.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:w.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:w.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:w.style.borderBottomStyle="solid";break}const J=N.borderColor||null;J?(this.#t=!0,w.style.borderColor=o.Util.makeHexColor(J[0]|0,J[1]|0,J[2]|0)):w.style.borderWidth=0}w.style.left=`${100*(Q[0]-U)/M}%`,w.style.top=`${100*(Q[1]-H)/L}%`;const{rotation:nt}=N;return N.hasOwnCanvas||nt===0?(w.style.width=`${100*Y/M}%`,w.style.height=`${100*$/L}%`):this.setRotation(nt,w),w}setRotation(F,N=this.container){if(!this.data.rect)return;const{pageWidth:b,pageHeight:T}=this.parent.viewport.rawDims,{width:w,height:M}=R(this.data.rect);let L,U;F%180===0?(L=100*w/b,U=100*M/T):(L=100*M/b,U=100*w/T),N.style.width=`${L}%`,N.style.height=`${U}%`,N.setAttribute("data-main-rotation",(360-F)%360)}get _commonActions(){const F=(N,b,T)=>{const w=T.detail[N],M=w[0],L=w.slice(1);T.target.style[b]=y[`${M}_HTML`](L),this.annotationStorage.setValue(this.data.id,{[b]:y[`${M}_rgb`](L)})};return(0,o.shadow)(this,"_commonActions",{display:N=>{const{display:b}=N.detail,T=b%2===1;this.container.style.visibility=T?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:T,noPrint:b===1||b===2})},print:N=>{this.annotationStorage.setValue(this.data.id,{noPrint:!N.detail.print})},hidden:N=>{const{hidden:b}=N.detail;this.container.style.visibility=b?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:b,noView:b})},focus:N=>{setTimeout(()=>N.target.focus({preventScroll:!1}),0)},userName:N=>{N.target.title=N.detail.userName},readonly:N=>{N.target.disabled=N.detail.readonly},required:N=>{this._setRequired(N.target,N.detail.required)},bgColor:N=>{F("bgColor","backgroundColor",N)},fillColor:N=>{F("fillColor","backgroundColor",N)},fgColor:N=>{F("fgColor","color",N)},textColor:N=>{F("textColor","color",N)},borderColor:N=>{F("borderColor","borderColor",N)},strokeColor:N=>{F("strokeColor","borderColor",N)},rotation:N=>{const b=N.detail.rotation;this.setRotation(b),this.annotationStorage.setValue(this.data.id,{rotation:b})}})}_dispatchEventFromSandbox(F,N){const b=this._commonActions;for(const T of Object.keys(N.detail))(F[T]||b[T])?.(N)}_setDefaultPropertiesFromJS(F){if(!this.enableScripting)return;const N=this.annotationStorage.getRawValue(this.data.id);if(!N)return;const b=this._commonActions;for(const[T,w]of Object.entries(N)){const M=b[T];if(M){const L={detail:{[T]:w},target:F};M(L),delete N[T]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:F}=this.data;if(!F)return;const[N,b,T,w]=this.data.rect;if(F.length===1){const[,{x:it,y:J},{x:Z,y:Et}]=F[0];if(T===it&&w===J&&N===Z&&b===Et)return}const{style:M}=this.container;let L;if(this.#t){const{borderColor:it,borderWidth:J}=M;M.borderWidth=0,L=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${it}" stroke-width="${J}">`],this.container.classList.add("hasBorder")}const U=T-N,H=w-b,{svgFactory:Y}=this,$=Y.createElement("svg");$.classList.add("quadrilateralsContainer"),$.setAttribute("width",0),$.setAttribute("height",0);const Q=Y.createElement("defs");$.append(Q);const nt=Y.createElement("clipPath"),rt=`clippath_${this.data.id}`;nt.setAttribute("id",rt),nt.setAttribute("clipPathUnits","objectBoundingBox"),Q.append(nt);for(const[,{x:it,y:J},{x:Z,y:Et}]of F){const St=Y.createElement("rect"),Mt=(Z-N)/U,Dt=(w-J)/H,Nt=(it-Z)/U,Ft=(J-Et)/H;St.setAttribute("x",Mt),St.setAttribute("y",Dt),St.setAttribute("width",Nt),St.setAttribute("height",Ft),nt.append(St),L?.push(`<rect vector-effect="non-scaling-stroke" x="${Mt}" y="${Dt}" width="${Nt}" height="${Ft}"/>`)}this.#t&&(L.push("</g></svg>')"),M.backgroundImage=L.join("")),this.container.append($),this.container.style.clipPath=`url(#${rt})`}_createPopup(){const{container:F,data:N}=this;F.setAttribute("aria-haspopup","dialog");const b=new W({data:{color:N.color,titleObj:N.titleObj,modificationDate:N.modificationDate,contentsObj:N.contentsObj,richText:N.richText,parentRect:N.rect,borderStyle:0,id:`popup_${N.id}`,rotation:N.rotation},parent:this.parent,elements:[this]});this.parent.div.append(b.render())}render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(F,N=null){const b=[];if(this._fieldObjects){const T=this._fieldObjects[F];if(T)for(const{page:w,id:M,exportValues:L}of T){if(w===-1||M===N)continue;const U=typeof L=="string"?L:null,H=document.querySelector(`[data-element-id="${M}"]`);if(H&&!E.has(H)){(0,o.warn)(`_getElementsByName - element not allowed: ${M}`);continue}b.push({id:M,exportValue:U,domElement:H})}return b}for(const T of document.getElementsByName(F)){const{exportValue:w}=T,M=T.getAttribute("data-element-id");M!==N&&E.has(T)&&b.push({id:M,exportValue:w,domElement:T})}return b}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const F=this.getElementsToTriggerPopup();if(Array.isArray(F))for(const N of F)N.classList.add("highlightArea");else F.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:F,data:{id:N}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:F,editId:N})})}}class v extends _{constructor(F,N=null){super(F,{isRenderable:!0,ignoreBorder:!!N?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=F.data.isTooltipOnly}render(){const{data:F,linkService:N}=this,b=document.createElement("a");b.setAttribute("data-element-id",F.id);let T=!1;return F.url?(N.addLinkAttributes(b,F.url,F.newWindow),T=!0):F.action?(this._bindNamedAction(b,F.action),T=!0):F.attachment?(this.#e(b,F.attachment,F.attachmentDest),T=!0):F.setOCGState?(this.#n(b,F.setOCGState),T=!0):F.dest?(this._bindLink(b,F.dest),T=!0):(F.actions&&(F.actions.Action||F.actions["Mouse Up"]||F.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(b,F),T=!0),F.resetForm?(this._bindResetFormAction(b,F.resetForm),T=!0):this.isTooltipOnly&&!T&&(this._bindLink(b,""),T=!0)),this.container.classList.add("linkAnnotation"),T&&this.container.append(b),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(F,N){F.href=this.linkService.getDestinationHash(N),F.onclick=()=>(N&&this.linkService.goToDestination(N),!1),(N||N==="")&&this.#t()}_bindNamedAction(F,N){F.href=this.linkService.getAnchorUrl(""),F.onclick=()=>(this.linkService.executeNamedAction(N),!1),this.#t()}#e(F,N,b=null){F.href=this.linkService.getAnchorUrl(""),F.onclick=()=>(this.downloadManager?.openOrDownloadData(N.content,N.filename,b),!1),this.#t()}#n(F,N){F.href=this.linkService.getAnchorUrl(""),F.onclick=()=>(this.linkService.executeSetOCGState(N),!1),this.#t()}_bindJSAction(F,N){F.href=this.linkService.getAnchorUrl("");const b=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const T of Object.keys(N.actions)){const w=b.get(T);w&&(F[w]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:N.id,name:T}}),!1))}F.onclick||(F.onclick=()=>!1),this.#t()}_bindResetFormAction(F,N){const b=F.onclick;if(b||(F.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),b||(F.onclick=()=>!1);return}F.onclick=()=>{b?.();const{fields:T,refs:w,include:M}=N,L=[];if(T.length!==0||w.length!==0){const Y=new Set(w);for(const $ of T){const Q=this._fieldObjects[$]||[];for(const{id:nt}of Q)Y.add(nt)}for(const $ of Object.values(this._fieldObjects))for(const Q of $)Y.has(Q.id)===M&&L.push(Q)}else for(const Y of Object.values(this._fieldObjects))L.push(...Y);const U=this.annotationStorage,H=[];for(const Y of L){const{id:$}=Y;switch(H.push($),Y.type){case"text":{const nt=Y.defaultValue||"";U.setValue($,{value:nt});break}case"checkbox":case"radiobutton":{const nt=Y.defaultValue===Y.exportValues;U.setValue($,{value:nt});break}case"combobox":case"listbox":{const nt=Y.defaultValue||"";U.setValue($,{value:nt});break}default:continue}const Q=document.querySelector(`[data-element-id="${$}"]`);if(Q){if(!E.has(Q)){(0,o.warn)(`_bindResetFormAction - element not allowed: ${$}`);continue}}else continue;Q.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:H,name:"ResetForm"}}),!1}}}class x extends _{constructor(F){super(F,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const F=document.createElement("img");return F.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",F.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),F.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(F),this.container}}class I extends _{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(F){this.data.hasOwnCanvas&&(F.previousSibling?.nodeName==="CANVAS"&&(F.previousSibling.hidden=!0),F.hidden=!1)}_getKeyModifier(F){return o.FeatureTest.platform.isMac?F.metaKey:F.ctrlKey}_setEventListener(F,N,b,T,w){b.includes("mouse")?F.addEventListener(b,M=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:T,value:w(M),shift:M.shiftKey,modifier:this._getKeyModifier(M)}})}):F.addEventListener(b,M=>{if(b==="blur"){if(!N.focused||!M.relatedTarget)return;N.focused=!1}else if(b==="focus"){if(N.focused)return;N.focused=!0}w&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:T,value:w(M)}})})}_setEventListeners(F,N,b,T){for(const[w,M]of b)(M==="Action"||this.data.actions?.[M])&&((M==="Focus"||M==="Blur")&&(N||={focused:!1}),this._setEventListener(F,N,w,M,T),M==="Focus"&&!this.data.actions?.Blur?this._setEventListener(F,N,"blur","Blur",null):M==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(F,N,"focus","Focus",null))}_setBackgroundColor(F){const N=this.data.backgroundColor||null;F.style.backgroundColor=N===null?"transparent":o.Util.makeHexColor(N[0],N[1],N[2])}_setTextStyle(F){const N=["left","center","right"],{fontColor:b}=this.data.defaultAppearanceData,T=this.data.defaultAppearanceData.fontSize||A,w=F.style;let M;const L=2,U=H=>Math.round(10*H)/10;if(this.data.multiLine){const H=Math.abs(this.data.rect[3]-this.data.rect[1]-L),Y=Math.round(H/(o.LINE_FACTOR*T))||1,$=H/Y;M=Math.min(T,U($/o.LINE_FACTOR))}else{const H=Math.abs(this.data.rect[3]-this.data.rect[1]-L);M=Math.min(T,U(H/o.LINE_FACTOR))}w.fontSize=`calc(${M}px * var(--scale-factor))`,w.color=o.Util.makeHexColor(b[0],b[1],b[2]),this.data.textAlignment!==null&&(w.textAlign=N[this.data.textAlignment])}_setRequired(F,N){N?F.setAttribute("required",!0):F.removeAttribute("required"),F.setAttribute("aria-required",N)}}class P extends I{constructor(F){const N=F.renderForms||F.data.hasOwnCanvas||!F.data.hasAppearance&&!!F.data.fieldValue;super(F,{isRenderable:N})}setPropertyOnSiblings(F,N,b,T){const w=this.annotationStorage;for(const M of this._getElementsByName(F.name,F.id))M.domElement&&(M.domElement[N]=b),w.setValue(M.id,{[T]:b})}render(){const F=this.annotationStorage,N=this.data.id;this.container.classList.add("textWidgetAnnotation");let b=null;if(this.renderForms){const T=F.getValue(N,{value:this.data.fieldValue});let w=T.value||"";const M=F.getValue(N,{charLimit:this.data.maxLen}).charLimit;M&&w.length>M&&(w=w.slice(0,M));let L=T.formattedValue||this.data.textContent?.join(`
`)||null;L&&this.data.comb&&(L=L.replaceAll(/\s+/g,""));const U={userValue:w,formattedValue:L,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(b=document.createElement("textarea"),b.textContent=L??w,this.data.doNotScroll&&(b.style.overflowY="hidden")):(b=document.createElement("input"),b.type="text",b.setAttribute("value",L??w),this.data.doNotScroll&&(b.style.overflowX="hidden")),this.data.hasOwnCanvas&&(b.hidden=!0),E.add(b),b.setAttribute("data-element-id",N),b.disabled=this.data.readOnly,b.name=this.data.fieldName,b.tabIndex=g,this._setRequired(b,this.data.required),M&&(b.maxLength=M),b.addEventListener("input",Y=>{F.setValue(N,{value:Y.target.value}),this.setPropertyOnSiblings(b,"value",Y.target.value,"value"),U.formattedValue=null}),b.addEventListener("resetform",Y=>{const $=this.data.defaultFieldValue??"";b.value=U.userValue=$,U.formattedValue=null});let H=Y=>{const{formattedValue:$}=U;$!=null&&(Y.target.value=$),Y.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){b.addEventListener("focus",$=>{if(U.focused)return;const{target:Q}=$;U.userValue&&(Q.value=U.userValue),U.lastCommittedValue=Q.value,U.commitKey=1,this.data.actions?.Focus||(U.focused=!0)}),b.addEventListener("updatefromsandbox",$=>{this.showElementAndHideCanvas($.target);const Q={value(nt){U.userValue=nt.detail.value??"",F.setValue(N,{value:U.userValue.toString()}),nt.target.value=U.userValue},formattedValue(nt){const{formattedValue:rt}=nt.detail;U.formattedValue=rt,rt!=null&&nt.target!==document.activeElement&&(nt.target.value=rt),F.setValue(N,{formattedValue:rt})},selRange(nt){nt.target.setSelectionRange(...nt.detail.selRange)},charLimit:nt=>{const{charLimit:rt}=nt.detail,{target:it}=nt;if(rt===0){it.removeAttribute("maxLength");return}it.setAttribute("maxLength",rt);let J=U.userValue;!J||J.length<=rt||(J=J.slice(0,rt),it.value=U.userValue=J,F.setValue(N,{value:J}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:N,name:"Keystroke",value:J,willCommit:!0,commitKey:1,selStart:it.selectionStart,selEnd:it.selectionEnd}}))}};this._dispatchEventFromSandbox(Q,$)}),b.addEventListener("keydown",$=>{U.commitKey=1;let Q=-1;if($.key==="Escape"?Q=0:$.key==="Enter"&&!this.data.multiLine?Q=2:$.key==="Tab"&&(U.commitKey=3),Q===-1)return;const{value:nt}=$.target;U.lastCommittedValue!==nt&&(U.lastCommittedValue=nt,U.userValue=nt,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:N,name:"Keystroke",value:nt,willCommit:!0,commitKey:Q,selStart:$.target.selectionStart,selEnd:$.target.selectionEnd}}))});const Y=H;H=null,b.addEventListener("blur",$=>{if(!U.focused||!$.relatedTarget)return;this.data.actions?.Blur||(U.focused=!1);const{value:Q}=$.target;U.userValue=Q,U.lastCommittedValue!==Q&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:N,name:"Keystroke",value:Q,willCommit:!0,commitKey:U.commitKey,selStart:$.target.selectionStart,selEnd:$.target.selectionEnd}}),Y($)}),this.data.actions?.Keystroke&&b.addEventListener("beforeinput",$=>{U.lastCommittedValue=null;const{data:Q,target:nt}=$,{value:rt,selectionStart:it,selectionEnd:J}=nt;let Z=it,Et=J;switch($.inputType){case"deleteWordBackward":{const St=rt.substring(0,it).match(/\w*[^\w]*$/);St&&(Z-=St[0].length);break}case"deleteWordForward":{const St=rt.substring(it).match(/^[^\w]*\w*/);St&&(Et+=St[0].length);break}case"deleteContentBackward":it===J&&(Z-=1);break;case"deleteContentForward":it===J&&(Et+=1);break}$.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:N,name:"Keystroke",value:rt,change:Q||"",willCommit:!1,selStart:Z,selEnd:Et}})}),this._setEventListeners(b,U,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],$=>$.target.value)}if(H&&b.addEventListener("blur",H),this.data.comb){const $=(this.data.rect[2]-this.data.rect[0])/M;b.classList.add("comb"),b.style.letterSpacing=`calc(${$}px * var(--scale-factor) - 1ch)`}}else b=document.createElement("div"),b.textContent=this.data.fieldValue,b.style.verticalAlign="middle",b.style.display="table-cell",this.data.hasOwnCanvas&&(b.hidden=!0);return this._setTextStyle(b),this._setBackgroundColor(b),this._setDefaultPropertiesFromJS(b),this.container.append(b),this.container}}class k extends I{constructor(F){super(F,{isRenderable:!!F.data.hasOwnCanvas})}}class V extends I{constructor(F){super(F,{isRenderable:F.renderForms})}render(){const F=this.annotationStorage,N=this.data,b=N.id;let T=F.getValue(b,{value:N.exportValue===N.fieldValue}).value;typeof T=="string"&&(T=T!=="Off",F.setValue(b,{value:T})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const w=document.createElement("input");return E.add(w),w.setAttribute("data-element-id",b),w.disabled=N.readOnly,this._setRequired(w,this.data.required),w.type="checkbox",w.name=N.fieldName,T&&w.setAttribute("checked",!0),w.setAttribute("exportValue",N.exportValue),w.tabIndex=g,w.addEventListener("change",M=>{const{name:L,checked:U}=M.target;for(const H of this._getElementsByName(L,b)){const Y=U&&H.exportValue===N.exportValue;H.domElement&&(H.domElement.checked=Y),F.setValue(H.id,{value:Y})}F.setValue(b,{value:U})}),w.addEventListener("resetform",M=>{const L=N.defaultFieldValue||"Off";M.target.checked=L===N.exportValue}),this.enableScripting&&this.hasJSActions&&(w.addEventListener("updatefromsandbox",M=>{const L={value(U){U.target.checked=U.detail.value!=="Off",F.setValue(b,{value:U.target.checked})}};this._dispatchEventFromSandbox(L,M)}),this._setEventListeners(w,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],M=>M.target.checked)),this._setBackgroundColor(w),this._setDefaultPropertiesFromJS(w),this.container.append(w),this.container}}class O extends I{constructor(F){super(F,{isRenderable:F.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const F=this.annotationStorage,N=this.data,b=N.id;let T=F.getValue(b,{value:N.fieldValue===N.buttonValue}).value;if(typeof T=="string"&&(T=T!==N.buttonValue,F.setValue(b,{value:T})),T)for(const M of this._getElementsByName(N.fieldName,b))F.setValue(M.id,{value:!1});const w=document.createElement("input");if(E.add(w),w.setAttribute("data-element-id",b),w.disabled=N.readOnly,this._setRequired(w,this.data.required),w.type="radio",w.name=N.fieldName,T&&w.setAttribute("checked",!0),w.tabIndex=g,w.addEventListener("change",M=>{const{name:L,checked:U}=M.target;for(const H of this._getElementsByName(L,b))F.setValue(H.id,{value:!1});F.setValue(b,{value:U})}),w.addEventListener("resetform",M=>{const L=N.defaultFieldValue;M.target.checked=L!=null&&L===N.buttonValue}),this.enableScripting&&this.hasJSActions){const M=N.buttonValue;w.addEventListener("updatefromsandbox",L=>{const U={value:H=>{const Y=M===H.detail.value;for(const $ of this._getElementsByName(H.target.name)){const Q=Y&&$.id===b;$.domElement&&($.domElement.checked=Q),F.setValue($.id,{value:Q})}}};this._dispatchEventFromSandbox(U,L)}),this._setEventListeners(w,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],L=>L.target.checked)}return this._setBackgroundColor(w),this._setDefaultPropertiesFromJS(w),this.container.append(w),this.container}}class q extends v{constructor(F){super(F,{ignoreBorder:F.data.hasAppearance})}render(){const F=super.render();F.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(F.title=this.data.alternativeText);const N=F.lastChild;return this.enableScripting&&this.hasJSActions&&N&&(this._setDefaultPropertiesFromJS(N),N.addEventListener("updatefromsandbox",b=>{this._dispatchEventFromSandbox({},b)})),F}}class et extends I{constructor(F){super(F,{isRenderable:F.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const F=this.annotationStorage,N=this.data.id,b=F.getValue(N,{value:this.data.fieldValue}),T=document.createElement("select");E.add(T),T.setAttribute("data-element-id",N),T.disabled=this.data.readOnly,this._setRequired(T,this.data.required),T.name=this.data.fieldName,T.tabIndex=g;let w=this.data.combo&&this.data.options.length>0;this.data.combo||(T.size=this.data.options.length,this.data.multiSelect&&(T.multiple=!0)),T.addEventListener("resetform",Y=>{const $=this.data.defaultFieldValue;for(const Q of T.options)Q.selected=Q.value===$});for(const Y of this.data.options){const $=document.createElement("option");$.textContent=Y.displayValue,$.value=Y.exportValue,b.value.includes(Y.exportValue)&&($.setAttribute("selected",!0),w=!1),T.append($)}let M=null;if(w){const Y=document.createElement("option");Y.value=" ",Y.setAttribute("hidden",!0),Y.setAttribute("selected",!0),T.prepend(Y),M=()=>{Y.remove(),T.removeEventListener("input",M),M=null},T.addEventListener("input",M)}const L=Y=>{const $=Y?"value":"textContent",{options:Q,multiple:nt}=T;return nt?Array.prototype.filter.call(Q,rt=>rt.selected).map(rt=>rt[$]):Q.selectedIndex===-1?null:Q[Q.selectedIndex][$]};let U=L(!1);const H=Y=>{const $=Y.target.options;return Array.prototype.map.call($,Q=>({displayValue:Q.textContent,exportValue:Q.value}))};return this.enableScripting&&this.hasJSActions?(T.addEventListener("updatefromsandbox",Y=>{const $={value(Q){M?.();const nt=Q.detail.value,rt=new Set(Array.isArray(nt)?nt:[nt]);for(const it of T.options)it.selected=rt.has(it.value);F.setValue(N,{value:L(!0)}),U=L(!1)},multipleSelection(Q){T.multiple=!0},remove(Q){const nt=T.options,rt=Q.detail.remove;nt[rt].selected=!1,T.remove(rt),nt.length>0&&Array.prototype.findIndex.call(nt,J=>J.selected)===-1&&(nt[0].selected=!0),F.setValue(N,{value:L(!0),items:H(Q)}),U=L(!1)},clear(Q){for(;T.length!==0;)T.remove(0);F.setValue(N,{value:null,items:[]}),U=L(!1)},insert(Q){const{index:nt,displayValue:rt,exportValue:it}=Q.detail.insert,J=T.children[nt],Z=document.createElement("option");Z.textContent=rt,Z.value=it,J?J.before(Z):T.append(Z),F.setValue(N,{value:L(!0),items:H(Q)}),U=L(!1)},items(Q){const{items:nt}=Q.detail;for(;T.length!==0;)T.remove(0);for(const rt of nt){const{displayValue:it,exportValue:J}=rt,Z=document.createElement("option");Z.textContent=it,Z.value=J,T.append(Z)}T.options.length>0&&(T.options[0].selected=!0),F.setValue(N,{value:L(!0),items:H(Q)}),U=L(!1)},indices(Q){const nt=new Set(Q.detail.indices);for(const rt of Q.target.options)rt.selected=nt.has(rt.index);F.setValue(N,{value:L(!0)}),U=L(!1)},editable(Q){Q.target.disabled=!Q.detail.editable}};this._dispatchEventFromSandbox($,Y)}),T.addEventListener("input",Y=>{const $=L(!0);F.setValue(N,{value:$}),Y.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:N,name:"Keystroke",value:U,changeEx:$,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(T,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Y=>Y.target.value)):T.addEventListener("input",function(Y){F.setValue(N,{value:L(!0)})}),this.data.combo&&this._setTextStyle(T),this._setBackgroundColor(T),this._setDefaultPropertiesFromJS(T),this.container.append(T),this.container}}class W extends _{constructor(F){const{data:N,elements:b}=F;super(F,{isRenderable:_._hasPopupData(N)}),this.elements=b}render(){this.container.classList.add("popupAnnotation");const F=new lt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),N=[];for(const b of this.elements)b.popup=F,N.push(b.data.id),b.addHighlightArea();return this.container.setAttribute("aria-controls",N.map(b=>`${o.AnnotationPrefix}${b}`).join(",")),this.container}}class lt{#t=this.#y.bind(this);#e=this.#m.bind(this);#n=this.#A.bind(this);#i=this.#S.bind(this);#s=null;#o=null;#r=null;#l=null;#u=null;#c=null;#h=null;#f=!1;#d=null;#a=null;#p=null;#g=null;#v=!1;constructor({container:F,color:N,elements:b,titleObj:T,modificationDate:w,contentsObj:M,richText:L,parent:U,rect:H,parentRect:Y,open:$}){this.#o=F,this.#g=T,this.#r=M,this.#p=L,this.#c=U,this.#s=N,this.#a=H,this.#h=Y,this.#u=b,this.#l=r.PDFDateString.toDateObject(w),this.trigger=b.flatMap(Q=>Q.getElementsToTriggerPopup());for(const Q of this.trigger)Q.addEventListener("click",this.#i),Q.addEventListener("mouseenter",this.#n),Q.addEventListener("mouseleave",this.#e),Q.classList.add("popupTriggerArea");for(const Q of b)Q.container?.addEventListener("keydown",this.#t);this.#o.hidden=!0,$&&this.#S()}render(){if(this.#d)return;const{page:{view:F},viewport:{rawDims:{pageWidth:N,pageHeight:b,pageX:T,pageY:w}}}=this.#c,M=this.#d=document.createElement("div");if(M.className="popup",this.#s){const St=M.style.outlineColor=o.Util.makeHexColor(...this.#s);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?M.style.backgroundColor=`color-mix(in srgb, ${St} 30%, white)`:M.style.backgroundColor=o.Util.makeHexColor(...this.#s.map(Dt=>Math.floor(.7*(255-Dt)+Dt)))}const L=document.createElement("span");L.className="header";const U=document.createElement("h1");if(L.append(U),{dir:U.dir,str:U.textContent}=this.#g,M.append(L),this.#l){const St=document.createElement("span");St.classList.add("popupDate"),St.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),St.setAttribute("data-l10n-args",JSON.stringify({date:this.#l.toLocaleDateString(),time:this.#l.toLocaleTimeString()})),L.append(St)}const H=this.#r,Y=this.#p;if(Y?.str&&(!H?.str||H.str===Y.str))h.XfaLayer.render({xfaHtml:Y.html,intent:"richText",div:M}),M.lastChild.classList.add("richText","popupContent");else{const St=this._formatContents(H);M.append(St)}let $=!!this.#h,Q=$?this.#h:this.#a;for(const St of this.#u)if(!Q||o.Util.intersect(St.data.rect,Q)!==null){Q=St.data.rect,$=!0;break}const nt=o.Util.normalizeRect([Q[0],F[3]-Q[1]+F[1],Q[2],F[3]-Q[3]+F[1]]),it=$?Q[2]-Q[0]+5:0,J=nt[0]+it,Z=nt[1],{style:Et}=this.#o;Et.left=`${100*(J-T)/N}%`,Et.top=`${100*(Z-w)/b}%`,this.#o.append(M)}_formatContents({str:F,dir:N}){const b=document.createElement("p");b.classList.add("popupContent"),b.dir=N;const T=F.split(/(?:\r\n?|\n)/);for(let w=0,M=T.length;w<M;++w){const L=T[w];b.append(document.createTextNode(L)),w<M-1&&b.append(document.createElement("br"))}return b}#y(F){F.altKey||F.shiftKey||F.ctrlKey||F.metaKey||(F.key==="Enter"||F.key==="Escape"&&this.#f)&&this.#S()}#S(){this.#f=!this.#f,this.#f?(this.#A(),this.#o.addEventListener("click",this.#i),this.#o.addEventListener("keydown",this.#t)):(this.#m(),this.#o.removeEventListener("click",this.#i),this.#o.removeEventListener("keydown",this.#t))}#A(){this.#d||this.render(),this.isVisible?this.#f&&this.#o.classList.add("focused"):(this.#o.hidden=!1,this.#o.style.zIndex=parseInt(this.#o.style.zIndex)+1e3)}#m(){this.#o.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#o.hidden=!0,this.#o.style.zIndex=parseInt(this.#o.style.zIndex)-1e3)}forceHide(){this.#v=this.isVisible,this.#v&&(this.#o.hidden=!0)}maybeShow(){this.#v&&(this.#v=!1,this.#o.hidden=!1)}get isVisible(){return this.#o.hidden===!1}}class gt extends _{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0}),this.textContent=F.data.textContent,this.textPosition=F.data.textPosition,this.annotationEditorType=o.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const F=document.createElement("div");F.classList.add("annotationTextContent"),F.setAttribute("role","comment");for(const N of this.textContent){const b=document.createElement("span");b.textContent=N,F.append(b)}this.container.append(F)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class Rt extends _{#t=null;constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const F=this.data,{width:N,height:b}=R(F.rect),T=this.svgFactory.create(N,b,!0),w=this.#t=this.svgFactory.createElement("svg:line");return w.setAttribute("x1",F.rect[2]-F.lineCoordinates[0]),w.setAttribute("y1",F.rect[3]-F.lineCoordinates[1]),w.setAttribute("x2",F.rect[2]-F.lineCoordinates[2]),w.setAttribute("y2",F.rect[3]-F.lineCoordinates[3]),w.setAttribute("stroke-width",F.borderStyle.width||1),w.setAttribute("stroke","transparent"),w.setAttribute("fill","transparent"),T.append(w),this.container.append(T),!F.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class _t extends _{#t=null;constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const F=this.data,{width:N,height:b}=R(F.rect),T=this.svgFactory.create(N,b,!0),w=F.borderStyle.width,M=this.#t=this.svgFactory.createElement("svg:rect");return M.setAttribute("x",w/2),M.setAttribute("y",w/2),M.setAttribute("width",N-w),M.setAttribute("height",b-w),M.setAttribute("stroke-width",w||1),M.setAttribute("stroke","transparent"),M.setAttribute("fill","transparent"),T.append(M),this.container.append(T),!F.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Tt extends _{#t=null;constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const F=this.data,{width:N,height:b}=R(F.rect),T=this.svgFactory.create(N,b,!0),w=F.borderStyle.width,M=this.#t=this.svgFactory.createElement("svg:ellipse");return M.setAttribute("cx",N/2),M.setAttribute("cy",b/2),M.setAttribute("rx",N/2-w/2),M.setAttribute("ry",b/2-w/2),M.setAttribute("stroke-width",w||1),M.setAttribute("stroke","transparent"),M.setAttribute("fill","transparent"),T.append(M),this.container.append(T),!F.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class j extends _{#t=null;constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const F=this.data,{width:N,height:b}=R(F.rect),T=this.svgFactory.create(N,b,!0);let w=[];for(const L of F.vertices){const U=L.x-F.rect[0],H=F.rect[3]-L.y;w.push(U+","+H)}w=w.join(" ");const M=this.#t=this.svgFactory.createElement(this.svgElementName);return M.setAttribute("points",w),M.setAttribute("stroke-width",F.borderStyle.width||1),M.setAttribute("stroke","transparent"),M.setAttribute("fill","transparent"),T.append(M),this.container.append(T),!F.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class X extends j{constructor(F){super(F),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class dt extends _{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class vt extends _{#t=[];constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=o.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const F=this.data,{width:N,height:b}=R(F.rect),T=this.svgFactory.create(N,b,!0);for(const w of F.inkLists){let M=[];for(const U of w){const H=U.x-F.rect[0],Y=F.rect[3]-U.y;M.push(`${H},${Y}`)}M=M.join(" ");const L=this.svgFactory.createElement(this.svgElementName);this.#t.push(L),L.setAttribute("points",M),L.setAttribute("stroke-width",F.borderStyle.width||1),L.setAttribute("stroke","transparent"),L.setAttribute("fill","transparent"),!F.popupRef&&this.hasPopupData&&this._createPopup(),T.append(L)}return this.container.append(T),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ot extends _{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ct extends _{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class z extends _{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class K extends _{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class at extends _{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ft extends _{#t=null;constructor(F){super(F,{isRenderable:!0});const{filename:N,content:b}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(N,!0),this.content=b,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:N,content:b})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:F,data:N}=this;let b;N.hasAppearance||N.fillAlpha===0?b=document.createElement("div"):(b=document.createElement("img"),b.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(N.name)?"paperclip":"pushpin"}.svg`,N.fillAlpha&&N.fillAlpha<1&&(b.style=`filter: opacity(${Math.round(N.fillAlpha*100)}%);`)),b.addEventListener("dblclick",this.#e.bind(this)),this.#t=b;const{isMac:T}=o.FeatureTest.platform;return F.addEventListener("keydown",w=>{w.key==="Enter"&&(T?w.metaKey:w.ctrlKey)&&this.#e()}),!N.popupRef&&this.hasPopupData?this._createPopup():b.classList.add("popupTriggerArea"),F.append(b),F}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Ct{#t=null;#e=null;#n=new Map;constructor({div:F,accessibilityManager:N,annotationCanvasMap:b,page:T,viewport:w}){this.div=F,this.#t=N,this.#e=b,this.page=T,this.viewport=w,this.zIndex=0}#i(F,N){const b=F.firstChild||F;b.id=`${o.AnnotationPrefix}${N}`,this.div.append(F),this.#t?.moveElementInDOM(this.div,F,b,!1)}async render(F){const{annotations:N}=F,b=this.div;(0,r.setLayerDimensions)(b,this.viewport);const T=new Map,w={data:null,layer:b,linkService:F.linkService,downloadManager:F.downloadManager,imageResourcesPath:F.imageResourcesPath||"",renderForms:F.renderForms!==!1,svgFactory:new r.DOMSVGFactory,annotationStorage:F.annotationStorage||new u.AnnotationStorage,enableScripting:F.enableScripting===!0,hasJSActions:F.hasJSActions,fieldObjects:F.fieldObjects,parent:this,elements:null};for(const M of N){if(M.noHTML)continue;const L=M.annotationType===o.AnnotationType.POPUP;if(L){const Y=T.get(M.id);if(!Y)continue;w.elements=Y}else{const{width:Y,height:$}=R(M.rect);if(Y<=0||$<=0)continue}w.data=M;const U=C.create(w);if(!U.isRenderable)continue;if(!L&&M.popupRef){const Y=T.get(M.popupRef);Y?Y.push(U):T.set(M.popupRef,[U])}U.annotationEditorType>0&&this.#n.set(U.data.id,U);const H=U.render();M.hidden&&(H.style.visibility="hidden"),this.#i(H,M.id)}this.#s()}update({viewport:F}){const N=this.div;this.viewport=F,(0,r.setLayerDimensions)(N,{rotation:F.rotation}),this.#s(),N.hidden=!1}#s(){if(!this.#e)return;const F=this.div;for(const[N,b]of this.#e){const T=F.querySelector(`[data-annotation-id="${N}"]`);if(!T)continue;const{firstChild:w}=T;w?w.nodeName==="CANVAS"?w.replaceWith(b):w.before(b):T.append(b)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(F){return this.#n.get(F)}}}),780:((i,e,s)=>{s.d(e,{AnnotationStorage:()=>p,PrintAnnotationStorage:()=>y,SerializableEmpty:()=>d});var o=s(266),r=s(115),u=s(825);const d=Object.freeze({map:null,hash:"",transfer:void 0});class p{#t=!1;#e=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(g,A){const E=this.#e.get(g);return E===void 0?A:Object.assign(A,E)}getRawValue(g){return this.#e.get(g)}remove(g){if(this.#e.delete(g),this.#e.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const A of this.#e.values())if(A instanceof r.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(g,A){const E=this.#e.get(g);let R=!1;if(E!==void 0)for(const[C,_]of Object.entries(A))E[C]!==_&&(R=!0,E[C]=_);else R=!0,this.#e.set(g,A);R&&this.#n(),A instanceof r.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(A.constructor._type)}has(g){return this.#e.has(g)}getAll(){return this.#e.size>0?(0,o.objectFromMap)(this.#e):null}setAll(g){for(const[A,E]of Object.entries(g))this.setValue(A,E)}get size(){return this.#e.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new y(this)}get serializable(){if(this.#e.size===0)return d;const g=new Map,A=new u.MurmurHash3_64,E=[],R=Object.create(null);let C=!1;for(const[_,v]of this.#e){const x=v instanceof r.AnnotationEditor?v.serialize(!1,R):v;x&&(g.set(_,x),A.update(`${_}:${JSON.stringify(x)}`),C||=!!x.bitmap)}if(C)for(const _ of g.values())_.bitmap&&E.push(_.bitmap);return g.size>0?{map:g,hash:A.hexdigest(),transfer:E}:d}}class y extends p{#t;constructor(g){super();const{map:A,hash:E,transfer:R}=g.serializable,C=structuredClone(A,R?{transfer:R}:null);this.#t={map:C,hash:E,transfer:R}}get print(){(0,o.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}}}),406:((i,e,s)=>{s.a(i,async(o,r)=>{try{let Rt=function(b){if(typeof b=="string"||b instanceof URL?b={url:b}:(0,u.isArrayBuffer)(b)&&(b={data:b}),typeof b!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!b.url&&!b.data&&!b.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const T=new X,{docId:w}=T,M=b.url?Tt(b.url):null,L=b.data?j(b.data):null,U=b.httpHeaders||null,H=b.withCredentials===!0,Y=b.password??null,$=b.range instanceof dt?b.range:null,Q=Number.isInteger(b.rangeChunkSize)&&b.rangeChunkSize>0?b.rangeChunkSize:V;let nt=b.worker instanceof K?b.worker:null;const rt=b.verbosity,it=typeof b.docBaseUrl=="string"&&!(0,p.isDataScheme)(b.docBaseUrl)?b.docBaseUrl:null,J=typeof b.cMapUrl=="string"?b.cMapUrl:null,Z=b.cMapPacked!==!1,Et=b.CMapReaderFactory||W,St=typeof b.standardFontDataUrl=="string"?b.standardFontDataUrl:null,Mt=b.StandardFontDataFactory||gt,Dt=b.stopAtErrors!==!0,Nt=Number.isInteger(b.maxImageSize)&&b.maxImageSize>-1?b.maxImageSize:-1,Ft=b.isEvalSupported!==!1,Pt=typeof b.isOffscreenCanvasSupported=="boolean"?b.isOffscreenCanvasSupported:!u.isNodeJS,Gt=Number.isInteger(b.canvasMaxAreaInBytes)?b.canvasMaxAreaInBytes:-1,Jt=typeof b.disableFontFace=="boolean"?b.disableFontFace:u.isNodeJS,Xt=b.fontExtraProperties===!0,$t=b.enableXfa===!0,Ut=b.ownerDocument||globalThis.document,ae=b.disableRange===!0,Se=b.disableStream===!0,ke=b.disableAutoFetch===!0,ve=b.pdfBug===!0,pe=$?$.length:b.length??NaN,fe=typeof b.useSystemFonts=="boolean"?b.useSystemFonts:!u.isNodeJS&&!Jt,Ie=typeof b.useWorkerFetch=="boolean"?b.useWorkerFetch:Et===p.DOMCMapReaderFactory&&Mt===p.DOMStandardFontDataFactory&&J&&St&&(0,p.isValidFetchUrl)(J,document.baseURI)&&(0,p.isValidFetchUrl)(St,document.baseURI),ze=b.canvasFactory||new et({ownerDocument:Ut}),Pn=b.filterFactory||new lt({docId:w,ownerDocument:Ut}),_n=null;(0,u.setVerbosityLevel)(rt);const Fe={canvasFactory:ze,filterFactory:Pn};if(Ie||(Fe.cMapReaderFactory=new Et({baseUrl:J,isCompressed:Z}),Fe.standardFontDataFactory=new Mt({baseUrl:St})),!nt){const en={verbosity:rt,port:A.GlobalWorkerOptions.workerPort};nt=en.port?K.fromPort(en):new K(en),T._worker=nt}const xe={docId:w,apiVersion:"4.0.379",data:L,password:Y,disableAutoFetch:ke,rangeChunkSize:Q,length:pe,docBaseUrl:it,enableXfa:$t,evaluatorOptions:{maxImageSize:Nt,disableFontFace:Jt,ignoreErrors:Dt,isEvalSupported:Ft,isOffscreenCanvasSupported:Pt,canvasMaxAreaInBytes:Gt,fontExtraProperties:Xt,useSystemFonts:fe,cMapUrl:Ie?J:null,standardFontDataUrl:Ie?St:null}},ni={ignoreErrors:Dt,isEvalSupported:Ft,disableFontFace:Jt,fontExtraProperties:Xt,enableXfa:$t,ownerDocument:Ut,disableAutoFetch:ke,pdfBug:ve,styleElement:_n};return nt.promise.then(function(){if(T.destroyed)throw new Error("Loading aborted");const en=_t(nt,xe),ii=new Promise(function(Ae){let si;$?si=new _.PDFDataTransportStream({length:pe,initialData:$.initialData,progressiveDone:$.progressiveDone,contentDispositionFilename:$.contentDispositionFilename,disableRange:ae,disableStream:Se},$):L||(si=(Mn=>u.isNodeJS?new I.PDFNodeStream(Mn):(0,p.isValidFetchUrl)(Mn.url)?new v.PDFFetchStream(Mn):new x.PDFNetworkStream(Mn))({url:M,length:pe,httpHeaders:U,withCredentials:H,rangeChunkSize:Q,disableRange:ae,disableStream:Se})),Ae(si)});return Promise.all([en,ii]).then(function([Ae,si]){if(T.destroyed)throw new Error("Loading aborted");const Zi=new E.MessageHandler(w,Ae,nt.port),Mn=new at(Zi,T,si,ni,Fe);T._transport=Mn,Zi.send("Ready",null)})}).catch(T._capability.reject),T},Tt=function(b){if(b instanceof URL)return b.href;try{return new URL(b,window.location).href}catch{if(u.isNodeJS&&typeof b=="string")return b}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")},j=function(b){if(u.isNodeJS&&typeof Buffer<"u"&&b instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength)return b;if(typeof b=="string")return(0,u.stringToBytes)(b);if(typeof b=="object"&&!isNaN(b?.length)||(0,u.isArrayBuffer)(b))return new Uint8Array(b);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")};s.d(e,{PDFDataRangeTransport:()=>dt,PDFWorker:()=>K,build:()=>N,getDocument:()=>Rt,version:()=>F});var u=s(266),d=s(780),p=s(473),y=s(742),h=s(738),g=s(250),A=s(368),E=s(694),R=s(472),C=s(890),_=s(92),v=s(171),x=s(474),I=s(498),P=s(521),k=o([h,I]);[h,I]=k.then?(await k)():k;const V=65536,O=100,q=5e3,et=u.isNodeJS?h.NodeCanvasFactory:p.DOMCanvasFactory,W=u.isNodeJS?h.NodeCMapReaderFactory:p.DOMCMapReaderFactory,lt=u.isNodeJS?h.NodeFilterFactory:p.DOMFilterFactory,gt=u.isNodeJS?h.NodeStandardFontDataFactory:p.DOMStandardFontDataFactory;async function _t(b,T){if(b.destroyed)throw new Error("Worker was destroyed");const w=await b.messageHandler.sendWithPromise("GetDocRequest",T,T.data?[T.data.buffer]:null);if(b.destroyed)throw new Error("Worker was destroyed");return w}class X{static#t=0;constructor(){this._capability=new u.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${X.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(T){throw this._worker?.port&&delete this._worker._pendingDestroy,T}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class dt{constructor(T,w,M=!1,L=null){this.length=T,this.initialData=w,this.progressiveDone=M,this.contentDispositionFilename=L,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new u.PromiseCapability}addRangeListener(T){this._rangeListeners.push(T)}addProgressListener(T){this._progressListeners.push(T)}addProgressiveReadListener(T){this._progressiveReadListeners.push(T)}addProgressiveDoneListener(T){this._progressiveDoneListeners.push(T)}onDataRange(T,w){for(const M of this._rangeListeners)M(T,w)}onDataProgress(T,w){this._readyCapability.promise.then(()=>{for(const M of this._progressListeners)M(T,w)})}onDataProgressiveRead(T){this._readyCapability.promise.then(()=>{for(const w of this._progressiveReadListeners)w(T)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const T of this._progressiveDoneListeners)T()})}transportReady(){this._readyCapability.resolve()}requestDataRange(T,w){(0,u.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class vt{constructor(T,w){this._pdfInfo=T,this._transport=w}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,u.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(T){return this._transport.getPage(T)}getPageIndex(T){return this._transport.getPageIndex(T)}getDestinations(){return this._transport.getDestinations()}getDestination(T){return this._transport.getDestination(T)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(T=!1){return this._transport.startCleanup(T||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class ot{#t=null;#e=!1;constructor(T,w,M,L=!1){this._pageIndex=T,this._pageInfo=w,this._transport=M,this._stats=L?new p.StatTimer:null,this._pdfBug=L,this.commonObjs=M.commonObjs,this.objs=new ft,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:T,rotation:w=this.rotate,offsetX:M=0,offsetY:L=0,dontFlip:U=!1}={}){return new p.PageViewport({viewBox:this.view,scale:T,rotation:w,offsetX:M,offsetY:L,dontFlip:U})}getAnnotations({intent:T="display"}={}){const w=this._transport.getRenderingIntent(T);return this._transport.getAnnotations(this._pageIndex,w.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,u.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:T,viewport:w,intent:M="display",annotationMode:L=u.AnnotationMode.ENABLE,transform:U=null,background:H=null,optionalContentConfigPromise:Y=null,annotationCanvasMap:$=null,pageColors:Q=null,printAnnotationStorage:nt=null}){this._stats?.time("Overall");const rt=this._transport.getRenderingIntent(M,L,nt);this.#e=!1,this.#i(),Y||(Y=this._transport.getOptionalContentConfig());let it=this._intentStates.get(rt.cacheKey);it||(it=Object.create(null),this._intentStates.set(rt.cacheKey,it)),it.streamReaderCancelTimeout&&(clearTimeout(it.streamReaderCancelTimeout),it.streamReaderCancelTimeout=null);const J=!!(rt.renderingIntent&u.RenderingIntentFlag.PRINT);it.displayReadyCapability||(it.displayReadyCapability=new u.PromiseCapability,it.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(rt));const Z=Mt=>{it.renderTasks.delete(Et),(this._maybeCleanupAfterRender||J)&&(this.#e=!0),this.#n(!J),Mt?(Et.capability.reject(Mt),this._abortOperatorList({intentState:it,reason:Mt instanceof Error?Mt:new Error(Mt)})):Et.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},Et=new yt({callback:Z,params:{canvasContext:T,viewport:w,transform:U,background:H},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:$,operatorList:it.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!J,pdfBug:this._pdfBug,pageColors:Q});(it.renderTasks||=new Set).add(Et);const St=Et.task;return Promise.all([it.displayReadyCapability.promise,Y]).then(([Mt,Dt])=>{if(this.destroyed){Z();return}this._stats?.time("Rendering"),Et.initializeGraphics({transparency:Mt,optionalContentConfig:Dt}),Et.operatorListChanged()}).catch(Z),St}getOperatorList({intent:T="display",annotationMode:w=u.AnnotationMode.ENABLE,printAnnotationStorage:M=null}={}){function L(){H.operatorList.lastChunk&&(H.opListReadCapability.resolve(H.operatorList),H.renderTasks.delete(Y))}const U=this._transport.getRenderingIntent(T,w,M,!0);let H=this._intentStates.get(U.cacheKey);H||(H=Object.create(null),this._intentStates.set(U.cacheKey,H));let Y;return H.opListReadCapability||(Y=Object.create(null),Y.operatorListChanged=L,H.opListReadCapability=new u.PromiseCapability,(H.renderTasks||=new Set).add(Y),H.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(U)),H.opListReadCapability.promise}streamTextContent({includeMarkedContent:T=!1,disableNormalization:w=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:T===!0,disableNormalization:w===!0},{highWaterMark:100,size(L){return L.items.length}})}getTextContent(T={}){if(this._transport._htmlForXfa)return this.getXfa().then(M=>P.XfaText.textContent(M));const w=this.streamTextContent(T);return new Promise(function(M,L){function U(){H.read().then(function({value:$,done:Q}){if(Q){M(Y);return}Object.assign(Y.styles,$.styles),Y.items.push(...$.items),U()},L)}const H=w.getReader(),Y={items:[],styles:Object.create(null)};U()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const T=[];for(const w of this._intentStates.values())if(this._abortOperatorList({intentState:w,reason:new Error("Page was destroyed."),force:!0}),!w.opListReadCapability)for(const M of w.renderTasks)T.push(M.completed),M.cancel();return this.objs.clear(),this.#e=!1,this.#i(),Promise.all(T)}cleanup(T=!1){this.#e=!0;const w=this.#n(!1);return T&&w&&(this._stats&&=new p.StatTimer),w}#n(T=!1){if(this.#i(),!this.#e||this.destroyed)return!1;if(T)return this.#t=setTimeout(()=>{this.#t=null,this.#n(!1)},q),!1;for(const{renderTasks:w,operatorList:M}of this._intentStates.values())if(w.size>0||!M.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#i(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(T,w){const M=this._intentStates.get(w);M&&(this._stats?.timeEnd("Page Request"),M.displayReadyCapability?.resolve(T))}_renderPageChunk(T,w){for(let M=0,L=T.length;M<L;M++)w.operatorList.fnArray.push(T.fnArray[M]),w.operatorList.argsArray.push(T.argsArray[M]);w.operatorList.lastChunk=T.lastChunk,w.operatorList.separateAnnots=T.separateAnnots;for(const M of w.renderTasks)M.operatorListChanged();T.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:T,cacheKey:w,annotationStorageSerializable:M}){const{map:L,transfer:U}=M,Y=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:T,cacheKey:w,annotationStorage:L},U).getReader(),$=this._intentStates.get(w);$.streamReader=Y;const Q=()=>{Y.read().then(({value:nt,done:rt})=>{if(rt){$.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(nt,$),Q())},nt=>{if($.streamReader=null,!this._transport.destroyed){if($.operatorList){$.operatorList.lastChunk=!0;for(const rt of $.renderTasks)rt.operatorListChanged();this.#n(!0)}if($.displayReadyCapability)$.displayReadyCapability.reject(nt);else if($.opListReadCapability)$.opListReadCapability.reject(nt);else throw nt}})};Q()}_abortOperatorList({intentState:T,reason:w,force:M=!1}){if(T.streamReader){if(T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null),!M){if(T.renderTasks.size>0)return;if(w instanceof p.RenderingCancelledException){let L=O;w.extraDelay>0&&w.extraDelay<1e3&&(L+=w.extraDelay),T.streamReaderCancelTimeout=setTimeout(()=>{T.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:T,reason:w,force:!0})},L);return}}if(T.streamReader.cancel(new u.AbortException(w.message)).catch(()=>{}),T.streamReader=null,!this._transport.destroyed){for(const[L,U]of this._intentStates)if(U===T){this._intentStates.delete(L);break}this.cleanup()}}}get stats(){return this._stats}}class ct{#t=new Set;#e=Promise.resolve();postMessage(T,w){const M={data:structuredClone(T,w?{transfer:w}:null)};this.#e.then(()=>{for(const L of this.#t)L.call(this,M)})}addEventListener(T,w){this.#t.add(w)}removeEventListener(T,w){this.#t.delete(w)}terminate(){this.#t.clear()}}const z={isWorkerDisabled:!1,fakeWorkerId:0};u.isNodeJS&&(z.isWorkerDisabled=!0,A.GlobalWorkerOptions.workerSrc||="./pdf.worker.mjs"),z.isSameOrigin=function(b,T){let w;try{if(w=new URL(b),!w.origin||w.origin==="null")return!1}catch{return!1}const M=new URL(T,w);return w.origin===M.origin},z.createCDNWrapper=function(b){const T=`await import("${b}");`;return URL.createObjectURL(new Blob([T],{type:"text/javascript"}))};class K{static#t;constructor({name:T=null,port:w=null,verbosity:M=(0,u.getVerbosityLevel)()}={}){if(this.name=T,this.destroyed=!1,this.verbosity=M,this._readyCapability=new u.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,w){if(K.#t?.has(w))throw new Error("Cannot use more than one PDFWorker per port.");(K.#t||=new WeakMap).set(w,this),this._initializeFromPort(w);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(T){this._port=T,this._messageHandler=new E.MessageHandler("main","worker",T),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!z.isWorkerDisabled&&!K.#e){let{workerSrc:T}=K;try{z.isSameOrigin(window.location.href,T)||(T=z.createCDNWrapper(new URL(T,window.location).href));const w=new Worker(T,{type:"module"}),M=new E.MessageHandler("main","worker",w),L=()=>{w.removeEventListener("error",U),M.destroy(),w.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},U=()=>{this._webWorker||L()};w.addEventListener("error",U),M.on("test",Y=>{if(w.removeEventListener("error",U),this.destroyed){L();return}Y?(this._messageHandler=M,this._port=w,this._webWorker=w,this._readyCapability.resolve(),M.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),M.destroy(),w.terminate())}),M.on("ready",Y=>{if(w.removeEventListener("error",U),this.destroyed){L();return}try{H()}catch{this._setupFakeWorker()}});const H=()=>{const Y=new Uint8Array;M.send("test",Y,[Y.buffer])};H();return}catch{(0,u.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){z.isWorkerDisabled||((0,u.warn)("Setting up fake worker."),z.isWorkerDisabled=!0),K._setupFakeWorkerGlobal.then(T=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const w=new ct;this._port=w;const M=`fake${z.fakeWorkerId++}`,L=new E.MessageHandler(M+"_worker",M,w);T.setup(L,w);const U=new E.MessageHandler(M,M+"_worker",w);this._messageHandler=U,this._readyCapability.resolve(),U.send("configure",{verbosity:this.verbosity})}).catch(T=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${T.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),K.#t?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(T){if(!T?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const w=this.#t?.get(T.port);if(w){if(w._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return w}return new K(T)}static get workerSrc(){if(A.GlobalWorkerOptions.workerSrc)return A.GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#e(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const T=async()=>this.#e?this.#e:(await import(this.workerSrc)).WorkerMessageHandler;return(0,u.shadow)(this,"_setupFakeWorkerGlobal",T())}}class at{#t=new Map;#e=new Map;#n=new Map;#i=null;constructor(T,w,M,L,U){this.messageHandler=T,this.loadingTask=w,this.commonObjs=new ft,this.fontLoader=new y.FontLoader({ownerDocument:L.ownerDocument,styleElement:L.styleElement}),this._params=L,this.canvasFactory=U.canvasFactory,this.filterFactory=U.filterFactory,this.cMapReaderFactory=U.cMapReaderFactory,this.standardFontDataFactory=U.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=M,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new u.PromiseCapability,this.setupMessageHandler()}#s(T,w=null){const M=this.#t.get(T);if(M)return M;const L=this.messageHandler.sendWithPromise(T,w);return this.#t.set(T,L),L}get annotationStorage(){return(0,u.shadow)(this,"annotationStorage",new d.AnnotationStorage)}getRenderingIntent(T,w=u.AnnotationMode.ENABLE,M=null,L=!1){let U=u.RenderingIntentFlag.DISPLAY,H=d.SerializableEmpty;switch(T){case"any":U=u.RenderingIntentFlag.ANY;break;case"display":break;case"print":U=u.RenderingIntentFlag.PRINT;break;default:(0,u.warn)(`getRenderingIntent - invalid intent: ${T}`)}switch(w){case u.AnnotationMode.DISABLE:U+=u.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case u.AnnotationMode.ENABLE:break;case u.AnnotationMode.ENABLE_FORMS:U+=u.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case u.AnnotationMode.ENABLE_STORAGE:U+=u.RenderingIntentFlag.ANNOTATIONS_STORAGE,H=(U&u.RenderingIntentFlag.PRINT&&M instanceof d.PrintAnnotationStorage?M:this.annotationStorage).serializable;break;default:(0,u.warn)(`getRenderingIntent - invalid annotationMode: ${w}`)}return L&&(U+=u.RenderingIntentFlag.OPLIST),{renderingIntent:U,cacheKey:`${U}_${H.hash}`,annotationStorageSerializable:H}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new u.PromiseCapability,this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const T=[];for(const M of this.#e.values())T.push(M._destroy());this.#e.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const w=this.messageHandler.sendWithPromise("Terminate",null);return T.push(w),Promise.all(T).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new u.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:T,loadingTask:w}=this;T.on("GetReader",(M,L)=>{(0,u.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=U=>{this._lastProgress={loaded:U.loaded,total:U.total}},L.onPull=()=>{this._fullReader.read().then(function({value:U,done:H}){if(H){L.close();return}(0,u.assert)(U instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),L.enqueue(new Uint8Array(U),1,[U])}).catch(U=>{L.error(U)})},L.onCancel=U=>{this._fullReader.cancel(U),L.ready.catch(H=>{if(!this.destroyed)throw H})}}),T.on("ReaderHeadersReady",M=>{const L=new u.PromiseCapability,U=this._fullReader;return U.headersReady.then(()=>{(!U.isStreamingSupported||!U.isRangeSupported)&&(this._lastProgress&&w.onProgress?.(this._lastProgress),U.onProgress=H=>{w.onProgress?.({loaded:H.loaded,total:H.total})}),L.resolve({isStreamingSupported:U.isStreamingSupported,isRangeSupported:U.isRangeSupported,contentLength:U.contentLength})},L.reject),L.promise}),T.on("GetRangeReader",(M,L)=>{(0,u.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const U=this._networkStream.getRangeReader(M.begin,M.end);if(!U){L.close();return}L.onPull=()=>{U.read().then(function({value:H,done:Y}){if(Y){L.close();return}(0,u.assert)(H instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),L.enqueue(new Uint8Array(H),1,[H])}).catch(H=>{L.error(H)})},L.onCancel=H=>{U.cancel(H),L.ready.catch(Y=>{if(!this.destroyed)throw Y})}}),T.on("GetDoc",({pdfInfo:M})=>{this._numPages=M.numPages,this._htmlForXfa=M.htmlForXfa,delete M.htmlForXfa,w._capability.resolve(new vt(M,this))}),T.on("DocException",function(M){let L;switch(M.name){case"PasswordException":L=new u.PasswordException(M.message,M.code);break;case"InvalidPDFException":L=new u.InvalidPDFException(M.message);break;case"MissingPDFException":L=new u.MissingPDFException(M.message);break;case"UnexpectedResponseException":L=new u.UnexpectedResponseException(M.message,M.status);break;case"UnknownErrorException":L=new u.UnknownErrorException(M.message,M.details);break;default:(0,u.unreachable)("DocException - expected a valid Error.")}w._capability.reject(L)}),T.on("PasswordRequest",M=>{if(this.#i=new u.PromiseCapability,w.onPassword){const L=U=>{U instanceof Error?this.#i.reject(U):this.#i.resolve({password:U})};try{w.onPassword(L,M.code)}catch(U){this.#i.reject(U)}}else this.#i.reject(new u.PasswordException(M.message,M.code));return this.#i.promise}),T.on("DataLoaded",M=>{w.onProgress?.({loaded:M.length,total:M.length}),this.downloadInfoCapability.resolve(M)}),T.on("StartRenderPage",M=>{if(this.destroyed)return;this.#e.get(M.pageIndex)._startRenderPage(M.transparency,M.cacheKey)}),T.on("commonobj",([M,L,U])=>{if(this.destroyed||this.commonObjs.has(M))return null;switch(L){case"Font":const H=this._params;if("error"in U){const nt=U.error;(0,u.warn)(`Error during font loading: ${nt}`),this.commonObjs.resolve(M,nt);break}const Y=H.pdfBug&&globalThis.FontInspector?.enabled?(nt,rt)=>globalThis.FontInspector.fontAdded(nt,rt):null,$=new y.FontFaceObject(U,{isEvalSupported:H.isEvalSupported,disableFontFace:H.disableFontFace,ignoreErrors:H.ignoreErrors,inspectFont:Y});this.fontLoader.bind($).catch(nt=>T.sendWithPromise("FontFallback",{id:M})).finally(()=>{!H.fontExtraProperties&&$.data&&($.data=null),this.commonObjs.resolve(M,$)});break;case"CopyLocalImage":const{imageRef:Q}=U;(0,u.assert)(Q,"The imageRef must be defined.");for(const nt of this.#e.values())for(const[,rt]of nt.objs)if(rt.ref===Q)return rt.dataLen?(this.commonObjs.resolve(M,structuredClone(rt)),rt.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(M,U);break;default:throw new Error(`Got unknown common object type ${L}`)}return null}),T.on("obj",([M,L,U,H])=>{if(this.destroyed)return;const Y=this.#e.get(L);if(!Y.objs.has(M)){if(Y._intentStates.size===0){H?.bitmap?.close();return}switch(U){case"Image":Y.objs.resolve(M,H),H?.dataLen>u.MAX_IMAGE_SIZE_TO_CACHE&&(Y._maybeCleanupAfterRender=!0);break;case"Pattern":Y.objs.resolve(M,H);break;default:throw new Error(`Got unknown object type ${U}`)}}}),T.on("DocProgress",M=>{this.destroyed||w.onProgress?.({loaded:M.loaded,total:M.total})}),T.on("FetchBuiltInCMap",M=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(M):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),T.on("FetchStandardFontData",M=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(M):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,u.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:T,transfer:w}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:T,filename:this._fullReader?.filename??null},w).finally(()=>{this.annotationStorage.resetModified()})}getPage(T){if(!Number.isInteger(T)||T<=0||T>this._numPages)return Promise.reject(new Error("Invalid page request."));const w=T-1,M=this.#n.get(w);if(M)return M;const L=this.messageHandler.sendWithPromise("GetPage",{pageIndex:w}).then(U=>{if(this.destroyed)throw new Error("Transport destroyed");const H=new ot(w,U,this,this._params.pdfBug);return this.#e.set(w,H),H});return this.#n.set(w,L),L}getPageIndex(T){return typeof T!="object"||T===null||!Number.isInteger(T.num)||T.num<0||!Number.isInteger(T.gen)||T.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:T.num,gen:T.gen})}getAnnotations(T,w){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:T,intent:w})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(T){return typeof T!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:T})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(T){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:T})}getStructTree(T){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:T})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(T=>new C.OptionalContentConfig(T))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const T="GetMetadata",w=this.#t.get(T);if(w)return w;const M=this.messageHandler.sendWithPromise(T,null).then(L=>({info:L[0],metadata:L[1]?new R.Metadata(L[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(T,M),M}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(T=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const w of this.#e.values())if(!w.cleanup())throw new Error(`startCleanup: Page ${w.pageNumber} is currently rendering.`);this.commonObjs.clear(),T||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:T,enableXfa:w}=this._params;return(0,u.shadow)(this,"loadingParams",{disableAutoFetch:T,enableXfa:w})}}class ft{#t=Object.create(null);#e(T){return this.#t[T]||={capability:new u.PromiseCapability,data:null}}get(T,w=null){if(w){const L=this.#e(T);return L.capability.promise.then(()=>w(L.data)),null}const M=this.#t[T];if(!M?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${T}.`);return M.data}has(T){return this.#t[T]?.capability.settled??!1}resolve(T,w=null){const M=this.#e(T);M.data=w,M.capability.resolve()}clear(){for(const T in this.#t){const{data:w}=this.#t[T];w?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const T in this.#t){const{capability:w,data:M}=this.#t[T];w.settled&&(yield[T,M])}}}class Ct{#t=null;constructor(T){this.#t=T,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(T=0){this.#t.cancel(null,T)}get separateAnnots(){const{separateAnnots:T}=this.#t.operatorList;if(!T)return!1;const{annotationCanvasMap:w}=this.#t;return T.form||T.canvas&&w?.size>0}}class yt{static#t=new WeakSet;constructor({callback:T,params:w,objs:M,commonObjs:L,annotationCanvasMap:U,operatorList:H,pageIndex:Y,canvasFactory:$,filterFactory:Q,useRequestAnimationFrame:nt=!1,pdfBug:rt=!1,pageColors:it=null}){this.callback=T,this.params=w,this.objs=M,this.commonObjs=L,this.annotationCanvasMap=U,this.operatorListIdx=null,this.operatorList=H,this._pageIndex=Y,this.canvasFactory=$,this.filterFactory=Q,this._pdfBug=rt,this.pageColors=it,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=nt===!0&&typeof window<"u",this.cancelled=!1,this.capability=new u.PromiseCapability,this.task=new Ct(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=w.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:T=!1,optionalContentConfig:w}){if(this.cancelled)return;if(this._canvas){if(yt.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");yt.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:M,viewport:L,transform:U,background:H}=this.params;this.gfx=new g.CanvasGraphics(M,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:w},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:U,viewport:L,transparency:T,background:H}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(T=null,w=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),yt.#t.delete(this._canvas),this.callback(T||new p.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,w))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),yt.#t.delete(this._canvas),this.callback())))}}const F="4.0.379",N="9e14d04fd";r()}catch(V){r(V)}})}),822:((i,e,s)=>{s.d(e,{BaseCMapReaderFactory:()=>d,BaseCanvasFactory:()=>u,BaseFilterFactory:()=>r,BaseSVGFactory:()=>y,BaseStandardFontDataFactory:()=>p});var o=s(266);class r{constructor(){this.constructor===r&&(0,o.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(g){return"none"}addHCMFilter(g,A){return"none"}addHighlightHCMFilter(g,A,E,R){return"none"}destroy(g=!1){}}class u{constructor(){this.constructor===u&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}create(g,A){if(g<=0||A<=0)throw new Error("Invalid canvas size");const E=this._createCanvas(g,A);return{canvas:E,context:E.getContext("2d")}}reset(g,A,E){if(!g.canvas)throw new Error("Canvas is not specified");if(A<=0||E<=0)throw new Error("Invalid canvas size");g.canvas.width=A,g.canvas.height=E}destroy(g){if(!g.canvas)throw new Error("Canvas is not specified");g.canvas.width=0,g.canvas.height=0,g.canvas=null,g.context=null}_createCanvas(g,A){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}class d{constructor({baseUrl:g=null,isCompressed:A=!0}){this.constructor===d&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=g,this.isCompressed=A}async fetch({name:g}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!g)throw new Error("CMap name must be specified.");const A=this.baseUrl+g+(this.isCompressed?".bcmap":""),E=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return this._fetchData(A,E).catch(R=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${A}`)})}_fetchData(g,A){(0,o.unreachable)("Abstract method `_fetchData` called.")}}class p{constructor({baseUrl:g=null}){this.constructor===p&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=g}async fetch({filename:g}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!g)throw new Error("Font filename must be specified.");const A=`${this.baseUrl}${g}`;return this._fetchData(A).catch(E=>{throw new Error(`Unable to load font data at: ${A}`)})}_fetchData(g){(0,o.unreachable)("Abstract method `_fetchData` called.")}}class y{constructor(){this.constructor===y&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")}create(g,A,E=!1){if(g<=0||A<=0)throw new Error("Invalid SVG dimensions");const R=this._createSVG("svg:svg");return R.setAttribute("version","1.1"),E||(R.setAttribute("width",`${g}px`),R.setAttribute("height",`${A}px`)),R.setAttribute("preserveAspectRatio","none"),R.setAttribute("viewBox",`0 0 ${g} ${A}`),R}createElement(g){if(typeof g!="string")throw new Error("Invalid SVG element type");return this._createSVG(g)}_createSVG(g){(0,o.unreachable)("Abstract method `_createSVG` called.")}}}),250:((i,e,s)=>{s.d(e,{CanvasGraphics:()=>F});var o=s(266),r=s(473);const u={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function d(N,b){if(!b)return;const T=b[2]-b[0],w=b[3]-b[1],M=new Path2D;M.rect(b[0],b[1],T,w),N.clip(M)}class p{constructor(){this.constructor===p&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,o.unreachable)("Abstract method `getPattern` called.")}}class y extends p{constructor(b){super(),this._type=b[1],this._bbox=b[2],this._colorStops=b[3],this._p0=b[4],this._p1=b[5],this._r0=b[6],this._r1=b[7],this.matrix=null}_createGradient(b){let T;this._type==="axial"?T=b.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(T=b.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const w of this._colorStops)T.addColorStop(w[0],w[1]);return T}getPattern(b,T,w,M){let L;if(M===u.STROKE||M===u.FILL){const U=T.current.getClippedPathBoundingBox(M,(0,r.getCurrentTransform)(b))||[0,0,0,0],H=Math.ceil(U[2]-U[0])||1,Y=Math.ceil(U[3]-U[1])||1,$=T.cachedCanvases.getCanvas("pattern",H,Y,!0),Q=$.context;Q.clearRect(0,0,Q.canvas.width,Q.canvas.height),Q.beginPath(),Q.rect(0,0,Q.canvas.width,Q.canvas.height),Q.translate(-U[0],-U[1]),w=o.Util.transform(w,[1,0,0,1,U[0],U[1]]),Q.transform(...T.baseTransform),this.matrix&&Q.transform(...this.matrix),d(Q,this._bbox),Q.fillStyle=this._createGradient(Q),Q.fill(),L=b.createPattern($.canvas,"no-repeat");const nt=new DOMMatrix(w);L.setTransform(nt)}else d(b,this._bbox),L=this._createGradient(b);return L}}function h(N,b,T,w,M,L,U,H){const Y=b.coords,$=b.colors,Q=N.data,nt=N.width*4;let rt;Y[T+1]>Y[w+1]&&(rt=T,T=w,w=rt,rt=L,L=U,U=rt),Y[w+1]>Y[M+1]&&(rt=w,w=M,M=rt,rt=U,U=H,H=rt),Y[T+1]>Y[w+1]&&(rt=T,T=w,w=rt,rt=L,L=U,U=rt);const it=(Y[T]+b.offsetX)*b.scaleX,J=(Y[T+1]+b.offsetY)*b.scaleY,Z=(Y[w]+b.offsetX)*b.scaleX,Et=(Y[w+1]+b.offsetY)*b.scaleY,St=(Y[M]+b.offsetX)*b.scaleX,Mt=(Y[M+1]+b.offsetY)*b.scaleY;if(J>=Mt)return;const Dt=$[L],Nt=$[L+1],Ft=$[L+2],Pt=$[U],Gt=$[U+1],Jt=$[U+2],Xt=$[H],$t=$[H+1],Ut=$[H+2],ae=Math.round(J),Se=Math.round(Mt);let ke,ve,pe,fe,Ie,ze,Pn,_n;for(let Fe=ae;Fe<=Se;Fe++){if(Fe<Et){const Ae=Fe<J?0:(J-Fe)/(J-Et);ke=it-(it-Z)*Ae,ve=Dt-(Dt-Pt)*Ae,pe=Nt-(Nt-Gt)*Ae,fe=Ft-(Ft-Jt)*Ae}else{let Ae;Fe>Mt?Ae=1:Et===Mt?Ae=0:Ae=(Et-Fe)/(Et-Mt),ke=Z-(Z-St)*Ae,ve=Pt-(Pt-Xt)*Ae,pe=Gt-(Gt-$t)*Ae,fe=Jt-(Jt-Ut)*Ae}let xe;Fe<J?xe=0:Fe>Mt?xe=1:xe=(J-Fe)/(J-Mt),Ie=it-(it-St)*xe,ze=Dt-(Dt-Xt)*xe,Pn=Nt-(Nt-$t)*xe,_n=Ft-(Ft-Ut)*xe;const ni=Math.round(Math.min(ke,Ie)),en=Math.round(Math.max(ke,Ie));let ii=nt*Fe+ni*4;for(let Ae=ni;Ae<=en;Ae++)xe=(ke-Ae)/(ke-Ie),xe<0?xe=0:xe>1&&(xe=1),Q[ii++]=ve-(ve-ze)*xe|0,Q[ii++]=pe-(pe-Pn)*xe|0,Q[ii++]=fe-(fe-_n)*xe|0,Q[ii++]=255}}function g(N,b,T){const w=b.coords,M=b.colors;let L,U;switch(b.type){case"lattice":const H=b.verticesPerRow,Y=Math.floor(w.length/H)-1,$=H-1;for(L=0;L<Y;L++){let Q=L*H;for(let nt=0;nt<$;nt++,Q++)h(N,T,w[Q],w[Q+1],w[Q+H],M[Q],M[Q+1],M[Q+H]),h(N,T,w[Q+H+1],w[Q+1],w[Q+H],M[Q+H+1],M[Q+1],M[Q+H])}break;case"triangles":for(L=0,U=w.length;L<U;L+=3)h(N,T,w[L],w[L+1],w[L+2],M[L],M[L+1],M[L+2]);break;default:throw new Error("illegal figure")}}class A extends p{constructor(b){super(),this._coords=b[2],this._colors=b[3],this._figures=b[4],this._bounds=b[5],this._bbox=b[7],this._background=b[8],this.matrix=null}_createMeshCanvas(b,T,w){const H=Math.floor(this._bounds[0]),Y=Math.floor(this._bounds[1]),$=Math.ceil(this._bounds[2])-H,Q=Math.ceil(this._bounds[3])-Y,nt=Math.min(Math.ceil(Math.abs($*b[0]*1.1)),3e3),rt=Math.min(Math.ceil(Math.abs(Q*b[1]*1.1)),3e3),it=$/nt,J=Q/rt,Z={coords:this._coords,colors:this._colors,offsetX:-H,offsetY:-Y,scaleX:1/it,scaleY:1/J},Et=nt+4,St=rt+4,Mt=w.getCanvas("mesh",Et,St,!1),Dt=Mt.context,Nt=Dt.createImageData(nt,rt);if(T){const Pt=Nt.data;for(let Gt=0,Jt=Pt.length;Gt<Jt;Gt+=4)Pt[Gt]=T[0],Pt[Gt+1]=T[1],Pt[Gt+2]=T[2],Pt[Gt+3]=255}for(const Pt of this._figures)g(Nt,Pt,Z);return Dt.putImageData(Nt,2,2),{canvas:Mt.canvas,offsetX:H-2*it,offsetY:Y-2*J,scaleX:it,scaleY:J}}getPattern(b,T,w,M){d(b,this._bbox);let L;if(M===u.SHADING)L=o.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(b));else if(L=o.Util.singularValueDecompose2dScale(T.baseTransform),this.matrix){const H=o.Util.singularValueDecompose2dScale(this.matrix);L=[L[0]*H[0],L[1]*H[1]]}const U=this._createMeshCanvas(L,M===u.SHADING?null:this._background,T.cachedCanvases);return M!==u.SHADING&&(b.setTransform(...T.baseTransform),this.matrix&&b.transform(...this.matrix)),b.translate(U.offsetX,U.offsetY),b.scale(U.scaleX,U.scaleY),b.createPattern(U.canvas,"no-repeat")}}class E extends p{getPattern(){return"hotpink"}}function R(N){switch(N[0]){case"RadialAxial":return new y(N);case"Mesh":return new A(N);case"Dummy":return new E}throw new Error(`Unknown IR type: ${N[0]}`)}const C={COLORED:1,UNCOLORED:2};class _{static MAX_PATTERN_SIZE=3e3;constructor(b,T,w,M,L){this.operatorList=b[2],this.matrix=b[3]||[1,0,0,1,0,0],this.bbox=b[4],this.xstep=b[5],this.ystep=b[6],this.paintType=b[7],this.tilingType=b[8],this.color=T,this.ctx=w,this.canvasGraphicsFactory=M,this.baseTransform=L}createPatternCanvas(b){const T=this.operatorList,w=this.bbox,M=this.xstep,L=this.ystep,U=this.paintType,H=this.tilingType,Y=this.color,$=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+H);const Q=w[0],nt=w[1],rt=w[2],it=w[3],J=o.Util.singularValueDecompose2dScale(this.matrix),Z=o.Util.singularValueDecompose2dScale(this.baseTransform),Et=[J[0]*Z[0],J[1]*Z[1]],St=this.getSizeAndScale(M,this.ctx.canvas.width,Et[0]),Mt=this.getSizeAndScale(L,this.ctx.canvas.height,Et[1]),Dt=b.cachedCanvases.getCanvas("pattern",St.size,Mt.size,!0),Nt=Dt.context,Ft=$.createCanvasGraphics(Nt);Ft.groupLevel=b.groupLevel,this.setFillAndStrokeStyleToContext(Ft,U,Y);let Pt=Q,Gt=nt,Jt=rt,Xt=it;return Q<0&&(Pt=0,Jt+=Math.abs(Q)),nt<0&&(Gt=0,Xt+=Math.abs(nt)),Nt.translate(-(St.scale*Pt),-(Mt.scale*Gt)),Ft.transform(St.scale,0,0,Mt.scale,0,0),Nt.save(),this.clipBbox(Ft,Pt,Gt,Jt,Xt),Ft.baseTransform=(0,r.getCurrentTransform)(Ft.ctx),Ft.executeOperatorList(T),Ft.endDrawing(),{canvas:Dt.canvas,scaleX:St.scale,scaleY:Mt.scale,offsetX:Pt,offsetY:Gt}}getSizeAndScale(b,T,w){b=Math.abs(b);const M=Math.max(_.MAX_PATTERN_SIZE,T);let L=Math.ceil(b*w);return L>=M?L=M:w=L/b,{scale:w,size:L}}clipBbox(b,T,w,M,L){const U=M-T,H=L-w;b.ctx.rect(T,w,U,H),b.current.updateRectMinMax((0,r.getCurrentTransform)(b.ctx),[T,w,M,L]),b.clip(),b.endPath()}setFillAndStrokeStyleToContext(b,T,w){const M=b.ctx,L=b.current;switch(T){case C.COLORED:const U=this.ctx;M.fillStyle=U.fillStyle,M.strokeStyle=U.strokeStyle,L.fillColor=U.fillStyle,L.strokeColor=U.strokeStyle;break;case C.UNCOLORED:const H=o.Util.makeHexColor(w[0],w[1],w[2]);M.fillStyle=H,M.strokeStyle=H,L.fillColor=H,L.strokeColor=H;break;default:throw new o.FormatError(`Unsupported paint type: ${T}`)}}getPattern(b,T,w,M){let L=w;M!==u.SHADING&&(L=o.Util.transform(L,T.baseTransform),this.matrix&&(L=o.Util.transform(L,this.matrix)));const U=this.createPatternCanvas(T);let H=new DOMMatrix(L);H=H.translate(U.offsetX,U.offsetY),H=H.scale(1/U.scaleX,1/U.scaleY);const Y=b.createPattern(U.canvas,"repeat");return Y.setTransform(H),Y}}function v({src:N,srcPos:b=0,dest:T,width:w,height:M,nonBlackColor:L=4294967295,inverseDecode:U=!1}){const H=o.FeatureTest.isLittleEndian?4278190080:255,[Y,$]=U?[L,H]:[H,L],Q=w>>3,nt=w&7,rt=N.length;T=new Uint32Array(T.buffer);let it=0;for(let J=0;J<M;J++){for(const Et=b+Q;b<Et;b++){const St=b<rt?N[b]:255;T[it++]=St&128?$:Y,T[it++]=St&64?$:Y,T[it++]=St&32?$:Y,T[it++]=St&16?$:Y,T[it++]=St&8?$:Y,T[it++]=St&4?$:Y,T[it++]=St&2?$:Y,T[it++]=St&1?$:Y}if(nt===0)continue;const Z=b<rt?N[b++]:255;for(let Et=0;Et<nt;Et++)T[it++]=Z&1<<7-Et?$:Y}return{srcPos:b,destPos:it}}const x=16,I=100,P=4096,k=15,V=10,O=1e3,q=16;function et(N,b){if(N._removeMirroring)throw new Error("Context is already forwarding operations.");N.__originalSave=N.save,N.__originalRestore=N.restore,N.__originalRotate=N.rotate,N.__originalScale=N.scale,N.__originalTranslate=N.translate,N.__originalTransform=N.transform,N.__originalSetTransform=N.setTransform,N.__originalResetTransform=N.resetTransform,N.__originalClip=N.clip,N.__originalMoveTo=N.moveTo,N.__originalLineTo=N.lineTo,N.__originalBezierCurveTo=N.bezierCurveTo,N.__originalRect=N.rect,N.__originalClosePath=N.closePath,N.__originalBeginPath=N.beginPath,N._removeMirroring=()=>{N.save=N.__originalSave,N.restore=N.__originalRestore,N.rotate=N.__originalRotate,N.scale=N.__originalScale,N.translate=N.__originalTranslate,N.transform=N.__originalTransform,N.setTransform=N.__originalSetTransform,N.resetTransform=N.__originalResetTransform,N.clip=N.__originalClip,N.moveTo=N.__originalMoveTo,N.lineTo=N.__originalLineTo,N.bezierCurveTo=N.__originalBezierCurveTo,N.rect=N.__originalRect,N.closePath=N.__originalClosePath,N.beginPath=N.__originalBeginPath,delete N._removeMirroring},N.save=function(){b.save(),this.__originalSave()},N.restore=function(){b.restore(),this.__originalRestore()},N.translate=function(w,M){b.translate(w,M),this.__originalTranslate(w,M)},N.scale=function(w,M){b.scale(w,M),this.__originalScale(w,M)},N.transform=function(w,M,L,U,H,Y){b.transform(w,M,L,U,H,Y),this.__originalTransform(w,M,L,U,H,Y)},N.setTransform=function(w,M,L,U,H,Y){b.setTransform(w,M,L,U,H,Y),this.__originalSetTransform(w,M,L,U,H,Y)},N.resetTransform=function(){b.resetTransform(),this.__originalResetTransform()},N.rotate=function(w){b.rotate(w),this.__originalRotate(w)},N.clip=function(w){b.clip(w),this.__originalClip(w)},N.moveTo=function(T,w){b.moveTo(T,w),this.__originalMoveTo(T,w)},N.lineTo=function(T,w){b.lineTo(T,w),this.__originalLineTo(T,w)},N.bezierCurveTo=function(T,w,M,L,U,H){b.bezierCurveTo(T,w,M,L,U,H),this.__originalBezierCurveTo(T,w,M,L,U,H)},N.rect=function(T,w,M,L){b.rect(T,w,M,L),this.__originalRect(T,w,M,L)},N.closePath=function(){b.closePath(),this.__originalClosePath()},N.beginPath=function(){b.beginPath(),this.__originalBeginPath()}}class W{constructor(b){this.canvasFactory=b,this.cache=Object.create(null)}getCanvas(b,T,w){let M;return this.cache[b]!==void 0?(M=this.cache[b],this.canvasFactory.reset(M,T,w)):(M=this.canvasFactory.create(T,w),this.cache[b]=M),M}delete(b){delete this.cache[b]}clear(){for(const b in this.cache){const T=this.cache[b];this.canvasFactory.destroy(T),delete this.cache[b]}}}function lt(N,b,T,w,M,L,U,H,Y,$){const[Q,nt,rt,it,J,Z]=(0,r.getCurrentTransform)(N);if(nt===0&&rt===0){const Mt=U*Q+J,Dt=Math.round(Mt),Nt=H*it+Z,Ft=Math.round(Nt),Pt=(U+Y)*Q+J,Gt=Math.abs(Math.round(Pt)-Dt)||1,Jt=(H+$)*it+Z,Xt=Math.abs(Math.round(Jt)-Ft)||1;return N.setTransform(Math.sign(Q),0,0,Math.sign(it),Dt,Ft),N.drawImage(b,T,w,M,L,0,0,Gt,Xt),N.setTransform(Q,nt,rt,it,J,Z),[Gt,Xt]}if(Q===0&&it===0){const Mt=H*rt+J,Dt=Math.round(Mt),Nt=U*nt+Z,Ft=Math.round(Nt),Pt=(H+$)*rt+J,Gt=Math.abs(Math.round(Pt)-Dt)||1,Jt=(U+Y)*nt+Z,Xt=Math.abs(Math.round(Jt)-Ft)||1;return N.setTransform(0,Math.sign(nt),Math.sign(rt),0,Dt,Ft),N.drawImage(b,T,w,M,L,0,0,Xt,Gt),N.setTransform(Q,nt,rt,it,J,Z),[Xt,Gt]}N.drawImage(b,T,w,M,L,U,H,Y,$);const Et=Math.hypot(Q,nt),St=Math.hypot(rt,it);return[Et*Y,St*$]}function gt(N){const{width:b,height:T}=N;if(b>O||T>O)return null;const w=1e3,M=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),L=b+1;let U=new Uint8Array(L*(T+1)),H,Y,$;const Q=b+7&-8;let nt=new Uint8Array(Q*T),rt=0;for(const St of N.data){let Mt=128;for(;Mt>0;)nt[rt++]=St&Mt?0:255,Mt>>=1}let it=0;for(rt=0,nt[rt]!==0&&(U[0]=1,++it),Y=1;Y<b;Y++)nt[rt]!==nt[rt+1]&&(U[Y]=nt[rt]?2:1,++it),rt++;for(nt[rt]!==0&&(U[Y]=2,++it),H=1;H<T;H++){rt=H*Q,$=H*L,nt[rt-Q]!==nt[rt]&&(U[$]=nt[rt]?1:8,++it);let St=(nt[rt]?4:0)+(nt[rt-Q]?8:0);for(Y=1;Y<b;Y++)St=(St>>2)+(nt[rt+1]?4:0)+(nt[rt-Q+1]?8:0),M[St]&&(U[$+Y]=M[St],++it),rt++;if(nt[rt-Q]!==nt[rt]&&(U[$+Y]=nt[rt]?2:4,++it),it>w)return null}for(rt=Q*(T-1),$=H*L,nt[rt]!==0&&(U[$]=8,++it),Y=1;Y<b;Y++)nt[rt]!==nt[rt+1]&&(U[$+Y]=nt[rt]?4:8,++it),rt++;if(nt[rt]!==0&&(U[$+Y]=4,++it),it>w)return null;const J=new Int32Array([0,L,-1,0,-L,0,0,0,1]),Z=new Path2D;for(H=0;it&&H<=T;H++){let St=H*L;const Mt=St+b;for(;St<Mt&&!U[St];)St++;if(St===Mt)continue;Z.moveTo(St%L,H);const Dt=St;let Nt=U[St];do{const Ft=J[Nt];do St+=Ft;while(!U[St]);const Pt=U[St];Pt!==5&&Pt!==10?(Nt=Pt,U[St]=0):(Nt=Pt&51*Nt>>4,U[St]&=Nt>>2|Nt<<2),Z.lineTo(St%L,St/L|0),U[St]||--it}while(Dt!==St);--H}return nt=null,U=null,function(St){St.save(),St.scale(1/b,-1/T),St.translate(0,-T),St.fill(Z),St.beginPath(),St.restore()}}class Rt{constructor(b,T){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,b,T])}clone(){const b=Object.create(this);return b.clipBox=this.clipBox.slice(),b}setCurrentPoint(b,T){this.x=b,this.y=T}updatePathMinMax(b,T,w){[T,w]=o.Util.applyTransform([T,w],b),this.minX=Math.min(this.minX,T),this.minY=Math.min(this.minY,w),this.maxX=Math.max(this.maxX,T),this.maxY=Math.max(this.maxY,w)}updateRectMinMax(b,T){const w=o.Util.applyTransform(T,b),M=o.Util.applyTransform(T.slice(2),b),L=o.Util.applyTransform([T[0],T[3]],b),U=o.Util.applyTransform([T[2],T[1]],b);this.minX=Math.min(this.minX,w[0],M[0],L[0],U[0]),this.minY=Math.min(this.minY,w[1],M[1],L[1],U[1]),this.maxX=Math.max(this.maxX,w[0],M[0],L[0],U[0]),this.maxY=Math.max(this.maxY,w[1],M[1],L[1],U[1])}updateScalingPathMinMax(b,T){o.Util.scaleMinMax(b,T),this.minX=Math.min(this.minX,T[0]),this.maxX=Math.max(this.maxX,T[1]),this.minY=Math.min(this.minY,T[2]),this.maxY=Math.max(this.maxY,T[3])}updateCurvePathMinMax(b,T,w,M,L,U,H,Y,$,Q){const nt=o.Util.bezierBoundingBox(T,w,M,L,U,H,Y,$);if(Q){Q[0]=Math.min(Q[0],nt[0],nt[2]),Q[1]=Math.max(Q[1],nt[0],nt[2]),Q[2]=Math.min(Q[2],nt[1],nt[3]),Q[3]=Math.max(Q[3],nt[1],nt[3]);return}this.updateRectMinMax(b,nt)}getPathBoundingBox(b=u.FILL,T=null){const w=[this.minX,this.minY,this.maxX,this.maxY];if(b===u.STROKE){T||(0,o.unreachable)("Stroke bounding box must include transform.");const M=o.Util.singularValueDecompose2dScale(T),L=M[0]*this.lineWidth/2,U=M[1]*this.lineWidth/2;w[0]-=L,w[1]-=U,w[2]+=L,w[3]+=U}return w}updateClipFromPath(){const b=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(b||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(b){this.clipBox=b,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(b=u.FILL,T=null){return o.Util.intersect(this.clipBox,this.getPathBoundingBox(b,T))}}function _t(N,b){if(typeof ImageData<"u"&&b instanceof ImageData){N.putImageData(b,0,0);return}const T=b.height,w=b.width,M=T%q,L=(T-M)/q,U=M===0?L:L+1,H=N.createImageData(w,q);let Y=0,$;const Q=b.data,nt=H.data;let rt,it,J,Z;if(b.kind===o.ImageKind.GRAYSCALE_1BPP){const Et=Q.byteLength,St=new Uint32Array(nt.buffer,0,nt.byteLength>>2),Mt=St.length,Dt=w+7>>3,Nt=4294967295,Ft=o.FeatureTest.isLittleEndian?4278190080:255;for(rt=0;rt<U;rt++){for(J=rt<L?q:M,$=0,it=0;it<J;it++){const Pt=Et-Y;let Gt=0;const Jt=Pt>Dt?w:Pt*8-7,Xt=Jt&-8;let $t=0,Ut=0;for(;Gt<Xt;Gt+=8)Ut=Q[Y++],St[$++]=Ut&128?Nt:Ft,St[$++]=Ut&64?Nt:Ft,St[$++]=Ut&32?Nt:Ft,St[$++]=Ut&16?Nt:Ft,St[$++]=Ut&8?Nt:Ft,St[$++]=Ut&4?Nt:Ft,St[$++]=Ut&2?Nt:Ft,St[$++]=Ut&1?Nt:Ft;for(;Gt<Jt;Gt++)$t===0&&(Ut=Q[Y++],$t=128),St[$++]=Ut&$t?Nt:Ft,$t>>=1}for(;$<Mt;)St[$++]=0;N.putImageData(H,0,rt*q)}}else if(b.kind===o.ImageKind.RGBA_32BPP){for(it=0,Z=w*q*4,rt=0;rt<L;rt++)nt.set(Q.subarray(Y,Y+Z)),Y+=Z,N.putImageData(H,0,it),it+=q;rt<U&&(Z=w*M*4,nt.set(Q.subarray(Y,Y+Z)),N.putImageData(H,0,it))}else if(b.kind===o.ImageKind.RGB_24BPP)for(J=q,Z=w*J,rt=0;rt<U;rt++){for(rt>=L&&(J=M,Z=w*J),$=0,it=Z;it--;)nt[$++]=Q[Y++],nt[$++]=Q[Y++],nt[$++]=Q[Y++],nt[$++]=255;N.putImageData(H,0,rt*q)}else throw new Error(`bad image kind: ${b.kind}`)}function Tt(N,b){if(b.bitmap){N.drawImage(b.bitmap,0,0);return}const T=b.height,w=b.width,M=T%q,L=(T-M)/q,U=M===0?L:L+1,H=N.createImageData(w,q);let Y=0;const $=b.data,Q=H.data;for(let nt=0;nt<U;nt++){const rt=nt<L?q:M;({srcPos:Y}=v({src:$,srcPos:Y,dest:Q,width:w,height:rt,nonBlackColor:0})),N.putImageData(H,0,nt*q)}}function j(N,b){const T=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const w of T)N[w]!==void 0&&(b[w]=N[w]);N.setLineDash!==void 0&&(b.setLineDash(N.getLineDash()),b.lineDashOffset=N.lineDashOffset)}function X(N){if(N.strokeStyle=N.fillStyle="#000000",N.fillRule="nonzero",N.globalAlpha=1,N.lineWidth=1,N.lineCap="butt",N.lineJoin="miter",N.miterLimit=10,N.globalCompositeOperation="source-over",N.font="10px sans-serif",N.setLineDash!==void 0&&(N.setLineDash([]),N.lineDashOffset=0),!o.isNodeJS){const{filter:b}=N;b!=="none"&&b!==""&&(N.filter="none")}}function dt(N,b,T,w){const M=N.length;for(let L=3;L<M;L+=4){const U=N[L];if(U===0)N[L-3]=b,N[L-2]=T,N[L-1]=w;else if(U<255){const H=255-U;N[L-3]=N[L-3]*U+b*H>>8,N[L-2]=N[L-2]*U+T*H>>8,N[L-1]=N[L-1]*U+w*H>>8}}}function vt(N,b,T){const w=N.length,M=1/255;for(let L=3;L<w;L+=4){const U=T?T[N[L]]:N[L];b[L]=b[L]*U*M|0}}function ot(N,b,T){const w=N.length;for(let M=3;M<w;M+=4){const L=N[M-3]*77+N[M-2]*152+N[M-1]*28;b[M]=T?b[M]*T[L>>8]>>8:b[M]*L>>16}}function ct(N,b,T,w,M,L,U,H,Y,$,Q){const nt=!!L,rt=nt?L[0]:0,it=nt?L[1]:0,J=nt?L[2]:0,Z=M==="Luminosity"?ot:vt,St=Math.min(w,Math.ceil(1048576/T));for(let Mt=0;Mt<w;Mt+=St){const Dt=Math.min(St,w-Mt),Nt=N.getImageData(H-$,Mt+(Y-Q),T,Dt),Ft=b.getImageData(H,Mt+Y,T,Dt);nt&&dt(Nt.data,rt,it,J),Z(Nt.data,Ft.data,U),b.putImageData(Ft,H,Mt+Y)}}function z(N,b,T,w){const M=w[0],L=w[1],U=w[2]-M,H=w[3]-L;U===0||H===0||(ct(b.context,T,U,H,b.subtype,b.backdrop,b.transferMap,M,L,b.offsetX,b.offsetY),N.save(),N.globalAlpha=1,N.globalCompositeOperation="source-over",N.setTransform(1,0,0,1,0,0),N.drawImage(T.canvas,0,0),N.restore())}function K(N,b){const T=o.Util.singularValueDecompose2dScale(N);T[0]=Math.fround(T[0]),T[1]=Math.fround(T[1]);const w=Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS);return b!==void 0?b:T[0]<=w||T[1]<=w}const at=["butt","round","square"],ft=["miter","round","bevel"],Ct={},yt={};class F{constructor(b,T,w,M,L,{optionalContentConfig:U,markedContentStack:H=null},Y,$){this.ctx=b,this.current=new Rt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=T,this.objs=w,this.canvasFactory=M,this.filterFactory=L,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=H||[],this.optionalContentConfig=U,this.cachedCanvases=new W(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Y,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=$,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(b,T=null){return typeof b=="string"?b.startsWith("g_")?this.commonObjs.get(b):this.objs.get(b):T}beginDrawing({transform:b,viewport:T,transparency:w=!1,background:M=null}){const L=this.ctx.canvas.width,U=this.ctx.canvas.height,H=this.ctx.fillStyle;if(this.ctx.fillStyle=M||"#ffffff",this.ctx.fillRect(0,0,L,U),this.ctx.fillStyle=H,w){const Y=this.cachedCanvases.getCanvas("transparent",L,U);this.compositeCtx=this.ctx,this.transparentCanvas=Y.canvas,this.ctx=Y.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),X(this.ctx),b&&(this.ctx.transform(...b),this.outputScaleX=b[0],this.outputScaleY=b[0]),this.ctx.transform(...T.transform),this.viewportScale=T.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx)}executeOperatorList(b,T,w,M){const L=b.argsArray,U=b.fnArray;let H=T||0;const Y=L.length;if(Y===H)return H;const $=Y-H>V&&typeof w=="function",Q=$?Date.now()+k:0;let nt=0;const rt=this.commonObjs,it=this.objs;let J;for(;;){if(M!==void 0&&H===M.nextBreakPoint)return M.breakIt(H,w),H;if(J=U[H],J!==o.OPS.dependency)this[J].apply(this,L[H]);else for(const Z of L[H]){const Et=Z.startsWith("g_")?rt:it;if(!Et.has(Z))return Et.get(Z,w),H}if(H++,H===Y)return H;if($&&++nt>V){if(Date.now()>Q)return w(),H;nt=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const b of this._cachedBitmapsMap.values()){for(const T of b.values())typeof HTMLCanvasElement<"u"&&T instanceof HTMLCanvasElement&&(T.width=T.height=0);b.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const b=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(b!=="none"){const T=this.ctx.filter;this.ctx.filter=b,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=T}}}_scaleImage(b,T){const w=b.width,M=b.height;let L=Math.max(Math.hypot(T[0],T[1]),1),U=Math.max(Math.hypot(T[2],T[3]),1),H=w,Y=M,$="prescale1",Q,nt;for(;L>2&&H>1||U>2&&Y>1;){let rt=H,it=Y;L>2&&H>1&&(rt=H>=16384?Math.floor(H/2)-1||1:Math.ceil(H/2),L/=H/rt),U>2&&Y>1&&(it=Y>=16384?Math.floor(Y/2)-1||1:Math.ceil(Y)/2,U/=Y/it),Q=this.cachedCanvases.getCanvas($,rt,it),nt=Q.context,nt.clearRect(0,0,rt,it),nt.drawImage(b,0,0,H,Y,0,0,rt,it),b=Q.canvas,H=rt,Y=it,$=$==="prescale1"?"prescale2":"prescale1"}return{img:b,paintWidth:H,paintHeight:Y}}_createMaskCanvas(b){const T=this.ctx,{width:w,height:M}=b,L=this.current.fillColor,U=this.current.patternFill,H=(0,r.getCurrentTransform)(T);let Y,$,Q,nt;if((b.bitmap||b.data)&&b.count>1){const Jt=b.bitmap||b.data.buffer;$=JSON.stringify(U?H:[H.slice(0,4),L]),Y=this._cachedBitmapsMap.get(Jt),Y||(Y=new Map,this._cachedBitmapsMap.set(Jt,Y));const Xt=Y.get($);if(Xt&&!U){const $t=Math.round(Math.min(H[0],H[2])+H[4]),Ut=Math.round(Math.min(H[1],H[3])+H[5]);return{canvas:Xt,offsetX:$t,offsetY:Ut}}Q=Xt}Q||(nt=this.cachedCanvases.getCanvas("maskCanvas",w,M),Tt(nt.context,b));let rt=o.Util.transform(H,[1/w,0,0,-1/M,0,0]);rt=o.Util.transform(rt,[1,0,0,1,0,-M]);const[it,J,Z,Et]=o.Util.getAxialAlignedBoundingBox([0,0,w,M],rt),St=Math.round(Z-it)||1,Mt=Math.round(Et-J)||1,Dt=this.cachedCanvases.getCanvas("fillCanvas",St,Mt),Nt=Dt.context,Ft=it,Pt=J;Nt.translate(-Ft,-Pt),Nt.transform(...rt),Q||(Q=this._scaleImage(nt.canvas,(0,r.getCurrentTransformInverse)(Nt)),Q=Q.img,Y&&U&&Y.set($,Q)),Nt.imageSmoothingEnabled=K((0,r.getCurrentTransform)(Nt),b.interpolate),lt(Nt,Q,0,0,Q.width,Q.height,0,0,w,M),Nt.globalCompositeOperation="source-in";const Gt=o.Util.transform((0,r.getCurrentTransformInverse)(Nt),[1,0,0,1,-Ft,-Pt]);return Nt.fillStyle=U?L.getPattern(T,this,Gt,u.FILL):L,Nt.fillRect(0,0,w,M),Y&&!U&&(this.cachedCanvases.delete("fillCanvas"),Y.set($,Dt.canvas)),{canvas:Dt.canvas,offsetX:Math.round(Ft),offsetY:Math.round(Pt)}}setLineWidth(b){b!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=b,this.ctx.lineWidth=b}setLineCap(b){this.ctx.lineCap=at[b]}setLineJoin(b){this.ctx.lineJoin=ft[b]}setMiterLimit(b){this.ctx.miterLimit=b}setDash(b,T){const w=this.ctx;w.setLineDash!==void 0&&(w.setLineDash(b),w.lineDashOffset=T)}setRenderingIntent(b){}setFlatness(b){}setGState(b){for(const[T,w]of b)switch(T){case"LW":this.setLineWidth(w);break;case"LC":this.setLineCap(w);break;case"LJ":this.setLineJoin(w);break;case"ML":this.setMiterLimit(w);break;case"D":this.setDash(w[0],w[1]);break;case"RI":this.setRenderingIntent(w);break;case"FL":this.setFlatness(w);break;case"Font":this.setFont(w[0],w[1]);break;case"CA":this.current.strokeAlpha=w;break;case"ca":this.current.fillAlpha=w,this.ctx.globalAlpha=w;break;case"BM":this.ctx.globalCompositeOperation=w;break;case"SMask":this.current.activeSMask=w?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(w);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const b=this.inSMaskMode;this.current.activeSMask&&!b?this.beginSMaskMode():!this.current.activeSMask&&b&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const b=this.ctx.canvas.width,T=this.ctx.canvas.height,w="smaskGroupAt"+this.groupLevel,M=this.cachedCanvases.getCanvas(w,b,T);this.suspendedCtx=this.ctx,this.ctx=M.context;const L=this.ctx;L.setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),j(this.suspendedCtx,L),et(L,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),j(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(b){if(!this.current.activeSMask)return;b?(b[0]=Math.floor(b[0]),b[1]=Math.floor(b[1]),b[2]=Math.ceil(b[2]),b[3]=Math.ceil(b[3])):b=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const T=this.current.activeSMask,w=this.suspendedCtx;z(w,T,this.ctx,b),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(j(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const b=this.current;this.stateStack.push(b),this.current=b.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),j(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(b,T,w,M,L,U){this.ctx.transform(b,T,w,M,L,U),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(b,T,w){const M=this.ctx,L=this.current;let U=L.x,H=L.y,Y,$;const Q=(0,r.getCurrentTransform)(M),nt=Q[0]===0&&Q[3]===0||Q[1]===0&&Q[2]===0,rt=nt?w.slice(0):null;for(let it=0,J=0,Z=b.length;it<Z;it++)switch(b[it]|0){case o.OPS.rectangle:U=T[J++],H=T[J++];const Et=T[J++],St=T[J++],Mt=U+Et,Dt=H+St;M.moveTo(U,H),Et===0||St===0?M.lineTo(Mt,Dt):(M.lineTo(Mt,H),M.lineTo(Mt,Dt),M.lineTo(U,Dt)),nt||L.updateRectMinMax(Q,[U,H,Mt,Dt]),M.closePath();break;case o.OPS.moveTo:U=T[J++],H=T[J++],M.moveTo(U,H),nt||L.updatePathMinMax(Q,U,H);break;case o.OPS.lineTo:U=T[J++],H=T[J++],M.lineTo(U,H),nt||L.updatePathMinMax(Q,U,H);break;case o.OPS.curveTo:Y=U,$=H,U=T[J+4],H=T[J+5],M.bezierCurveTo(T[J],T[J+1],T[J+2],T[J+3],U,H),L.updateCurvePathMinMax(Q,Y,$,T[J],T[J+1],T[J+2],T[J+3],U,H,rt),J+=6;break;case o.OPS.curveTo2:Y=U,$=H,M.bezierCurveTo(U,H,T[J],T[J+1],T[J+2],T[J+3]),L.updateCurvePathMinMax(Q,Y,$,U,H,T[J],T[J+1],T[J+2],T[J+3],rt),U=T[J+2],H=T[J+3],J+=4;break;case o.OPS.curveTo3:Y=U,$=H,U=T[J+2],H=T[J+3],M.bezierCurveTo(T[J],T[J+1],U,H,U,H),L.updateCurvePathMinMax(Q,Y,$,T[J],T[J+1],U,H,U,H,rt),J+=4;break;case o.OPS.closePath:M.closePath();break}nt&&L.updateScalingPathMinMax(Q,rt),L.setCurrentPoint(U,H)}closePath(){this.ctx.closePath()}stroke(b=!0){const T=this.ctx,w=this.current.strokeColor;T.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof w=="object"&&w?.getPattern?(T.save(),T.strokeStyle=w.getPattern(T,this,(0,r.getCurrentTransformInverse)(T),u.STROKE),this.rescaleAndStroke(!1),T.restore()):this.rescaleAndStroke(!0)),b&&this.consumePath(this.current.getClippedPathBoundingBox()),T.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(b=!0){const T=this.ctx,w=this.current.fillColor,M=this.current.patternFill;let L=!1;M&&(T.save(),T.fillStyle=w.getPattern(T,this,(0,r.getCurrentTransformInverse)(T),u.FILL),L=!0);const U=this.current.getClippedPathBoundingBox();this.contentVisible&&U!==null&&(this.pendingEOFill?(T.fill("evenodd"),this.pendingEOFill=!1):T.fill()),L&&T.restore(),b&&this.consumePath(U)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Ct}eoClip(){this.pendingClip=yt}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const b=this.pendingTextPaths,T=this.ctx;if(b===void 0){T.beginPath();return}T.save(),T.beginPath();for(const w of b)T.setTransform(...w.transform),T.translate(w.x,w.y),w.addToPath(T,w.fontSize);T.restore(),T.clip(),T.beginPath(),delete this.pendingTextPaths}setCharSpacing(b){this.current.charSpacing=b}setWordSpacing(b){this.current.wordSpacing=b}setHScale(b){this.current.textHScale=b/100}setLeading(b){this.current.leading=-b}setFont(b,T){const w=this.commonObjs.get(b),M=this.current;if(!w)throw new Error(`Can't find font for ${b}`);if(M.fontMatrix=w.fontMatrix||o.FONT_IDENTITY_MATRIX,(M.fontMatrix[0]===0||M.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+b),T<0?(T=-T,M.fontDirection=-1):M.fontDirection=1,this.current.font=w,this.current.fontSize=T,w.isType3Font)return;const L=w.loadedName||"sans-serif",U=w.systemFontInfo?.css||`"${L}", ${w.fallbackName}`;let H="normal";w.black?H="900":w.bold&&(H="bold");const Y=w.italic?"italic":"normal";let $=T;T<x?$=x:T>I&&($=I),this.current.fontSizeScale=T/$,this.ctx.font=`${Y} ${H} ${$}px ${U}`}setTextRenderingMode(b){this.current.textRenderingMode=b}setTextRise(b){this.current.textRise=b}moveText(b,T){this.current.x=this.current.lineX+=b,this.current.y=this.current.lineY+=T}setLeadingMoveText(b,T){this.setLeading(-T),this.moveText(b,T)}setTextMatrix(b,T,w,M,L,U){this.current.textMatrix=[b,T,w,M,L,U],this.current.textMatrixScale=Math.hypot(b,T),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(b,T,w,M){const L=this.ctx,U=this.current,H=U.font,Y=U.textRenderingMode,$=U.fontSize/U.fontSizeScale,Q=Y&o.TextRenderingMode.FILL_STROKE_MASK,nt=!!(Y&o.TextRenderingMode.ADD_TO_PATH_FLAG),rt=U.patternFill&&!H.missingFile;let it;(H.disableFontFace||nt||rt)&&(it=H.getPathGenerator(this.commonObjs,b)),H.disableFontFace||rt?(L.save(),L.translate(T,w),L.beginPath(),it(L,$),M&&L.setTransform(...M),(Q===o.TextRenderingMode.FILL||Q===o.TextRenderingMode.FILL_STROKE)&&L.fill(),(Q===o.TextRenderingMode.STROKE||Q===o.TextRenderingMode.FILL_STROKE)&&L.stroke(),L.restore()):((Q===o.TextRenderingMode.FILL||Q===o.TextRenderingMode.FILL_STROKE)&&L.fillText(b,T,w),(Q===o.TextRenderingMode.STROKE||Q===o.TextRenderingMode.FILL_STROKE)&&L.strokeText(b,T,w)),nt&&(this.pendingTextPaths||=[]).push({transform:(0,r.getCurrentTransform)(L),x:T,y:w,fontSize:$,addToPath:it})}get isFontSubpixelAAEnabled(){const{context:b}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);b.scale(1.5,1),b.fillText("I",0,10);const T=b.getImageData(0,0,10,10).data;let w=!1;for(let M=3;M<T.length;M+=4)if(T[M]>0&&T[M]<255){w=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",w)}showText(b){const T=this.current,w=T.font;if(w.isType3Font)return this.showType3Text(b);const M=T.fontSize;if(M===0)return;const L=this.ctx,U=T.fontSizeScale,H=T.charSpacing,Y=T.wordSpacing,$=T.fontDirection,Q=T.textHScale*$,nt=b.length,rt=w.vertical,it=rt?1:-1,J=w.defaultVMetrics,Z=M*T.fontMatrix[0],Et=T.textRenderingMode===o.TextRenderingMode.FILL&&!w.disableFontFace&&!T.patternFill;L.save(),L.transform(...T.textMatrix),L.translate(T.x,T.y+T.textRise),$>0?L.scale(Q,-1):L.scale(Q,1);let St;if(T.patternFill){L.save();const Pt=T.fillColor.getPattern(L,this,(0,r.getCurrentTransformInverse)(L),u.FILL);St=(0,r.getCurrentTransform)(L),L.restore(),L.fillStyle=Pt}let Mt=T.lineWidth;const Dt=T.textMatrixScale;if(Dt===0||Mt===0){const Pt=T.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(Pt===o.TextRenderingMode.STROKE||Pt===o.TextRenderingMode.FILL_STROKE)&&(Mt=this.getSinglePixelWidth())}else Mt/=Dt;if(U!==1&&(L.scale(U,U),Mt/=U),L.lineWidth=Mt,w.isInvalidPDFjsFont){const Pt=[];let Gt=0;for(const Jt of b)Pt.push(Jt.unicode),Gt+=Jt.width;L.fillText(Pt.join(""),0,0),T.x+=Gt*Z*Q,L.restore(),this.compose();return}let Nt=0,Ft;for(Ft=0;Ft<nt;++Ft){const Pt=b[Ft];if(typeof Pt=="number"){Nt+=it*Pt*M/1e3;continue}let Gt=!1;const Jt=(Pt.isSpace?Y:0)+H,Xt=Pt.fontChar,$t=Pt.accent;let Ut,ae,Se=Pt.width;if(rt){const ve=Pt.vmetric||J,pe=-(Pt.vmetric?ve[1]:Se*.5)*Z,fe=ve[2]*Z;Se=ve?-ve[0]:Se,Ut=pe/U,ae=(Nt+fe)/U}else Ut=Nt/U,ae=0;if(w.remeasure&&Se>0){const ve=L.measureText(Xt).width*1e3/M*U;if(Se<ve&&this.isFontSubpixelAAEnabled){const pe=Se/ve;Gt=!0,L.save(),L.scale(pe,1),Ut/=pe}else Se!==ve&&(Ut+=(Se-ve)/2e3*M/U)}if(this.contentVisible&&(Pt.isInFont||w.missingFile)){if(Et&&!$t)L.fillText(Xt,Ut,ae);else if(this.paintChar(Xt,Ut,ae,St),$t){const ve=Ut+M*$t.offset.x/U,pe=ae-M*$t.offset.y/U;this.paintChar($t.fontChar,ve,pe,St)}}const ke=rt?Se*Z-Jt*$:Se*Z+Jt*$;Nt+=ke,Gt&&L.restore()}rt?T.y-=Nt:T.x+=Nt*Q,L.restore(),this.compose()}showType3Text(b){const T=this.ctx,w=this.current,M=w.font,L=w.fontSize,U=w.fontDirection,H=M.vertical?1:-1,Y=w.charSpacing,$=w.wordSpacing,Q=w.textHScale*U,nt=w.fontMatrix||o.FONT_IDENTITY_MATRIX,rt=b.length,it=w.textRenderingMode===o.TextRenderingMode.INVISIBLE;let J,Z,Et,St;if(!(it||L===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,T.save(),T.transform(...w.textMatrix),T.translate(w.x,w.y),T.scale(Q,U),J=0;J<rt;++J){if(Z=b[J],typeof Z=="number"){St=H*Z*L/1e3,this.ctx.translate(St,0),w.x+=St*Q;continue}const Mt=(Z.isSpace?$:0)+Y,Dt=M.charProcOperatorList[Z.operatorListId];if(!Dt){(0,o.warn)(`Type3 character "${Z.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Z,this.save(),T.scale(L,L),T.transform(...nt),this.executeOperatorList(Dt),this.restore()),Et=o.Util.applyTransform([Z.width,0],nt)[0]*L+Mt,T.translate(Et,0),w.x+=Et*Q}T.restore(),this.processingType3=null}}setCharWidth(b,T){}setCharWidthAndBounds(b,T,w,M,L,U){this.ctx.rect(w,M,L-w,U-M),this.ctx.clip(),this.endPath()}getColorN_Pattern(b){let T;if(b[0]==="TilingPattern"){const w=b[1],M=this.baseTransform||(0,r.getCurrentTransform)(this.ctx),L={createCanvasGraphics:U=>new F(U,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};T=new _(b,w,this.ctx,L,M)}else T=this._getPattern(b[1],b[2]);return T}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(b,T,w){const M=o.Util.makeHexColor(b,T,w);this.ctx.strokeStyle=M,this.current.strokeColor=M}setFillRGBColor(b,T,w){const M=o.Util.makeHexColor(b,T,w);this.ctx.fillStyle=M,this.current.fillColor=M,this.current.patternFill=!1}_getPattern(b,T=null){let w;return this.cachedPatterns.has(b)?w=this.cachedPatterns.get(b):(w=R(this.getObject(b)),this.cachedPatterns.set(b,w)),T&&(w.matrix=T),w}shadingFill(b){if(!this.contentVisible)return;const T=this.ctx;this.save();const w=this._getPattern(b);T.fillStyle=w.getPattern(T,this,(0,r.getCurrentTransformInverse)(T),u.SHADING);const M=(0,r.getCurrentTransformInverse)(T);if(M){const{width:L,height:U}=T.canvas,[H,Y,$,Q]=o.Util.getAxialAlignedBoundingBox([0,0,L,U],M);this.ctx.fillRect(H,Y,$-H,Q-Y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(b,T){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(b)&&b.length===6&&this.transform(...b),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),T)){const w=T[2]-T[0],M=T[3]-T[1];this.ctx.rect(T[0],T[1],w,M),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),T),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(b){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const T=this.ctx;b.isolated||(0,o.info)("TODO: Support non-isolated groups."),b.knockout&&(0,o.warn)("Knockout groups not supported.");const w=(0,r.getCurrentTransform)(T);if(b.matrix&&T.transform(...b.matrix),!b.bbox)throw new Error("Bounding box is required.");let M=o.Util.getAxialAlignedBoundingBox(b.bbox,(0,r.getCurrentTransform)(T));const L=[0,0,T.canvas.width,T.canvas.height];M=o.Util.intersect(M,L)||[0,0,0,0];const U=Math.floor(M[0]),H=Math.floor(M[1]);let Y=Math.max(Math.ceil(M[2])-U,1),$=Math.max(Math.ceil(M[3])-H,1),Q=1,nt=1;Y>P&&(Q=Y/P,Y=P),$>P&&(nt=$/P,$=P),this.current.startNewPathAndClipBox([0,0,Y,$]);let rt="groupAt"+this.groupLevel;b.smask&&(rt+="_smask_"+this.smaskCounter++%2);const it=this.cachedCanvases.getCanvas(rt,Y,$),J=it.context;J.scale(1/Q,1/nt),J.translate(-U,-H),J.transform(...w),b.smask?this.smaskStack.push({canvas:it.canvas,context:J,offsetX:U,offsetY:H,scaleX:Q,scaleY:nt,subtype:b.smask.subtype,backdrop:b.smask.backdrop,transferMap:b.smask.transferMap||null,startTransformInverse:null}):(T.setTransform(1,0,0,1,0,0),T.translate(U,H),T.scale(Q,nt),T.save()),j(T,J),this.ctx=J,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(T),this.groupLevel++}endGroup(b){if(!this.contentVisible)return;this.groupLevel--;const T=this.ctx,w=this.groupStack.pop();if(this.ctx=w,this.ctx.imageSmoothingEnabled=!1,b.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const M=(0,r.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...M);const L=o.Util.getAxialAlignedBoundingBox([0,0,T.canvas.width,T.canvas.height],M);this.ctx.drawImage(T.canvas,0,0),this.ctx.restore(),this.compose(L)}}beginAnnotation(b,T,w,M,L){if(this.#t(),X(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(T)&&T.length===4){const U=T[2]-T[0],H=T[3]-T[1];if(L&&this.annotationCanvasMap){w=w.slice(),w[4]-=T[0],w[5]-=T[1],T=T.slice(),T[0]=T[1]=0,T[2]=U,T[3]=H;const[Y,$]=o.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),{viewportScale:Q}=this,nt=Math.ceil(U*this.outputScaleX*Q),rt=Math.ceil(H*this.outputScaleY*Q);this.annotationCanvas=this.canvasFactory.create(nt,rt);const{canvas:it,context:J}=this.annotationCanvas;this.annotationCanvasMap.set(b,it),this.annotationCanvas.savedCtx=this.ctx,this.ctx=J,this.ctx.save(),this.ctx.setTransform(Y,0,0,-$,0,H*$),X(this.ctx)}else X(this.ctx),this.ctx.rect(T[0],T[1],U,H),this.ctx.clip(),this.endPath()}this.current=new Rt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...w),this.transform(...M)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(b){if(!this.contentVisible)return;const T=b.count;b=this.getObject(b.data,b),b.count=T;const w=this.ctx,M=this.processingType3;if(M&&(M.compiled===void 0&&(M.compiled=gt(b)),M.compiled)){M.compiled(w);return}const L=this._createMaskCanvas(b),U=L.canvas;w.save(),w.setTransform(1,0,0,1,0,0),w.drawImage(U,L.offsetX,L.offsetY),w.restore(),this.compose()}paintImageMaskXObjectRepeat(b,T,w=0,M=0,L,U){if(!this.contentVisible)return;b=this.getObject(b.data,b);const H=this.ctx;H.save();const Y=(0,r.getCurrentTransform)(H);H.transform(T,w,M,L,0,0);const $=this._createMaskCanvas(b);H.setTransform(1,0,0,1,$.offsetX-Y[4],$.offsetY-Y[5]);for(let Q=0,nt=U.length;Q<nt;Q+=2){const rt=o.Util.transform(Y,[T,w,M,L,U[Q],U[Q+1]]),[it,J]=o.Util.applyTransform([0,0],rt);H.drawImage($.canvas,it,J)}H.restore(),this.compose()}paintImageMaskXObjectGroup(b){if(!this.contentVisible)return;const T=this.ctx,w=this.current.fillColor,M=this.current.patternFill;for(const L of b){const{data:U,width:H,height:Y,transform:$}=L,Q=this.cachedCanvases.getCanvas("maskCanvas",H,Y),nt=Q.context;nt.save();const rt=this.getObject(U,L);Tt(nt,rt),nt.globalCompositeOperation="source-in",nt.fillStyle=M?w.getPattern(nt,this,(0,r.getCurrentTransformInverse)(T),u.FILL):w,nt.fillRect(0,0,H,Y),nt.restore(),T.save(),T.transform(...$),T.scale(1,-1),lt(T,Q.canvas,0,0,H,Y,0,-1,1,1),T.restore()}this.compose()}paintImageXObject(b){if(!this.contentVisible)return;const T=this.getObject(b);if(!T){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(T)}paintImageXObjectRepeat(b,T,w,M){if(!this.contentVisible)return;const L=this.getObject(b);if(!L){(0,o.warn)("Dependent image isn't ready yet");return}const U=L.width,H=L.height,Y=[];for(let $=0,Q=M.length;$<Q;$+=2)Y.push({transform:[T,0,0,w,M[$],M[$+1]],x:0,y:0,w:U,h:H});this.paintInlineImageXObjectGroup(L,Y)}applyTransferMapsToCanvas(b){return this.current.transferMaps!=="none"&&(b.filter=this.current.transferMaps,b.drawImage(b.canvas,0,0),b.filter="none"),b.canvas}applyTransferMapsToBitmap(b){if(this.current.transferMaps==="none")return b.bitmap;const{bitmap:T,width:w,height:M}=b,L=this.cachedCanvases.getCanvas("inlineImage",w,M),U=L.context;return U.filter=this.current.transferMaps,U.drawImage(T,0,0),U.filter="none",L.canvas}paintInlineImageXObject(b){if(!this.contentVisible)return;const T=b.width,w=b.height,M=this.ctx;if(this.save(),!o.isNodeJS){const{filter:H}=M;H!=="none"&&H!==""&&(M.filter="none")}M.scale(1/T,-1/w);let L;if(b.bitmap)L=this.applyTransferMapsToBitmap(b);else if(typeof HTMLElement=="function"&&b instanceof HTMLElement||!b.data)L=b;else{const Y=this.cachedCanvases.getCanvas("inlineImage",T,w).context;_t(Y,b),L=this.applyTransferMapsToCanvas(Y)}const U=this._scaleImage(L,(0,r.getCurrentTransformInverse)(M));M.imageSmoothingEnabled=K((0,r.getCurrentTransform)(M),b.interpolate),lt(M,U.img,0,0,U.paintWidth,U.paintHeight,0,-w,T,w),this.compose(),this.restore()}paintInlineImageXObjectGroup(b,T){if(!this.contentVisible)return;const w=this.ctx;let M;if(b.bitmap)M=b.bitmap;else{const L=b.width,U=b.height,Y=this.cachedCanvases.getCanvas("inlineImage",L,U).context;_t(Y,b),M=this.applyTransferMapsToCanvas(Y)}for(const L of T)w.save(),w.transform(...L.transform),w.scale(1,-1),lt(w,M,L.x,L.y,L.w,L.h,0,-1,1,1),w.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(b){}markPointProps(b,T){}beginMarkedContent(b){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(b,T){b==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(T)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(b){const T=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(b);const w=this.ctx;this.pendingClip&&(T||(this.pendingClip===yt?w.clip("evenodd"):w.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),w.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const b=(0,r.getCurrentTransform)(this.ctx);if(b[1]===0&&b[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(b[0]),Math.abs(b[3]));else{const T=Math.abs(b[0]*b[3]-b[2]*b[1]),w=Math.hypot(b[0],b[2]),M=Math.hypot(b[1],b[3]);this._cachedGetSinglePixelWidth=Math.max(w,M)/T}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:b}=this.current,{a:T,b:w,c:M,d:L}=this.ctx.getTransform();let U,H;if(w===0&&M===0){const Y=Math.abs(T),$=Math.abs(L);if(Y===$)if(b===0)U=H=1/Y;else{const Q=Y*b;U=H=Q<1?1/Q:1}else if(b===0)U=1/Y,H=1/$;else{const Q=Y*b,nt=$*b;U=Q<1?1/Q:1,H=nt<1?1/nt:1}}else{const Y=Math.abs(T*L-w*M),$=Math.hypot(T,w),Q=Math.hypot(M,L);if(b===0)U=Q/Y,H=$/Y;else{const nt=b*Y;U=Q>nt?Q/nt:1,H=$>nt?$/nt:1}}this._cachedScaleForStroking[0]=U,this._cachedScaleForStroking[1]=H}return this._cachedScaleForStroking}rescaleAndStroke(b){const{ctx:T}=this,{lineWidth:w}=this.current,[M,L]=this.getScaleForStroking();if(T.lineWidth=w||1,M===1&&L===1){T.stroke();return}const U=T.getLineDash();if(b&&T.save(),T.scale(M,L),U.length>0){const H=Math.max(M,L);T.setLineDash(U.map(Y=>Y/H)),T.lineDashOffset/=H}T.stroke(),b&&T.restore()}isContentVisible(){for(let b=this.markedContentStack.length-1;b>=0;b--)if(!this.markedContentStack[b].visible)return!1;return!0}}for(const N in o.OPS)F.prototype[N]!==void 0&&(F.prototype[o.OPS[N]]=F.prototype[N])}),473:((i,e,s)=>{s.d(e,{DOMCMapReaderFactory:()=>g,DOMCanvasFactory:()=>y,DOMFilterFactory:()=>p,DOMSVGFactory:()=>E,DOMStandardFontDataFactory:()=>A,PDFDateString:()=>q,PageViewport:()=>R,PixelsPerInch:()=>d,RenderingCancelledException:()=>C,StatTimer:()=>P,fetchData:()=>h,getColorValues:()=>lt,getCurrentTransform:()=>gt,getCurrentTransformInverse:()=>Rt,getFilenameFromUrl:()=>x,getPdfFilenameFromUrl:()=>I,getRGB:()=>W,getXfaPageViewport:()=>et,isDataScheme:()=>_,isPdfFile:()=>v,isValidFetchUrl:()=>k,noContextMenu:()=>V,setLayerDimensions:()=>_t});var o=s(822),r=s(266);const u="http://www.w3.org/2000/svg";class d{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}class p extends o.BaseFilterFactory{#t;#e;#n;#i;#s;#o;#r;#l;#u;#c;#h=0;constructor({docId:j,ownerDocument:X=globalThis.document}={}){super(),this.#n=j,this.#i=X}get#f(){return this.#t||=new Map}get#d(){if(!this.#e){const j=this.#i.createElement("div"),{style:X}=j;X.visibility="hidden",X.contain="strict",X.width=X.height=0,X.position="absolute",X.top=X.left=0,X.zIndex=-1;const dt=this.#i.createElementNS(u,"svg");dt.setAttribute("width",0),dt.setAttribute("height",0),this.#e=this.#i.createElementNS(u,"defs"),j.append(dt),dt.append(this.#e),this.#i.body.append(j)}return this.#e}addFilter(j){if(!j)return"none";let X=this.#f.get(j);if(X)return X;let dt,vt,ot,ct;if(j.length===1){const ft=j[0],Ct=new Array(256);for(let yt=0;yt<256;yt++)Ct[yt]=ft[yt]/255;ct=dt=vt=ot=Ct.join(",")}else{const[ft,Ct,yt]=j,F=new Array(256),N=new Array(256),b=new Array(256);for(let T=0;T<256;T++)F[T]=ft[T]/255,N[T]=Ct[T]/255,b[T]=yt[T]/255;dt=F.join(","),vt=N.join(","),ot=b.join(","),ct=`${dt}${vt}${ot}`}if(X=this.#f.get(ct),X)return this.#f.set(j,X),X;const z=`g_${this.#n}_transfer_map_${this.#h++}`,K=`url(#${z})`;this.#f.set(j,K),this.#f.set(ct,K);const at=this.#p(z);return this.#v(dt,vt,ot,at),K}addHCMFilter(j,X){const dt=`${j}-${X}`;if(this.#o===dt)return this.#r;if(this.#o=dt,this.#r="none",this.#s?.remove(),!j||!X)return this.#r;const vt=this.#y(j);j=r.Util.makeHexColor(...vt);const ot=this.#y(X);if(X=r.Util.makeHexColor(...ot),this.#d.style.color="",j==="#000000"&&X==="#ffffff"||j===X)return this.#r;const ct=new Array(256);for(let Ct=0;Ct<=255;Ct++){const yt=Ct/255;ct[Ct]=yt<=.03928?yt/12.92:((yt+.055)/1.055)**2.4}const z=ct.join(","),K=`g_${this.#n}_hcm_filter`,at=this.#l=this.#p(K);this.#v(z,z,z,at),this.#a(at);const ft=(Ct,yt)=>{const F=vt[Ct]/255,N=ot[Ct]/255,b=new Array(yt+1);for(let T=0;T<=yt;T++)b[T]=F+T/yt*(N-F);return b.join(",")};return this.#v(ft(0,5),ft(1,5),ft(2,5),at),this.#r=`url(#${K})`,this.#r}addHighlightHCMFilter(j,X,dt,vt){const ot=`${j}-${X}-${dt}-${vt}`;if(this.#u===ot)return this.#c;if(this.#u=ot,this.#c="none",this.#l?.remove(),!j||!X)return this.#c;const[ct,z]=[j,X].map(this.#y.bind(this));let K=Math.round(.2126*ct[0]+.7152*ct[1]+.0722*ct[2]),at=Math.round(.2126*z[0]+.7152*z[1]+.0722*z[2]),[ft,Ct]=[dt,vt].map(this.#y.bind(this));at<K&&([K,at,ft,Ct]=[at,K,Ct,ft]),this.#d.style.color="";const yt=(b,T,w)=>{const M=new Array(256),L=(at-K)/w,U=b/255,H=(T-b)/(255*w);let Y=0;for(let $=0;$<=w;$++){const Q=Math.round(K+$*L),nt=U+$*H;for(let rt=Y;rt<=Q;rt++)M[rt]=nt;Y=Q+1}for(let $=Y;$<256;$++)M[$]=M[Y-1];return M.join(",")},F=`g_${this.#n}_hcm_highlight_filter`,N=this.#l=this.#p(F);return this.#a(N),this.#v(yt(ft[0],Ct[0],5),yt(ft[1],Ct[1],5),yt(ft[2],Ct[2],5),N),this.#c=`url(#${F})`,this.#c}destroy(j=!1){j&&(this.#r||this.#c)||(this.#e&&(this.#e.parentNode.parentNode.remove(),this.#e=null),this.#t&&(this.#t.clear(),this.#t=null),this.#h=0)}#a(j){const X=this.#i.createElementNS(u,"feColorMatrix");X.setAttribute("type","matrix"),X.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),j.append(X)}#p(j){const X=this.#i.createElementNS(u,"filter");return X.setAttribute("color-interpolation-filters","sRGB"),X.setAttribute("id",j),this.#d.append(X),X}#g(j,X,dt){const vt=this.#i.createElementNS(u,X);vt.setAttribute("type","discrete"),vt.setAttribute("tableValues",dt),j.append(vt)}#v(j,X,dt,vt){const ot=this.#i.createElementNS(u,"feComponentTransfer");vt.append(ot),this.#g(ot,"feFuncR",j),this.#g(ot,"feFuncG",X),this.#g(ot,"feFuncB",dt)}#y(j){return this.#d.style.color=j,W(getComputedStyle(this.#d).getPropertyValue("color"))}}class y extends o.BaseCanvasFactory{constructor({ownerDocument:j=globalThis.document}={}){super(),this._document=j}_createCanvas(j,X){const dt=this._document.createElement("canvas");return dt.width=j,dt.height=X,dt}}async function h(Tt,j="text"){if(k(Tt,document.baseURI)){const X=await fetch(Tt);if(!X.ok)throw new Error(X.statusText);switch(j){case"arraybuffer":return X.arrayBuffer();case"blob":return X.blob();case"json":return X.json()}return X.text()}return new Promise((X,dt)=>{const vt=new XMLHttpRequest;vt.open("GET",Tt,!0),vt.responseType=j,vt.onreadystatechange=()=>{if(vt.readyState===XMLHttpRequest.DONE){if(vt.status===200||vt.status===0){let ot;switch(j){case"arraybuffer":case"blob":case"json":ot=vt.response;break;default:ot=vt.responseText;break}if(ot){X(ot);return}}dt(new Error(vt.statusText))}},vt.send(null)})}class g extends o.BaseCMapReaderFactory{_fetchData(j,X){return h(j,this.isCompressed?"arraybuffer":"text").then(dt=>({cMapData:dt instanceof ArrayBuffer?new Uint8Array(dt):(0,r.stringToBytes)(dt),compressionType:X}))}}class A extends o.BaseStandardFontDataFactory{_fetchData(j){return h(j,"arraybuffer").then(X=>new Uint8Array(X))}}class E extends o.BaseSVGFactory{_createSVG(j){return document.createElementNS(u,j)}}class R{constructor({viewBox:j,scale:X,rotation:dt,offsetX:vt=0,offsetY:ot=0,dontFlip:ct=!1}){this.viewBox=j,this.scale=X,this.rotation=dt,this.offsetX=vt,this.offsetY=ot;const z=(j[2]+j[0])/2,K=(j[3]+j[1])/2;let at,ft,Ct,yt;switch(dt%=360,dt<0&&(dt+=360),dt){case 180:at=-1,ft=0,Ct=0,yt=1;break;case 90:at=0,ft=1,Ct=1,yt=0;break;case 270:at=0,ft=-1,Ct=-1,yt=0;break;case 0:at=1,ft=0,Ct=0,yt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ct&&(Ct=-Ct,yt=-yt);let F,N,b,T;at===0?(F=Math.abs(K-j[1])*X+vt,N=Math.abs(z-j[0])*X+ot,b=(j[3]-j[1])*X,T=(j[2]-j[0])*X):(F=Math.abs(z-j[0])*X+vt,N=Math.abs(K-j[1])*X+ot,b=(j[2]-j[0])*X,T=(j[3]-j[1])*X),this.transform=[at*X,ft*X,Ct*X,yt*X,F-at*X*z-Ct*X*K,N-ft*X*z-yt*X*K],this.width=b,this.height=T}get rawDims(){const{viewBox:j}=this;return(0,r.shadow)(this,"rawDims",{pageWidth:j[2]-j[0],pageHeight:j[3]-j[1],pageX:j[0],pageY:j[1]})}clone({scale:j=this.scale,rotation:X=this.rotation,offsetX:dt=this.offsetX,offsetY:vt=this.offsetY,dontFlip:ot=!1}={}){return new R({viewBox:this.viewBox.slice(),scale:j,rotation:X,offsetX:dt,offsetY:vt,dontFlip:ot})}convertToViewportPoint(j,X){return r.Util.applyTransform([j,X],this.transform)}convertToViewportRectangle(j){const X=r.Util.applyTransform([j[0],j[1]],this.transform),dt=r.Util.applyTransform([j[2],j[3]],this.transform);return[X[0],X[1],dt[0],dt[1]]}convertToPdfPoint(j,X){return r.Util.applyInverseTransform([j,X],this.transform)}}class C extends r.BaseException{constructor(j,X=0){super(j,"RenderingCancelledException"),this.extraDelay=X}}function _(Tt){const j=Tt.length;let X=0;for(;X<j&&Tt[X].trim()==="";)X++;return Tt.substring(X,X+5).toLowerCase()==="data:"}function v(Tt){return typeof Tt=="string"&&/\.pdf$/i.test(Tt)}function x(Tt,j=!1){return j||([Tt]=Tt.split(/[#?]/,1)),Tt.substring(Tt.lastIndexOf("/")+1)}function I(Tt,j="document.pdf"){if(typeof Tt!="string")return j;if(_(Tt))return(0,r.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),j;const X=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,dt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,vt=X.exec(Tt);let ot=dt.exec(vt[1])||dt.exec(vt[2])||dt.exec(vt[3]);if(ot&&(ot=ot[0],ot.includes("%")))try{ot=dt.exec(decodeURIComponent(ot))[0]}catch{}return ot||j}class P{started=Object.create(null);times=[];time(j){j in this.started&&(0,r.warn)(`Timer is already running for ${j}`),this.started[j]=Date.now()}timeEnd(j){j in this.started||(0,r.warn)(`Timer has not been started for ${j}`),this.times.push({name:j,start:this.started[j],end:Date.now()}),delete this.started[j]}toString(){const j=[];let X=0;for(const{name:dt}of this.times)X=Math.max(dt.length,X);for(const{name:dt,start:vt,end:ot}of this.times)j.push(`${dt.padEnd(X)} ${ot-vt}ms
`);return j.join("")}}function k(Tt,j){try{const{protocol:X}=j?new URL(Tt,j):new URL(Tt);return X==="http:"||X==="https:"}catch{return!1}}function V(Tt){Tt.preventDefault()}let O;class q{static toDateObject(j){if(!j||typeof j!="string")return null;O||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const X=O.exec(j);if(!X)return null;const dt=parseInt(X[1],10);let vt=parseInt(X[2],10);vt=vt>=1&&vt<=12?vt-1:0;let ot=parseInt(X[3],10);ot=ot>=1&&ot<=31?ot:1;let ct=parseInt(X[4],10);ct=ct>=0&&ct<=23?ct:0;let z=parseInt(X[5],10);z=z>=0&&z<=59?z:0;let K=parseInt(X[6],10);K=K>=0&&K<=59?K:0;const at=X[7]||"Z";let ft=parseInt(X[8],10);ft=ft>=0&&ft<=23?ft:0;let Ct=parseInt(X[9],10)||0;return Ct=Ct>=0&&Ct<=59?Ct:0,at==="-"?(ct+=ft,z+=Ct):at==="+"&&(ct-=ft,z-=Ct),new Date(Date.UTC(dt,vt,ot,ct,z,K))}}function et(Tt,{scale:j=1,rotation:X=0}){const{width:dt,height:vt}=Tt.attributes.style,ot=[0,0,parseInt(dt),parseInt(vt)];return new R({viewBox:ot,scale:j,rotation:X})}function W(Tt){if(Tt.startsWith("#")){const j=parseInt(Tt.slice(1),16);return[(j&16711680)>>16,(j&65280)>>8,j&255]}return Tt.startsWith("rgb(")?Tt.slice(4,-1).split(",").map(j=>parseInt(j)):Tt.startsWith("rgba(")?Tt.slice(5,-1).split(",").map(j=>parseInt(j)).slice(0,3):((0,r.warn)(`Not a valid color format: "${Tt}"`),[0,0,0])}function lt(Tt){const j=document.createElement("span");j.style.visibility="hidden",document.body.append(j);for(const X of Tt.keys()){j.style.color=X;const dt=window.getComputedStyle(j).color;Tt.set(X,W(dt))}j.remove()}function gt(Tt){const{a:j,b:X,c:dt,d:vt,e:ot,f:ct}=Tt.getTransform();return[j,X,dt,vt,ot,ct]}function Rt(Tt){const{a:j,b:X,c:dt,d:vt,e:ot,f:ct}=Tt.getTransform().invertSelf();return[j,X,dt,vt,ot,ct]}function _t(Tt,j,X=!1,dt=!0){if(j instanceof R){const{pageWidth:vt,pageHeight:ot}=j.rawDims,{style:ct}=Tt,z=r.FeatureTest.isCSSRoundSupported,K=`var(--scale-factor) * ${vt}px`,at=`var(--scale-factor) * ${ot}px`,ft=z?`round(${K}, 1px)`:`calc(${K})`,Ct=z?`round(${at}, 1px)`:`calc(${at})`;!X||j.rotation%180===0?(ct.width=ft,ct.height=Ct):(ct.width=Ct,ct.height=ft)}dt&&Tt.setAttribute("data-main-rotation",j.rotation)}}),423:((i,e,s)=>{s.d(e,{DrawLayer:()=>u});var o=s(473),r=s(266);class u{#t=null;#e=0;#n=new Map;constructor({pageIndex:p}){this.pageIndex=p}setParent(p){if(!this.#t){this.#t=p;return}if(this.#t!==p){if(this.#n.size>0)for(const y of this.#n.values())y.remove(),p.append(y);this.#t=p}}static get _svgFactory(){return(0,r.shadow)(this,"_svgFactory",new o.DOMSVGFactory)}static#i(p,{x:y,y:h,width:g,height:A}){const{style:E}=p;E.top=`${100*h}%`,E.left=`${100*y}%`,E.width=`${100*g}%`,E.height=`${100*A}%`}#s(p){const y=u._svgFactory.create(1,1,!0);return this.#t.append(y),u.#i(y,p),y}highlight({outlines:p,box:y},h,g){const A=this.#e++,E=this.#s(y);E.classList.add("highlight");const R=u._svgFactory.createElement("defs");E.append(R);const C=u._svgFactory.createElement("path");R.append(C);const _=`path_p${this.pageIndex}_${A}`;C.setAttribute("id",_),C.setAttribute("d",u.#o(p));const v=u._svgFactory.createElement("clipPath");R.append(v);const x=`clip_${_}`;v.setAttribute("id",x),v.setAttribute("clipPathUnits","objectBoundingBox");const I=u._svgFactory.createElement("use");v.append(I),I.setAttribute("href",`#${_}`),I.classList.add("clip");const P=u._svgFactory.createElement("use");return E.append(P),E.setAttribute("fill",h),E.setAttribute("fill-opacity",g),P.setAttribute("href",`#${_}`),this.#n.set(A,E),{id:A,clipPathId:`url(#${x})`}}highlightOutline({outlines:p,box:y}){const h=this.#e++,g=this.#s(y);g.classList.add("highlightOutline");const A=u._svgFactory.createElement("defs");g.append(A);const E=u._svgFactory.createElement("path");A.append(E);const R=`path_p${this.pageIndex}_${h}`;E.setAttribute("id",R),E.setAttribute("d",u.#o(p)),E.setAttribute("vector-effect","non-scaling-stroke");const C=u._svgFactory.createElement("use");g.append(C),C.setAttribute("href",`#${R}`);const _=C.cloneNode();return g.append(_),C.classList.add("mainOutline"),_.classList.add("secondaryOutline"),this.#n.set(h,g),h}static#o(p){const y=[];for(const h of p){let[g,A]=h;y.push(`M${g} ${A}`);for(let E=2;E<h.length;E+=2){const R=h[E],C=h[E+1];R===g?(y.push(`V${C}`),A=C):C===A&&(y.push(`H${R}`),g=R)}y.push("Z")}return y.join(" ")}updateBox(p,y){u.#i(this.#n.get(p),y)}rotate(p,y){this.#n.get(p).setAttribute("data-main-rotation",y)}changeColor(p,y){this.#n.get(p).setAttribute("fill",y)}changeOpacity(p,y){this.#n.get(p).setAttribute("fill-opacity",y)}addClass(p,y){this.#n.get(p).classList.add(y)}removeClass(p,y){this.#n.get(p).classList.remove(y)}remove(p){this.#t!==null&&(this.#n.get(p).remove(),this.#n.delete(p))}destroy(){this.#t=null;for(const p of this.#n.values())p.remove();this.#n.clear()}}}),629:((i,e,s)=>{s.d(e,{AnnotationEditorLayer:()=>C});var o=s(266),r=s(115),u=s(812),d=s(640);class p extends r.AnnotationEditor{#t=this.editorDivBlur.bind(this);#e=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#i=this.editorDivKeydown.bind(this);#s;#o="";#r=`${this.id}-editor`;#l;#u=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const v=p.prototype,x=k=>k.isEmpty(),I=u.AnnotationEditorUIManager.TRANSLATE_SMALL,P=u.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new u.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],v.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],v.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],v._translateEmpty,{args:[-I,0],checker:x}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],v._translateEmpty,{args:[-P,0],checker:x}],[["ArrowRight","mac+ArrowRight"],v._translateEmpty,{args:[I,0],checker:x}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],v._translateEmpty,{args:[P,0],checker:x}],[["ArrowUp","mac+ArrowUp"],v._translateEmpty,{args:[0,-I],checker:x}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],v._translateEmpty,{args:[0,-P],checker:x}],[["ArrowDown","mac+ArrowDown"],v._translateEmpty,{args:[0,I],checker:x}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],v._translateEmpty,{args:[0,P],checker:x}]]))}static _type="freetext";static _editorType=o.AnnotationEditorType.FREETEXT;constructor(v){super({...v,name:"freeTextEditor"}),this.#s=v.color||p._defaultColor||r.AnnotationEditor._defaultLineColor,this.#l=v.fontSize||p._defaultFontSize}static initialize(v){r.AnnotationEditor.initialize(v,{strings:["pdfjs-free-text-default-content"]});const x=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(x.getPropertyValue("--freetext-padding"))}static updateDefaultParams(v,x){switch(v){case o.AnnotationEditorParamsType.FREETEXT_SIZE:p._defaultFontSize=x;break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:p._defaultColor=x;break}}updateParams(v,x){switch(v){case o.AnnotationEditorParamsType.FREETEXT_SIZE:this.#c(x);break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:this.#h(x);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,p._defaultFontSize],[o.AnnotationEditorParamsType.FREETEXT_COLOR,p._defaultColor||r.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[o.AnnotationEditorParamsType.FREETEXT_COLOR,this.#s]]}#c(v){const x=P=>{this.editorDiv.style.fontSize=`calc(${P}px * var(--scale-factor))`,this.translate(0,-(P-this.#l)*this.parentScale),this.#l=P,this.#d()},I=this.#l;this.addCommands({cmd:()=>{x(v)},undo:()=>{x(I)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#h(v){const x=this.#s;this.addCommands({cmd:()=>{this.#s=this.editorDiv.style.color=v},undo:()=>{this.#s=this.editorDiv.style.color=x},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(v,x){this._uiManager.translateSelectedEditors(v,x,!0)}getInitialTranslation(){const v=this.parentScale;return[-p._internalPadding*v,-(p._internalPadding+this.#l)*v]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(o.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#i),this.editorDiv.addEventListener("focus",this.#e),this.editorDiv.addEventListener("blur",this.#t),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#r),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#i),this.editorDiv.removeEventListener("focus",this.#e),this.editorDiv.removeEventListener("blur",this.#t),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(v){this._focusEventsAllowed&&(super.focusin(v),v.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#g();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#f(){const v=this.editorDiv.getElementsByTagName("div");if(v.length===0)return this.editorDiv.innerText;const x=[];for(const I of v)x.push(I.innerText.replace(/\r\n?|\n/,""));return x.join(`
`)}#d(){const[v,x]=this.parentDimensions;let I;if(this.isAttachedToDOM)I=this.div.getBoundingClientRect();else{const{currentLayer:P,div:k}=this,V=k.style.display;k.style.display="hidden",P.div.append(this.div),I=k.getBoundingClientRect(),k.remove(),k.style.display=V}this.rotation%180===this.parentRotation%180?(this.width=I.width/v,this.height=I.height/x):(this.width=I.height/v,this.height=I.width/x),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const v=this.#o,x=this.#o=this.#f().trimEnd();if(v===x)return;const I=P=>{if(this.#o=P,!P){this.remove();return}this.#a(),this._uiManager.rebuild(this),this.#d()};this.addCommands({cmd:()=>{I(x)},undo:()=>{I(v)},mustExec:!1}),this.#d()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(v){this.enterInEditMode()}keydown(v){v.target===this.div&&v.key==="Enter"&&(this.enterInEditMode(),v.preventDefault())}editorDivKeydown(v){p._keyboardManager.exec(this,v)}editorDivFocus(v){this.isEditing=!0}editorDivBlur(v){this.isEditing=!1}editorDivInput(v){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let v,x;this.width&&(v=this.x,x=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#r),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),r.AnnotationEditor._l10nPromise.get("pdfjs-free-text-default-content").then(P=>this.editorDiv?.setAttribute("default-content",P)),this.editorDiv.contentEditable=!0;const{style:I}=this.editorDiv;if(I.fontSize=`calc(${this.#l}px * var(--scale-factor))`,I.color=this.#s,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,u.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[P,k]=this.parentDimensions;if(this.annotationElementId){const{position:V}=this.#u;let[O,q]=this.getInitialTranslation();[O,q]=this.pageTranslationToScreen(O,q);const[et,W]=this.pageDimensions,[lt,gt]=this.pageTranslation;let Rt,_t;switch(this.rotation){case 0:Rt=v+(V[0]-lt)/et,_t=x+this.height-(V[1]-gt)/W;break;case 90:Rt=v+(V[0]-lt)/et,_t=x-(V[1]-gt)/W,[O,q]=[q,-O];break;case 180:Rt=v-this.width+(V[0]-lt)/et,_t=x-(V[1]-gt)/W,[O,q]=[-O,-q];break;case 270:Rt=v+(V[0]-lt-this.height*W)/et,_t=x+(V[1]-gt-this.width*et)/W,[O,q]=[-q,O];break}this.setAt(Rt*P,_t*k,O,q)}else this.setAt(v*P,x*k,this.width*P,this.height*k);this.#a(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#a(){if(this.editorDiv.replaceChildren(),!!this.#o)for(const v of this.#o.split(`
`)){const x=document.createElement("div");x.append(v?document.createTextNode(v):document.createElement("br")),this.editorDiv.append(x)}}get contentDiv(){return this.editorDiv}static deserialize(v,x,I){let P=null;if(v instanceof d.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:V,fontColor:O},rect:q,rotation:et,id:W},textContent:lt,textPosition:gt,parent:{page:{pageNumber:Rt}}}=v;if(!lt||lt.length===0)return null;P=v={annotationType:o.AnnotationEditorType.FREETEXT,color:Array.from(O),fontSize:V,value:lt.join(`
`),position:gt,pageIndex:Rt-1,rect:q,rotation:et,id:W,deleted:!1}}const k=super.deserialize(v,x,I);return k.#l=v.fontSize,k.#s=o.Util.makeHexColor(...v.color),k.#o=v.value,k.annotationElementId=v.id||null,k.#u=P,k}serialize(v=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const x=p._internalPadding*this.parentScale,I=this.getRect(x,x),P=r.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#s),k={annotationType:o.AnnotationEditorType.FREETEXT,color:P,fontSize:this.#l,value:this.#o,pageIndex:this.pageIndex,rect:I,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return v?k:this.annotationElementId&&!this.#p(k)?null:(k.id=this.annotationElementId,k)}#p(v){const{value:x,fontSize:I,color:P,rect:k,pageIndex:V}=this.#u;return v.value!==x||v.fontSize!==I||v.rect.some((O,q)=>Math.abs(O-k[q])>=1)||v.color.some((O,q)=>O!==P[q])||v.pageIndex!==V}#g(v=!1){if(!this.annotationElementId)return;if(this.#d(),!v&&(this.width===0||this.height===0)){setTimeout(()=>this.#g(!0),0);return}const x=p._internalPadding*this.parentScale;this.#u.rect=this.getRect(x,x)}}var y=s(97),h=s(405);class g extends r.AnnotationEditor{#t;#e=null;#n=null;#i=null;#s=null;#o=null;#r=null;#l=null;#u;#c=null;static _defaultColor=null;static _defaultOpacity=1;static _l10nPromise;static _type="highlight";static _editorType=o.AnnotationEditorType.HIGHLIGHT;constructor(v){super({...v,name:"highlightEditor"}),g._defaultColor||=this._uiManager.highlightColors?.values().next().value||"#fff066",this.color=v.color||g._defaultColor,this.#u=v.opacity||g._defaultOpacity,this.#t=v.boxes||null,this._isDraggable=!1,this.#h(),this.#a(),this.rotate(this.rotation)}#h(){const v=new h.Outliner(this.#t,.001);this.#o=v.getOutlines(),{x:this.x,y:this.y,width:this.width,height:this.height}=this.#o.box;const x=new h.Outliner(this.#t,.0025,.001,this._uiManager.direction==="ltr");this.#i=x.getOutlines();const{lastPoint:I}=this.#i.box;this.#l=[(I[0]-this.x)/this.width,(I[1]-this.y)/this.height]}static initialize(v){r.AnnotationEditor.initialize(v)}static updateDefaultParams(v,x){switch(v){case o.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:g._defaultColor=x;break}}get toolbarPosition(){return this.#l}updateParams(v,x){switch(v){case o.AnnotationEditorParamsType.HIGHLIGHT_COLOR:this.#f(x);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,g._defaultColor]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||g._defaultColor]]}#f(v){const x=this.color;this.addCommands({cmd:()=>{this.color=v,this.parent.drawLayer.changeColor(this.#r,v),this.#n?.updateColor(v)},undo:()=>{this.color=x,this.parent.drawLayer.changeColor(this.#r,x),this.#n?.updateColor(x)},mustExec:!0,type:o.AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}async addEditToolbar(){const v=await super.addEditToolbar();return v?(this._uiManager.highlightColors&&(this.#n=new y.ColorPicker({editor:this}),v.addColorPicker(this.#n)),v):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(0)}getRect(v,x){return super.getRect(v,x,0)}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){super.remove(),this.#d()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#a(),this.isAttachedToDOM||this.parent.add(this)))}setParent(v){let x=!1;this.parent&&!v?this.#d():v&&(this.#a(v),x=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(v),x&&this.select()}#d(){this.#r===null||!this.parent||(this.parent.drawLayer.remove(this.#r),this.#r=null,this.parent.drawLayer.remove(this.#c),this.#c=null)}#a(v=this.parent){this.#r===null&&({id:this.#r,clipPathId:this.#e}=v.drawLayer.highlight(this.#o,this.color,this.#u),this.#s&&(this.#s.style.clipPath=this.#e),this.#c=v.drawLayer.highlightOutline(this.#i))}static#p({x:v,y:x,width:I,height:P},k){switch(k){case 90:return{x:1-x-P,y:v,width:P,height:I};case 180:return{x:1-v-I,y:1-x-P,width:I,height:P};case 270:return{x,y:1-v-I,width:P,height:I}}return{x:v,y:x,width:I,height:P}}rotate(v){const{drawLayer:x}=this.parent;x.rotate(this.#r,v),x.rotate(this.#c,v),x.updateBox(this.#r,g.#p(this,v)),x.updateBox(this.#c,g.#p(this.#i.box,v))}render(){if(this.div)return this.div;const v=super.render(),x=this.#s=document.createElement("div");v.append(x),x.className="internal",x.style.clipPath=this.#e;const[I,P]=this.parentDimensions;return this.setDims(this.width*I,this.height*P),(0,u.bindEvents)(this,this.#s,["pointerover","pointerleave"]),this.enableEditing(),v}pointerover(){this.parent.drawLayer.addClass(this.#c,"hovered")}pointerleave(){this.parent.drawLayer.removeClass(this.#c,"hovered")}select(){super.select(),this.parent?.drawLayer.removeClass(this.#c,"hovered"),this.parent?.drawLayer.addClass(this.#c,"selected")}unselect(){super.unselect(),this.parent?.drawLayer.removeClass(this.#c,"selected")}#g(){const[v,x]=this.pageDimensions,I=this.#t,P=new Array(I.length*8);let k=0;for(const{x:V,y:O,width:q,height:et}of I){const W=V*v,lt=(1-O-et)*x;P[k]=P[k+4]=W,P[k+1]=P[k+3]=lt,P[k+2]=P[k+6]=W+q*v,P[k+5]=P[k+7]=lt+et*x,k+=8}return P}#v(){const[v,x]=this.pageDimensions,I=this.width*v,P=this.height*x,k=this.x*v,V=(1-this.y-this.height)*x,O=[];for(const q of this.#o.outlines){const et=new Array(q.length);for(let W=0;W<q.length;W+=2)et[W]=k+q[W]*I,et[W+1]=V+(1-q[W+1])*P;O.push(et)}return O}static deserialize(v,x,I){const P=super.deserialize(v,x,I),{rect:k,color:V,quadPoints:O}=v;P.color=o.Util.makeHexColor(...V),P.#u=v.opacity;const[q,et]=P.pageDimensions;P.width=(k[2]-k[0])/q,P.height=(k[3]-k[1])/et;const W=P.#t=[];for(let lt=0;lt<O.length;lt+=8)W.push({x:O[4]/q,y:1-O[lt+5]/et,width:(O[lt+2]-O[lt])/q,height:(O[lt+5]-O[lt+1])/et});return P.#h(),P}serialize(v=!1){if(this.isEmpty()||v)return null;const x=this.getRect(0,0),I=r.AnnotationEditor._colorManager.convert(this.color);return{annotationType:o.AnnotationEditorType.HIGHLIGHT,color:I,opacity:this.#u,quadPoints:this.#g(),outlines:this.#v(),pageIndex:this.pageIndex,rect:x,rotation:0,structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}}var A=s(473);class E extends r.AnnotationEditor{#t=0;#e=0;#n=this.canvasPointermove.bind(this);#i=this.canvasPointerleave.bind(this);#s=this.canvasPointerup.bind(this);#o=this.canvasPointerdown.bind(this);#r=null;#l=new Path2D;#u=!1;#c=!1;#h=!1;#f=null;#d=0;#a=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=o.AnnotationEditorType.INK;constructor(v){super({...v,name:"inkEditor"}),this.color=v.color||null,this.thickness=v.thickness||null,this.opacity=v.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(v){r.AnnotationEditor.initialize(v)}static updateDefaultParams(v,x){switch(v){case o.AnnotationEditorParamsType.INK_THICKNESS:E._defaultThickness=x;break;case o.AnnotationEditorParamsType.INK_COLOR:E._defaultColor=x;break;case o.AnnotationEditorParamsType.INK_OPACITY:E._defaultOpacity=x/100;break}}updateParams(v,x){switch(v){case o.AnnotationEditorParamsType.INK_THICKNESS:this.#g(x);break;case o.AnnotationEditorParamsType.INK_COLOR:this.#v(x);break;case o.AnnotationEditorParamsType.INK_OPACITY:this.#y(x);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,E._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,E._defaultColor||r.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(E._defaultOpacity*100)]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||E._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,this.color||E._defaultColor||r.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??E._defaultOpacity))]]}#g(v){const x=this.thickness;this.addCommands({cmd:()=>{this.thickness=v,this.#M()},undo:()=>{this.thickness=x,this.#M()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#v(v){const x=this.color;this.addCommands({cmd:()=>{this.color=v,this.#T()},undo:()=>{this.color=x,this.#T()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#y(v){v/=100;const x=this.opacity;this.addCommands({cmd:()=>{this.opacity=v,this.#T()},undo:()=>{this.opacity=x,this.#T()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#x(),this.#E()),this.isAttachedToDOM||(this.parent.add(this),this.#I()),this.#M()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#r&&(clearTimeout(this.#r),this.#r=null),this.#f.disconnect(),this.#f=null,super.remove())}setParent(v){!this.parent&&v?this._uiManager.removeShouldRescale(this):this.parent&&v===null&&this._uiManager.addShouldRescale(this),super.setParent(v)}onScaleChanging(){const[v,x]=this.parentDimensions,I=this.width*v,P=this.height*x;this.setDimensions(I,P)}enableEditMode(){this.#u||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#o))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#o))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#S(){const{parentRotation:v,parentDimensions:[x,I]}=this;switch(v){case 90:return[0,I,I,x];case 180:return[x,I,x,I];case 270:return[x,0,I,x];default:return[0,0,x,I]}}#A(){const{ctx:v,color:x,opacity:I,thickness:P,parentScale:k,scaleFactor:V}=this;v.lineWidth=P*k/V,v.lineCap="round",v.lineJoin="round",v.miterLimit=10,v.strokeStyle=`${x}${(0,u.opacityToHex)(I)}`}#m(v,x){this.canvas.addEventListener("contextmenu",A.noContextMenu),this.canvas.addEventListener("pointerleave",this.#i),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#s),this.canvas.removeEventListener("pointerdown",this.#o),this.isEditing=!0,this.#h||(this.#h=!0,this.#I(),this.thickness||=E._defaultThickness,this.color||=E._defaultColor||r.AnnotationEditor._defaultLineColor,this.opacity??=E._defaultOpacity),this.currentPath.push([v,x]),this.#c=!1,this.#A(),this.#p=()=>{this.#L(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#C(v,x){const[I,P]=this.currentPath.at(-1);if(this.currentPath.length>1&&v===I&&x===P)return;const k=this.currentPath;let V=this.#l;if(k.push([v,x]),this.#c=!0,k.length<=2){V.moveTo(...k[0]),V.lineTo(v,x);return}k.length===3&&(this.#l=V=new Path2D,V.moveTo(...k[0])),this.#k(V,...k.at(-3),...k.at(-2),v,x)}#N(){if(this.currentPath.length===0)return;const v=this.currentPath.at(-1);this.#l.lineTo(...v)}#D(v,x){this.#p=null,v=Math.min(Math.max(v,0),this.canvas.width),x=Math.min(Math.max(x,0),this.canvas.height),this.#C(v,x),this.#N();let I;if(this.currentPath.length!==1)I=this.#F();else{const q=[v,x];I=[[q,q.slice(),q.slice(),q]]}const P=this.#l,k=this.currentPath;this.currentPath=[],this.#l=new Path2D;const V=()=>{this.allRawPaths.push(k),this.paths.push(I),this.bezierPath2D.push(P),this.rebuild()},O=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#x(),this.#E()),this.#M())};this.addCommands({cmd:V,undo:O,mustExec:!0})}#L(){if(!this.#c)return;this.#c=!1;const v=Math.ceil(this.thickness*this.parentScale),x=this.currentPath.slice(-3),I=x.map(V=>V[0]),P=x.map(V=>V[1]);Math.min(...I)-v,Math.max(...I)+v,Math.min(...P)-v,Math.max(...P)+v;const{ctx:k}=this;k.save(),k.clearRect(0,0,this.canvas.width,this.canvas.height);for(const V of this.bezierPath2D)k.stroke(V);k.stroke(this.#l),k.restore()}#k(v,x,I,P,k,V,O){const q=(x+P)/2,et=(I+k)/2,W=(P+V)/2,lt=(k+O)/2;v.bezierCurveTo(q+2*(P-q)/3,et+2*(k-et)/3,W+2*(P-W)/3,lt+2*(k-lt)/3,W,lt)}#F(){const v=this.currentPath;if(v.length<=2)return[[v[0],v[0],v.at(-1),v.at(-1)]];const x=[];let I,[P,k]=v[0];for(I=1;I<v.length-2;I++){const[gt,Rt]=v[I],[_t,Tt]=v[I+1],j=(gt+_t)/2,X=(Rt+Tt)/2,dt=[P+2*(gt-P)/3,k+2*(Rt-k)/3],vt=[j+2*(gt-j)/3,X+2*(Rt-X)/3];x.push([[P,k],dt,vt,[j,X]]),[P,k]=[j,X]}const[V,O]=v[I],[q,et]=v[I+1],W=[P+2*(V-P)/3,k+2*(O-k)/3],lt=[q+2*(V-q)/3,et+2*(O-et)/3];return x.push([[P,k],W,lt,[q,et]]),x}#T(){if(this.isEmpty()){this.#w();return}this.#A();const{canvas:v,ctx:x}=this;x.setTransform(1,0,0,1,0,0),x.clearRect(0,0,v.width,v.height),this.#w();for(const I of this.bezierPath2D)x.stroke(I)}commit(){this.#u||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#u=!0,this.div.classList.add("disabled"),this.#M(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(v){this._focusEventsAllowed&&(super.focusin(v),this.enableEditMode())}canvasPointerdown(v){v.button!==0||!this.isInEditMode()||this.#u||(this.setInForeground(),v.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#m(v.offsetX,v.offsetY))}canvasPointermove(v){v.preventDefault(),this.#C(v.offsetX,v.offsetY)}canvasPointerup(v){v.preventDefault(),this.#P(v)}canvasPointerleave(v){this.#P(v)}#P(v){this.canvas.removeEventListener("pointerleave",this.#i),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#s),this.canvas.addEventListener("pointerdown",this.#o),this.#r&&clearTimeout(this.#r),this.#r=setTimeout(()=>{this.#r=null,this.canvas.removeEventListener("contextmenu",A.noContextMenu)},10),this.#D(v.offsetX,v.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#x(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#E(){this.#f=new ResizeObserver(v=>{const x=v[0].contentRect;x.width&&x.height&&this.setDimensions(x.width,x.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#u}render(){if(this.div)return this.div;let v,x;this.width&&(v=this.x,x=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[I,P,k,V]=this.#S();if(this.setAt(I,P,0,0),this.setDims(k,V),this.#x(),this.width){const[O,q]=this.parentDimensions;this.setAspectRatio(this.width*O,this.height*q),this.setAt(v*O,x*q,this.width*O,this.height*q),this.#h=!0,this.#I(),this.setDims(this.width*O,this.height*q),this.#T(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#E(),this.div}#I(){if(!this.#h)return;const[v,x]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*v),this.canvas.height=Math.ceil(this.height*x),this.#w()}setDimensions(v,x){const I=Math.round(v),P=Math.round(x);if(this.#d===I&&this.#a===P)return;this.#d=I,this.#a=P,this.canvas.style.visibility="hidden";const[k,V]=this.parentDimensions;this.width=v/k,this.height=x/V,this.fixAndSetPosition(),this.#u&&this.#O(v,x),this.#I(),this.#T(),this.canvas.style.visibility="visible",this.fixDims()}#O(v,x){const I=this.#U(),P=(v-I)/this.#e,k=(x-I)/this.#t;this.scaleFactor=Math.min(P,k)}#w(){const v=this.#U()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+v,this.translationY*this.scaleFactor+v)}static#R(v){const x=new Path2D;for(let I=0,P=v.length;I<P;I++){const[k,V,O,q]=v[I];I===0&&x.moveTo(...k),x.bezierCurveTo(V[0],V[1],O[0],O[1],q[0],q[1])}return x}static#_(v,x,I){const[P,k,V,O]=x;switch(I){case 0:for(let q=0,et=v.length;q<et;q+=2)v[q]+=P,v[q+1]=O-v[q+1];break;case 90:for(let q=0,et=v.length;q<et;q+=2){const W=v[q];v[q]=v[q+1]+P,v[q+1]=W+k}break;case 180:for(let q=0,et=v.length;q<et;q+=2)v[q]=V-v[q],v[q+1]+=k;break;case 270:for(let q=0,et=v.length;q<et;q+=2){const W=v[q];v[q]=V-v[q+1],v[q+1]=O-W}break;default:throw new Error("Invalid rotation")}return v}static#H(v,x,I){const[P,k,V,O]=x;switch(I){case 0:for(let q=0,et=v.length;q<et;q+=2)v[q]-=P,v[q+1]=O-v[q+1];break;case 90:for(let q=0,et=v.length;q<et;q+=2){const W=v[q];v[q]=v[q+1]-k,v[q+1]=W-P}break;case 180:for(let q=0,et=v.length;q<et;q+=2)v[q]=V-v[q],v[q+1]-=k;break;case 270:for(let q=0,et=v.length;q<et;q+=2){const W=v[q];v[q]=O-v[q+1],v[q+1]=V-W}break;default:throw new Error("Invalid rotation")}return v}#q(v,x,I,P){const k=[],V=this.thickness/2,O=v*x+V,q=v*I+V;for(const et of this.paths){const W=[],lt=[];for(let gt=0,Rt=et.length;gt<Rt;gt++){const[_t,Tt,j,X]=et[gt],dt=v*_t[0]+O,vt=v*_t[1]+q,ot=v*Tt[0]+O,ct=v*Tt[1]+q,z=v*j[0]+O,K=v*j[1]+q,at=v*X[0]+O,ft=v*X[1]+q;gt===0&&(W.push(dt,vt),lt.push(dt,vt)),W.push(ot,ct,z,K,at,ft),lt.push(ot,ct),gt===Rt-1&&lt.push(at,ft)}k.push({bezier:E.#_(W,P,this.rotation),points:E.#_(lt,P,this.rotation)})}return k}#G(){let v=1/0,x=-1/0,I=1/0,P=-1/0;for(const k of this.paths)for(const[V,O,q,et]of k){const W=o.Util.bezierBoundingBox(...V,...O,...q,...et);v=Math.min(v,W[0]),I=Math.min(I,W[1]),x=Math.max(x,W[2]),P=Math.max(P,W[3])}return[v,I,x,P]}#U(){return this.#u?Math.ceil(this.thickness*this.parentScale):0}#M(v=!1){if(this.isEmpty())return;if(!this.#u){this.#T();return}const x=this.#G(),I=this.#U();this.#e=Math.max(r.AnnotationEditor.MIN_SIZE,x[2]-x[0]),this.#t=Math.max(r.AnnotationEditor.MIN_SIZE,x[3]-x[1]);const P=Math.ceil(I+this.#e*this.scaleFactor),k=Math.ceil(I+this.#t*this.scaleFactor),[V,O]=this.parentDimensions;this.width=P/V,this.height=k/O,this.setAspectRatio(P,k);const q=this.translationX,et=this.translationY;this.translationX=-x[0],this.translationY=-x[1],this.#I(),this.#T(),this.#d=P,this.#a=k,this.setDims(P,k);const W=v?I/this.scaleFactor/2:0;this.translate(q-this.translationX-W,et-this.translationY-W)}static deserialize(v,x,I){if(v instanceof d.InkAnnotationElement)return null;const P=super.deserialize(v,x,I);P.thickness=v.thickness,P.color=o.Util.makeHexColor(...v.color),P.opacity=v.opacity;const[k,V]=P.pageDimensions,O=P.width*k,q=P.height*V,et=P.parentScale,W=v.thickness/2;P.#u=!0,P.#d=Math.round(O),P.#a=Math.round(q);const{paths:lt,rect:gt,rotation:Rt}=v;for(let{bezier:Tt}of lt){Tt=E.#H(Tt,gt,Rt);const j=[];P.paths.push(j);let X=et*(Tt[0]-W),dt=et*(Tt[1]-W);for(let ot=2,ct=Tt.length;ot<ct;ot+=6){const z=et*(Tt[ot]-W),K=et*(Tt[ot+1]-W),at=et*(Tt[ot+2]-W),ft=et*(Tt[ot+3]-W),Ct=et*(Tt[ot+4]-W),yt=et*(Tt[ot+5]-W);j.push([[X,dt],[z,K],[at,ft],[Ct,yt]]),X=Ct,dt=yt}const vt=this.#R(j);P.bezierPath2D.push(vt)}const _t=P.#G();return P.#e=Math.max(r.AnnotationEditor.MIN_SIZE,_t[2]-_t[0]),P.#t=Math.max(r.AnnotationEditor.MIN_SIZE,_t[3]-_t[1]),P.#O(O,q),P}serialize(){if(this.isEmpty())return null;const v=this.getRect(0,0),x=r.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:o.AnnotationEditorType.INK,color:x,thickness:this.thickness,opacity:this.opacity,paths:this.#q(this.scaleFactor/this.parentScale,this.translationX,this.translationY,v),pageIndex:this.pageIndex,rect:v,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class R extends r.AnnotationEditor{#t=null;#e=null;#n=null;#i=null;#s=null;#o="";#r=null;#l=null;#u=null;#c=!1;#h=!1;static _type="stamp";static _editorType=o.AnnotationEditorType.STAMP;constructor(v){super({...v,name:"stampEditor"}),this.#i=v.bitmapUrl,this.#s=v.bitmapFile}static initialize(v){r.AnnotationEditor.initialize(v)}static get supportedTypes(){const v=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,o.shadow)(this,"supportedTypes",v.map(x=>`image/${x}`))}static get supportedTypesStr(){return(0,o.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(v){return this.supportedTypes.includes(v)}static paste(v,x){x.pasteEditor(o.AnnotationEditorType.STAMP,{bitmapFile:v.getAsFile()})}#f(v,x=!1){if(!v){this.remove();return}this.#t=v.bitmap,x||(this.#e=v.id,this.#c=v.isSvg),v.file&&(this.#o=v.file.name),this.#p()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#r&&this.div.focus()}#a(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(x=>this.#f(x,!0)).finally(()=>this.#d());return}if(this.#i){const x=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(x).then(I=>this.#f(I)).finally(()=>this.#d());return}if(this.#s){const x=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(x).then(I=>this.#f(I)).finally(()=>this.#d());return}const v=document.createElement("input");v.type="file",v.accept=R.supportedTypesStr,this.#n=new Promise(x=>{v.addEventListener("change",async()=>{if(!v.files||v.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const I=await this._uiManager.imageManager.getFromFile(v.files[0]);this.#f(I)}x()}),v.addEventListener("cancel",()=>{this.remove(),x()})}).finally(()=>this.#d()),v.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#r?.remove(),this.#r=null,this.#l?.disconnect(),this.#l=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#a();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#s)}get isResizable(){return!0}render(){if(this.div)return this.div;let v,x;if(this.width&&(v=this.x,x=this.y),super.render(),this.div.hidden=!0,this.#t?this.#p():this.#a(),this.width){const[I,P]=this.parentDimensions;this.setAt(v*I,x*P,this.width*I,this.height*P)}return this.div}#p(){const{div:v}=this;let{width:x,height:I}=this.#t;const[P,k]=this.pageDimensions,V=.75;if(this.width)x=this.width*P,I=this.height*k;else if(x>V*P||I>V*k){const W=Math.min(V*P/x,V*k/I);x*=W,I*=W}const[O,q]=this.parentDimensions;this.setDims(x*O/P,I*q/k),this._uiManager.enableWaiting(!1);const et=this.#r=document.createElement("canvas");v.append(et),v.hidden=!1,this.#y(x,I),this.#A(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton(),this.#o&&et.setAttribute("aria-label",this.#o)}#g(v,x){const[I,P]=this.parentDimensions;this.width=v/I,this.height=x/P,this.setDims(v,x),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#u!==null&&clearTimeout(this.#u);const k=200;this.#u=setTimeout(()=>{this.#u=null,this.#y(v,x)},k)}#v(v,x){const{width:I,height:P}=this.#t;let k=I,V=P,O=this.#t;for(;k>2*v||V>2*x;){const q=k,et=V;k>2*v&&(k=k>=16384?Math.floor(k/2)-1:Math.ceil(k/2)),V>2*x&&(V=V>=16384?Math.floor(V/2)-1:Math.ceil(V/2));const W=new OffscreenCanvas(k,V);W.getContext("2d").drawImage(O,0,0,q,et,0,0,k,V),O=W.transferToImageBitmap()}return O}#y(v,x){v=Math.ceil(v),x=Math.ceil(x);const I=this.#r;if(!I||I.width===v&&I.height===x)return;I.width=v,I.height=x;const P=this.#c?this.#t:this.#v(v,x),k=I.getContext("2d");k.filter=this._uiManager.hcmFilter,k.drawImage(P,0,0,P.width,P.height,0,0,v,x)}getImageForAltText(){return this.#r}#S(v){if(v){if(this.#c){const P=this._uiManager.imageManager.getSvgUrl(this.#e);if(P)return P}const x=document.createElement("canvas");return{width:x.width,height:x.height}=this.#t,x.getContext("2d").drawImage(this.#t,0,0),x.toDataURL()}if(this.#c){const[x,I]=this.pageDimensions,P=Math.round(this.width*x*A.PixelsPerInch.PDF_TO_CSS_UNITS),k=Math.round(this.height*I*A.PixelsPerInch.PDF_TO_CSS_UNITS),V=new OffscreenCanvas(P,k);return V.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,P,k),V.transferToImageBitmap()}return structuredClone(this.#t)}#A(){this.#l=new ResizeObserver(v=>{const x=v[0].contentRect;x.width&&x.height&&this.#g(x.width,x.height)}),this.#l.observe(this.div)}static deserialize(v,x,I){if(v instanceof d.StampAnnotationElement)return null;const P=super.deserialize(v,x,I),{rect:k,bitmapUrl:V,bitmapId:O,isSvg:q,accessibilityData:et}=v;O&&I.imageManager.isValidId(O)?P.#e=O:P.#i=V,P.#c=q;const[W,lt]=P.pageDimensions;return P.width=(k[2]-k[0])/W,P.height=(k[3]-k[1])/lt,et&&(P.altTextData=et),P}serialize(v=!1,x=null){if(this.isEmpty())return null;const I={annotationType:o.AnnotationEditorType.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(v)return I.bitmapUrl=this.#S(!0),I.accessibilityData=this.altTextData,I;const{decorative:P,altText:k}=this.altTextData;if(!P&&k&&(I.accessibilityData={type:"Figure",alt:k}),x===null)return I;x.stamps||=new Map;const V=this.#c?(I.rect[2]-I.rect[0])*(I.rect[3]-I.rect[1]):null;if(!x.stamps.has(this.#e))x.stamps.set(this.#e,{area:V,serialized:I}),I.bitmap=this.#S(!1);else if(this.#c){const O=x.stamps.get(this.#e);V>O.area&&(O.area=V,O.serialized.bitmap.close(),O.serialized.bitmap=this.#S(!1))}return I}}class C{#t;#e=!1;#n=null;#i=this.pointerup.bind(this);#s=this.pointerUpAfterSelection.bind(this);#o=this.pointerdown.bind(this);#r=null;#l=this.selectionStart.bind(this);#u=new Map;#c=!1;#h=!1;#f=!1;#d=null;#a;static _initialized=!1;static#p=new Map([p,E,R,g].map(v=>[v._editorType,v]));constructor({uiManager:v,pageIndex:x,div:I,accessibilityManager:P,annotationLayer:k,drawLayer:V,textLayer:O,viewport:q,l10n:et}){const W=[...C.#p.values()];if(!C._initialized){C._initialized=!0;for(const lt of W)lt.initialize(et)}v.registerEditorTypes(W),this.#a=v,this.pageIndex=x,this.div=I,this.#t=P,this.#n=k,this.viewport=q,this.#d=O,this.drawLayer=V,this.#a.addLayer(this)}get isEmpty(){return this.#u.size===0}updateToolbar(v){this.#a.updateToolbar(v)}updateMode(v=this.#a.getMode()){switch(this.#A(),v){case o.AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;case o.AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case o.AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}if(v!==o.AnnotationEditorType.NONE){const{classList:x}=this.div;for(const I of C.#p.values())x.toggle(`${I._type}Editing`,v===I._editorType);this.div.hidden=!1}}addInkEditorIfNeeded(v){if(this.#a.getMode()!==o.AnnotationEditorType.INK)return;if(!v){for(const I of this.#u.values())if(I.isEmpty()){I.setInBackground();return}}this.#y({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(v){this.#a.setEditingState(v)}addCommands(v){this.#a.addCommands(v)}togglePointerEvents(v=!1){this.div.classList.toggle("disabled",!v)}enable(){this.togglePointerEvents(!0);const v=new Set;for(const I of this.#u.values())I.enableEditing(),I.annotationElementId&&v.add(I.annotationElementId);if(!this.#n)return;const x=this.#n.getEditableAnnotations();for(const I of x){if(I.hide(),this.#a.isDeletedAnnotationElement(I.data.id)||v.has(I.data.id))continue;const P=this.deserialize(I);P&&(this.addOrRebuild(P),P.enableEditing())}}disable(){this.#f=!0,this.togglePointerEvents(!1);const v=new Set;for(const I of this.#u.values()){if(I.disableEditing(),!I.annotationElementId||I.serialize()!==null){v.add(I.annotationElementId);continue}this.getEditableAnnotation(I.annotationElementId)?.show(),I.remove()}if(this.#n){const I=this.#n.getEditableAnnotations();for(const P of I){const{id:k}=P.data;v.has(k)||this.#a.isDeletedAnnotationElement(k)||P.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:x}=this.div;for(const I of C.#p.values())x.remove(`${I._type}Editing`);this.disableTextSelection(),this.#f=!1}getEditableAnnotation(v){return this.#n?.getEditableAnnotation(v)||null}setActiveEditor(v){this.#a.getActive()!==v&&this.#a.setActiveEditor(v)}enableTextSelection(){this.#d?.div&&document.addEventListener("selectstart",this.#l)}disableTextSelection(){this.#d?.div&&document.removeEventListener("selectstart",this.#l)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#i)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#i)}attach(v){this.#u.set(v.id,v);const{annotationElementId:x}=v;x&&this.#a.isDeletedAnnotationElement(x)&&this.#a.removeDeletedAnnotationElement(v)}detach(v){this.#u.delete(v.id),this.#t?.removePointerInTextLayer(v.contentDiv),!this.#f&&v.annotationElementId&&this.#a.addDeletedAnnotationElement(v)}remove(v){this.detach(v),this.#a.removeEditor(v),v.div.remove(),v.isAttachedToDOM=!1,this.#h||this.addInkEditorIfNeeded(!1)}changeParent(v){v.parent!==this&&(v.annotationElementId&&(this.#a.addDeletedAnnotationElement(v.annotationElementId),r.AnnotationEditor.deleteAnnotationElement(v),v.annotationElementId=null),this.attach(v),v.parent?.detach(v),v.setParent(this),v.div&&v.isAttachedToDOM&&(v.div.remove(),this.div.append(v.div)))}add(v){if(this.changeParent(v),this.#a.addEditor(v),this.attach(v),!v.isAttachedToDOM){const x=v.render();this.div.append(x),v.isAttachedToDOM=!0}v.fixAndSetPosition(),v.onceAdded(),this.#a.addToAnnotationStorage(v)}moveEditorInDOM(v){if(!v.isAttachedToDOM)return;const{activeElement:x}=document;v.div.contains(x)&&!this.#r&&(v._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,v.div.contains(document.activeElement)?v._focusEventsAllowed=!0:(v.div.addEventListener("focusin",()=>{v._focusEventsAllowed=!0},{once:!0}),x.focus())},0)),v._structTreeParentId=this.#t?.moveElementInDOM(this.div,v.div,v.contentDiv,!0)}addOrRebuild(v){v.needsToBeRebuilt()?(v.parent||=this,v.rebuild()):this.add(v)}addUndoableEditor(v){const x=()=>v._uiManager.rebuild(v),I=()=>{v.remove()};this.addCommands({cmd:x,undo:I,mustExec:!1})}getNextId(){return this.#a.getId()}get#g(){return C.#p.get(this.#a.getMode())}#v(v){const x=this.#g;return x?new x.prototype.constructor(v):null}canCreateNewEmptyEditor(){return this.#g?.canCreateNewEmptyEditor()}pasteEditor(v,x){this.#a.updateToolbar(v),this.#a.updateMode(v);const{offsetX:I,offsetY:P}=this.#S(),k=this.getNextId(),V=this.#v({parent:this,id:k,x:I,y:P,uiManager:this.#a,isCentered:!0,...x});V&&this.add(V)}deserialize(v){return C.#p.get(v.annotationType??v.annotationEditorType)?.deserialize(v,this,this.#a)||null}#y(v,x,I={}){const P=this.getNextId(),k=this.#v({parent:this,id:P,x:v.offsetX,y:v.offsetY,uiManager:this.#a,isCentered:x,...I});return k&&this.add(k),k}#S(){const{x:v,y:x,width:I,height:P}=this.div.getBoundingClientRect(),k=Math.max(0,v),V=Math.max(0,x),O=Math.min(window.innerWidth,v+I),q=Math.min(window.innerHeight,x+P),et=(k+O)/2-v,W=(V+q)/2-x,[lt,gt]=this.viewport.rotation%180===0?[et,W]:[W,et];return{offsetX:lt,offsetY:gt}}addNewEditor(){this.#y(this.#S(),!0)}setSelected(v){this.#a.setSelected(v)}toggleSelected(v){this.#a.toggleSelected(v)}isSelected(v){return this.#a.isSelected(v)}unselect(v){this.#a.unselect(v)}selectionStart(v){this.#d?.div.addEventListener("pointerup",this.#s,{once:!0})}pointerUpAfterSelection(v){const x=document.getSelection();if(x.rangeCount===0)return;const I=x.getRangeAt(0);if(I.collapsed||!this.#d?.div.contains(I.commonAncestorContainer))return;const{x:P,y:k,width:V,height:O}=this.#d.div.getBoundingClientRect(),q=I.getClientRects();let et;switch(this.viewport.rotation){case 90:et=(lt,gt,Rt,_t)=>({x:(gt-k)/O,y:1-(lt+Rt-P)/V,width:_t/O,height:Rt/V});break;case 180:et=(lt,gt,Rt,_t)=>({x:1-(lt+Rt-P)/V,y:1-(gt+_t-k)/O,width:Rt/V,height:_t/O});break;case 270:et=(lt,gt,Rt,_t)=>({x:1-(gt+_t-k)/O,y:(lt-P)/V,width:_t/O,height:Rt/V});break;default:et=(lt,gt,Rt,_t)=>({x:(lt-P)/V,y:(gt-k)/O,width:Rt/V,height:_t/O});break}const W=[];for(const{x:lt,y:gt,width:Rt,height:_t}of q)Rt===0||_t===0||W.push(et(lt,gt,Rt,_t));W.length!==0&&this.#y(v,!1,{boxes:W}),x.empty()}pointerup(v){const{isMac:x}=o.FeatureTest.platform;if(!(v.button!==0||v.ctrlKey&&x)&&v.target===this.div&&this.#c){if(this.#c=!1,!this.#e){this.#e=!0;return}if(this.#a.getMode()===o.AnnotationEditorType.STAMP){this.#a.unselectAll();return}this.#y(v,!1)}}pointerdown(v){if(this.#a.getMode()===o.AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),this.#c){this.#c=!1;return}const{isMac:x}=o.FeatureTest.platform;if(v.button!==0||v.ctrlKey&&x||v.target!==this.div)return;this.#c=!0;const I=this.#a.getActive();this.#e=!I||I.isEmpty()}findNewParent(v,x,I){const P=this.#a.findParent(x,I);return P===null||P===this?!1:(P.changeParent(v),!0)}destroy(){this.#a.getActive()?.parent===this&&(this.#a.commitOrRemove(),this.#a.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const v of this.#u.values())this.#t?.removePointerInTextLayer(v.contentDiv),v.setParent(null),v.isAttachedToDOM=!1,v.div.remove();this.div=null,this.#u.clear(),this.#a.removeLayer(this)}#A(){this.#h=!0;for(const v of this.#u.values())v.isEmpty()&&v.remove();this.#h=!1}render({viewport:v}){this.viewport=v,(0,A.setLayerDimensions)(this.div,v);for(const x of this.#a.getEditors(this.pageIndex))this.add(x);this.updateMode()}update({viewport:v}){this.#a.commitOrRemove();const x=this.viewport.rotation,I=v.rotation;if(this.viewport=v,(0,A.setLayerDimensions)(this.div,{rotation:I}),x!==I)for(const P of this.#u.values())P.rotate(I);this.updateMode()}get pageDimensions(){const{pageWidth:v,pageHeight:x}=this.viewport.rawDims;return[v,x]}}}),97:((i,e,s)=>{s.d(e,{ColorPicker:()=>d});var o=s(266),r=s(812),u=s(473);class d{#t=this.#f.bind(this);#e=null;#n=null;#i;#s=null;#o=!1;#r=!1;#l;#u=null;static get _keyboardManager(){return(0,o.shadow)(this,"_keyboardManager",new r.KeyboardManager([[["Escape","mac+Escape"],d.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],d.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],d.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],d.prototype._moveToPrevious],[["Home","mac+Home"],d.prototype._moveToBeginning],[["End","mac+End"],d.prototype._moveToEnd]]))}constructor({editor:y=null,uiManager:h=null}){this.#r=!y,this.#u=y?._uiManager||h,this.#l=this.#u._eventBus,this.#i=y?.color||this.#u?.highlightColors.values().next().value||"#FFFF98"}renderButton(){const y=this.#e=document.createElement("button");y.className="colorPicker",y.tabIndex="0",y.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),y.setAttribute("aria-haspopup",!0),y.addEventListener("click",this.#d.bind(this));const h=this.#n=document.createElement("span");return h.className="swatch",h.style.backgroundColor=this.#i,y.append(h),y}renderMainDropdown(){const y=this.#s=this.#c(o.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR);return y.setAttribute("aria-orientation","horizontal"),y.setAttribute("aria-labelledby","highlightColorPickerLabel"),y}#c(y){const h=document.createElement("div");h.addEventListener("contextmenu",u.noContextMenu),h.className="dropdown",h.role="listbox",h.setAttribute("aria-multiselectable",!1),h.setAttribute("aria-orientation","vertical"),h.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[g,A]of this.#u.highlightColors){const E=document.createElement("button");E.tabIndex="0",E.role="option",E.setAttribute("data-color",A),E.title=g,E.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${g}`);const R=document.createElement("span");E.append(R),R.className="swatch",R.style.backgroundColor=A,E.setAttribute("aria-selected",A===this.#i),E.addEventListener("click",this.#h.bind(this,y,A)),h.append(E)}return h.addEventListener("keydown",this.#t),h}#h(y,h,g){g.stopPropagation(),this.#l.dispatch("switchannotationeditorparams",{source:this,type:y,value:h})}_colorSelectFromKeyboard(y){const h=y.target.getAttribute("data-color");h&&this.#h(h,y)}_moveToNext(y){if(y.target===this.#e){this.#s.firstChild?.focus();return}y.target.nextSibling?.focus()}_moveToPrevious(y){y.target.previousSibling?.focus()}_moveToBeginning(){this.#s.firstChild?.focus()}_moveToEnd(){this.#s.lastChild?.focus()}#f(y){d._keyboardManager.exec(this,y)}#d(y){if(this.#s&&!this.#s.classList.contains("hidden")){this.hideDropdown();return}if(this.#e.addEventListener("keydown",this.#t),this.#o=y.detail===0,this.#s){this.#s.classList.remove("hidden");return}const h=this.#s=this.#c(o.AnnotationEditorParamsType.HIGHLIGHT_COLOR);this.#e.append(h)}hideDropdown(){this.#s?.classList.add("hidden")}_hideDropdownFromKeyboard(){this.#r||!this.#s||this.#s.classList.contains("hidden")||(this.hideDropdown(),this.#e.removeEventListener("keydown",this.#t),this.#e.focus({preventScroll:!0,focusVisible:this.#o}))}updateColor(y){if(this.#n&&(this.#n.style.backgroundColor=y),!this.#s)return;const h=this.#u.highlightColors.values();for(const g of this.#s.children)g.setAttribute("aria-selected",h.next().value===y)}destroy(){this.#e?.remove(),this.#e=null,this.#n=null,this.#s?.remove(),this.#s=null}}}),115:((i,e,s)=>{s.d(e,{AnnotationEditor:()=>y});var o=s(812),r=s(266),u=s(473);class d{#t="";#e=!1;#n=null;#i=null;#s=null;#o=!1;#r=null;static _l10nPromise=null;constructor(A){this.#r=A}static initialize(A){d._l10nPromise||=A}async render(){const A=this.#n=document.createElement("button");A.className="altText";const E=await d._l10nPromise.get("pdfjs-editor-alt-text-button-label");A.textContent=E,A.setAttribute("aria-label",E),A.tabIndex="0",A.addEventListener("contextmenu",u.noContextMenu),A.addEventListener("pointerdown",C=>C.stopPropagation());const R=C=>{C.preventDefault(),this.#r._uiManager.editAltText(this.#r)};return A.addEventListener("click",R,{capture:!0}),A.addEventListener("keydown",C=>{C.target===A&&C.key==="Enter"&&(this.#o=!0,R(C))}),await this.#l(),A}finish(){this.#n&&(this.#n.focus({focusVisible:this.#o}),this.#o=!1)}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:A,decorative:E}){this.#t===A&&this.#e===E||(this.#t=A,this.#e=E,this.#l())}toggle(A=!1){this.#n&&(!A&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!A)}destroy(){this.#n?.remove(),this.#n=null,this.#i=null}async#l(){const A=this.#n;if(!A)return;if(!this.#t&&!this.#e){A.classList.remove("done"),this.#i?.remove();return}A.classList.add("done"),d._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(C=>{A.setAttribute("aria-label",C)});let E=this.#i;if(!E){this.#i=E=document.createElement("span"),E.className="tooltip",E.setAttribute("role","tooltip");const C=E.id=`alt-text-tooltip-${this.#r.id}`;A.setAttribute("aria-describedby",C);const _=100;A.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#i.classList.add("show"),this.#r._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.#r.editorType,data:{action:"alt_text_tooltip"}}})},_)}),A.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i?.classList.remove("show")})}E.innerText=this.#e?await d._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):this.#t,E.parentNode||A.append(E),this.#r.getImageForAltText()?.setAttribute("aria-describedby",E.id)}}class p{#t=null;#e=null;#n;#i=null;constructor(A){this.#n=A}render(){const A=this.#t=document.createElement("div");A.className="editToolbar",A.addEventListener("contextmenu",u.noContextMenu),A.addEventListener("pointerdown",p.#s);const E=this.#i=document.createElement("div");E.className="buttons",A.append(E);const R=this.#n.toolbarPosition;if(R){const{style:C}=A,_=this.#n._uiManager.direction==="ltr"?1-R[0]:R[0];C.insetInlineEnd=`${100*_}%`,C.top=`calc(${100*R[1]}% + var(--editor-toolbar-vert-offset))`}return this.#u(),A}static#s(A){A.stopPropagation()}#o(A){this.#n._focusEventsAllowed=!1,A.preventDefault(),A.stopPropagation()}#r(A){this.#n._focusEventsAllowed=!0,A.preventDefault(),A.stopPropagation()}#l(A){A.addEventListener("focusin",this.#o.bind(this),{capture:!0}),A.addEventListener("focusout",this.#r.bind(this),{capture:!0}),A.addEventListener("contextmenu",u.noContextMenu)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden")}#u(){const A=document.createElement("button");A.className="delete",A.tabIndex=0,A.setAttribute("data-l10n-id",`pdfjs-editor-remove-${this.#n.editorType}-button`),this.#l(A),A.addEventListener("click",E=>{this.#n._uiManager.delete()}),this.#i.append(A)}get#c(){const A=document.createElement("div");return A.className="divider",A}addAltTextButton(A){this.#l(A),this.#i.prepend(A,this.#c)}addColorPicker(A){this.#e=A;const E=A.renderButton();this.#l(E),this.#i.prepend(E,this.#c)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class y{#t=null;#e=null;#n=!1;#i=null;#s=null;#o=this.focusin.bind(this);#r=this.focusout.bind(this);#l=null;#u="";#c=!1;#h=!1;#f=!1;#d=!1;#a=null;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#p=!1;#g=y._zIndex++;static _borderLineWidth=-1;static _colorManager=new o.ColorManager;static _zIndex=1;static get _resizerKeyboardManager(){const A=y.prototype._resizeWithKeyboard,E=o.AnnotationEditorUIManager.TRANSLATE_SMALL,R=o.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,r.shadow)(this,"_resizerKeyboardManager",new o.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],A,{args:[-E,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],A,{args:[-R,0]}],[["ArrowRight","mac+ArrowRight"],A,{args:[E,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],A,{args:[R,0]}],[["ArrowUp","mac+ArrowUp"],A,{args:[0,-E]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],A,{args:[0,-R]}],[["ArrowDown","mac+ArrowDown"],A,{args:[0,E]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],A,{args:[0,R]}],[["Escape","mac+Escape"],y.prototype._stopResizingWithKeyboard]]))}constructor(A){this.constructor===y&&(0,r.unreachable)("Cannot initialize AnnotationEditor."),this.parent=A.parent,this.id=A.id,this.width=this.height=null,this.pageIndex=A.parent.pageIndex,this.name=A.name,this.div=null,this._uiManager=A.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=A.isCentered,this._structTreeParentId=null;const{rotation:E,rawDims:{pageWidth:R,pageHeight:C,pageX:_,pageY:v}}=this.parent.viewport;this.rotation=E,this.pageRotation=(360+E-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[R,C],this.pageTranslation=[_,v];const[x,I]=this.parentDimensions;this.x=A.x/x,this.y=A.y/I,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,r.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(A){const E=new h({id:A.parent.getNextId(),parent:A.parent,uiManager:A._uiManager});E.annotationElementId=A.annotationElementId,E.deleted=!0,E._uiManager.addToAnnotationStorage(E)}static initialize(A,E=null){if(y._l10nPromise||=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(C=>[C,A.get(C.replaceAll(/([A-Z])/g,_=>`-${_.toLowerCase()}`))])),E?.strings)for(const C of E.strings)y._l10nPromise.set(C,A.get(C));if(y._borderLineWidth!==-1)return;const R=getComputedStyle(document.documentElement);y._borderLineWidth=parseFloat(R.getPropertyValue("--outline-width"))||0}static updateDefaultParams(A,E){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(A){return!1}static paste(A,E){(0,r.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#p}set _isDraggable(A){this.#p=A,this.div?.classList.toggle("draggable",A)}get isEnterHandled(){return!0}center(){const[A,E]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*E/(A*2),this.y+=this.width*A/(E*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*E/(A*2),this.y-=this.width*A/(E*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(A){this._uiManager.addCommands(A)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#g}setParent(A){A!==null?(this.pageIndex=A.pageIndex,this.pageDimensions=A.pageDimensions):this.#E(),this.parent=A}focusin(A){this._focusEventsAllowed&&(this.#c?this.#c=!1:this.parent.setSelected(this))}focusout(A){!this._focusEventsAllowed||!this.isAttachedToDOM||A.relatedTarget?.closest(`#${this.id}`)||(A.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(A,E,R,C){const[_,v]=this.parentDimensions;[R,C]=this.screenToPageTranslation(R,C),this.x=(A+R)/_,this.y=(E+C)/v,this.fixAndSetPosition()}#v([A,E],R,C){[R,C]=this.screenToPageTranslation(R,C),this.x+=R/A,this.y+=C/E,this.fixAndSetPosition()}translate(A,E){this.#v(this.parentDimensions,A,E)}translateInPage(A,E){this.#v(this.pageDimensions,A,E),this.div.scrollIntoView({block:"nearest"})}drag(A,E){const[R,C]=this.parentDimensions;if(this.x+=A/R,this.y+=E/C,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:P,y:k}=this.div.getBoundingClientRect();this.parent.findNewParent(this,P,k)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:_,y:v}=this;const[x,I]=this.#y();_+=x,v+=I,this.div.style.left=`${(100*_).toFixed(2)}%`,this.div.style.top=`${(100*v).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#y(){const[A,E]=this.parentDimensions,{_borderLineWidth:R}=y,C=R/A,_=R/E;switch(this.rotation){case 90:return[-C,_];case 180:return[C,_];case 270:return[C,-_];default:return[-C,-_]}}fixAndSetPosition(A=this.rotation){const[E,R]=this.pageDimensions;let{x:C,y:_,width:v,height:x}=this;switch(v*=E,x*=R,C*=E,_*=R,A){case 0:C=Math.max(0,Math.min(E-v,C)),_=Math.max(0,Math.min(R-x,_));break;case 90:C=Math.max(0,Math.min(E-x,C)),_=Math.min(R,Math.max(v,_));break;case 180:C=Math.min(E,Math.max(v,C)),_=Math.min(R,Math.max(x,_));break;case 270:C=Math.min(E,Math.max(x,C)),_=Math.max(0,Math.min(R-v,_));break}this.x=C/=E,this.y=_/=R;const[I,P]=this.#y();C+=I,_+=P;const{style:k}=this.div;k.left=`${(100*C).toFixed(2)}%`,k.top=`${(100*_).toFixed(2)}%`,this.moveInDOM()}static#S(A,E,R){switch(R){case 90:return[E,-A];case 180:return[-A,-E];case 270:return[-E,A];default:return[A,E]}}screenToPageTranslation(A,E){return y.#S(A,E,this.parentRotation)}pageTranslationToScreen(A,E){return y.#S(A,E,360-this.parentRotation)}#A(A){switch(A){case 90:{const[E,R]=this.pageDimensions;return[0,-E/R,R/E,0]}case 180:return[-1,0,0,-1];case 270:{const[E,R]=this.pageDimensions;return[0,E/R,-R/E,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:A,pageDimensions:[E,R]}=this,C=E*A,_=R*A;return r.FeatureTest.isCSSRoundSupported?[Math.round(C),Math.round(_)]:[C,_]}setDims(A,E){const[R,C]=this.parentDimensions;this.div.style.width=`${(100*A/R).toFixed(2)}%`,this.#n||(this.div.style.height=`${(100*E/C).toFixed(2)}%`)}fixDims(){const{style:A}=this.div,{height:E,width:R}=A,C=R.endsWith("%"),_=!this.#n&&E.endsWith("%");if(C&&_)return;const[v,x]=this.parentDimensions;C||(A.width=`${(100*parseFloat(R)/v).toFixed(2)}%`),!this.#n&&!_&&(A.height=`${(100*parseFloat(E)/x).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#m(){if(this.#i)return;this.#i=document.createElement("div"),this.#i.classList.add("resizers");const A=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const E of A){const R=document.createElement("div");this.#i.append(R),R.classList.add("resizer",E),R.setAttribute("data-resizer-name",E),R.addEventListener("pointerdown",this.#C.bind(this,E)),R.addEventListener("contextmenu",u.noContextMenu),R.tabIndex=-1}this.div.prepend(this.#i)}#C(A,E){E.preventDefault();const{isMac:R}=r.FeatureTest.platform;if(E.button!==0||E.ctrlKey&&R)return;this.#e?.toggle(!1);const C=this.#D.bind(this,A),_=this._isDraggable;this._isDraggable=!1;const v={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",C,v);const x=this.x,I=this.y,P=this.width,k=this.height,V=this.parent.div.style.cursor,O=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(E.target).cursor;const q=()=>{this.parent.togglePointerEvents(!0),this.#e?.toggle(!0),this._isDraggable=_,window.removeEventListener("pointerup",q),window.removeEventListener("blur",q),window.removeEventListener("pointermove",C,v),this.parent.div.style.cursor=V,this.div.style.cursor=O,this.#N(x,I,P,k)};window.addEventListener("pointerup",q),window.addEventListener("blur",q)}#N(A,E,R,C){const _=this.x,v=this.y,x=this.width,I=this.height;_===A&&v===E&&x===R&&I===C||this.addCommands({cmd:()=>{this.width=x,this.height=I,this.x=_,this.y=v;const[P,k]=this.parentDimensions;this.setDims(P*x,k*I),this.fixAndSetPosition()},undo:()=>{this.width=R,this.height=C,this.x=A,this.y=E;const[P,k]=this.parentDimensions;this.setDims(P*R,k*C),this.fixAndSetPosition()},mustExec:!0})}#D(A,E){const[R,C]=this.parentDimensions,_=this.x,v=this.y,x=this.width,I=this.height,P=y.MIN_SIZE/R,k=y.MIN_SIZE/C,V=F=>Math.round(F*1e4)/1e4,O=this.#A(this.rotation),q=(F,N)=>[O[0]*F+O[2]*N,O[1]*F+O[3]*N],et=this.#A(360-this.rotation),W=(F,N)=>[et[0]*F+et[2]*N,et[1]*F+et[3]*N];let lt,gt,Rt=!1,_t=!1;switch(A){case"topLeft":Rt=!0,lt=(F,N)=>[0,0],gt=(F,N)=>[F,N];break;case"topMiddle":lt=(F,N)=>[F/2,0],gt=(F,N)=>[F/2,N];break;case"topRight":Rt=!0,lt=(F,N)=>[F,0],gt=(F,N)=>[0,N];break;case"middleRight":_t=!0,lt=(F,N)=>[F,N/2],gt=(F,N)=>[0,N/2];break;case"bottomRight":Rt=!0,lt=(F,N)=>[F,N],gt=(F,N)=>[0,0];break;case"bottomMiddle":lt=(F,N)=>[F/2,N],gt=(F,N)=>[F/2,0];break;case"bottomLeft":Rt=!0,lt=(F,N)=>[0,N],gt=(F,N)=>[F,0];break;case"middleLeft":_t=!0,lt=(F,N)=>[0,N/2],gt=(F,N)=>[F,N/2];break}const Tt=lt(x,I),j=gt(x,I);let X=q(...j);const dt=V(_+X[0]),vt=V(v+X[1]);let ot=1,ct=1,[z,K]=this.screenToPageTranslation(E.movementX,E.movementY);if([z,K]=W(z/R,K/C),Rt){const F=Math.hypot(x,I);ot=ct=Math.max(Math.min(Math.hypot(j[0]-Tt[0]-z,j[1]-Tt[1]-K)/F,1/x,1/I),P/x,k/I)}else _t?ot=Math.max(P,Math.min(1,Math.abs(j[0]-Tt[0]-z)))/x:ct=Math.max(k,Math.min(1,Math.abs(j[1]-Tt[1]-K)))/I;const at=V(x*ot),ft=V(I*ct);X=q(...gt(at,ft));const Ct=dt-X[0],yt=vt-X[1];this.width=at,this.height=ft,this.x=Ct,this.y=yt,this.setDims(R*at,C*ft),this.fixAndSetPosition()}altTextFinish(){this.#e?.finish()}async addEditToolbar(){return this.#l||this.#f?this.#l:(this.#l=new p(this),this.div.append(this.#l.render()),this.#e&&this.#l.addAltTextButton(await this.#e.render()),this.#l)}removeEditToolbar(){this.#l&&(this.#l.remove(),this.#l=null,this.#e?.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#e||(d.initialize(y._l10nPromise),this.#e=new d(this),await this.addEditToolbar())}get altTextData(){return this.#e?.data}set altTextData(A){this.#e&&(this.#e.data=A)}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#o),this.div.addEventListener("focusout",this.#r);const[A,E]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*E/A).toFixed(2)}%`,this.div.style.maxHeight=`${(100*A/E).toFixed(2)}%`);const[R,C]=this.getInitialTranslation();return this.translate(R,C),(0,o.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(A){const{isMac:E}=r.FeatureTest.platform;if(A.button!==0||A.ctrlKey&&E){A.preventDefault();return}if(this.#c=!0,this._isDraggable){this.#k(A);return}this.#L(A)}#L(A){const{isMac:E}=r.FeatureTest.platform;A.ctrlKey&&!E||A.shiftKey||A.metaKey&&E?this.parent.toggleSelected(this):this.parent.setSelected(this)}#k(A){const E=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let R,C;E&&(R={passive:!0,capture:!0},C=v=>{const[x,I]=this.screenToPageTranslation(v.movementX,v.movementY);this._uiManager.dragSelectedEditors(x,I)},window.addEventListener("pointermove",C,R));const _=()=>{window.removeEventListener("pointerup",_),window.removeEventListener("blur",_),E&&window.removeEventListener("pointermove",C,R),this.#c=!1,this._uiManager.endDragSession()||this.#L(A)};window.addEventListener("pointerup",_),window.addEventListener("blur",_)}moveInDOM(){this.#a&&clearTimeout(this.#a),this.#a=setTimeout(()=>{this.#a=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(A,E,R){A.changeParent(this),this.x=E,this.y=R,this.fixAndSetPosition()}getRect(A,E,R=this.rotation){const C=this.parentScale,[_,v]=this.pageDimensions,[x,I]=this.pageTranslation,P=A/C,k=E/C,V=this.x*_,O=this.y*v,q=this.width*_,et=this.height*v;switch(R){case 0:return[V+P+x,v-O-k-et+I,V+P+q+x,v-O-k+I];case 90:return[V+k+x,v-O+P+I,V+k+et+x,v-O+P+q+I];case 180:return[V-P-q+x,v-O+k+I,V-P+x,v-O+k+et+I];case 270:return[V-k-et+x,v-O-P-q+I,V-k+x,v-O-P+I];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(A,E){const[R,C,_,v]=A,x=_-R,I=v-C;switch(this.rotation){case 0:return[R,E-v,x,I];case 90:return[R,E-C,I,x];case 180:return[_,E-C,x,I];case 270:return[_,E-v,I,x];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#f=!0}disableEditMode(){this.#f=!1}isInEditMode(){return this.#f}shouldGetKeyboardEvents(){return this.#d}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#o),this.div?.addEventListener("focusout",this.#r)}rotate(A){}serialize(A=!1,E=null){(0,r.unreachable)("An editor must be serializable")}static deserialize(A,E,R){const C=new this.prototype.constructor({parent:E,id:E.getNextId(),uiManager:R});C.rotation=A.rotation;const[_,v]=C.pageDimensions,[x,I,P,k]=C.getRectInCurrentCoords(A.rect,v);return C.x=x/_,C.y=I/v,C.width=P/_,C.height=k/v,C}remove(){this.div.removeEventListener("focusin",this.#o),this.div.removeEventListener("focusout",this.#r),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#a&&(clearTimeout(this.#a),this.#a=null),this.#E(),this.removeEditToolbar()}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#m(),this.#i.classList.remove("hidden"),(0,o.bindEvents)(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(A){if(!this.isResizable||A.target!==this.div||A.key!=="Enter")return;this._uiManager.setSelected(this),this.#s={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const E=this.#i.children;if(!this.#t){this.#t=Array.from(E);const v=this.#F.bind(this),x=this.#T.bind(this);for(const I of this.#t){const P=I.getAttribute("data-resizer-name");I.setAttribute("role","spinbutton"),I.addEventListener("keydown",v),I.addEventListener("blur",x),I.addEventListener("focus",this.#P.bind(this,P)),y._l10nPromise.get(`pdfjs-editor-resizer-label-${P}`).then(k=>I.setAttribute("aria-label",k))}}const R=this.#t[0];let C=0;for(const v of E){if(v===R)break;C++}const _=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(_!==C){if(_<C)for(let x=0;x<C-_;x++)this.#i.append(this.#i.firstChild);else if(_>C)for(let x=0;x<_-C;x++)this.#i.firstChild.before(this.#i.lastChild);let v=0;for(const x of E){const P=this.#t[v++].getAttribute("data-resizer-name");y._l10nPromise.get(`pdfjs-editor-resizer-label-${P}`).then(k=>x.setAttribute("aria-label",k))}}this.#x(0),this.#d=!0,this.#i.firstChild.focus({focusVisible:!0}),A.preventDefault(),A.stopImmediatePropagation()}#F(A){y._resizerKeyboardManager.exec(this,A)}#T(A){this.#d&&A.relatedTarget?.parentNode!==this.#i&&this.#E()}#P(A){this.#u=this.#d?A:""}#x(A){if(this.#t)for(const E of this.#t)E.tabIndex=A}_resizeWithKeyboard(A,E){this.#d&&this.#D(this.#u,{movementX:A,movementY:E})}#E(){if(this.#d=!1,this.#x(-1),this.#s){const{savedX:A,savedY:E,savedWidth:R,savedHeight:C}=this.#s;this.#N(A,E,R,C),this.#s=null}}_stopResizingWithKeyboard(){this.#E(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this.#l){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this.#l?.show()});return}this.#l?.show()}unselect(){this.#i?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus(),this.#l?.hide()}updateParams(A,E){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#h}set isEditing(A){this.#h=A,this.parent&&(A?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(A,E){this.#n=!0;const R=A/E,{style:C}=this.div;C.aspectRatio=R,C.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}}class h extends y{constructor(A){super(A),this.annotationElementId=A.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),405:((i,e,s)=>{s.d(e,{Outliner:()=>o});class o{#t;#e=[];#n=[];constructor(u,d=0,p=0,y=!0){let h=1/0,g=-1/0,A=1/0,E=-1/0;const R=10**-4;for(const{x:k,y:V,width:O,height:q}of u){const et=Math.floor((k-d)/R)*R,W=Math.ceil((k+O+d)/R)*R,lt=Math.floor((V-d)/R)*R,gt=Math.ceil((V+q+d)/R)*R,Rt=[et,lt,gt,!0],_t=[W,lt,gt,!1];this.#e.push(Rt,_t),h=Math.min(h,et),g=Math.max(g,W),A=Math.min(A,lt),E=Math.max(E,gt)}const C=g-h+2*p,_=E-A+2*p,v=h-p,x=A-p,I=this.#e.at(y?-1:-2),P=[I[0],I[2]];for(const k of this.#e){const[V,O,q]=k;k[0]=(V-v)/C,k[1]=(O-x)/_,k[2]=(q-x)/_}this.#t={x:v,y:x,width:C,height:_,lastPoint:P}}getOutlines(){this.#e.sort((d,p)=>d[0]-p[0]||d[1]-p[1]||d[2]-p[2]);const u=[];for(const d of this.#e)d[3]?(u.push(...this.#l(d)),this.#o(d)):(this.#r(d),u.push(...this.#l(d)));return this.#i(u)}#i(u){const d=[],p=new Set;for(const g of u){const[A,E,R]=g;d.push([A,E,g],[A,R,g])}d.sort((g,A)=>g[1]-A[1]||g[0]-A[0]);for(let g=0,A=d.length;g<A;g+=2){const E=d[g][2],R=d[g+1][2];E.push(R),R.push(E),p.add(E),p.add(R)}const y=[];let h;for(;p.size>0;){const g=p.values().next().value;let[A,E,R,C,_]=g;p.delete(g);let v=A,x=E;for(h=[A,R],y.push(h);;){let I;if(p.has(C))I=C;else if(p.has(_))I=_;else break;p.delete(I),[A,E,R,C,_]=I,v!==A&&(h.push(v,x,A,x===E?E:R),v=A),x=x===E?R:E}h.push(v,x)}return{outlines:y,box:this.#t}}#s(u){const d=this.#n;let p=0,y=d.length-1;for(;p<=y;){const h=p+y>>1,g=d[h][0];if(g===u)return h;g<u?p=h+1:y=h-1}return y+1}#o([,u,d]){const p=this.#s(u);this.#n.splice(p,0,[u,d])}#r([,u,d]){const p=this.#s(u);for(let y=p;y<this.#n.length;y++){const[h,g]=this.#n[y];if(h!==u)break;if(h===u&&g===d){this.#n.splice(y,1);return}}for(let y=p-1;y>=0;y--){const[h,g]=this.#n[y];if(h!==u)break;if(h===u&&g===d){this.#n.splice(y,1);return}}}#l(u){const[d,p,y]=u,h=[[d,p,y]],g=this.#s(y);for(let A=0;A<g;A++){const[E,R]=this.#n[A];for(let C=0,_=h.length;C<_;C++){const[,v,x]=h[C];if(!(R<=v||x<=E)){if(v>=E){if(x>R)h[C][1]=R;else{if(_===1)return[];h.splice(C,1),C--,_--}continue}h[C][2]=E,x>R&&h.push([d,R,x])}}}return h}}}),812:((i,e,s)=>{s.d(e,{AnnotationEditorUIManager:()=>E,ColorManager:()=>A,KeyboardManager:()=>g,bindEvents:()=>u,opacityToHex:()=>d});var o=s(266),r=s(473);function u(R,C,_){for(const v of _)C.addEventListener(v,R[v].bind(R))}function d(R){return Math.round(Math.min(255,Math.max(1,255*R))).toString(16).padStart(2,"0")}class p{#t=0;getId(){return`${o.AnnotationEditorPrefix}${this.#t++}`}}class y{#t=(0,o.getUuid)();#e=0;#n=null;static get _isSVGFittingCanvas(){const C='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',v=new OffscreenCanvas(1,3).getContext("2d"),x=new Image;x.src=C;const I=x.decode().then(()=>(v.drawImage(x,0,0,1,1,0,0,1,3),new Uint32Array(v.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,o.shadow)(this,"_isSVGFittingCanvas",I)}async#i(C,_){this.#n||=new Map;let v=this.#n.get(C);if(v===null)return null;if(v?.bitmap)return v.refCounter+=1,v;try{v||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let x;if(typeof _=="string"?(v.url=_,x=await(0,r.fetchData)(_,"blob")):x=v.file=_,x.type==="image/svg+xml"){const I=y._isSVGFittingCanvas,P=new FileReader,k=new Image,V=new Promise((O,q)=>{k.onload=()=>{v.bitmap=k,v.isSvg=!0,O()},P.onload=async()=>{const et=v.svgUrl=P.result;k.src=await I?`${et}#svgView(preserveAspectRatio(none))`:et},k.onerror=P.onerror=q});P.readAsDataURL(x),await V}else v.bitmap=await createImageBitmap(x);v.refCounter=1}catch(x){console.error(x),v=null}return this.#n.set(C,v),v&&this.#n.set(v.id,v),v}async getFromFile(C){const{lastModified:_,name:v,size:x,type:I}=C;return this.#i(`${_}_${v}_${x}_${I}`,C)}async getFromUrl(C){return this.#i(C,C)}async getFromId(C){this.#n||=new Map;const _=this.#n.get(C);return _?_.bitmap?(_.refCounter+=1,_):_.file?this.getFromFile(_.file):this.getFromUrl(_.url):null}getSvgUrl(C){const _=this.#n.get(C);return _?.isSvg?_.svgUrl:null}deleteId(C){this.#n||=new Map;const _=this.#n.get(C);_&&(_.refCounter-=1,_.refCounter===0&&(_.bitmap=null))}isValidId(C){return C.startsWith(`image_${this.#t}_`)}}class h{#t=[];#e=!1;#n;#i=-1;constructor(C=128){this.#n=C}add({cmd:C,undo:_,mustExec:v,type:x=NaN,overwriteIfSameType:I=!1,keepUndo:P=!1}){if(v&&C(),this.#e)return;const k={cmd:C,undo:_,type:x};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(k);return}if(I&&this.#t[this.#i].type===x){P&&(k.undo=this.#t[this.#i].undo),this.#t[this.#i]=k;return}const V=this.#i+1;V===this.#n?this.#t.splice(0,1):(this.#i=V,V<this.#t.length&&this.#t.splice(V)),this.#t.push(k)}undo(){this.#i!==-1&&(this.#e=!0,this.#t[this.#i].undo(),this.#e=!1,this.#i-=1)}redo(){this.#i<this.#t.length-1&&(this.#i+=1,this.#e=!0,this.#t[this.#i].cmd(),this.#e=!1)}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}destroy(){this.#t=null}}class g{constructor(C){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:_}=o.FeatureTest.platform;for(const[v,x,I={}]of C)for(const P of v){const k=P.startsWith("mac+");_&&k?(this.callbacks.set(P.slice(4),{callback:x,options:I}),this.allKeys.add(P.split("+").at(-1))):!_&&!k&&(this.callbacks.set(P,{callback:x,options:I}),this.allKeys.add(P.split("+").at(-1)))}}#t(C){C.altKey&&this.buffer.push("alt"),C.ctrlKey&&this.buffer.push("ctrl"),C.metaKey&&this.buffer.push("meta"),C.shiftKey&&this.buffer.push("shift"),this.buffer.push(C.key);const _=this.buffer.join("+");return this.buffer.length=0,_}exec(C,_){if(!this.allKeys.has(_.key))return;const v=this.callbacks.get(this.#t(_));if(!v)return;const{callback:x,options:{bubbles:I=!1,args:P=[],checker:k=null}}=v;k&&!k(C,_)||(x.bind(C,...P,_)(),I||(_.stopPropagation(),_.preventDefault()))}}class A{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const C=new Map([["CanvasText",null],["Canvas",null]]);return(0,r.getColorValues)(C),(0,o.shadow)(this,"_colors",C)}convert(C){const _=(0,r.getRGB)(C);if(!window.matchMedia("(forced-colors: active)").matches)return _;for(const[v,x]of this._colors)if(x.every((I,P)=>I===_[P]))return A._colorsMapping.get(v);return _}getHexCode(C){const _=this._colors.get(C);return _?o.Util.makeHexColor(..._):C}}class E{#t=null;#e=new Map;#n=new Map;#i=null;#s=null;#o=new h;#r=0;#l=new Set;#u=null;#c=null;#h=new Set;#f=null;#d=null;#a=null;#p=new p;#g=!1;#v=!1;#y=null;#S=null;#A=o.AnnotationEditorType.NONE;#m=new Set;#C=null;#N=this.blur.bind(this);#D=this.focus.bind(this);#L=this.copy.bind(this);#k=this.cut.bind(this);#F=this.paste.bind(this);#T=this.keydown.bind(this);#P=this.onEditingAction.bind(this);#x=this.onPageChanging.bind(this);#E=this.onScaleChanging.bind(this);#I=this.onRotationChanging.bind(this);#O={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#w=[0,0];#R=null;#_=null;#H=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const C=E.prototype,_=P=>P.#_.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&P.hasSomethingToControl(),v=(P,{target:k})=>{if(k instanceof HTMLInputElement){const{type:V}=k;return V!=="text"&&V!=="number"}return!0},x=this.TRANSLATE_SMALL,I=this.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new g([[["ctrl+a","mac+meta+a"],C.selectAll,{checker:v}],[["ctrl+z","mac+meta+z"],C.undo,{checker:v}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],C.redo,{checker:v}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],C.delete,{checker:v}],[["Enter","mac+Enter"],C.addNewEditorFromKeyboard,{checker:(P,{target:k})=>!(k instanceof HTMLButtonElement)&&P.#_.contains(k)&&!P.isEnterHandled}],[[" ","mac+ "],C.addNewEditorFromKeyboard,{checker:P=>P.#_.contains(document.activeElement)}],[["Escape","mac+Escape"],C.unselectAll],[["ArrowLeft","mac+ArrowLeft"],C.translateSelectedEditors,{args:[-x,0],checker:_}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],C.translateSelectedEditors,{args:[-I,0],checker:_}],[["ArrowRight","mac+ArrowRight"],C.translateSelectedEditors,{args:[x,0],checker:_}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],C.translateSelectedEditors,{args:[I,0],checker:_}],[["ArrowUp","mac+ArrowUp"],C.translateSelectedEditors,{args:[0,-x],checker:_}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],C.translateSelectedEditors,{args:[0,-I],checker:_}],[["ArrowDown","mac+ArrowDown"],C.translateSelectedEditors,{args:[0,x],checker:_}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],C.translateSelectedEditors,{args:[0,I],checker:_}]]))}constructor(C,_,v,x,I,P,k){this.#_=C,this.#H=_,this.#i=v,this._eventBus=x,this._eventBus._on("editingaction",this.#P),this._eventBus._on("pagechanging",this.#x),this._eventBus._on("scalechanging",this.#E),this._eventBus._on("rotationchanging",this.#I),this.#s=I.annotationStorage,this.#f=I.filterFactory,this.#C=P,this.#a=k||null,this.viewParameters={realScale:r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#M(),this.#G(),this._eventBus._off("editingaction",this.#P),this._eventBus._off("pagechanging",this.#x),this._eventBus._off("scalechanging",this.#E),this._eventBus._off("rotationchanging",this.#I);for(const C of this.#n.values())C.destroy();this.#n.clear(),this.#e.clear(),this.#h.clear(),this.#t=null,this.#m.clear(),this.#o.destroy(),this.#i?.destroy(),this.#d&&(clearTimeout(this.#d),this.#d=null),this.#R&&(clearTimeout(this.#R),this.#R=null)}get hcmFilter(){return(0,o.shadow)(this,"hcmFilter",this.#C?this.#f.addHCMFilter(this.#C.foreground,this.#C.background):"none")}get direction(){return(0,o.shadow)(this,"direction",getComputedStyle(this.#_).direction)}get highlightColors(){return(0,o.shadow)(this,"highlightColors",this.#a?new Map(this.#a.split(",").map(C=>C.split("=").map(_=>_.trim()))):null)}setMainHighlightColorPicker(C){this.#S=C}editAltText(C){this.#i?.editAltText(this,C)}onPageChanging({pageNumber:C}){this.#r=C-1}focusMainContainer(){this.#_.focus()}findParent(C,_){for(const v of this.#n.values()){const{x,y:I,width:P,height:k}=v.div.getBoundingClientRect();if(C>=x&&C<=x+P&&_>=I&&_<=I+k)return v}return null}disableUserSelect(C=!1){this.#H.classList.toggle("noUserSelect",C)}addShouldRescale(C){this.#h.add(C)}removeShouldRescale(C){this.#h.delete(C)}onScaleChanging({scale:C}){this.commitOrRemove(),this.viewParameters.realScale=C*r.PixelsPerInch.PDF_TO_CSS_UNITS;for(const _ of this.#h)_.onScaleChanging()}onRotationChanging({pagesRotation:C}){this.commitOrRemove(),this.viewParameters.rotation=C}addToAnnotationStorage(C){!C.isEmpty()&&this.#s&&!this.#s.has(C.id)&&this.#s.setValue(C.id,C)}#q(){window.addEventListener("focus",this.#D),window.addEventListener("blur",this.#N)}#G(){window.removeEventListener("focus",this.#D),window.removeEventListener("blur",this.#N)}blur(){if(!this.hasSelection)return;const{activeElement:C}=document;for(const _ of this.#m)if(_.div.contains(C)){this.#y=[_,C],_._focusEventsAllowed=!1;break}}focus(){if(!this.#y)return;const[C,_]=this.#y;this.#y=null,_.addEventListener("focusin",()=>{C._focusEventsAllowed=!0},{once:!0}),_.focus()}#U(){window.addEventListener("keydown",this.#T)}#M(){window.removeEventListener("keydown",this.#T)}#B(){document.addEventListener("copy",this.#L),document.addEventListener("cut",this.#k),document.addEventListener("paste",this.#F)}#Y(){document.removeEventListener("copy",this.#L),document.removeEventListener("cut",this.#k),document.removeEventListener("paste",this.#F)}addEditListeners(){this.#U(),this.#B()}removeEditListeners(){this.#M(),this.#Y()}copy(C){if(C.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const _=[];for(const v of this.#m){const x=v.serialize(!0);x&&_.push(x)}_.length!==0&&C.clipboardData.setData("application/pdfjs",JSON.stringify(_))}cut(C){this.copy(C),this.delete()}paste(C){C.preventDefault();const{clipboardData:_}=C;for(const I of _.items)for(const P of this.#c)if(P.isHandlingMimeForPasting(I.type)){P.paste(I,this.currentLayer);return}let v=_.getData("application/pdfjs");if(!v)return;try{v=JSON.parse(v)}catch(I){(0,o.warn)(`paste: "${I.message}".`);return}if(!Array.isArray(v))return;this.unselectAll();const x=this.currentLayer;try{const I=[];for(const V of v){const O=x.deserialize(V);if(!O)return;I.push(O)}const P=()=>{for(const V of I)this.#X(V);this.#J(I)},k=()=>{for(const V of I)V.remove()};this.addCommands({cmd:P,undo:k,mustExec:!0})}catch(I){(0,o.warn)(`paste: "${I.message}".`)}}keydown(C){this.isEditorHandlingKeyboard||E._keyboardManager.exec(this,C)}onEditingAction(C){["undo","redo","delete","selectAll"].includes(C.name)&&this[C.name]()}#b(C){Object.entries(C).some(([v,x])=>this.#O[v]!==x)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#O,C)})}#V(C){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:C})}setEditingState(C){C?(this.#q(),this.#U(),this.#B(),this.#b({isEditing:this.#A!==o.AnnotationEditorType.NONE,isEmpty:this.#z(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#G(),this.#M(),this.#Y(),this.#b({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(C){if(!this.#c){this.#c=C;for(const _ of this.#c)this.#V(_.defaultPropertiesToUpdate)}}getId(){return this.#p.getId()}get currentLayer(){return this.#n.get(this.#r)}getLayer(C){return this.#n.get(C)}get currentPageIndex(){return this.#r}addLayer(C){this.#n.set(C.pageIndex,C),this.#g?C.enable():C.disable()}removeLayer(C){this.#n.delete(C.pageIndex)}updateMode(C,_=null,v=!1){if(this.#A!==C){if(this.#A=C,C===o.AnnotationEditorType.NONE){this.setEditingState(!1),this.#K();return}this.setEditingState(!0),this.#$(),this.unselectAll();for(const x of this.#n.values())x.updateMode(C);if(!_&&v){this.addNewEditorFromKeyboard();return}if(_){for(const x of this.#e.values())if(x.annotationElementId===_){this.setSelected(x),x.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(C){C!==this.#A&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:C})}updateParams(C,_){if(this.#c){switch(C){case o.AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case o.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:this.#S?.updateColor(_);break}for(const v of this.#m)v.updateParams(C,_);for(const v of this.#c)v.updateDefaultParams(C,_)}}enableWaiting(C=!1){if(this.#v!==C){this.#v=C;for(const _ of this.#n.values())C?_.disableClick():_.enableClick(),_.div.classList.toggle("waiting",C)}}#$(){if(!this.#g){this.#g=!0;for(const C of this.#n.values())C.enable()}}#K(){if(this.unselectAll(),this.#g){this.#g=!1;for(const C of this.#n.values())C.disable()}}getEditors(C){const _=[];for(const v of this.#e.values())v.pageIndex===C&&_.push(v);return _}getEditor(C){return this.#e.get(C)}addEditor(C){this.#e.set(C.id,C)}removeEditor(C){C.div.contains(document.activeElement)&&(this.#d&&clearTimeout(this.#d),this.#d=setTimeout(()=>{this.focusMainContainer(),this.#d=null},0)),this.#e.delete(C.id),this.unselect(C),(!C.annotationElementId||!this.#l.has(C.annotationElementId))&&this.#s?.remove(C.id)}addDeletedAnnotationElement(C){this.#l.add(C.annotationElementId),C.deleted=!0}isDeletedAnnotationElement(C){return this.#l.has(C)}removeDeletedAnnotationElement(C){this.#l.delete(C.annotationElementId),C.deleted=!1}#X(C){const _=this.#n.get(C.pageIndex);_?_.addOrRebuild(C):this.addEditor(C)}setActiveEditor(C){this.#t!==C&&(this.#t=C,C&&this.#V(C.propertiesToUpdate))}toggleSelected(C){if(this.#m.has(C)){this.#m.delete(C),C.unselect(),this.#b({hasSelectedEditor:this.hasSelection});return}this.#m.add(C),C.select(),this.#V(C.propertiesToUpdate),this.#b({hasSelectedEditor:!0})}setSelected(C){for(const _ of this.#m)_!==C&&_.unselect();this.#m.clear(),this.#m.add(C),C.select(),this.#V(C.propertiesToUpdate),this.#b({hasSelectedEditor:!0})}isSelected(C){return this.#m.has(C)}get firstSelectedEditor(){return this.#m.values().next().value}unselect(C){C.unselect(),this.#m.delete(C),this.#b({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#m.size!==0}get isEnterHandled(){return this.#m.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#o.undo(),this.#b({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#z()})}redo(){this.#o.redo(),this.#b({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#z()})}addCommands(C){this.#o.add(C),this.#b({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#z()})}#z(){if(this.#e.size===0)return!0;if(this.#e.size===1)for(const C of this.#e.values())return C.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const C=[...this.#m],_=()=>{for(const x of C)x.remove()},v=()=>{for(const x of C)this.#X(x)};this.addCommands({cmd:_,undo:v,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#J(C){this.#m.clear();for(const _ of C)_.isEmpty()||(this.#m.add(_),_.select());this.#b({hasSelectedEditor:!0})}selectAll(){for(const C of this.#m)C.commit();this.#J(this.#e.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#A!==o.AnnotationEditorType.NONE))&&this.hasSelection){for(const C of this.#m)C.unselect();this.#m.clear(),this.#b({hasSelectedEditor:!1})}}translateSelectedEditors(C,_,v=!1){if(v||this.commitOrRemove(),!this.hasSelection)return;this.#w[0]+=C,this.#w[1]+=_;const[x,I]=this.#w,P=[...this.#m],k=1e3;this.#R&&clearTimeout(this.#R),this.#R=setTimeout(()=>{this.#R=null,this.#w[0]=this.#w[1]=0,this.addCommands({cmd:()=>{for(const V of P)this.#e.has(V.id)&&V.translateInPage(x,I)},undo:()=>{for(const V of P)this.#e.has(V.id)&&V.translateInPage(-x,-I)},mustExec:!1})},k);for(const V of P)V.translateInPage(C,_)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#u=new Map;for(const C of this.#m)this.#u.set(C,{savedX:C.x,savedY:C.y,savedPageIndex:C.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#u)return!1;this.disableUserSelect(!1);const C=this.#u;this.#u=null;let _=!1;for(const[{x,y:I,pageIndex:P},k]of C)k.newX=x,k.newY=I,k.newPageIndex=P,_||=x!==k.savedX||I!==k.savedY||P!==k.savedPageIndex;if(!_)return!1;const v=(x,I,P,k)=>{if(this.#e.has(x.id)){const V=this.#n.get(k);V?x._setParentAndPosition(V,I,P):(x.pageIndex=k,x.x=I,x.y=P)}};return this.addCommands({cmd:()=>{for(const[x,{newX:I,newY:P,newPageIndex:k}]of C)v(x,I,P,k)},undo:()=>{for(const[x,{savedX:I,savedY:P,savedPageIndex:k}]of C)v(x,I,P,k)},mustExec:!0}),!0}dragSelectedEditors(C,_){if(this.#u)for(const v of this.#u.keys())v.drag(C,_)}rebuild(C){if(C.parent===null){const _=this.getLayer(C.pageIndex);_?(_.changeParent(C),_.addOrRebuild(C)):(this.addEditor(C),this.addToAnnotationStorage(C),C.rebuild())}else C.parent.addOrRebuild(C)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#m.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(C){return this.#t===C}getActive(){return this.#t}getMode(){return this.#A}get imageManager(){return(0,o.shadow)(this,"imageManager",new y)}}}),171:((i,e,s)=>{s.d(e,{PDFFetchStream:()=>y});var o=s(266),r=s(253);function u(A,E,R){return{method:"GET",headers:A,signal:R.signal,mode:"cors",credentials:E?"include":"same-origin",redirect:"follow"}}function d(A){const E=new Headers;for(const R in A){const C=A[R];C!==void 0&&E.append(R,C)}return E}function p(A){return A instanceof Uint8Array?A.buffer:A instanceof ArrayBuffer?A:((0,o.warn)(`getArrayBuffer - unexpected data format: ${A}`),new Uint8Array(A).buffer)}class y{constructor(E){this.source=E,this.isHttp=/^https?:/i.test(E.url),this.httpHeaders=this.isHttp&&E.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new h(this),this._fullRequestReader}getRangeReader(E,R){if(R<=this._progressiveDataLength)return null;const C=new g(this,E,R);return this._rangeRequestReaders.push(C),C}cancelAllRequests(E){this._fullRequestReader?.cancel(E);for(const R of this._rangeRequestReaders.slice(0))R.cancel(E)}}class h{constructor(E){this._stream=E,this._reader=null,this._loaded=0,this._filename=null;const R=E.source;this._withCredentials=R.withCredentials||!1,this._contentLength=R.length,this._headersCapability=new o.PromiseCapability,this._disableRange=R.disableRange||!1,this._rangeChunkSize=R.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!R.disableStream,this._isRangeSupported=!R.disableRange,this._headers=d(this._stream.httpHeaders);const C=R.url;fetch(C,u(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,r.validateResponseStatus)(_.status))throw(0,r.createResponseStatusError)(_.status,C);this._reader=_.body.getReader(),this._headersCapability.resolve();const v=P=>_.headers.get(P),{allowRangeRequests:x,suggestedLength:I}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=I||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(v),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:E,done:R}=await this._reader.read();return R?{value:E,done:R}:(this._loaded+=E.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:p(E),done:!1})}cancel(E){this._reader?.cancel(E),this._abortController.abort()}}class g{constructor(E,R,C){this._stream=E,this._reader=null,this._loaded=0;const _=E.source;this._withCredentials=_.withCredentials||!1,this._readCapability=new o.PromiseCapability,this._isStreamingSupported=!_.disableStream,this._abortController=new AbortController,this._headers=d(this._stream.httpHeaders),this._headers.append("Range",`bytes=${R}-${C-1}`);const v=_.url;fetch(v,u(this._headers,this._withCredentials,this._abortController)).then(x=>{if(!(0,r.validateResponseStatus)(x.status))throw(0,r.createResponseStatusError)(x.status,v);this._readCapability.resolve(),this._reader=x.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:E,done:R}=await this._reader.read();return R?{value:E,done:R}:(this._loaded+=E.byteLength,this.onProgress?.({loaded:this._loaded}),{value:p(E),done:!1})}cancel(E){this._reader?.cancel(E),this._abortController.abort()}}}),742:((i,e,s)=>{s.d(e,{FontFaceObject:()=>u,FontLoader:()=>r});var o=s(266);class r{#t=new Set;constructor({ownerDocument:p=globalThis.document,styleElement:y=null}){this._document=p,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(p){this.nativeFontFaces.add(p),this._document.fonts.add(p)}removeNativeFontFace(p){this.nativeFontFaces.delete(p),this._document.fonts.delete(p)}insertRule(p){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const y=this.styleElement.sheet;y.insertRule(p,y.cssRules.length)}clear(){for(const p of this.nativeFontFaces)this._document.fonts.delete(p);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:p,_inspectFont:y}){if(!(!p||this.#t.has(p.loadedName))){if((0,o.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:h,src:g,style:A}=p,E=new FontFace(h,g,A);this.addNativeFontFace(E);try{await E.load(),this.#t.add(h),y?.(p)}catch{(0,o.warn)(`Cannot load system font: ${p.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(E)}return}(0,o.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(p){if(p.attached||p.missingFile&&!p.systemFontInfo)return;if(p.attached=!0,p.systemFontInfo){await this.loadSystemFont(p);return}if(this.isFontLoadingAPISupported){const h=p.createNativeFontFace();if(h){this.addNativeFontFace(h);try{await h.loaded}catch(g){throw(0,o.warn)(`Failed to load font '${h.family}': '${g}'.`),p.disableFontFace=!0,g}}return}const y=p.createFontFaceRule();if(y){if(this.insertRule(y),this.isSyncFontLoadingSupported)return;await new Promise(h=>{const g=this._queueLoadingCallback(h);this._prepareFontLoadEvent(p,g)})}}get isFontLoadingAPISupported(){const p=!!this._document?.fonts;return(0,o.shadow)(this,"isFontLoadingAPISupported",p)}get isSyncFontLoadingSupported(){let p=!1;return(o.isNodeJS||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(p=!0),(0,o.shadow)(this,"isSyncFontLoadingSupported",p)}_queueLoadingCallback(p){function y(){for((0,o.assert)(!g.done,"completeRequest() cannot be called twice."),g.done=!0;h.length>0&&h[0].done;){const A=h.shift();setTimeout(A.callback,0)}}const{loadingRequests:h}=this,g={done:!1,complete:y,callback:p};return h.push(g),g}get _loadTestFont(){const p=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,o.shadow)(this,"_loadTestFont",p)}_prepareFontLoadEvent(p,y){function h(lt,gt){return lt.charCodeAt(gt)<<24|lt.charCodeAt(gt+1)<<16|lt.charCodeAt(gt+2)<<8|lt.charCodeAt(gt+3)&255}function g(lt,gt,Rt,_t){const Tt=lt.substring(0,gt),j=lt.substring(gt+Rt);return Tt+_t+j}let A,E;const R=this._document.createElement("canvas");R.width=1,R.height=1;const C=R.getContext("2d");let _=0;function v(lt,gt){if(++_>30){(0,o.warn)("Load test font never loaded."),gt();return}if(C.font="30px "+lt,C.fillText(".",0,20),C.getImageData(0,0,1,1).data[3]>0){gt();return}setTimeout(v.bind(null,lt,gt))}const x=`lt${Date.now()}${this.loadTestFontId++}`;let I=this._loadTestFont;I=g(I,976,x.length,x);const k=16,V=1482184792;let O=h(I,k);for(A=0,E=x.length-3;A<E;A+=4)O=O-V+h(x,A)|0;A<x.length&&(O=O-V+h(x+"XXX",A)|0),I=g(I,k,4,(0,o.string32)(O));const q=`url(data:font/opentype;base64,${btoa(I)});`,et=`@font-face {font-family:"${x}";src:${q}}`;this.insertRule(et);const W=this._document.createElement("div");W.style.visibility="hidden",W.style.width=W.style.height="10px",W.style.position="absolute",W.style.top=W.style.left="0px";for(const lt of[p.loadedName,x]){const gt=this._document.createElement("span");gt.textContent="Hi",gt.style.fontFamily=lt,W.append(gt)}this._document.body.append(W),v(x,()=>{W.remove(),y.complete()})}}class u{constructor(p,{isEvalSupported:y=!0,disableFontFace:h=!1,ignoreErrors:g=!1,inspectFont:A=null}){this.compiledGlyphs=Object.create(null);for(const E in p)this[E]=p[E];this.isEvalSupported=y!==!1,this.disableFontFace=h===!0,this.ignoreErrors=g===!0,this._inspectFont=A}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let p;if(!this.cssFontInfo)p=new FontFace(this.loadedName,this.data,{});else{const y={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(y.style=`oblique ${this.cssFontInfo.italicAngle}deg`),p=new FontFace(this.cssFontInfo.fontFamily,this.data,y)}return this._inspectFont?.(this),p}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const p=(0,o.bytesToString)(this.data),y=`url(data:${this.mimetype};base64,${btoa(p)});`;let h;if(!this.cssFontInfo)h=`@font-face {font-family:"${this.loadedName}";src:${y}}`;else{let g=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(g+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),h=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${g}src:${y}}`}return this._inspectFont?.(this,y),h}getPathGenerator(p,y){if(this.compiledGlyphs[y]!==void 0)return this.compiledGlyphs[y];let h;try{h=p.get(this.loadedName+"_path_"+y)}catch(g){if(!this.ignoreErrors)throw g;return(0,o.warn)(`getPathGenerator - ignoring character: "${g}".`),this.compiledGlyphs[y]=function(A,E){}}if(this.isEvalSupported&&o.FeatureTest.isEvalSupported){const g=[];for(const A of h){const E=A.args!==void 0?A.args.join(","):"";g.push("c.",A.cmd,"(",E,`);
`)}return this.compiledGlyphs[y]=new Function("c","size",g.join(""))}return this.compiledGlyphs[y]=function(g,A){for(const E of h)E.cmd==="scale"&&(E.args=[A,-A]),g[E.cmd].apply(g,E.args)}}}}),472:((i,e,s)=>{s.d(e,{Metadata:()=>r});var o=s(266);class r{#t;#e;constructor({parsedData:d,rawData:p}){this.#t=d,this.#e=p}getRaw(){return this.#e}get(d){return this.#t.get(d)??null}getAll(){return(0,o.objectFromMap)(this.#t)}has(d){return this.#t.has(d)}}}),474:((i,e,s)=>{s.d(e,{PDFNetworkStream:()=>h});var o=s(266),r=s(253);const u=200,d=206;function p(E){const R=E.response;return typeof R!="string"?R:(0,o.stringToBytes)(R).buffer}class y{constructor(R,C={}){this.url=R,this.isHttp=/^https?:/i.test(R),this.httpHeaders=this.isHttp&&C.httpHeaders||Object.create(null),this.withCredentials=C.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(R,C,_){const v={begin:R,end:C};for(const x in _)v[x]=_[x];return this.request(v)}requestFull(R){return this.request(R)}request(R){const C=new XMLHttpRequest,_=this.currXhrId++,v=this.pendingRequests[_]={xhr:C};C.open("GET",this.url),C.withCredentials=this.withCredentials;for(const x in this.httpHeaders){const I=this.httpHeaders[x];I!==void 0&&C.setRequestHeader(x,I)}return this.isHttp&&"begin"in R&&"end"in R?(C.setRequestHeader("Range",`bytes=${R.begin}-${R.end-1}`),v.expectedStatus=d):v.expectedStatus=u,C.responseType="arraybuffer",R.onError&&(C.onerror=function(x){R.onError(C.status)}),C.onreadystatechange=this.onStateChange.bind(this,_),C.onprogress=this.onProgress.bind(this,_),v.onHeadersReceived=R.onHeadersReceived,v.onDone=R.onDone,v.onError=R.onError,v.onProgress=R.onProgress,C.send(null),_}onProgress(R,C){const _=this.pendingRequests[R];_&&_.onProgress?.(C)}onStateChange(R,C){const _=this.pendingRequests[R];if(!_)return;const v=_.xhr;if(v.readyState>=2&&_.onHeadersReceived&&(_.onHeadersReceived(),delete _.onHeadersReceived),v.readyState!==4||!(R in this.pendingRequests))return;if(delete this.pendingRequests[R],v.status===0&&this.isHttp){_.onError?.(v.status);return}const x=v.status||u;if(!(x===u&&_.expectedStatus===d)&&x!==_.expectedStatus){_.onError?.(v.status);return}const P=p(v);if(x===d){const k=v.getResponseHeader("Content-Range"),V=/bytes (\d+)-(\d+)\/(\d+)/.exec(k);_.onDone({begin:parseInt(V[1],10),chunk:P})}else P?_.onDone({begin:0,chunk:P}):_.onError?.(v.status)}getRequestXhr(R){return this.pendingRequests[R].xhr}isPendingRequest(R){return R in this.pendingRequests}abortRequest(R){const C=this.pendingRequests[R].xhr;delete this.pendingRequests[R],C.abort()}}class h{constructor(R){this._source=R,this._manager=new y(R.url,{httpHeaders:R.httpHeaders,withCredentials:R.withCredentials}),this._rangeChunkSize=R.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(R){const C=this._rangeRequestReaders.indexOf(R);C>=0&&this._rangeRequestReaders.splice(C,1)}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new g(this._manager,this._source),this._fullRequestReader}getRangeReader(R,C){const _=new A(this._manager,R,C);return _.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(_),_}cancelAllRequests(R){this._fullRequestReader?.cancel(R);for(const C of this._rangeRequestReaders.slice(0))C.cancel(R)}}class g{constructor(R,C){this._manager=R;const _={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=C.url,this._fullRequestId=R.requestFull(_),this._headersReceivedCapability=new o.PromiseCapability,this._disableRange=C.disableRange||!1,this._contentLength=C.length,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const R=this._fullRequestId,C=this._manager.getRequestXhr(R),_=I=>C.getResponseHeader(I),{allowRangeRequests:v,suggestedLength:x}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});v&&(this._isRangeSupported=!0),this._contentLength=x||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(_),this._isRangeSupported&&this._manager.abortRequest(R),this._headersReceivedCapability.resolve()}_onDone(R){if(R&&(this._requests.length>0?this._requests.shift().resolve({value:R.chunk,done:!1}):this._cachedChunks.push(R.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(R){this._storedError=(0,r.createResponseStatusError)(R,this._url),this._headersReceivedCapability.reject(this._storedError);for(const C of this._requests)C.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(R){this.onProgress?.({loaded:R.loaded,total:R.lengthComputable?R.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const R=new o.PromiseCapability;return this._requests.push(R),R.promise}cancel(R){this._done=!0,this._headersReceivedCapability.reject(R);for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class A{constructor(R,C,_){this._manager=R;const v={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=R.url,this._requestId=R.requestRange(C,_,v),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(R){const C=R.chunk;this._requests.length>0?this._requests.shift().resolve({value:C,done:!1}):this._queuedChunk=C,this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(R){this._storedError=(0,r.createResponseStatusError)(R,this._url);for(const C of this._requests)C.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(R){this.isStreamingSupported||this.onProgress?.({loaded:R.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const C=this._queuedChunk;return this._queuedChunk=null,{value:C,done:!1}}if(this._done)return{value:void 0,done:!0};const R=new o.PromiseCapability;return this._requests.push(R),R.promise}cancel(R){this._done=!0;for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),253:((i,e,s)=>{s.d(e,{createResponseStatusError:()=>y,extractFilenameFromHeader:()=>p,validateRangeRequestCapabilities:()=>d,validateResponseStatus:()=>h});var o=s(266);function r(g){let A=!0,E=R("filename\\*","i").exec(g);if(E){E=E[1];let k=x(E);return k=unescape(k),k=I(k),k=P(k),_(k)}if(E=v(g),E){const k=P(E);return _(k)}if(E=R("filename","i").exec(g),E){E=E[1];let k=x(E);return k=P(k),_(k)}function R(k,V){return new RegExp("(?:^|;)\\s*"+k+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',V)}function C(k,V){if(k){if(!/^[\x00-\xFF]+$/.test(V))return V;try{const O=new TextDecoder(k,{fatal:!0}),q=(0,o.stringToBytes)(V);V=O.decode(q),A=!1}catch{}}return V}function _(k){return A&&/[\x80-\xff]/.test(k)&&(k=C("utf-8",k),A&&(k=C("iso-8859-1",k))),k}function v(k){const V=[];let O;const q=R("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(O=q.exec(k))!==null;){let[,W,lt,gt]=O;if(W=parseInt(W,10),W in V){if(W===0)break;continue}V[W]=[lt,gt]}const et=[];for(let W=0;W<V.length&&W in V;++W){let[lt,gt]=V[W];gt=x(gt),lt&&(gt=unescape(gt),W===0&&(gt=I(gt))),et.push(gt)}return et.join("")}function x(k){if(k.startsWith('"')){const V=k.slice(1).split('\\"');for(let O=0;O<V.length;++O){const q=V[O].indexOf('"');q!==-1&&(V[O]=V[O].slice(0,q),V.length=O+1),V[O]=V[O].replaceAll(/\\(.)/g,"$1")}k=V.join('"')}return k}function I(k){const V=k.indexOf("'");if(V===-1)return k;const O=k.slice(0,V),et=k.slice(V+1).replace(/^[^']*'/,"");return C(O,et)}function P(k){return!k.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(k)?k:k.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(V,O,q,et){if(q==="q"||q==="Q")return et=et.replaceAll("_"," "),et=et.replaceAll(/=([0-9a-fA-F]{2})/g,function(W,lt){return String.fromCharCode(parseInt(lt,16))}),C(O,et);try{et=atob(et)}catch{}return C(O,et)})}return""}var u=s(473);function d({getResponseHeader:g,isHttp:A,rangeChunkSize:E,disableRange:R}){const C={allowRangeRequests:!1,suggestedLength:void 0},_=parseInt(g("Content-Length"),10);return!Number.isInteger(_)||(C.suggestedLength=_,_<=2*E)||R||!A||g("Accept-Ranges")!=="bytes"||(g("Content-Encoding")||"identity")!=="identity"||(C.allowRangeRequests=!0),C}function p(g){const A=g("Content-Disposition");if(A){let E=r(A);if(E.includes("%"))try{E=decodeURIComponent(E)}catch{}if((0,u.isPdfFile)(E))return E}return null}function y(g,A){return g===404||g===0&&A.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+A+'".'):new o.UnexpectedResponseException(`Unexpected server response (${g}) while retrieving PDF "${A}".`,g)}function h(g){return g===200||g===206}}),498:((i,e,s)=>{s.a(i,async(o,r)=>{try{let E=function(V){const O=g.parse(V);return O.protocol==="file:"||O.host?O:/^[a-z]:[/\\]/i.test(V)?g.parse(`file:///${V}`):(O.host||(O.protocol="file:"),O)},v=function(V,O){return{protocol:V.protocol,auth:V.auth,host:V.hostname,port:V.port,path:V.path,method:"GET",headers:O}};s.d(e,{PDFNodeStream:()=>R});var u=s(266),d=s(253);let p,y,h,g;u.isNodeJS&&(p=await $i(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),y=await $i(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),h=await $i(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),g=await $i(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]));const A=/^file:\/\/\/[a-zA-Z]:\//;class R{constructor(O){this.source=O,this.url=E(O.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&O.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,u.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new P(this):new x(this),this._fullRequestReader}getRangeReader(O,q){if(q<=this._progressiveDataLength)return null;const et=this.isFsUrl?new k(this,O,q):new I(this,O,q);return this._rangeRequestReaders.push(et),et}cancelAllRequests(O){this._fullRequestReader?.cancel(O);for(const q of this._rangeRequestReaders.slice(0))q.cancel(O)}}class C{constructor(O){this._url=O.url,this._done=!1,this._storedError=null,this.onProgress=null;const q=O.source;this._contentLength=q.length,this._loaded=0,this._filename=null,this._disableRange=q.disableRange||!1,this._rangeChunkSize=q.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!q.disableStream,this._isRangeSupported=!q.disableRange,this._readableStream=null,this._readCapability=new u.PromiseCapability,this._headersCapability=new u.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const O=this._readableStream.read();return O===null?(this._readCapability=new u.PromiseCapability,this.read()):(this._loaded+=O.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(O).buffer,done:!1})}cancel(O){if(!this._readableStream){this._error(O);return}this._readableStream.destroy(O)}_error(O){this._storedError=O,this._readCapability.resolve()}_setReadableStream(O){this._readableStream=O,O.on("readable",()=>{this._readCapability.resolve()}),O.on("end",()=>{O.destroy(),this._done=!0,this._readCapability.resolve()}),O.on("error",q=>{this._error(q)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new u.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class _{constructor(O){this._url=O.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new u.PromiseCapability;const q=O.source;this._isStreamingSupported=!q.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const O=this._readableStream.read();return O===null?(this._readCapability=new u.PromiseCapability,this.read()):(this._loaded+=O.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(O).buffer,done:!1})}cancel(O){if(!this._readableStream){this._error(O);return}this._readableStream.destroy(O)}_error(O){this._storedError=O,this._readCapability.resolve()}_setReadableStream(O){this._readableStream=O,O.on("readable",()=>{this._readCapability.resolve()}),O.on("end",()=>{O.destroy(),this._done=!0,this._readCapability.resolve()}),O.on("error",q=>{this._error(q)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class x extends C{constructor(O){super(O);const q=et=>{if(et.statusCode===404){const Rt=new u.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Rt,this._headersCapability.reject(Rt);return}this._headersCapability.resolve(),this._setReadableStream(et);const W=Rt=>this._readableStream.headers[Rt.toLowerCase()],{allowRangeRequests:lt,suggestedLength:gt}=(0,d.validateRangeRequestCapabilities)({getResponseHeader:W,isHttp:O.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=lt,this._contentLength=gt||this._contentLength,this._filename=(0,d.extractFilenameFromHeader)(W)};this._request=null,this._url.protocol==="http:"?this._request=y.request(v(this._url,O.httpHeaders),q):this._request=h.request(v(this._url,O.httpHeaders),q),this._request.on("error",et=>{this._storedError=et,this._headersCapability.reject(et)}),this._request.end()}}class I extends _{constructor(O,q,et){super(O),this._httpHeaders={};for(const lt in O.httpHeaders){const gt=O.httpHeaders[lt];gt!==void 0&&(this._httpHeaders[lt]=gt)}this._httpHeaders.Range=`bytes=${q}-${et-1}`;const W=lt=>{if(lt.statusCode===404){const gt=new u.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=gt;return}this._setReadableStream(lt)};this._request=null,this._url.protocol==="http:"?this._request=y.request(v(this._url,this._httpHeaders),W):this._request=h.request(v(this._url,this._httpHeaders),W),this._request.on("error",lt=>{this._storedError=lt}),this._request.end()}}class P extends C{constructor(O){super(O);let q=decodeURIComponent(this._url.path);A.test(this._url.href)&&(q=q.replace(/^\//,"")),p.lstat(q,(et,W)=>{if(et){et.code==="ENOENT"&&(et=new u.MissingPDFException(`Missing PDF "${q}".`)),this._storedError=et,this._headersCapability.reject(et);return}this._contentLength=W.size,this._setReadableStream(p.createReadStream(q)),this._headersCapability.resolve()})}}class k extends _{constructor(O,q,et){super(O);let W=decodeURIComponent(this._url.path);A.test(this._url.href)&&(W=W.replace(/^\//,"")),this._setReadableStream(p.createReadStream(W,{start:q,end:et-1}))}}r()}catch(p){r(p)}},1)}),738:((i,e,s)=>{s.a(i,async(o,r)=>{try{s.d(e,{NodeCMapReaderFactory:()=>R,NodeCanvasFactory:()=>E,NodeFilterFactory:()=>A,NodeStandardFontDataFactory:()=>C});var u=s(822),d=s(266);let p,y,h;if(d.isNodeJS){p=await $i(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);try{y=await $i(()=>import("./__vite-browser-external-BIHI7g3E.js"),[])}catch{}try{h=await $i(()=>import("./path2d-polyfill.esm-BlsVoZcq.js"),[])}catch{}}const g=function(_){return new Promise((v,x)=>{p.readFile(_,(I,P)=>{if(I||!P){x(new Error(I));return}v(new Uint8Array(P))})})};class A extends u.BaseFilterFactory{}class E extends u.BaseCanvasFactory{_createCanvas(v,x){return y.createCanvas(v,x)}}class R extends u.BaseCMapReaderFactory{_fetchData(v,x){return g(v).then(I=>({cMapData:I,compressionType:x}))}}class C extends u.BaseStandardFontDataFactory{_fetchData(v){return g(v)}}r()}catch(p){r(p)}},1)}),890:((i,e,s)=>{s.d(e,{OptionalContentConfig:()=>p});var o=s(266),r=s(825);const u=Symbol("INTERNAL");class d{#t=!0;constructor(h,g){this.name=h,this.intent=g}get visible(){return this.#t}_setVisible(h,g){h!==u&&(0,o.unreachable)("Internal method `_setVisible` called."),this.#t=g}}class p{#t=null;#e=new Map;#n=null;#i=null;constructor(h){if(this.name=null,this.creator=null,h!==null){this.name=h.name,this.creator=h.creator,this.#i=h.order;for(const g of h.groups)this.#e.set(g.id,new d(g.name,g.intent));if(h.baseState==="OFF")for(const g of this.#e.values())g._setVisible(u,!1);for(const g of h.on)this.#e.get(g)._setVisible(u,!0);for(const g of h.off)this.#e.get(g)._setVisible(u,!1);this.#n=this.getHash()}}#s(h){const g=h.length;if(g<2)return!0;const A=h[0];for(let E=1;E<g;E++){const R=h[E];let C;if(Array.isArray(R))C=this.#s(R);else if(this.#e.has(R))C=this.#e.get(R).visible;else return(0,o.warn)(`Optional content group not found: ${R}`),!0;switch(A){case"And":if(!C)return!1;break;case"Or":if(C)return!0;break;case"Not":return!C;default:return!0}}return A==="And"}isVisible(h){if(this.#e.size===0)return!0;if(!h)return(0,o.warn)("Optional content group not defined."),!0;if(h.type==="OCG")return this.#e.has(h.id)?this.#e.get(h.id).visible:((0,o.warn)(`Optional content group not found: ${h.id}`),!0);if(h.type==="OCMD"){if(h.expression)return this.#s(h.expression);if(!h.policy||h.policy==="AnyOn"){for(const g of h.ids){if(!this.#e.has(g))return(0,o.warn)(`Optional content group not found: ${g}`),!0;if(this.#e.get(g).visible)return!0}return!1}else if(h.policy==="AllOn"){for(const g of h.ids){if(!this.#e.has(g))return(0,o.warn)(`Optional content group not found: ${g}`),!0;if(!this.#e.get(g).visible)return!1}return!0}else if(h.policy==="AnyOff"){for(const g of h.ids){if(!this.#e.has(g))return(0,o.warn)(`Optional content group not found: ${g}`),!0;if(!this.#e.get(g).visible)return!0}return!1}else if(h.policy==="AllOff"){for(const g of h.ids){if(!this.#e.has(g))return(0,o.warn)(`Optional content group not found: ${g}`),!0;if(this.#e.get(g).visible)return!1}return!0}return(0,o.warn)(`Unknown optional content policy ${h.policy}.`),!0}return(0,o.warn)(`Unknown group type ${h.type}.`),!0}setVisibility(h,g=!0){if(!this.#e.has(h)){(0,o.warn)(`Optional content group not found: ${h}`);return}this.#e.get(h)._setVisible(u,!!g),this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?(0,o.objectFromMap)(this.#e):null}getGroup(h){return this.#e.get(h)||null}getHash(){if(this.#t!==null)return this.#t;const h=new r.MurmurHash3_64;for(const[g,A]of this.#e)h.update(`${g}:${A.visible}`);return this.#t=h.hexdigest()}}}),739:((i,e,s)=>{s.d(e,{renderTextLayer:()=>_,updateTextLayer:()=>v});var o=s(266),r=s(473);const u=1e5,d=30,p=.8,y=new Map;function h(x,I){let P;if(I&&o.FeatureTest.isOffscreenCanvasSupported)P=new OffscreenCanvas(x,x).getContext("2d",{alpha:!1});else{const k=document.createElement("canvas");k.width=k.height=x,P=k.getContext("2d",{alpha:!1})}return P}function g(x,I){const P=y.get(x);if(P)return P;const k=h(d,I);k.font=`${d}px ${x}`;const V=k.measureText("");let O=V.fontBoundingBoxAscent,q=Math.abs(V.fontBoundingBoxDescent);if(O){const W=O/(O+q);return y.set(x,W),k.canvas.width=k.canvas.height=0,W}k.strokeStyle="red",k.clearRect(0,0,d,d),k.strokeText("g",0,0);let et=k.getImageData(0,0,d,d).data;q=0;for(let W=et.length-1-3;W>=0;W-=4)if(et[W]>0){q=Math.ceil(W/4/d);break}k.clearRect(0,0,d,d),k.strokeText("A",0,d),et=k.getImageData(0,0,d,d).data,O=0;for(let W=0,lt=et.length;W<lt;W+=4)if(et[W]>0){O=d-Math.floor(W/4/d);break}if(k.canvas.width=k.canvas.height=0,O){const W=O/(O+q);return y.set(x,W),W}return y.set(x,p),p}function A(x,I,P){const k=document.createElement("span"),V={angle:0,canvasWidth:0,hasText:I.str!=="",hasEOL:I.hasEOL,fontSize:0};x._textDivs.push(k);const O=o.Util.transform(x._transform,I.transform);let q=Math.atan2(O[1],O[0]);const et=P[I.fontName];et.vertical&&(q+=Math.PI/2);const W=x._fontInspectorEnabled&&et.fontSubstitution||et.fontFamily,lt=Math.hypot(O[2],O[3]),gt=lt*g(W,x._isOffscreenCanvasSupported);let Rt,_t;q===0?(Rt=O[4],_t=O[5]-gt):(Rt=O[4]+gt*Math.sin(q),_t=O[5]-gt*Math.cos(q));const Tt="calc(var(--scale-factor)*",j=k.style;x._container===x._rootContainer?(j.left=`${(100*Rt/x._pageWidth).toFixed(2)}%`,j.top=`${(100*_t/x._pageHeight).toFixed(2)}%`):(j.left=`${Tt}${Rt.toFixed(2)}px)`,j.top=`${Tt}${_t.toFixed(2)}px)`),j.fontSize=`${Tt}${lt.toFixed(2)}px)`,j.fontFamily=W,V.fontSize=lt,k.setAttribute("role","presentation"),k.textContent=I.str,k.dir=I.dir,x._fontInspectorEnabled&&(k.dataset.fontName=et.fontSubstitutionLoadedName||I.fontName),q!==0&&(V.angle=q*(180/Math.PI));let X=!1;if(I.str.length>1)X=!0;else if(I.str!==" "&&I.transform[0]!==I.transform[3]){const dt=Math.abs(I.transform[0]),vt=Math.abs(I.transform[3]);dt!==vt&&Math.max(dt,vt)/Math.min(dt,vt)>1.5&&(X=!0)}X&&(V.canvasWidth=et.vertical?I.height:I.width),x._textDivProperties.set(k,V),x._isReadableStream&&x._layoutText(k)}function E(x){const{div:I,scale:P,properties:k,ctx:V,prevFontSize:O,prevFontFamily:q}=x,{style:et}=I;let W="";if(k.canvasWidth!==0&&k.hasText){const{fontFamily:lt}=et,{canvasWidth:gt,fontSize:Rt}=k;(O!==Rt||q!==lt)&&(V.font=`${Rt*P}px ${lt}`,x.prevFontSize=Rt,x.prevFontFamily=lt);const{width:_t}=V.measureText(I.textContent);_t>0&&(W=`scaleX(${gt*P/_t})`)}k.angle!==0&&(W=`rotate(${k.angle}deg) ${W}`),W.length>0&&(et.transform=W)}function R(x){if(x._canceled)return;const I=x._textDivs,P=x._capability;if(I.length>u){P.resolve();return}if(!x._isReadableStream)for(const V of I)x._layoutText(V);P.resolve()}class C{constructor({textContentSource:I,container:P,viewport:k,textDivs:V,textDivProperties:O,textContentItemsStr:q,isOffscreenCanvasSupported:et}){this._textContentSource=I,this._isReadableStream=I instanceof ReadableStream,this._container=this._rootContainer=P,this._textDivs=V||[],this._textContentItemsStr=q||[],this._isOffscreenCanvasSupported=et,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=O||new WeakMap,this._canceled=!1,this._capability=new o.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:k.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:h(0,et)};const{pageWidth:W,pageHeight:lt,pageX:gt,pageY:Rt}=k.rawDims;this._transform=[1,0,0,-1,-gt,Rt+lt],this._pageWidth=W,this._pageHeight=lt,(0,r.setLayerDimensions)(P,k),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new o.AbortException("TextLayer task cancelled."))}_processItems(I,P){for(const k of I){if(k.str===void 0){if(k.type==="beginMarkedContentProps"||k.type==="beginMarkedContent"){const V=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),k.id!==null&&this._container.setAttribute("id",`${k.id}`),V.append(this._container)}else k.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(k.str),A(this,k,P)}}_layoutText(I){const P=this._layoutTextParams.properties=this._textDivProperties.get(I);if(this._layoutTextParams.div=I,E(this._layoutTextParams),P.hasText&&this._container.append(I),P.hasEOL){const k=document.createElement("br");k.setAttribute("role","presentation"),this._container.append(k)}}_render(){const I=new o.PromiseCapability;let P=Object.create(null);if(this._isReadableStream){const k=()=>{this._reader.read().then(({value:V,done:O})=>{if(O){I.resolve();return}Object.assign(P,V.styles),this._processItems(V.items,P),k()},I.reject)};this._reader=this._textContentSource.getReader(),k()}else if(this._textContentSource){const{items:k,styles:V}=this._textContentSource;this._processItems(k,V),I.resolve()}else throw new Error('No "textContentSource" parameter specified.');I.promise.then(()=>{P=null,R(this)},this._capability.reject)}}function _(x){const I=new C(x);return I._render(),I}function v({container:x,viewport:I,textDivs:P,textDivProperties:k,isOffscreenCanvasSupported:V,mustRotate:O=!0,mustRescale:q=!0}){if(O&&(0,r.setLayerDimensions)(x,{rotation:I.rotation}),q){const et=h(0,V),lt={prevFontSize:null,prevFontFamily:null,div:null,scale:I.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:et};for(const gt of P)lt.properties=k.get(gt),lt.div=gt,E(lt)}}}),92:((i,e,s)=>{s.d(e,{PDFDataTransportStream:()=>u});var o=s(266),r=s(473);class u{constructor({length:h,initialData:g,progressiveDone:A=!1,contentDispositionFilename:E=null,disableRange:R=!1,disableStream:C=!1},_){if((0,o.assert)(_,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=A,this._contentDispositionFilename=E,g?.length>0){const v=g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength?g.buffer:new Uint8Array(g).buffer;this._queuedChunks.push(v)}this._pdfDataRangeTransport=_,this._isStreamingSupported=!C,this._isRangeSupported=!R,this._contentLength=h,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((v,x)=>{this._onReceiveData({begin:v,chunk:x})}),this._pdfDataRangeTransport.addProgressListener((v,x)=>{this._onProgress({loaded:v,total:x})}),this._pdfDataRangeTransport.addProgressiveReadListener(v=>{this._onReceiveData({chunk:v})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:h,chunk:g}){const A=g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength?g.buffer:new Uint8Array(g).buffer;if(h===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(A):this._queuedChunks.push(A);else{const E=this._rangeReaders.some(function(R){return R._begin!==h?!1:(R._enqueue(A),!0)});(0,o.assert)(E,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(h){h.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:h.loaded}):this._fullRequestReader?.onProgress?.({loaded:h.loaded,total:h.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(h){const g=this._rangeReaders.indexOf(h);g>=0&&this._rangeReaders.splice(g,1)}getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const h=this._queuedChunks;return this._queuedChunks=null,new d(this,h,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(h,g){if(g<=this._progressiveDataLength)return null;const A=new p(this,h,g);return this._pdfDataRangeTransport.requestDataRange(h,g),this._rangeReaders.push(A),A}cancelAllRequests(h){this._fullRequestReader?.cancel(h);for(const g of this._rangeReaders.slice(0))g.cancel(h);this._pdfDataRangeTransport.abort()}}class d{constructor(h,g,A=!1,E=null){this._stream=h,this._done=A||!1,this._filename=(0,r.isPdfFile)(E)?E:null,this._queuedChunks=g||[],this._loaded=0;for(const R of this._queuedChunks)this._loaded+=R.byteLength;this._requests=[],this._headersReady=Promise.resolve(),h._fullRequestReader=this,this.onProgress=null}_enqueue(h){this._done||(this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunks.push(h),this._loaded+=h.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const h=new o.PromiseCapability;return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class p{constructor(h,g,A){this._stream=h,this._begin=g,this._end=A,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(h){if(!this._done){if(this._requests.length===0)this._queuedChunk=h;else{this._requests.shift().resolve({value:h,done:!1});for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const h=new o.PromiseCapability;return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),368:((i,e,s)=>{s.d(e,{GlobalWorkerOptions:()=>o});const o=Object.create(null);o.workerPort=null,o.workerSrc=""}),160:((i,e,s)=>{s.d(e,{XfaLayer:()=>r});var o=s(521);class r{static setupStorage(d,p,y,h,g){const A=h.getValue(p,{value:null});switch(y.name){case"textarea":if(A.value!==null&&(d.textContent=A.value),g==="print")break;d.addEventListener("input",E=>{h.setValue(p,{value:E.target.value})});break;case"input":if(y.attributes.type==="radio"||y.attributes.type==="checkbox"){if(A.value===y.attributes.xfaOn?d.setAttribute("checked",!0):A.value===y.attributes.xfaOff&&d.removeAttribute("checked"),g==="print")break;d.addEventListener("change",E=>{h.setValue(p,{value:E.target.checked?E.target.getAttribute("xfaOn"):E.target.getAttribute("xfaOff")})})}else{if(A.value!==null&&d.setAttribute("value",A.value),g==="print")break;d.addEventListener("input",E=>{h.setValue(p,{value:E.target.value})})}break;case"select":if(A.value!==null){d.setAttribute("value",A.value);for(const E of y.children)E.attributes.value===A.value?E.attributes.selected=!0:E.attributes.hasOwnProperty("selected")&&delete E.attributes.selected}d.addEventListener("input",E=>{const R=E.target.options,C=R.selectedIndex===-1?"":R[R.selectedIndex].value;h.setValue(p,{value:C})});break}}static setAttributes({html:d,element:p,storage:y=null,intent:h,linkService:g}){const{attributes:A}=p,E=d instanceof HTMLAnchorElement;A.type==="radio"&&(A.name=`${A.name}-${h}`);for(const[R,C]of Object.entries(A))if(C!=null)switch(R){case"class":C.length&&d.setAttribute(R,C.join(" "));break;case"dataId":break;case"id":d.setAttribute("data-element-id",C);break;case"style":Object.assign(d.style,C);break;case"textContent":d.textContent=C;break;default:(!E||R!=="href"&&R!=="newWindow")&&d.setAttribute(R,C)}E&&g.addLinkAttributes(d,A.href,A.newWindow),y&&A.dataId&&this.setupStorage(d,A.dataId,p,y)}static render(d){const p=d.annotationStorage,y=d.linkService,h=d.xfaHtml,g=d.intent||"display",A=document.createElement(h.name);h.attributes&&this.setAttributes({html:A,element:h,intent:g,linkService:y});const E=g!=="richText",R=d.div;if(R.append(A),d.viewport){const v=`matrix(${d.viewport.transform.join(",")})`;R.style.transform=v}E&&R.setAttribute("class","xfaLayer xfaFont");const C=[];if(h.children.length===0){if(h.value){const v=document.createTextNode(h.value);A.append(v),E&&o.XfaText.shouldBuildText(h.name)&&C.push(v)}return{textDivs:C}}const _=[[h,-1,A]];for(;_.length>0;){const[v,x,I]=_.at(-1);if(x+1===v.children.length){_.pop();continue}const P=v.children[++_.at(-1)[1]];if(P===null)continue;const{name:k}=P;if(k==="#text"){const O=document.createTextNode(P.value);C.push(O),I.append(O);continue}const V=P?.attributes?.xmlns?document.createElementNS(P.attributes.xmlns,k):document.createElement(k);if(I.append(V),P.attributes&&this.setAttributes({html:V,element:P,storage:p,intent:g,linkService:y}),P.children?.length>0)_.push([P,-1,V]);else if(P.value){const O=document.createTextNode(P.value);E&&o.XfaText.shouldBuildText(k)&&C.push(O),V.append(O)}}for(const v of R.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:C}}static update(d){const p=`matrix(${d.viewport.transform.join(",")})`;d.div.style.transform=p,d.div.hidden=!1}}}),521:((i,e,s)=>{s.d(e,{XfaText:()=>o});class o{static textContent(u){const d=[],p={items:d,styles:Object.create(null)};function y(h){if(!h)return;let g=null;const A=h.name;if(A==="#text")g=h.value;else if(o.shouldBuildText(A))h?.attributes?.textContent?g=h.attributes.textContent:h.value&&(g=h.value);else return;if(g!==null&&d.push({str:g}),!!h.children)for(const E of h.children)y(E)}return y(u),p}static shouldBuildText(u){return!(u==="textarea"||u==="input"||u==="option"||u==="select")}}}),907:((i,e,s)=>{s.a(i,async(o,r)=>{try{s.d(e,{AbortException:()=>u.AbortException,AnnotationEditorLayer:()=>h.AnnotationEditorLayer,AnnotationEditorParamsType:()=>u.AnnotationEditorParamsType,AnnotationEditorType:()=>u.AnnotationEditorType,AnnotationEditorUIManager:()=>g.AnnotationEditorUIManager,AnnotationLayer:()=>A.AnnotationLayer,AnnotationMode:()=>u.AnnotationMode,CMapCompressionType:()=>u.CMapCompressionType,ColorPicker:()=>E.ColorPicker,DOMSVGFactory:()=>p.DOMSVGFactory,DrawLayer:()=>R.DrawLayer,FeatureTest:()=>u.FeatureTest,GlobalWorkerOptions:()=>C.GlobalWorkerOptions,ImageKind:()=>u.ImageKind,InvalidPDFException:()=>u.InvalidPDFException,MissingPDFException:()=>u.MissingPDFException,OPS:()=>u.OPS,Outliner:()=>_.Outliner,PDFDataRangeTransport:()=>d.PDFDataRangeTransport,PDFDateString:()=>p.PDFDateString,PDFWorker:()=>d.PDFWorker,PasswordResponses:()=>u.PasswordResponses,PermissionFlag:()=>u.PermissionFlag,PixelsPerInch:()=>p.PixelsPerInch,PromiseCapability:()=>u.PromiseCapability,RenderingCancelledException:()=>p.RenderingCancelledException,UnexpectedResponseException:()=>u.UnexpectedResponseException,Util:()=>u.Util,VerbosityLevel:()=>u.VerbosityLevel,XfaLayer:()=>v.XfaLayer,build:()=>d.build,createValidAbsoluteUrl:()=>u.createValidAbsoluteUrl,fetchData:()=>p.fetchData,getDocument:()=>d.getDocument,getFilenameFromUrl:()=>p.getFilenameFromUrl,getPdfFilenameFromUrl:()=>p.getPdfFilenameFromUrl,getXfaPageViewport:()=>p.getXfaPageViewport,isDataScheme:()=>p.isDataScheme,isPdfFile:()=>p.isPdfFile,noContextMenu:()=>p.noContextMenu,normalizeUnicode:()=>u.normalizeUnicode,renderTextLayer:()=>y.renderTextLayer,setLayerDimensions:()=>p.setLayerDimensions,shadow:()=>u.shadow,updateTextLayer:()=>y.updateTextLayer,version:()=>d.version});var u=s(266),d=s(406),p=s(473),y=s(739),h=s(629),g=s(812),A=s(640),E=s(97),R=s(423),C=s(368),_=s(405),v=s(160),x=o([d]);d=(x.then?(await x)():x)[0];const I="4.0.379",P="9e14d04fd";r()}catch(I){r(I)}})}),694:((i,e,s)=>{s.d(e,{MessageHandler:()=>p});var o=s(266);const r={DATA:1,ERROR:2},u={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function d(y){switch(y instanceof Error||typeof y=="object"&&y!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),y.name){case"AbortException":return new o.AbortException(y.message);case"MissingPDFException":return new o.MissingPDFException(y.message);case"PasswordException":return new o.PasswordException(y.message,y.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(y.message,y.status);case"UnknownErrorException":return new o.UnknownErrorException(y.message,y.details);default:return new o.UnknownErrorException(y.message,y.toString())}}class p{constructor(h,g,A){this.sourceName=h,this.targetName=g,this.comObj=A,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=E=>{const R=E.data;if(R.targetName!==this.sourceName)return;if(R.stream){this.#e(R);return}if(R.callback){const _=R.callbackId,v=this.callbackCapabilities[_];if(!v)throw new Error(`Cannot resolve callback ${_}`);if(delete this.callbackCapabilities[_],R.callback===r.DATA)v.resolve(R.data);else if(R.callback===r.ERROR)v.reject(d(R.reason));else throw new Error("Unexpected callback case");return}const C=this.actionHandler[R.action];if(!C)throw new Error(`Unknown action from worker: ${R.action}`);if(R.callbackId){const _=this.sourceName,v=R.sourceName;new Promise(function(x){x(C(R.data))}).then(function(x){A.postMessage({sourceName:_,targetName:v,callback:r.DATA,callbackId:R.callbackId,data:x})},function(x){A.postMessage({sourceName:_,targetName:v,callback:r.ERROR,callbackId:R.callbackId,reason:d(x)})});return}if(R.streamId){this.#t(R);return}C(R.data)},A.addEventListener("message",this._onComObjOnMessage)}on(h,g){const A=this.actionHandler;if(A[h])throw new Error(`There is already an actionName called "${h}"`);A[h]=g}send(h,g,A){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:h,data:g},A)}sendWithPromise(h,g,A){const E=this.callbackId++,R=new o.PromiseCapability;this.callbackCapabilities[E]=R;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:h,callbackId:E,data:g},A)}catch(C){R.reject(C)}return R.promise}sendWithStream(h,g,A,E){const R=this.streamId++,C=this.sourceName,_=this.targetName,v=this.comObj;return new ReadableStream({start:x=>{const I=new o.PromiseCapability;return this.streamControllers[R]={controller:x,startCall:I,pullCall:null,cancelCall:null,isClosed:!1},v.postMessage({sourceName:C,targetName:_,action:h,streamId:R,data:g,desiredSize:x.desiredSize},E),I.promise},pull:x=>{const I=new o.PromiseCapability;return this.streamControllers[R].pullCall=I,v.postMessage({sourceName:C,targetName:_,stream:u.PULL,streamId:R,desiredSize:x.desiredSize}),I.promise},cancel:x=>{(0,o.assert)(x instanceof Error,"cancel must have a valid reason");const I=new o.PromiseCapability;return this.streamControllers[R].cancelCall=I,this.streamControllers[R].isClosed=!0,v.postMessage({sourceName:C,targetName:_,stream:u.CANCEL,streamId:R,reason:d(x)}),I.promise}},A)}#t(h){const g=h.streamId,A=this.sourceName,E=h.sourceName,R=this.comObj,C=this,_=this.actionHandler[h.action],v={enqueue(x,I=1,P){if(this.isCancelled)return;const k=this.desiredSize;this.desiredSize-=I,k>0&&this.desiredSize<=0&&(this.sinkCapability=new o.PromiseCapability,this.ready=this.sinkCapability.promise),R.postMessage({sourceName:A,targetName:E,stream:u.ENQUEUE,streamId:g,chunk:x},P)},close(){this.isCancelled||(this.isCancelled=!0,R.postMessage({sourceName:A,targetName:E,stream:u.CLOSE,streamId:g}),delete C.streamSinks[g])},error(x){(0,o.assert)(x instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,R.postMessage({sourceName:A,targetName:E,stream:u.ERROR,streamId:g,reason:d(x)}))},sinkCapability:new o.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:h.desiredSize,ready:null};v.sinkCapability.resolve(),v.ready=v.sinkCapability.promise,this.streamSinks[g]=v,new Promise(function(x){x(_(h.data,v))}).then(function(){R.postMessage({sourceName:A,targetName:E,stream:u.START_COMPLETE,streamId:g,success:!0})},function(x){R.postMessage({sourceName:A,targetName:E,stream:u.START_COMPLETE,streamId:g,reason:d(x)})})}#e(h){const g=h.streamId,A=this.sourceName,E=h.sourceName,R=this.comObj,C=this.streamControllers[g],_=this.streamSinks[g];switch(h.stream){case u.START_COMPLETE:h.success?C.startCall.resolve():C.startCall.reject(d(h.reason));break;case u.PULL_COMPLETE:h.success?C.pullCall.resolve():C.pullCall.reject(d(h.reason));break;case u.PULL:if(!_){R.postMessage({sourceName:A,targetName:E,stream:u.PULL_COMPLETE,streamId:g,success:!0});break}_.desiredSize<=0&&h.desiredSize>0&&_.sinkCapability.resolve(),_.desiredSize=h.desiredSize,new Promise(function(v){v(_.onPull?.())}).then(function(){R.postMessage({sourceName:A,targetName:E,stream:u.PULL_COMPLETE,streamId:g,success:!0})},function(v){R.postMessage({sourceName:A,targetName:E,stream:u.PULL_COMPLETE,streamId:g,reason:d(v)})});break;case u.ENQUEUE:if((0,o.assert)(C,"enqueue should have stream controller"),C.isClosed)break;C.controller.enqueue(h.chunk);break;case u.CLOSE:if((0,o.assert)(C,"close should have stream controller"),C.isClosed)break;C.isClosed=!0,C.controller.close(),this.#n(C,g);break;case u.ERROR:(0,o.assert)(C,"error should have stream controller"),C.controller.error(d(h.reason)),this.#n(C,g);break;case u.CANCEL_COMPLETE:h.success?C.cancelCall.resolve():C.cancelCall.reject(d(h.reason)),this.#n(C,g);break;case u.CANCEL:if(!_)break;new Promise(function(v){v(_.onCancel?.(d(h.reason)))}).then(function(){R.postMessage({sourceName:A,targetName:E,stream:u.CANCEL_COMPLETE,streamId:g,success:!0})},function(v){R.postMessage({sourceName:A,targetName:E,stream:u.CANCEL_COMPLETE,streamId:g,reason:d(v)})}),_.sinkCapability.reject(d(h.reason)),_.isCancelled=!0,delete this.streamSinks[g];break;default:throw new Error("Unexpected stream case")}}async#n(h,g){await Promise.allSettled([h.startCall?.promise,h.pullCall?.promise,h.cancelCall?.promise]),delete this.streamControllers[g]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}}),825:((i,e,s)=>{s.d(e,{MurmurHash3_64:()=>p});var o=s(266);const r=3285377520,u=4294901760,d=65535;class p{constructor(h){this.h1=h?h&4294967295:r,this.h2=h?h&4294967295:r}update(h){let g,A;if(typeof h=="string"){g=new Uint8Array(h.length*2),A=0;for(let q=0,et=h.length;q<et;q++){const W=h.charCodeAt(q);W<=255?g[A++]=W:(g[A++]=W>>>8,g[A++]=W&255)}}else if((0,o.isArrayBuffer)(h))g=h.slice(),A=g.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const E=A>>2,R=A-E*4,C=new Uint32Array(g.buffer,0,E);let _=0,v=0,x=this.h1,I=this.h2;const P=3432918353,k=461845907,V=P&d,O=k&d;for(let q=0;q<E;q++)q&1?(_=C[q],_=_*P&u|_*V&d,_=_<<15|_>>>17,_=_*k&u|_*O&d,x^=_,x=x<<13|x>>>19,x=x*5+3864292196):(v=C[q],v=v*P&u|v*V&d,v=v<<15|v>>>17,v=v*k&u|v*O&d,I^=v,I=I<<13|I>>>19,I=I*5+3864292196);switch(_=0,R){case 3:_^=g[E*4+2]<<16;case 2:_^=g[E*4+1]<<8;case 1:_^=g[E*4],_=_*P&u|_*V&d,_=_<<15|_>>>17,_=_*k&u|_*O&d,E&1?x^=_:I^=_}this.h1=x,this.h2=I}hexdigest(){let h=this.h1,g=this.h2;return h^=g>>>1,h=h*3981806797&u|h*36045&d,g=g*4283543511&u|((g<<16|h>>>16)*2950163797&u)>>>16,h^=g>>>1,h=h*444984403&u|h*60499&d,g=g*3301882366&u|((g<<16|h>>>16)*3120437893&u)>>>16,h^=g>>>1,(h>>>0).toString(16).padStart(8,"0")+(g>>>0).toString(16).padStart(8,"0")}}}),266:((i,e,s)=>{s.d(e,{AbortException:()=>at,AnnotationBorderStyleType:()=>x,AnnotationEditorParamsType:()=>E,AnnotationEditorPrefix:()=>g,AnnotationEditorType:()=>A,AnnotationMode:()=>h,AnnotationPrefix:()=>rt,AnnotationType:()=>v,BaseException:()=>X,CMapCompressionType:()=>P,FONT_IDENTITY_MATRIX:()=>u,FeatureTest:()=>T,FormatError:()=>K,IDENTITY_MATRIX:()=>r,ImageKind:()=>_,InvalidPDFException:()=>ot,LINE_FACTOR:()=>p,MAX_IMAGE_SIZE_TO_CACHE:()=>d,MissingPDFException:()=>ct,OPS:()=>k,PasswordException:()=>dt,PasswordResponses:()=>V,PermissionFlag:()=>R,PromiseCapability:()=>H,RenderingIntentFlag:()=>y,TextRenderingMode:()=>C,UnexpectedResponseException:()=>z,UnknownErrorException:()=>vt,Util:()=>M,VerbosityLevel:()=>I,assert:()=>Rt,bytesToString:()=>ft,createValidAbsoluteUrl:()=>Tt,getUuid:()=>nt,getVerbosityLevel:()=>et,info:()=>W,isArrayBuffer:()=>U,isNodeJS:()=>o,normalizeUnicode:()=>Q,objectFromMap:()=>F,setVerbosityLevel:()=>q,shadow:()=>j,string32:()=>yt,stringToBytes:()=>Ct,unreachable:()=>gt,warn:()=>lt});const o=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),r=[1,0,0,1,0,0],u=[.001,0,0,.001,0,0],d=1e7,p=1.35,y={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},h={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},g="pdfjs_internal_editor_",A={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},E={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32},R={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},C={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},_={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},v={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},x={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},I={ERRORS:0,WARNINGS:1,INFOS:5},P={NONE:0,BINARY:1},k={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},V={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let O=I.WARNINGS;function q(it){Number.isInteger(it)&&(O=it)}function et(){return O}function W(it){O>=I.INFOS&&console.log(`Info: ${it}`)}function lt(it){O>=I.WARNINGS&&console.log(`Warning: ${it}`)}function gt(it){throw new Error(it)}function Rt(it,J){it||gt(J)}function _t(it){switch(it?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Tt(it,J=null,Z=null){if(!it)return null;try{if(Z&&typeof it=="string"&&(Z.addDefaultProtocol&&it.startsWith("www.")&&it.match(/\./g)?.length>=2&&(it=`http://${it}`),Z.tryConvertEncoding))try{it=L(it)}catch{}const Et=J?new URL(it,J):new URL(it);if(_t(Et))return Et}catch{}return null}function j(it,J,Z,Et=!1){return Object.defineProperty(it,J,{value:Z,enumerable:!Et,configurable:!0,writable:!1}),Z}const X=(function(){function J(Z,Et){this.constructor===J&&gt("Cannot initialize BaseException."),this.message=Z,this.name=Et}return J.prototype=new Error,J.constructor=J,J})();class dt extends X{constructor(J,Z){super(J,"PasswordException"),this.code=Z}}class vt extends X{constructor(J,Z){super(J,"UnknownErrorException"),this.details=Z}}class ot extends X{constructor(J){super(J,"InvalidPDFException")}}class ct extends X{constructor(J){super(J,"MissingPDFException")}}class z extends X{constructor(J,Z){super(J,"UnexpectedResponseException"),this.status=Z}}class K extends X{constructor(J){super(J,"FormatError")}}class at extends X{constructor(J){super(J,"AbortException")}}function ft(it){(typeof it!="object"||it?.length===void 0)&&gt("Invalid argument for bytesToString");const J=it.length,Z=8192;if(J<Z)return String.fromCharCode.apply(null,it);const Et=[];for(let St=0;St<J;St+=Z){const Mt=Math.min(St+Z,J),Dt=it.subarray(St,Mt);Et.push(String.fromCharCode.apply(null,Dt))}return Et.join("")}function Ct(it){typeof it!="string"&&gt("Invalid argument for stringToBytes");const J=it.length,Z=new Uint8Array(J);for(let Et=0;Et<J;++Et)Z[Et]=it.charCodeAt(Et)&255;return Z}function yt(it){return String.fromCharCode(it>>24&255,it>>16&255,it>>8&255,it&255)}function F(it){const J=Object.create(null);for(const[Z,Et]of it)J[Z]=Et;return J}function N(){const it=new Uint8Array(4);return it[0]=1,new Uint32Array(it.buffer,0,1)[0]===1}function b(){try{return new Function(""),!0}catch{return!1}}class T{static get isLittleEndian(){return j(this,"isLittleEndian",N())}static get isEvalSupported(){return j(this,"isEvalSupported",b())}static get isOffscreenCanvasSupported(){return j(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?j(this,"platform",{isMac:navigator.platform.includes("Mac")}):j(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){return j(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const w=[...Array(256).keys()].map(it=>it.toString(16).padStart(2,"0"));class M{static makeHexColor(J,Z,Et){return`#${w[J]}${w[Z]}${w[Et]}`}static scaleMinMax(J,Z){let Et;J[0]?(J[0]<0&&(Et=Z[0],Z[0]=Z[1],Z[1]=Et),Z[0]*=J[0],Z[1]*=J[0],J[3]<0&&(Et=Z[2],Z[2]=Z[3],Z[3]=Et),Z[2]*=J[3],Z[3]*=J[3]):(Et=Z[0],Z[0]=Z[2],Z[2]=Et,Et=Z[1],Z[1]=Z[3],Z[3]=Et,J[1]<0&&(Et=Z[2],Z[2]=Z[3],Z[3]=Et),Z[2]*=J[1],Z[3]*=J[1],J[2]<0&&(Et=Z[0],Z[0]=Z[1],Z[1]=Et),Z[0]*=J[2],Z[1]*=J[2]),Z[0]+=J[4],Z[1]+=J[4],Z[2]+=J[5],Z[3]+=J[5]}static transform(J,Z){return[J[0]*Z[0]+J[2]*Z[1],J[1]*Z[0]+J[3]*Z[1],J[0]*Z[2]+J[2]*Z[3],J[1]*Z[2]+J[3]*Z[3],J[0]*Z[4]+J[2]*Z[5]+J[4],J[1]*Z[4]+J[3]*Z[5]+J[5]]}static applyTransform(J,Z){const Et=J[0]*Z[0]+J[1]*Z[2]+Z[4],St=J[0]*Z[1]+J[1]*Z[3]+Z[5];return[Et,St]}static applyInverseTransform(J,Z){const Et=Z[0]*Z[3]-Z[1]*Z[2],St=(J[0]*Z[3]-J[1]*Z[2]+Z[2]*Z[5]-Z[4]*Z[3])/Et,Mt=(-J[0]*Z[1]+J[1]*Z[0]+Z[4]*Z[1]-Z[5]*Z[0])/Et;return[St,Mt]}static getAxialAlignedBoundingBox(J,Z){const Et=this.applyTransform(J,Z),St=this.applyTransform(J.slice(2,4),Z),Mt=this.applyTransform([J[0],J[3]],Z),Dt=this.applyTransform([J[2],J[1]],Z);return[Math.min(Et[0],St[0],Mt[0],Dt[0]),Math.min(Et[1],St[1],Mt[1],Dt[1]),Math.max(Et[0],St[0],Mt[0],Dt[0]),Math.max(Et[1],St[1],Mt[1],Dt[1])]}static inverseTransform(J){const Z=J[0]*J[3]-J[1]*J[2];return[J[3]/Z,-J[1]/Z,-J[2]/Z,J[0]/Z,(J[2]*J[5]-J[4]*J[3])/Z,(J[4]*J[1]-J[5]*J[0])/Z]}static singularValueDecompose2dScale(J){const Z=[J[0],J[2],J[1],J[3]],Et=J[0]*Z[0]+J[1]*Z[2],St=J[0]*Z[1]+J[1]*Z[3],Mt=J[2]*Z[0]+J[3]*Z[2],Dt=J[2]*Z[1]+J[3]*Z[3],Nt=(Et+Dt)/2,Ft=Math.sqrt((Et+Dt)**2-4*(Et*Dt-Mt*St))/2,Pt=Nt+Ft||1,Gt=Nt-Ft||1;return[Math.sqrt(Pt),Math.sqrt(Gt)]}static normalizeRect(J){const Z=J.slice(0);return J[0]>J[2]&&(Z[0]=J[2],Z[2]=J[0]),J[1]>J[3]&&(Z[1]=J[3],Z[3]=J[1]),Z}static intersect(J,Z){const Et=Math.max(Math.min(J[0],J[2]),Math.min(Z[0],Z[2])),St=Math.min(Math.max(J[0],J[2]),Math.max(Z[0],Z[2]));if(Et>St)return null;const Mt=Math.max(Math.min(J[1],J[3]),Math.min(Z[1],Z[3])),Dt=Math.min(Math.max(J[1],J[3]),Math.max(Z[1],Z[3]));return Mt>Dt?null:[Et,Mt,St,Dt]}static bezierBoundingBox(J,Z,Et,St,Mt,Dt,Nt,Ft){const Pt=[],Gt=[[],[]];let Jt,Xt,$t,Ut,ae,Se,ke,ve;for(let ze=0;ze<2;++ze){if(ze===0?(Xt=6*J-12*Et+6*Mt,Jt=-3*J+9*Et-9*Mt+3*Nt,$t=3*Et-3*J):(Xt=6*Z-12*St+6*Dt,Jt=-3*Z+9*St-9*Dt+3*Ft,$t=3*St-3*Z),Math.abs(Jt)<1e-12){if(Math.abs(Xt)<1e-12)continue;Ut=-$t/Xt,0<Ut&&Ut<1&&Pt.push(Ut);continue}ke=Xt*Xt-4*$t*Jt,ve=Math.sqrt(ke),!(ke<0)&&(ae=(-Xt+ve)/(2*Jt),0<ae&&ae<1&&Pt.push(ae),Se=(-Xt-ve)/(2*Jt),0<Se&&Se<1&&Pt.push(Se))}let pe=Pt.length,fe;const Ie=pe;for(;pe--;)Ut=Pt[pe],fe=1-Ut,Gt[0][pe]=fe*fe*fe*J+3*fe*fe*Ut*Et+3*fe*Ut*Ut*Mt+Ut*Ut*Ut*Nt,Gt[1][pe]=fe*fe*fe*Z+3*fe*fe*Ut*St+3*fe*Ut*Ut*Dt+Ut*Ut*Ut*Ft;return Gt[0][Ie]=J,Gt[1][Ie]=Z,Gt[0][Ie+1]=Nt,Gt[1][Ie+1]=Ft,Gt[0].length=Gt[1].length=Ie+2,[Math.min(...Gt[0]),Math.min(...Gt[1]),Math.max(...Gt[0]),Math.max(...Gt[1])]}}function L(it){return decodeURIComponent(escape(it))}function U(it){return typeof it=="object"&&it?.byteLength!==void 0}class H{#t=!1;constructor(){this.promise=new Promise((J,Z)=>{this.resolve=Et=>{this.#t=!0,J(Et)},this.reject=Et=>{this.#t=!0,Z(Et)}})}get settled(){return this.#t}}let Y=null,$=null;function Q(it){return Y||(Y=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,$=new Map([["","t"]])),it.replaceAll(Y,(J,Z,Et)=>Z?Z.normalize("NFKC"):$.get(Et))}function nt(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const it=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(it);else for(let J=0;J<32;J++)it[J]=Math.floor(Math.random()*255);return ft(it)}const rt="pdfjs_internal_id_"})},Xp={};function Qi(i){var e=Xp[i];if(e!==void 0)return e.exports;var s=Xp[i]={exports:{}};return TA[i](s,s.exports,Qi),s.exports}(()=>{var i=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",e=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",s=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",o=u=>{u&&u.d<1&&(u.d=1,u.forEach(d=>d.r--),u.forEach(d=>d.r--?d.r++:d()))},r=u=>u.map(d=>{if(d!==null&&typeof d=="object"){if(d[i])return d;if(d.then){var p=[];p.d=0,d.then(g=>{y[e]=g,o(p)},g=>{y[s]=g,o(p)});var y={};return y[i]=g=>g(p),y}}var h={};return h[i]=g=>{},h[e]=d,h});Qi.a=(u,d,p)=>{var y;p&&((y=[]).d=-1);var h=new Set,g=u.exports,A,E,R,C=new Promise((_,v)=>{R=v,E=_});C[e]=g,C[i]=_=>(y&&_(y),h.forEach(_),C.catch(v=>{})),u.exports=C,d(_=>{A=r(_);var v,x=()=>A.map(P=>{if(P[s])throw P[s];return P[e]}),I=new Promise(P=>{v=()=>P(x),v.r=0;var k=V=>V!==y&&!h.has(V)&&(h.add(V),V&&!V.d&&(v.r++,V.push(v)));A.map(V=>V[i](k))});return v.r?I:x()},_=>(_?R(C[s]=_):E(g),o(y))),y&&y.d<0&&(y.d=0)}})();Qi.d=(i,e)=>{for(var s in e)Qi.o(e,s)&&!Qi.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:e[s]})};Qi.o=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var Vt=Qi(907);Vt=globalThis.pdfjsLib=await(globalThis.pdfjsLibPromise=Vt);Vt.AbortException;Vt.AnnotationEditorLayer;Vt.AnnotationEditorParamsType;Vt.AnnotationEditorType;Vt.AnnotationEditorUIManager;Vt.AnnotationLayer;Vt.AnnotationMode;Vt.CMapCompressionType;Vt.ColorPicker;Vt.DOMSVGFactory;Vt.DrawLayer;Vt.FeatureTest;var EA=Vt.GlobalWorkerOptions;Vt.ImageKind;Vt.InvalidPDFException;Vt.MissingPDFException;Vt.OPS;Vt.Outliner;Vt.PDFDataRangeTransport;Vt.PDFDateString;Vt.PDFWorker;Vt.PasswordResponses;Vt.PermissionFlag;Vt.PixelsPerInch;Vt.PromiseCapability;Vt.RenderingCancelledException;Vt.UnexpectedResponseException;Vt.Util;Vt.VerbosityLevel;Vt.XfaLayer;Vt.build;Vt.createValidAbsoluteUrl;Vt.fetchData;var bA=Vt.getDocument;Vt.getFilenameFromUrl;Vt.getPdfFilenameFromUrl;Vt.getXfaPageViewport;Vt.isDataScheme;Vt.isPdfFile;Vt.noContextMenu;Vt.normalizeUnicode;Vt.renderTextLayer;Vt.setLayerDimensions;Vt.shadow;Vt.updateTextLayer;Vt.version;const CA=Object.freeze(Object.defineProperty({__proto__:null,GlobalWorkerOptions:EA,getDocument:bA},Symbol.toStringTag,{value:"Module"})),hr=CA,Jp=hr.GlobalWorkerOptions||hr.default?.GlobalWorkerOptions,$p=hr.getDocument||hr.default?.getDocument;typeof window<"u"&&Jp&&(Jp.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.0.379/pdf.worker.min.mjs");const xA=({file:i,onTextExtracted:e})=>{const[s,o]=te.useState(null),[r,u]=te.useState(1),[d,p]=te.useState(0),[y,h]=te.useState(1.5),g=te.useRef(null),A=te.useRef(null);te.useEffect(()=>{i&&(async()=>{try{if(!$p){console.error("PDF.js getDocument function not found");return}const C=await i.arrayBuffer(),v=await $p({data:C}).promise;o(v),p(v.numPages),u(1);let x="";for(let I=1;I<=v.numPages;I++){const V=(await(await v.getPage(I)).getTextContent()).items.map(O=>O.str).join(" ");x+=`
[PAGE ${I}]
${V}`}e(x,v.numPages,v)}catch(C){console.error("Error loading PDF:",C)}})()},[i]),te.useEffect(()=>{(async()=>{if(!(!s||!g.current))try{const C=await s.getPage(r),_=C.getViewport({scale:y}),v=g.current,x=v.getContext("2d");if(x){v.height=_.height,v.width=_.width;const I={canvasContext:x,viewport:_};await C.render(I).promise}}catch(C){console.error("Render error:",C)}})()},[s,r,y]);const E=R=>{const C=r+R;C>=1&&C<=d&&u(C)};return B.jsxs("div",{className:"flex flex-col h-full bg-[#0a0f1a] rounded-lg overflow-hidden",children:[B.jsx("div",{className:"flex-1 overflow-auto p-4 flex justify-center items-start",ref:A,children:B.jsx("canvas",{ref:g,className:"shadow-2xl max-w-full"})}),B.jsxs("div",{className:"p-3 border-t border-border bg-card flex justify-center items-center gap-4 z-10",children:[B.jsx("button",{onClick:()=>E(-1),disabled:r<=1,className:"px-3 py-1.5 rounded-md border border-border hover:bg-input disabled:opacity-50 text-xs font-semibold",children:" Prev"}),B.jsxs("span",{className:"font-mono text-sm text-dim",children:[B.jsx("span",{className:"text-text",children:r})," / ",d]}),B.jsx("button",{onClick:()=>E(1),disabled:r>=d,className:"px-3 py-1.5 rounded-md border border-border hover:bg-input disabled:opacity-50 text-xs font-semibold",children:"Next "}),B.jsx("div",{className:"h-4 w-px bg-border mx-2"}),B.jsxs("select",{value:y,onChange:R=>h(Number(R.target.value)),className:"bg-input border border-border rounded text-xs px-2 py-1 outline-none focus:border-primary",children:[B.jsx("option",{value:1,children:"100%"}),B.jsx("option",{value:1.25,children:"125%"}),B.jsx("option",{value:1.5,children:"150%"}),B.jsx("option",{value:2,children:"200%"})]})]})]})},wA=Object.prototype.toString,RA=i=>wA.call(i)==="[object Error]",_A=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function MA(i){if(!(i&&RA(i)&&i.name==="TypeError"&&typeof i.message=="string"))return!1;const{message:s,stack:o}=i;return s==="Load failed"?o===void 0||"__sentry_captured__"in i:s.startsWith("error sending request for url")?!0:_A.has(s)}function IA(i){if(typeof i=="number"){if(i<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(i))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(i!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function ir(i,e,{min:s=0,allowInfinity:o=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${i}\` to be a number${o?" or Infinity":""}.`);if(!o&&!Number.isFinite(e))throw new TypeError(`Expected \`${i}\` to be a finite number.`);if(e<s)throw new TypeError(`Expected \`${i}\` to be  ${s}.`)}}class Kg extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function NA(i,e){const s=Math.max(1,i+1),o=e.randomize?Math.random()+1:1;let r=Math.round(o*e.minTimeout*e.factor**(s-1));return r=Math.min(r,e.maxTimeout),r}function Kp(i,e){return Number.isFinite(e)?e-(performance.now()-i):e}async function DA({error:i,attemptNumber:e,retriesConsumed:s,startTime:o,options:r}){const u=i instanceof Error?i:new TypeError(`Non-error was thrown: "${i}". You should only throw errors.`);if(u instanceof Kg)throw u.originalError;const d=Number.isFinite(r.retries)?Math.max(0,r.retries-s):r.retries,p=r.maxRetryTime??Number.POSITIVE_INFINITY,y=Object.freeze({error:u,attemptNumber:e,retriesLeft:d,retriesConsumed:s});if(await r.onFailedAttempt(y),Kp(o,p)<=0)throw u;const h=await r.shouldConsumeRetry(y),g=Kp(o,p);if(g<=0||d<=0)throw u;if(u instanceof TypeError&&!MA(u)){if(h)throw u;return r.signal?.throwIfAborted(),!1}if(!await r.shouldRetry(y))throw u;if(!h)return r.signal?.throwIfAborted(),!1;const A=NA(s,r),E=Math.min(A,g);return r.signal?.throwIfAborted(),E>0&&await new Promise((R,C)=>{const _=()=>{clearTimeout(v),r.signal?.removeEventListener("abort",_),C(r.signal.reason)},v=setTimeout(()=>{r.signal?.removeEventListener("abort",_),R()},E);r.unref&&v.unref?.(),r.signal?.addEventListener("abort",_,{once:!0})}),r.signal?.throwIfAborted(),!0}async function LA(i,e={}){if(e={...e},IA(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??=10,e.factor??=2,e.minTimeout??=1e3,e.maxTimeout??=Number.POSITIVE_INFINITY,e.maxRetryTime??=Number.POSITIVE_INFINITY,e.randomize??=!1,e.onFailedAttempt??=()=>{},e.shouldRetry??=()=>!0,e.shouldConsumeRetry??=()=>!0,ir("factor",e.factor,{min:0,allowInfinity:!1}),ir("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),ir("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),ir("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),e.signal?.throwIfAborted();let s=0,o=0;const r=performance.now();for(;!Number.isFinite(e.retries)||o<=e.retries;){s++;try{e.signal?.throwIfAborted();const u=await i(s);return e.signal?.throwIfAborted(),u}catch(u){await DA({error:u,attemptNumber:s,retriesConsumed:o,startTime:r,options:e})&&o++}}throw new Error("Retry attempts exhausted without throwing an error.")}var PA={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let kA,FA;function UA(){return{geminiUrl:kA,vertexUrl:FA}}function OA(i,e,s,o){var r,u;if(!i?.baseUrl){const d=UA();return e?(r=d.vertexUrl)!==null&&r!==void 0?r:s:(u=d.geminiUrl)!==null&&u!==void 0?u:o}return i.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ti{}function It(i,e){const s=/\{([^}]+)\}/g;return i.replace(s,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const u=e[r];return u!=null?String(u):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(i,e,s){for(let u=0;u<e.length-1;u++){const d=e[u];if(d.endsWith("[]")){const p=d.slice(0,-2);if(!(p in i))if(Array.isArray(s))i[p]=Array.from({length:s.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(i[p])){const y=i[p];if(Array.isArray(s))for(let h=0;h<y.length;h++){const g=y[h];f(g,e.slice(u+1),s[h])}else for(const h of y)f(h,e.slice(u+1),s)}return}else if(d.endsWith("[0]")){const p=d.slice(0,-3);p in i||(i[p]=[{}]);const y=i[p];f(y[0],e.slice(u+1),s);return}(!i[d]||typeof i[d]!="object")&&(i[d]={}),i=i[d]}const o=e[e.length-1],r=i[o];if(r!==void 0){if(!s||typeof s=="object"&&Object.keys(s).length===0||s===r)return;if(typeof r=="object"&&typeof s=="object"&&r!==null&&s!==null)Object.assign(r,s);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof s=="object"&&s!==null&&!Array.isArray(s)?Object.assign(i,s):i[o]=s}function c(i,e,s=void 0){try{if(e.length===1&&e[0]==="_self")return i;for(let o=0;o<e.length;o++){if(typeof i!="object"||i===null)return s;const r=e[o];if(r.endsWith("[]")){const u=r.slice(0,-2);if(u in i){const d=i[u];return Array.isArray(d)?d.map(p=>c(p,e.slice(o+1),s)):s}else return s}else i=i[r]}return i}catch(o){if(o instanceof TypeError)return s;throw o}}function GA(i,e){for(const[s,o]of Object.entries(e)){const r=s.split("."),u=o.split("."),d=new Set;let p=-1;for(let y=0;y<r.length;y++)if(r[y]==="*"){p=y;break}if(p!==-1&&u.length>p)for(let y=p;y<u.length;y++){const h=u[y];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&d.add(h)}hc(i,r,u,0,d)}}function hc(i,e,s,o,r){if(o>=e.length||typeof i!="object"||i===null)return;const u=e[o];if(u.endsWith("[]")){const d=u.slice(0,-2),p=i;if(d in p&&Array.isArray(p[d]))for(const y of p[d])hc(y,e,s,o+1,r)}else if(u==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const d=i,p=Object.keys(d).filter(h=>!h.startsWith("_")&&!r.has(h)),y={};for(const h of p)y[h]=d[h];for(const[h,g]of Object.entries(y)){const A=[];for(const E of s.slice(o))E==="*"?A.push(h):A.push(E);f(d,A,g)}for(const h of p)delete d[h]}}else{const d=i;u in d&&hc(d[u],e,s,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ic(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HA(i){const e={},s=c(i,["operationName"]);s!=null&&f(e,["operationName"],s);const o=c(i,["resourceName"]);return o!=null&&f(e,["_url","resourceName"],o),e}function VA(i){const e={},s=c(i,["name"]);s!=null&&f(e,["name"],s);const o=c(i,["metadata"]);o!=null&&f(e,["metadata"],o);const r=c(i,["done"]);r!=null&&f(e,["done"],r);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response","generateVideoResponse"]);return d!=null&&f(e,["response"],qA(d)),e}function zA(i){const e={},s=c(i,["name"]);s!=null&&f(e,["name"],s);const o=c(i,["metadata"]);o!=null&&f(e,["metadata"],o);const r=c(i,["done"]);r!=null&&f(e,["done"],r);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response"]);return d!=null&&f(e,["response"],BA(d)),e}function qA(i){const e={},s=c(i,["generatedSamples"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>YA(d))),f(e,["generatedVideos"],u)}const o=c(i,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const r=c(i,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function BA(i){const e={},s=c(i,["videos"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>XA(d))),f(e,["generatedVideos"],u)}const o=c(i,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const r=c(i,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function YA(i){const e={},s=c(i,["video"]);return s!=null&&f(e,["video"],ZA(s)),e}function XA(i){const e={},s=c(i,["_self"]);return s!=null&&f(e,["video"],jA(s)),e}function JA(i){const e={},s=c(i,["operationName"]);return s!=null&&f(e,["_url","operationName"],s),e}function $A(i){const e={},s=c(i,["operationName"]);return s!=null&&f(e,["_url","operationName"],s),e}function KA(i){const e={},s=c(i,["name"]);s!=null&&f(e,["name"],s);const o=c(i,["metadata"]);o!=null&&f(e,["metadata"],o);const r=c(i,["done"]);r!=null&&f(e,["done"],r);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response"]);return d!=null&&f(e,["response"],QA(d)),e}function QA(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&f(e,["sdkHttpResponse"],s);const o=c(i,["parent"]);o!=null&&f(e,["parent"],o);const r=c(i,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function Qg(i){const e={},s=c(i,["name"]);s!=null&&f(e,["name"],s);const o=c(i,["metadata"]);o!=null&&f(e,["metadata"],o);const r=c(i,["done"]);r!=null&&f(e,["done"],r);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response"]);return d!=null&&f(e,["response"],WA(d)),e}function WA(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&f(e,["sdkHttpResponse"],s);const o=c(i,["parent"]);o!=null&&f(e,["parent"],o);const r=c(i,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function ZA(i){const e={},s=c(i,["uri"]);s!=null&&f(e,["uri"],s);const o=c(i,["encodedVideo"]);o!=null&&f(e,["videoBytes"],Ic(o));const r=c(i,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function jA(i){const e={},s=c(i,["gcsUri"]);s!=null&&f(e,["uri"],s);const o=c(i,["bytesBase64Encoded"]);o!=null&&f(e,["videoBytes"],Ic(o));const r=c(i,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Qp;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Qp||(Qp={}));var Wp;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(Wp||(Wp={}));var Zp;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(Zp||(Zp={}));var Mi;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(Mi||(Mi={}));var jp;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(jp||(jp={}));var tm;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(tm||(tm={}));var em;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(em||(em={}));var nm;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(nm||(nm={}));var im;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(im||(im={}));var sm;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(sm||(sm={}));var om;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(om||(om={}));var am;(function(i){i.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH",i.MINIMAL="MINIMAL"})(am||(am={}));var rm;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(rm||(rm={}));var lm;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(lm||(lm={}));var um;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(um||(um={}));var cm;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE",i.IMAGE_RECITATION="IMAGE_RECITATION",i.IMAGE_OTHER="IMAGE_OTHER"})(cm||(cm={}));var dm;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(dm||(dm={}));var fm;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(fm||(fm={}));var hm;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(hm||(hm={}));var pm;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(pm||(pm={}));var mm;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(mm||(mm={}));var pr;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(pr||(pr={}));var gm;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(gm||(gm={}));var vm;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(vm||(vm={}));var ym;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ym||(ym={}));var pc;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(pc||(pc={}));var Am;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Am||(Am={}));var Sm;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",i.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Sm||(Sm={}));var mc;(function(i){i.COLLECTION="COLLECTION"})(mc||(mc={}));var Tm;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(Tm||(Tm={}));var Em;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Em||(Em={}));var bm;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(bm||(bm={}));var Cm;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(Cm||(Cm={}));var xm;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(xm||(xm={}));var wm;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(wm||(wm={}));var Rm;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Rm||(Rm={}));var _m;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(_m||(_m={}));var Mm;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Mm||(Mm={}));var Im;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(Im||(Im={}));var Nm;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(Nm||(Nm={}));var Dm;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(Dm||(Dm={}));var Lm;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(Lm||(Lm={}));var Pm;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING",i.DISTILLATION="DISTILLATION"})(Pm||(Pm={}));var km;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(km||(km={}));var Fm;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(Fm||(Fm={}));var Um;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED",i.REGISTERED="REGISTERED"})(Um||(Um={}));var Om;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Om||(Om={}));var Gm;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(Gm||(Gm={}));var Hm;(function(i){i.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",i.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",i.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Hm||(Hm={}));var Vm;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.ACTIVITY_START="ACTIVITY_START",i.ACTIVITY_END="ACTIVITY_END"})(Vm||(Vm={}));var zm;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(zm||(zm={}));var qm;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(qm||(qm={}));var Bm;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(Bm||(Bm={}));var Ym;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ym||(Ym={}));var Xm;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Xm||(Xm={}));var Jm;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(Jm||(Jm={}));var Hs;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(Hs||(Hs={}));class gc{constructor(e){const s={};for(const o of e.headers.entries())s[o[0]]=o[1];this.headers=s,this.responseInternal=e}json(){return this.responseInternal.json()}}class Go{get text(){var e,s,o,r,u,d,p,y;if(((r=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",g=!1;const A=[];for(const E of(y=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[R,C]of Object.entries(E))R!=="text"&&R!=="thought"&&R!=="thoughtSignature"&&(C!==null||C!==void 0)&&A.push(R);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;g=!0,h+=E.text}}return A.length>0&&console.warn(`there are non-text parts ${A} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?h:void 0}get data(){var e,s,o,r,u,d,p,y;if(((r=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const g=[];for(const A of(y=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[E,R]of Object.entries(A))E!=="inlineData"&&(R!==null||R!==void 0)&&g.push(E);A.inlineData&&typeof A.inlineData.data=="string"&&(h+=atob(A.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,s,o,r,u,d,p,y;if(((r=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(y=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if(h?.length!==0)return h}get executableCode(){var e,s,o,r,u,d,p,y,h;if(((r=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(y=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(A=>A.executableCode).map(A=>A.executableCode).filter(A=>A!==void 0);if(g?.length!==0)return(h=g?.[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,s,o,r,u,d,p,y,h;if(((r=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(y=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(A=>A.codeExecutionResult).map(A=>A.codeExecutionResult).filter(A=>A!==void 0);if(g?.length!==0)return(h=g?.[0])===null||h===void 0?void 0:h.output}}class $m{}class Km{}class tS{}class eS{}class nS{}class iS{}class Qm{}class Wm{}class Zm{}class sS{}class mr{_fromAPIResponse({apiResponse:e,_isVertexAI:s}){const o=new mr;let r;const u=e;return s?r=zA(u):r=VA(u),Object.assign(o,r),o}}class jm{}class tg{}class eg{}class ng{}class oS{}class aS{}class rS{}class Nc{_fromAPIResponse({apiResponse:e,_isVertexAI:s}){const o=new Nc,u=KA(e);return Object.assign(o,u),o}}class lS{}class uS{}class cS{}class dS{}class ig{}class fS{get text(){var e,s,o;let r="",u=!1;const d=[];for(const p of(o=(s=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&o!==void 0?o:[]){for(const[y,h]of Object.entries(p))y!=="text"&&y!=="thought"&&h!==null&&d.push(y);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;u=!0,r+=p.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?r:void 0}get data(){var e,s,o;let r="";const u=[];for(const d of(o=(s=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&o!==void 0?o:[]){for(const[p,y]of Object.entries(d))p!=="inlineData"&&y!==null&&u.push(p);d.inlineData&&typeof d.inlineData.data=="string"&&(r+=atob(d.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class hS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Dc{_fromAPIResponse({apiResponse:e,_isVertexAI:s}){const o=new Dc,u=Qg(e);return Object.assign(o,u),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function se(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const s=e.split("/",2);return`publishers/${s[0]}/models/${s[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Wg(i,e){const s=se(i,e);return s?s.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${s}`:s.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${s}`:s:""}function Zg(i){return Array.isArray(i)?i.map(e=>gr(e)):[gr(i)]}function gr(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function jg(i){const e=gr(i);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function tv(i){const e=gr(i);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function sg(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function ev(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(e=>sg(e)):[sg(i)]}function vc(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function og(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function ag(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function Be(i){if(i==null)throw new Error("ContentUnion is required");return vc(i)?i:{role:"user",parts:ev(i)}}function Lc(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(s=>{const o=Be(s);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(i.isVertexAI()){const s=Be(e);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]}return Array.isArray(e)?e.map(s=>Be(s)):[Be(e)]}function Sn(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(og(i)||ag(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Be(i)]}const e=[],s=[],o=vc(i[0]);for(const r of i){const u=vc(r);if(u!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)e.push(r);else{if(og(r)||ag(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");s.push(r)}}return o||e.push({role:"user",parts:ev(s)}),e}function pS(i,e){i.includes("null")&&(e.nullable=!0);const s=i.filter(o=>o!=="null");if(s.length===1)e.type=Object.values(Mi).includes(s[0].toUpperCase())?s[0].toUpperCase():Mi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of s)e.anyOf.push({type:Object.values(Mi).includes(o.toUpperCase())?o.toUpperCase():Mi.TYPE_UNSPECIFIED})}}function zs(i){const e={},s=["items"],o=["anyOf"],r=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const u=i.anyOf;u!=null&&u.length==2&&(u[0].type==="null"?(e.nullable=!0,i=u[1]):u[1].type==="null"&&(e.nullable=!0,i=u[0])),i.type instanceof Array&&pS(i.type,e);for(const[d,p]of Object.entries(i))if(p!=null)if(d=="type"){if(p==="null")throw new Error("type: null can not be the only possible type for the field.");if(p instanceof Array)continue;e.type=Object.values(Mi).includes(p.toUpperCase())?p.toUpperCase():Mi.TYPE_UNSPECIFIED}else if(s.includes(d))e[d]=zs(p);else if(o.includes(d)){const y=[];for(const h of p){if(h.type=="null"){e.nullable=!0;continue}y.push(zs(h))}e[d]=y}else if(r.includes(d)){const y={};for(const[h,g]of Object.entries(p))y[h]=zs(g);e[d]=y}else{if(d==="additionalProperties")continue;e[d]=p}return e}function Pc(i){return zs(i)}function kc(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function Fc(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function Bs(i){if(i.functionDeclarations)for(const e of i.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=zs(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=zs(e.response));return i}function Ys(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const e=[];for(const s of i)e.push(s);return e}function mS(i,e,s,o=1){const r=!e.startsWith(`${s}/`)&&e.split("/").length===o;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${s}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:r?`projects/${i.getProject()}/locations/${i.getLocation()}/${s}/${e}`:e:r?`${s}/${e}`:e}function ei(i,e){if(typeof e!="string")throw new Error("name must be a string");return mS(i,e,"cachedContents")}function nv(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function Ii(i){return Ic(i)}function gS(i){return i!=null&&typeof i=="object"&&"name"in i}function vS(i){return i!=null&&typeof i=="object"&&"video"in i}function yS(i){return i!=null&&typeof i=="object"&&"uri"in i}function iv(i){var e;let s;if(gS(i)&&(s=i.name),!(yS(i)&&(s=i.uri,s===void 0))&&!(vS(i)&&(s=(e=i.video)===null||e===void 0?void 0:e.uri,s===void 0))){if(typeof i=="string"&&(s=i),s===void 0)throw new Error("Could not extract file name from the provided input.");if(s.startsWith("https://")){const r=s.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${s}`);s=r[0]}else s.startsWith("files/")&&(s=s.split("files/")[1]);return s}}function sv(i,e){let s;return i.isVertexAI()?s=e?"publishers/google/models":"models":s=e?"models":"tunedModels",s}function ov(i){for(const e of["models","tunedModels","publisherModels"])if(AS(i,e))return i[e];return[]}function AS(i,e){return i!==null&&typeof i=="object"&&e in i}function SS(i,e={}){const s=i,o={name:s.name,description:s.description,parametersJsonSchema:s.inputSchema};return s.outputSchema&&(o.responseJsonSchema=s.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function TS(i,e={}){const s=[],o=new Set;for(const r of i){const u=r.name;if(o.has(u))throw new Error(`Duplicate function name ${u} found in MCP tools. Please ensure function names are unique.`);o.add(u);const d=SS(r,e);d.functionDeclarations&&s.push(...d.functionDeclarations)}return{functionDeclarations:s}}function av(i,e){let s;if(typeof e=="string")if(i.isVertexAI())if(e.startsWith("gs://"))s={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))s={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))s={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");s={inlinedRequests:e}}else s=e;const o=[s.gcsUri,s.bigqueryUri].filter(Boolean).length,r=[s.inlinedRequests,s.fileName].filter(Boolean).length;if(i.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return s}function ES(i){if(typeof i!="string")return i;const e=i;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function rv(i){if(typeof i!="object"||i===null)return{};const e=i,s=e.inlinedResponses;if(typeof s!="object"||s===null)return i;const r=s.inlinedResponses;if(!Array.isArray(r)||r.length===0)return i;let u=!1;for(const d of r){if(typeof d!="object"||d===null)continue;const y=d.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){u=!0;break}}return u&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),i}function Xs(i,e){const s=e;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(s))return s.split("/").pop();throw new Error(`Invalid batch job name: ${s}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(s))return s.split("/").pop();if(/^\d+$/.test(s))return s;throw new Error(`Invalid batch job name: ${s}.`)}function lv(i){const e=i;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bS(i){const e={},s=c(i,["responsesFile"]);s!=null&&f(e,["fileName"],s);const o=c(i,["inlinedResponses","inlinedResponses"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>iT(d))),f(e,["inlinedResponses"],u)}const r=c(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["inlinedEmbedContentResponses"],u)}return e}function CS(i){const e={},s=c(i,["predictionsFormat"]);s!=null&&f(e,["format"],s);const o=c(i,["gcsDestination","outputUriPrefix"]);o!=null&&f(e,["gcsUri"],o);const r=c(i,["bigqueryDestination","outputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function xS(i){const e={},s=c(i,["format"]);s!=null&&f(e,["predictionsFormat"],s);const o=c(i,["gcsUri"]);o!=null&&f(e,["gcsDestination","outputUriPrefix"],o);const r=c(i,["bigqueryUri"]);if(r!=null&&f(e,["bigqueryDestination","outputUri"],r),c(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function dr(i){const e={},s=c(i,["name"]);s!=null&&f(e,["name"],s);const o=c(i,["metadata","displayName"]);o!=null&&f(e,["displayName"],o);const r=c(i,["metadata","state"]);r!=null&&f(e,["state"],lv(r));const u=c(i,["metadata","createTime"]);u!=null&&f(e,["createTime"],u);const d=c(i,["metadata","endTime"]);d!=null&&f(e,["endTime"],d);const p=c(i,["metadata","updateTime"]);p!=null&&f(e,["updateTime"],p);const y=c(i,["metadata","model"]);y!=null&&f(e,["model"],y);const h=c(i,["metadata","output"]);return h!=null&&f(e,["dest"],bS(rv(h))),e}function yc(i){const e={},s=c(i,["name"]);s!=null&&f(e,["name"],s);const o=c(i,["displayName"]);o!=null&&f(e,["displayName"],o);const r=c(i,["state"]);r!=null&&f(e,["state"],lv(r));const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["createTime"]);d!=null&&f(e,["createTime"],d);const p=c(i,["startTime"]);p!=null&&f(e,["startTime"],p);const y=c(i,["endTime"]);y!=null&&f(e,["endTime"],y);const h=c(i,["updateTime"]);h!=null&&f(e,["updateTime"],h);const g=c(i,["model"]);g!=null&&f(e,["model"],g);const A=c(i,["inputConfig"]);A!=null&&f(e,["src"],wS(A));const E=c(i,["outputConfig"]);E!=null&&f(e,["dest"],CS(rv(E)));const R=c(i,["completionStats"]);return R!=null&&f(e,["completionStats"],R),e}function wS(i){const e={},s=c(i,["instancesFormat"]);s!=null&&f(e,["format"],s);const o=c(i,["gcsSource","uris"]);o!=null&&f(e,["gcsUri"],o);const r=c(i,["bigquerySource","inputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function RS(i,e){const s={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=c(e,["fileName"]);o!=null&&f(s,["fileName"],o);const r=c(e,["inlinedRequests"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>nT(i,d))),f(s,["requests","requests"],u)}return s}function _S(i){const e={},s=c(i,["format"]);s!=null&&f(e,["instancesFormat"],s);const o=c(i,["gcsUri"]);o!=null&&f(e,["gcsSource","uris"],o);const r=c(i,["bigqueryUri"]);if(r!=null&&f(e,["bigquerySource","inputUri"],r),c(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function MS(i){const e={},s=c(i,["data"]);if(s!=null&&f(e,["data"],s),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function IS(i,e){const s={},o=c(e,["name"]);return o!=null&&f(s,["_url","name"],Xs(i,o)),s}function NS(i,e){const s={},o=c(e,["name"]);return o!=null&&f(s,["_url","name"],Xs(i,o)),s}function DS(i){const e={},s=c(i,["content"]);s!=null&&f(e,["content"],s);const o=c(i,["citationMetadata"]);o!=null&&f(e,["citationMetadata"],LS(o));const r=c(i,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const u=c(i,["finishReason"]);u!=null&&f(e,["finishReason"],u);const d=c(i,["avgLogprobs"]);d!=null&&f(e,["avgLogprobs"],d);const p=c(i,["groundingMetadata"]);p!=null&&f(e,["groundingMetadata"],p);const y=c(i,["index"]);y!=null&&f(e,["index"],y);const h=c(i,["logprobsResult"]);h!=null&&f(e,["logprobsResult"],h);const g=c(i,["safetyRatings"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(R=>R)),f(e,["safetyRatings"],E)}const A=c(i,["urlContextMetadata"]);return A!=null&&f(e,["urlContextMetadata"],A),e}function LS(i){const e={},s=c(i,["citationSources"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>r)),f(e,["citations"],o)}return e}function uv(i){const e={},s=c(i,["parts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>cT(u))),f(e,["parts"],r)}const o=c(i,["role"]);return o!=null&&f(e,["role"],o),e}function PS(i,e){const s={},o=c(i,["displayName"]);if(e!==void 0&&o!=null&&f(e,["batch","displayName"],o),c(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return s}function kS(i,e){const s={},o=c(i,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const r=c(i,["dest"]);return e!==void 0&&r!=null&&f(e,["outputConfig"],xS(ES(r))),s}function rg(i,e){const s={},o=c(e,["model"]);o!=null&&f(s,["_url","model"],se(i,o));const r=c(e,["src"]);r!=null&&f(s,["batch","inputConfig"],RS(i,av(i,r)));const u=c(e,["config"]);return u!=null&&PS(u,s),s}function FS(i,e){const s={},o=c(e,["model"]);o!=null&&f(s,["model"],se(i,o));const r=c(e,["src"]);r!=null&&f(s,["inputConfig"],_S(av(i,r)));const u=c(e,["config"]);return u!=null&&kS(u,s),s}function US(i,e){const s={},o=c(i,["displayName"]);return e!==void 0&&o!=null&&f(e,["batch","displayName"],o),s}function OS(i,e){const s={},o=c(e,["model"]);o!=null&&f(s,["_url","model"],se(i,o));const r=c(e,["src"]);r!=null&&f(s,["batch","inputConfig"],YS(i,r));const u=c(e,["config"]);return u!=null&&US(u,s),s}function GS(i,e){const s={},o=c(e,["name"]);return o!=null&&f(s,["_url","name"],Xs(i,o)),s}function HS(i,e){const s={},o=c(e,["name"]);return o!=null&&f(s,["_url","name"],Xs(i,o)),s}function VS(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&f(e,["sdkHttpResponse"],s);const o=c(i,["name"]);o!=null&&f(e,["name"],o);const r=c(i,["done"]);r!=null&&f(e,["done"],r);const u=c(i,["error"]);return u!=null&&f(e,["error"],u),e}function zS(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&f(e,["sdkHttpResponse"],s);const o=c(i,["name"]);o!=null&&f(e,["name"],o);const r=c(i,["done"]);r!=null&&f(e,["done"],r);const u=c(i,["error"]);return u!=null&&f(e,["error"],u),e}function qS(i,e){const s={},o=c(e,["contents"]);if(o!=null){let u=Lc(i,o);Array.isArray(u)&&(u=u.map(d=>d)),f(s,["requests[]","request","content"],u)}const r=c(e,["config"]);return r!=null&&(f(s,["_self"],BS(r,s)),GA(s,{"requests[].*":"requests[].request.*"})),s}function BS(i,e){const s={},o=c(i,["taskType"]);e!==void 0&&o!=null&&f(e,["requests[]","taskType"],o);const r=c(i,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const u=c(i,["outputDimensionality"]);if(e!==void 0&&u!=null&&f(e,["requests[]","outputDimensionality"],u),c(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function YS(i,e){const s={},o=c(e,["fileName"]);o!=null&&f(s,["file_name"],o);const r=c(e,["inlinedRequests"]);return r!=null&&f(s,["requests"],qS(i,r)),s}function XS(i){const e={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(i,["fileUri"]);s!=null&&f(e,["fileUri"],s);const o=c(i,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function JS(i){const e={},s=c(i,["id"]);s!=null&&f(e,["id"],s);const o=c(i,["args"]);o!=null&&f(e,["args"],o);const r=c(i,["name"]);if(r!=null&&f(e,["name"],r),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $S(i){const e={},s=c(i,["allowedFunctionNames"]);s!=null&&f(e,["allowedFunctionNames"],s);const o=c(i,["mode"]);if(o!=null&&f(e,["mode"],o),c(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function KS(i,e,s){const o={},r=c(e,["systemInstruction"]);s!==void 0&&r!=null&&f(s,["systemInstruction"],uv(Be(r)));const u=c(e,["temperature"]);u!=null&&f(o,["temperature"],u);const d=c(e,["topP"]);d!=null&&f(o,["topP"],d);const p=c(e,["topK"]);p!=null&&f(o,["topK"],p);const y=c(e,["candidateCount"]);y!=null&&f(o,["candidateCount"],y);const h=c(e,["maxOutputTokens"]);h!=null&&f(o,["maxOutputTokens"],h);const g=c(e,["stopSequences"]);g!=null&&f(o,["stopSequences"],g);const A=c(e,["responseLogprobs"]);A!=null&&f(o,["responseLogprobs"],A);const E=c(e,["logprobs"]);E!=null&&f(o,["logprobs"],E);const R=c(e,["presencePenalty"]);R!=null&&f(o,["presencePenalty"],R);const C=c(e,["frequencyPenalty"]);C!=null&&f(o,["frequencyPenalty"],C);const _=c(e,["seed"]);_!=null&&f(o,["seed"],_);const v=c(e,["responseMimeType"]);v!=null&&f(o,["responseMimeType"],v);const x=c(e,["responseSchema"]);x!=null&&f(o,["responseSchema"],Pc(x));const I=c(e,["responseJsonSchema"]);if(I!=null&&f(o,["responseJsonSchema"],I),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=c(e,["safetySettings"]);if(s!==void 0&&P!=null){let _t=P;Array.isArray(_t)&&(_t=_t.map(Tt=>dT(Tt))),f(s,["safetySettings"],_t)}const k=c(e,["tools"]);if(s!==void 0&&k!=null){let _t=Ys(k);Array.isArray(_t)&&(_t=_t.map(Tt=>hT(Bs(Tt)))),f(s,["tools"],_t)}const V=c(e,["toolConfig"]);if(s!==void 0&&V!=null&&f(s,["toolConfig"],fT(V)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=c(e,["cachedContent"]);s!==void 0&&O!=null&&f(s,["cachedContent"],ei(i,O));const q=c(e,["responseModalities"]);q!=null&&f(o,["responseModalities"],q);const et=c(e,["mediaResolution"]);et!=null&&f(o,["mediaResolution"],et);const W=c(e,["speechConfig"]);if(W!=null&&f(o,["speechConfig"],kc(W)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const lt=c(e,["thinkingConfig"]);lt!=null&&f(o,["thinkingConfig"],lt);const gt=c(e,["imageConfig"]);gt!=null&&f(o,["imageConfig"],eT(gt));const Rt=c(e,["enableEnhancedCivicAnswers"]);if(Rt!=null&&f(o,["enableEnhancedCivicAnswers"],Rt),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function QS(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&f(e,["sdkHttpResponse"],s);const o=c(i,["candidates"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(h=>DS(h))),f(e,["candidates"],y)}const r=c(i,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const u=c(i,["promptFeedback"]);u!=null&&f(e,["promptFeedback"],u);const d=c(i,["responseId"]);d!=null&&f(e,["responseId"],d);const p=c(i,["usageMetadata"]);return p!=null&&f(e,["usageMetadata"],p),e}function WS(i,e){const s={},o=c(e,["name"]);return o!=null&&f(s,["_url","name"],Xs(i,o)),s}function ZS(i,e){const s={},o=c(e,["name"]);return o!=null&&f(s,["_url","name"],Xs(i,o)),s}function jS(i){const e={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=c(i,["enableWidget"]);return s!=null&&f(e,["enableWidget"],s),e}function tT(i){const e={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=c(i,["timeRangeFilter"]);return s!=null&&f(e,["timeRangeFilter"],s),e}function eT(i){const e={},s=c(i,["aspectRatio"]);s!=null&&f(e,["aspectRatio"],s);const o=c(i,["imageSize"]);if(o!=null&&f(e,["imageSize"],o),c(i,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function nT(i,e){const s={},o=c(e,["model"]);o!=null&&f(s,["request","model"],se(i,o));const r=c(e,["contents"]);if(r!=null){let p=Sn(r);Array.isArray(p)&&(p=p.map(y=>uv(y))),f(s,["request","contents"],p)}const u=c(e,["metadata"]);u!=null&&f(s,["metadata"],u);const d=c(e,["config"]);return d!=null&&f(s,["request","generationConfig"],KS(i,d,c(s,["request"],{}))),s}function iT(i){const e={},s=c(i,["response"]);s!=null&&f(e,["response"],QS(s));const o=c(i,["metadata"]);o!=null&&f(e,["metadata"],o);const r=c(i,["error"]);return r!=null&&f(e,["error"],r),e}function sT(i,e){const s={},o=c(i,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const r=c(i,["pageToken"]);if(e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),c(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return s}function oT(i,e){const s={},o=c(i,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const r=c(i,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const u=c(i,["filter"]);return e!==void 0&&u!=null&&f(e,["_query","filter"],u),s}function aT(i){const e={},s=c(i,["config"]);return s!=null&&sT(s,e),e}function rT(i){const e={},s=c(i,["config"]);return s!=null&&oT(s,e),e}function lT(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&f(e,["sdkHttpResponse"],s);const o=c(i,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const r=c(i,["operations"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>dr(d))),f(e,["batchJobs"],u)}return e}function uT(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&f(e,["sdkHttpResponse"],s);const o=c(i,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const r=c(i,["batchPredictionJobs"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>yc(d))),f(e,["batchJobs"],u)}return e}function cT(i){const e={},s=c(i,["mediaResolution"]);s!=null&&f(e,["mediaResolution"],s);const o=c(i,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const r=c(i,["executableCode"]);r!=null&&f(e,["executableCode"],r);const u=c(i,["fileData"]);u!=null&&f(e,["fileData"],XS(u));const d=c(i,["functionCall"]);d!=null&&f(e,["functionCall"],JS(d));const p=c(i,["functionResponse"]);p!=null&&f(e,["functionResponse"],p);const y=c(i,["inlineData"]);y!=null&&f(e,["inlineData"],MS(y));const h=c(i,["text"]);h!=null&&f(e,["text"],h);const g=c(i,["thought"]);g!=null&&f(e,["thought"],g);const A=c(i,["thoughtSignature"]);A!=null&&f(e,["thoughtSignature"],A);const E=c(i,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function dT(i){const e={},s=c(i,["category"]);if(s!=null&&f(e,["category"],s),c(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=c(i,["threshold"]);return o!=null&&f(e,["threshold"],o),e}function fT(i){const e={},s=c(i,["retrievalConfig"]);s!=null&&f(e,["retrievalConfig"],s);const o=c(i,["functionCallingConfig"]);return o!=null&&f(e,["functionCallingConfig"],$S(o)),e}function hT(i){const e={};if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(i,["computerUse"]);s!=null&&f(e,["computerUse"],s);const o=c(i,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const r=c(i,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(i,["functionDeclarations"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(A=>A)),f(e,["functionDeclarations"],g)}const d=c(i,["googleMaps"]);d!=null&&f(e,["googleMaps"],jS(d));const p=c(i,["googleSearch"]);p!=null&&f(e,["googleSearch"],tT(p));const y=c(i,["googleSearchRetrieval"]);y!=null&&f(e,["googleSearchRetrieval"],y);const h=c(i,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jn;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(jn||(jn={}));class Wi{constructor(e,s,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=s,this.init(e,o,r)}init(e,s,o){var r,u;this.nameInternal=e,this.pageInternal=s[this.nameInternal]||[],this.sdkHttpResponseInternal=s?.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!o||Object.keys(o).length===0?d={config:{}}:typeof o=="object"?d=Object.assign({},o):d=o,d.config&&(d.config.pageToken=s.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(u=(r=d.config)===null||r===void 0?void 0:r.pageSize)!==null&&u!==void 0?u:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pT extends ti{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new Wi(jn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(s),s),this.create=async s=>(this.apiClient.isVertexAI()&&(s.config=this.formatDestination(s.src,s.config)),this.createInternal(s)),this.createEmbeddings=async s=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(s)}}createInlinedGenerateContentRequest(e){const s=rg(this.apiClient,e),o=s._url,r=It("{model}:batchGenerateContent",o),p=s.batch.inputConfig.requests,y=p.requests,h=[];for(const g of y){const A=Object.assign({},g);if(A.systemInstruction){const E=A.systemInstruction;delete A.systemInstruction;const R=A.request;R.systemInstruction=E,A.request=R}h.push(A)}return p.requests=h,delete s.config,delete s._url,delete s._query,{path:r,body:s}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,s){const o=s?Object.assign({},s):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const u=this.getGcsUri(e),d=this.getBigqueryUri(e);if(u)u.endsWith(".jsonl")?o.dest=`${u.slice(0,-6)}/dest`:o.dest=`${u}_dest_${r}`;else if(d)o.dest=`${d}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=FS(this.apiClient,e);return p=It("batchPredictionJobs",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),d.then(g=>yc(g))}else{const h=rg(this.apiClient,e);return p=It("{model}:batchGenerateContent",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json()),d.then(g=>dr(g))}}async createEmbeddingsInternal(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=OS(this.apiClient,e);return u=It("{model}:asyncBatchEmbedContent",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>dr(y))}}async get(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=ZS(this.apiClient,e);return p=It("batchPredictionJobs/{name}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),d.then(g=>yc(g))}else{const h=WS(this.apiClient,e);return p=It("batches/{name}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json()),d.then(g=>dr(g))}}async cancel(e){var s,o,r,u;let d="",p={};if(this.apiClient.isVertexAI()){const y=NS(this.apiClient,e);d=It("batchPredictionJobs/{name}:cancel",y._url),p=y._query,delete y._url,delete y._query,await this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const y=IS(this.apiClient,e);d=It("batches/{name}:cancel",y._url),p=y._query,delete y._url,delete y._query,await this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal})}}async listInternal(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=rT(e);return p=It("batchPredictionJobs",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=uT(g),E=new ig;return Object.assign(E,A),E})}else{const h=aT(e);return p=It("batches",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=lT(g),E=new ig;return Object.assign(E,A),E})}}async delete(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=HS(this.apiClient,e);return p=It("batchPredictionJobs/{name}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>zS(g))}else{const h=GS(this.apiClient,e);return p=It("batches/{name}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>VS(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mT(i){const e={},s=c(i,["data"]);if(s!=null&&f(e,["data"],s),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function lg(i){const e={},s=c(i,["parts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>OT(u))),f(e,["parts"],r)}const o=c(i,["role"]);return o!=null&&f(e,["role"],o),e}function gT(i,e){const s={},o=c(i,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const r=c(i,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const u=c(i,["displayName"]);e!==void 0&&u!=null&&f(e,["displayName"],u);const d=c(i,["contents"]);if(e!==void 0&&d!=null){let g=Sn(d);Array.isArray(g)&&(g=g.map(A=>lg(A))),f(e,["contents"],g)}const p=c(i,["systemInstruction"]);e!==void 0&&p!=null&&f(e,["systemInstruction"],lg(Be(p)));const y=c(i,["tools"]);if(e!==void 0&&y!=null){let g=y;Array.isArray(g)&&(g=g.map(A=>HT(A))),f(e,["tools"],g)}const h=c(i,["toolConfig"]);if(e!==void 0&&h!=null&&f(e,["toolConfig"],GT(h)),c(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return s}function vT(i,e){const s={},o=c(i,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const r=c(i,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const u=c(i,["displayName"]);e!==void 0&&u!=null&&f(e,["displayName"],u);const d=c(i,["contents"]);if(e!==void 0&&d!=null){let A=Sn(d);Array.isArray(A)&&(A=A.map(E=>E)),f(e,["contents"],A)}const p=c(i,["systemInstruction"]);e!==void 0&&p!=null&&f(e,["systemInstruction"],Be(p));const y=c(i,["tools"]);if(e!==void 0&&y!=null){let A=y;Array.isArray(A)&&(A=A.map(E=>VT(E))),f(e,["tools"],A)}const h=c(i,["toolConfig"]);e!==void 0&&h!=null&&f(e,["toolConfig"],h);const g=c(i,["kmsKeyName"]);return e!==void 0&&g!=null&&f(e,["encryption_spec","kmsKeyName"],g),s}function yT(i,e){const s={},o=c(e,["model"]);o!=null&&f(s,["model"],Wg(i,o));const r=c(e,["config"]);return r!=null&&gT(r,s),s}function AT(i,e){const s={},o=c(e,["model"]);o!=null&&f(s,["model"],Wg(i,o));const r=c(e,["config"]);return r!=null&&vT(r,s),s}function ST(i,e){const s={},o=c(e,["name"]);return o!=null&&f(s,["_url","name"],ei(i,o)),s}function TT(i,e){const s={},o=c(e,["name"]);return o!=null&&f(s,["_url","name"],ei(i,o)),s}function ET(i){const e={},s=c(i,["sdkHttpResponse"]);return s!=null&&f(e,["sdkHttpResponse"],s),e}function bT(i){const e={},s=c(i,["sdkHttpResponse"]);return s!=null&&f(e,["sdkHttpResponse"],s),e}function CT(i){const e={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(i,["fileUri"]);s!=null&&f(e,["fileUri"],s);const o=c(i,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function xT(i){const e={},s=c(i,["id"]);s!=null&&f(e,["id"],s);const o=c(i,["args"]);o!=null&&f(e,["args"],o);const r=c(i,["name"]);if(r!=null&&f(e,["name"],r),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wT(i){const e={},s=c(i,["allowedFunctionNames"]);s!=null&&f(e,["allowedFunctionNames"],s);const o=c(i,["mode"]);if(o!=null&&f(e,["mode"],o),c(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function RT(i){const e={},s=c(i,["description"]);s!=null&&f(e,["description"],s);const o=c(i,["name"]);o!=null&&f(e,["name"],o);const r=c(i,["parameters"]);r!=null&&f(e,["parameters"],r);const u=c(i,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const d=c(i,["response"]);d!=null&&f(e,["response"],d);const p=c(i,["responseJsonSchema"]);if(p!=null&&f(e,["responseJsonSchema"],p),c(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function _T(i,e){const s={},o=c(e,["name"]);return o!=null&&f(s,["_url","name"],ei(i,o)),s}function MT(i,e){const s={},o=c(e,["name"]);return o!=null&&f(s,["_url","name"],ei(i,o)),s}function IT(i){const e={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=c(i,["enableWidget"]);return s!=null&&f(e,["enableWidget"],s),e}function NT(i){const e={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=c(i,["timeRangeFilter"]);return s!=null&&f(e,["timeRangeFilter"],s),e}function DT(i,e){const s={},o=c(i,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const r=c(i,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),s}function LT(i,e){const s={},o=c(i,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const r=c(i,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),s}function PT(i){const e={},s=c(i,["config"]);return s!=null&&DT(s,e),e}function kT(i){const e={},s=c(i,["config"]);return s!=null&&LT(s,e),e}function FT(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&f(e,["sdkHttpResponse"],s);const o=c(i,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const r=c(i,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["cachedContents"],u)}return e}function UT(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&f(e,["sdkHttpResponse"],s);const o=c(i,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const r=c(i,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["cachedContents"],u)}return e}function OT(i){const e={},s=c(i,["mediaResolution"]);s!=null&&f(e,["mediaResolution"],s);const o=c(i,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const r=c(i,["executableCode"]);r!=null&&f(e,["executableCode"],r);const u=c(i,["fileData"]);u!=null&&f(e,["fileData"],CT(u));const d=c(i,["functionCall"]);d!=null&&f(e,["functionCall"],xT(d));const p=c(i,["functionResponse"]);p!=null&&f(e,["functionResponse"],p);const y=c(i,["inlineData"]);y!=null&&f(e,["inlineData"],mT(y));const h=c(i,["text"]);h!=null&&f(e,["text"],h);const g=c(i,["thought"]);g!=null&&f(e,["thought"],g);const A=c(i,["thoughtSignature"]);A!=null&&f(e,["thoughtSignature"],A);const E=c(i,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function GT(i){const e={},s=c(i,["retrievalConfig"]);s!=null&&f(e,["retrievalConfig"],s);const o=c(i,["functionCallingConfig"]);return o!=null&&f(e,["functionCallingConfig"],wT(o)),e}function HT(i){const e={};if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(i,["computerUse"]);s!=null&&f(e,["computerUse"],s);const o=c(i,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const r=c(i,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(i,["functionDeclarations"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(A=>A)),f(e,["functionDeclarations"],g)}const d=c(i,["googleMaps"]);d!=null&&f(e,["googleMaps"],IT(d));const p=c(i,["googleSearch"]);p!=null&&f(e,["googleSearch"],NT(p));const y=c(i,["googleSearchRetrieval"]);y!=null&&f(e,["googleSearchRetrieval"],y);const h=c(i,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function VT(i){const e={},s=c(i,["retrieval"]);s!=null&&f(e,["retrieval"],s);const o=c(i,["computerUse"]);if(o!=null&&f(e,["computerUse"],o),c(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(i,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const u=c(i,["enterpriseWebSearch"]);u!=null&&f(e,["enterpriseWebSearch"],u);const d=c(i,["functionDeclarations"]);if(d!=null){let A=d;Array.isArray(A)&&(A=A.map(E=>RT(E))),f(e,["functionDeclarations"],A)}const p=c(i,["googleMaps"]);p!=null&&f(e,["googleMaps"],p);const y=c(i,["googleSearch"]);y!=null&&f(e,["googleSearch"],y);const h=c(i,["googleSearchRetrieval"]);h!=null&&f(e,["googleSearchRetrieval"],h);const g=c(i,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}function zT(i,e){const s={},o=c(i,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const r=c(i,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),s}function qT(i,e){const s={},o=c(i,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const r=c(i,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),s}function BT(i,e){const s={},o=c(e,["name"]);o!=null&&f(s,["_url","name"],ei(i,o));const r=c(e,["config"]);return r!=null&&zT(r,s),s}function YT(i,e){const s={},o=c(e,["name"]);o!=null&&f(s,["_url","name"],ei(i,o));const r=c(e,["config"]);return r!=null&&qT(r,s),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XT extends ti{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new Wi(jn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(s),s)}async create(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=AT(this.apiClient,e);return p=It("cachedContents",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),d.then(g=>g)}else{const h=yT(this.apiClient,e);return p=It("cachedContents",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json()),d.then(g=>g)}}async get(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=MT(this.apiClient,e);return p=It("{name}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),d.then(g=>g)}else{const h=_T(this.apiClient,e);return p=It("{name}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json()),d.then(g=>g)}}async delete(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=TT(this.apiClient,e);return p=It("{name}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=bT(g),E=new eg;return Object.assign(E,A),E})}else{const h=ST(this.apiClient,e);return p=It("{name}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=ET(g),E=new eg;return Object.assign(E,A),E})}}async update(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=YT(this.apiClient,e);return p=It("{name}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),d.then(g=>g)}else{const h=BT(this.apiClient,e);return p=It("{name}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json()),d.then(g=>g)}}async listInternal(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=kT(e);return p=It("cachedContents",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=UT(g),E=new ng;return Object.assign(E,A),E})}else{const h=PT(e);return p=It("cachedContents",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=FT(g),E=new ng;return Object.assign(E,A),E})}}}function vr(i,e){var s={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.indexOf(o)<0&&(s[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(i);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(i,o[r])&&(s[o[r]]=i[o[r]]);return s}function ug(i){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&i[e],o=0;if(s)return s.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zt(i){return this instanceof zt?(this.v=i,this):new zt(i)}function xn(i,e,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=s.apply(i,e||[]),r,u=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",d),r[Symbol.asyncIterator]=function(){return this},r;function d(R){return function(C){return Promise.resolve(C).then(R,A)}}function p(R,C){o[R]&&(r[R]=function(_){return new Promise(function(v,x){u.push([R,_,v,x])>1||y(R,_)})},C&&(r[R]=C(r[R])))}function y(R,C){try{h(o[R](C))}catch(_){E(u[0][3],_)}}function h(R){R.value instanceof zt?Promise.resolve(R.value.v).then(g,A):E(u[0][2],R)}function g(R){y("next",R)}function A(R){y("throw",R)}function E(R,C){R(C),u.shift(),u.length&&y(u[0][0],u[0][1])}}function wn(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],s;return e?e.call(i):(i=typeof ug=="function"?ug(i):i[Symbol.iterator](),s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s);function o(u){s[u]=i[u]&&function(d){return new Promise(function(p,y){d=i[u](d),r(p,y,d.done,d.value)})}}function r(u,d,p,y){Promise.resolve(y).then(function(h){u({value:h,done:p})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JT(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const s=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return s===void 0?!1:cv(s)}function cv(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function $T(i){if(i.length!==0){for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function cg(i){if(i===void 0||i.length===0)return[];const e=[],s=i.length;let o=0;for(;o<s;)if(i[o].role==="user")e.push(i[o]),o++;else{const r=[];let u=!0;for(;o<s&&i[o].role==="model";)r.push(i[o]),u&&!cv(i[o])&&(u=!1),o++;u?e.push(...r):e.pop()}return e}class KT{constructor(e,s){this.modelsModule=e,this.apiClient=s}create(e){return new QT(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class QT{constructor(e,s,o,r={},u=[]){this.apiClient=e,this.modelsModule=s,this.model=o,this.config=r,this.history=u,this.sendPromise=Promise.resolve(),$T(u)}async sendMessage(e){var s;await this.sendPromise;const o=Be(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(s=e.config)!==null&&s!==void 0?s:this.config});return this.sendPromise=(async()=>{var u,d,p;const y=await r,h=(d=(u=y.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content,g=y.automaticFunctionCallingHistory,A=this.getHistory(!0).length;let E=[];g!=null&&(E=(p=g.slice(A))!==null&&p!==void 0?p:[]);const R=h?[h]:[];this.recordHistory(o,R,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var s;await this.sendPromise;const o=Be(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(s=e.config)!==null&&s!==void 0?s:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const u=await r;return this.processStreamResponse(u,o)}getHistory(e=!1){const s=e?cg(this.history):this.history;return structuredClone(s)}processStreamResponse(e,s){return xn(this,arguments,function*(){var r,u,d,p,y,h;const g=[];try{for(var A=!0,E=wn(e),R;R=yield zt(E.next()),r=R.done,!r;A=!0){p=R.value,A=!1;const C=p;if(JT(C)){const _=(h=(y=C.candidates)===null||y===void 0?void 0:y[0])===null||h===void 0?void 0:h.content;_!==void 0&&g.push(_)}yield yield zt(C)}}catch(C){u={error:C}}finally{try{!A&&!r&&(d=E.return)&&(yield zt(d.call(E)))}finally{if(u)throw u.error}}this.recordHistory(s,g)})}recordHistory(e,s,o){let r=[];s.length>0&&s.every(u=>u.role!==void 0)?r=s:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...cg(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qo extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,qo.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WT(i){const e={},s=c(i,["file"]);return s!=null&&f(e,["file"],s),e}function ZT(i){const e={},s=c(i,["sdkHttpResponse"]);return s!=null&&f(e,["sdkHttpResponse"],s),e}function jT(i){const e={},s=c(i,["name"]);return s!=null&&f(e,["_url","file"],iv(s)),e}function tE(i){const e={},s=c(i,["sdkHttpResponse"]);return s!=null&&f(e,["sdkHttpResponse"],s),e}function eE(i){const e={},s=c(i,["name"]);return s!=null&&f(e,["_url","file"],iv(s)),e}function nE(i){const e={},s=c(i,["uris"]);return s!=null&&f(e,["uris"],s),e}function iE(i,e){const s={},o=c(i,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const r=c(i,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),s}function sE(i){const e={},s=c(i,["config"]);return s!=null&&iE(s,e),e}function oE(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&f(e,["sdkHttpResponse"],s);const o=c(i,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const r=c(i,["files"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["files"],u)}return e}function aE(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&f(e,["sdkHttpResponse"],s);const o=c(i,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>u)),f(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rE extends ti{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new Wi(jn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(s),s)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(s=>s)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=sE(e);return u=It("files",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:y.headers},g})),r.then(y=>{const h=oE(y),g=new lS;return Object.assign(g,h),g})}}async createInternal(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=WT(e);return u=It("upload/v1beta/files",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const h=ZT(y),g=new uS;return Object.assign(g,h),g})}}async get(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=eE(e);return u=It("files/{file}",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=jT(e);return u=It("files/{file}",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:y.headers},g})),r.then(y=>{const h=tE(y),g=new cS;return Object.assign(g,h),g})}}async registerFilesInternal(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=nE(e);return u=It("files:register",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const h=aE(y),g=new dS;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fr(i){const e={},s=c(i,["data"]);if(s!=null&&f(e,["data"],s),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function lE(i){const e={},s=c(i,["parts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>CE(u))),f(e,["parts"],r)}const o=c(i,["role"]);return o!=null&&f(e,["role"],o),e}function uE(i){const e={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(i,["fileUri"]);s!=null&&f(e,["fileUri"],s);const o=c(i,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function cE(i){const e={},s=c(i,["id"]);s!=null&&f(e,["id"],s);const o=c(i,["args"]);o!=null&&f(e,["args"],o);const r=c(i,["name"]);if(r!=null&&f(e,["name"],r),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function dE(i){const e={},s=c(i,["description"]);s!=null&&f(e,["description"],s);const o=c(i,["name"]);o!=null&&f(e,["name"],o);const r=c(i,["parameters"]);r!=null&&f(e,["parameters"],r);const u=c(i,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const d=c(i,["response"]);d!=null&&f(e,["response"],d);const p=c(i,["responseJsonSchema"]);if(p!=null&&f(e,["responseJsonSchema"],p),c(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function fE(i){const e={},s=c(i,["modelSelectionConfig"]);s!=null&&f(e,["modelConfig"],s);const o=c(i,["responseJsonSchema"]);o!=null&&f(e,["responseJsonSchema"],o);const r=c(i,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);const u=c(i,["candidateCount"]);u!=null&&f(e,["candidateCount"],u);const d=c(i,["enableAffectiveDialog"]);d!=null&&f(e,["enableAffectiveDialog"],d);const p=c(i,["frequencyPenalty"]);p!=null&&f(e,["frequencyPenalty"],p);const y=c(i,["logprobs"]);y!=null&&f(e,["logprobs"],y);const h=c(i,["maxOutputTokens"]);h!=null&&f(e,["maxOutputTokens"],h);const g=c(i,["mediaResolution"]);g!=null&&f(e,["mediaResolution"],g);const A=c(i,["presencePenalty"]);A!=null&&f(e,["presencePenalty"],A);const E=c(i,["responseLogprobs"]);E!=null&&f(e,["responseLogprobs"],E);const R=c(i,["responseMimeType"]);R!=null&&f(e,["responseMimeType"],R);const C=c(i,["responseModalities"]);C!=null&&f(e,["responseModalities"],C);const _=c(i,["responseSchema"]);_!=null&&f(e,["responseSchema"],_);const v=c(i,["routingConfig"]);v!=null&&f(e,["routingConfig"],v);const x=c(i,["seed"]);x!=null&&f(e,["seed"],x);const I=c(i,["speechConfig"]);I!=null&&f(e,["speechConfig"],I);const P=c(i,["stopSequences"]);P!=null&&f(e,["stopSequences"],P);const k=c(i,["temperature"]);k!=null&&f(e,["temperature"],k);const V=c(i,["thinkingConfig"]);V!=null&&f(e,["thinkingConfig"],V);const O=c(i,["topK"]);O!=null&&f(e,["topK"],O);const q=c(i,["topP"]);if(q!=null&&f(e,["topP"],q),c(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function hE(i){const e={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=c(i,["enableWidget"]);return s!=null&&f(e,["enableWidget"],s),e}function pE(i){const e={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=c(i,["timeRangeFilter"]);return s!=null&&f(e,["timeRangeFilter"],s),e}function mE(i,e){const s={},o=c(i,["generationConfig"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig"],o);const r=c(i,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const u=c(i,["temperature"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","temperature"],u);const d=c(i,["topP"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","topP"],d);const p=c(i,["topK"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","topK"],p);const y=c(i,["maxOutputTokens"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","maxOutputTokens"],y);const h=c(i,["mediaResolution"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","mediaResolution"],h);const g=c(i,["seed"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","seed"],g);const A=c(i,["speechConfig"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","speechConfig"],Fc(A));const E=c(i,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const R=c(i,["enableAffectiveDialog"]);e!==void 0&&R!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],R);const C=c(i,["systemInstruction"]);e!==void 0&&C!=null&&f(e,["setup","systemInstruction"],lE(Be(C)));const _=c(i,["tools"]);if(e!==void 0&&_!=null){let O=Ys(_);Array.isArray(O)&&(O=O.map(q=>wE(Bs(q)))),f(e,["setup","tools"],O)}const v=c(i,["sessionResumption"]);e!==void 0&&v!=null&&f(e,["setup","sessionResumption"],xE(v));const x=c(i,["inputAudioTranscription"]);e!==void 0&&x!=null&&f(e,["setup","inputAudioTranscription"],x);const I=c(i,["outputAudioTranscription"]);e!==void 0&&I!=null&&f(e,["setup","outputAudioTranscription"],I);const P=c(i,["realtimeInputConfig"]);e!==void 0&&P!=null&&f(e,["setup","realtimeInputConfig"],P);const k=c(i,["contextWindowCompression"]);e!==void 0&&k!=null&&f(e,["setup","contextWindowCompression"],k);const V=c(i,["proactivity"]);if(e!==void 0&&V!=null&&f(e,["setup","proactivity"],V),c(i,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return s}function gE(i,e){const s={},o=c(i,["generationConfig"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig"],fE(o));const r=c(i,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const u=c(i,["temperature"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","temperature"],u);const d=c(i,["topP"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","topP"],d);const p=c(i,["topK"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","topK"],p);const y=c(i,["maxOutputTokens"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","maxOutputTokens"],y);const h=c(i,["mediaResolution"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","mediaResolution"],h);const g=c(i,["seed"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","seed"],g);const A=c(i,["speechConfig"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","speechConfig"],Fc(A));const E=c(i,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const R=c(i,["enableAffectiveDialog"]);e!==void 0&&R!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],R);const C=c(i,["systemInstruction"]);e!==void 0&&C!=null&&f(e,["setup","systemInstruction"],Be(C));const _=c(i,["tools"]);if(e!==void 0&&_!=null){let q=Ys(_);Array.isArray(q)&&(q=q.map(et=>RE(Bs(et)))),f(e,["setup","tools"],q)}const v=c(i,["sessionResumption"]);e!==void 0&&v!=null&&f(e,["setup","sessionResumption"],v);const x=c(i,["inputAudioTranscription"]);e!==void 0&&x!=null&&f(e,["setup","inputAudioTranscription"],x);const I=c(i,["outputAudioTranscription"]);e!==void 0&&I!=null&&f(e,["setup","outputAudioTranscription"],I);const P=c(i,["realtimeInputConfig"]);e!==void 0&&P!=null&&f(e,["setup","realtimeInputConfig"],P);const k=c(i,["contextWindowCompression"]);e!==void 0&&k!=null&&f(e,["setup","contextWindowCompression"],k);const V=c(i,["proactivity"]);e!==void 0&&V!=null&&f(e,["setup","proactivity"],V);const O=c(i,["explicitVadSignal"]);return e!==void 0&&O!=null&&f(e,["setup","explicitVadSignal"],O),s}function vE(i,e){const s={},o=c(e,["model"]);o!=null&&f(s,["setup","model"],se(i,o));const r=c(e,["config"]);return r!=null&&f(s,["config"],mE(r,s)),s}function yE(i,e){const s={},o=c(e,["model"]);o!=null&&f(s,["setup","model"],se(i,o));const r=c(e,["config"]);return r!=null&&f(s,["config"],gE(r,s)),s}function AE(i){const e={},s=c(i,["musicGenerationConfig"]);return s!=null&&f(e,["musicGenerationConfig"],s),e}function SE(i){const e={},s=c(i,["weightedPrompts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>r)),f(e,["weightedPrompts"],o)}return e}function TE(i){const e={},s=c(i,["media"]);if(s!=null){let h=Zg(s);Array.isArray(h)&&(h=h.map(g=>fr(g))),f(e,["mediaChunks"],h)}const o=c(i,["audio"]);o!=null&&f(e,["audio"],fr(tv(o)));const r=c(i,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const u=c(i,["video"]);u!=null&&f(e,["video"],fr(jg(u)));const d=c(i,["text"]);d!=null&&f(e,["text"],d);const p=c(i,["activityStart"]);p!=null&&f(e,["activityStart"],p);const y=c(i,["activityEnd"]);return y!=null&&f(e,["activityEnd"],y),e}function EE(i){const e={},s=c(i,["media"]);if(s!=null){let h=Zg(s);Array.isArray(h)&&(h=h.map(g=>g)),f(e,["mediaChunks"],h)}const o=c(i,["audio"]);o!=null&&f(e,["audio"],tv(o));const r=c(i,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const u=c(i,["video"]);u!=null&&f(e,["video"],jg(u));const d=c(i,["text"]);d!=null&&f(e,["text"],d);const p=c(i,["activityStart"]);p!=null&&f(e,["activityStart"],p);const y=c(i,["activityEnd"]);return y!=null&&f(e,["activityEnd"],y),e}function bE(i){const e={},s=c(i,["setupComplete"]);s!=null&&f(e,["setupComplete"],s);const o=c(i,["serverContent"]);o!=null&&f(e,["serverContent"],o);const r=c(i,["toolCall"]);r!=null&&f(e,["toolCall"],r);const u=c(i,["toolCallCancellation"]);u!=null&&f(e,["toolCallCancellation"],u);const d=c(i,["usageMetadata"]);d!=null&&f(e,["usageMetadata"],_E(d));const p=c(i,["goAway"]);p!=null&&f(e,["goAway"],p);const y=c(i,["sessionResumptionUpdate"]);y!=null&&f(e,["sessionResumptionUpdate"],y);const h=c(i,["voiceActivityDetectionSignal"]);h!=null&&f(e,["voiceActivityDetectionSignal"],h);const g=c(i,["voiceActivity"]);return g!=null&&f(e,["voiceActivity"],ME(g)),e}function CE(i){const e={},s=c(i,["mediaResolution"]);s!=null&&f(e,["mediaResolution"],s);const o=c(i,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const r=c(i,["executableCode"]);r!=null&&f(e,["executableCode"],r);const u=c(i,["fileData"]);u!=null&&f(e,["fileData"],uE(u));const d=c(i,["functionCall"]);d!=null&&f(e,["functionCall"],cE(d));const p=c(i,["functionResponse"]);p!=null&&f(e,["functionResponse"],p);const y=c(i,["inlineData"]);y!=null&&f(e,["inlineData"],fr(y));const h=c(i,["text"]);h!=null&&f(e,["text"],h);const g=c(i,["thought"]);g!=null&&f(e,["thought"],g);const A=c(i,["thoughtSignature"]);A!=null&&f(e,["thoughtSignature"],A);const E=c(i,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function xE(i){const e={},s=c(i,["handle"]);if(s!=null&&f(e,["handle"],s),c(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function wE(i){const e={};if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(i,["computerUse"]);s!=null&&f(e,["computerUse"],s);const o=c(i,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const r=c(i,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(i,["functionDeclarations"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(A=>A)),f(e,["functionDeclarations"],g)}const d=c(i,["googleMaps"]);d!=null&&f(e,["googleMaps"],hE(d));const p=c(i,["googleSearch"]);p!=null&&f(e,["googleSearch"],pE(p));const y=c(i,["googleSearchRetrieval"]);y!=null&&f(e,["googleSearchRetrieval"],y);const h=c(i,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function RE(i){const e={},s=c(i,["retrieval"]);s!=null&&f(e,["retrieval"],s);const o=c(i,["computerUse"]);if(o!=null&&f(e,["computerUse"],o),c(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(i,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const u=c(i,["enterpriseWebSearch"]);u!=null&&f(e,["enterpriseWebSearch"],u);const d=c(i,["functionDeclarations"]);if(d!=null){let A=d;Array.isArray(A)&&(A=A.map(E=>dE(E))),f(e,["functionDeclarations"],A)}const p=c(i,["googleMaps"]);p!=null&&f(e,["googleMaps"],p);const y=c(i,["googleSearch"]);y!=null&&f(e,["googleSearch"],y);const h=c(i,["googleSearchRetrieval"]);h!=null&&f(e,["googleSearchRetrieval"],h);const g=c(i,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}function _E(i){const e={},s=c(i,["promptTokenCount"]);s!=null&&f(e,["promptTokenCount"],s);const o=c(i,["cachedContentTokenCount"]);o!=null&&f(e,["cachedContentTokenCount"],o);const r=c(i,["candidatesTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const u=c(i,["toolUsePromptTokenCount"]);u!=null&&f(e,["toolUsePromptTokenCount"],u);const d=c(i,["thoughtsTokenCount"]);d!=null&&f(e,["thoughtsTokenCount"],d);const p=c(i,["totalTokenCount"]);p!=null&&f(e,["totalTokenCount"],p);const y=c(i,["promptTokensDetails"]);if(y!=null){let R=y;Array.isArray(R)&&(R=R.map(C=>C)),f(e,["promptTokensDetails"],R)}const h=c(i,["cacheTokensDetails"]);if(h!=null){let R=h;Array.isArray(R)&&(R=R.map(C=>C)),f(e,["cacheTokensDetails"],R)}const g=c(i,["candidatesTokensDetails"]);if(g!=null){let R=g;Array.isArray(R)&&(R=R.map(C=>C)),f(e,["responseTokensDetails"],R)}const A=c(i,["toolUsePromptTokensDetails"]);if(A!=null){let R=A;Array.isArray(R)&&(R=R.map(C=>C)),f(e,["toolUsePromptTokensDetails"],R)}const E=c(i,["trafficType"]);return E!=null&&f(e,["trafficType"],E),e}function ME(i){const e={},s=c(i,["type"]);return s!=null&&f(e,["voiceActivityType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IE(i,e){const s={},o=c(i,["data"]);if(o!=null&&f(s,["data"],o),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(i,["mimeType"]);return r!=null&&f(s,["mimeType"],r),s}function NE(i,e){const s={},o=c(i,["content"]);o!=null&&f(s,["content"],o);const r=c(i,["citationMetadata"]);r!=null&&f(s,["citationMetadata"],DE(r));const u=c(i,["tokenCount"]);u!=null&&f(s,["tokenCount"],u);const d=c(i,["finishReason"]);d!=null&&f(s,["finishReason"],d);const p=c(i,["avgLogprobs"]);p!=null&&f(s,["avgLogprobs"],p);const y=c(i,["groundingMetadata"]);y!=null&&f(s,["groundingMetadata"],y);const h=c(i,["index"]);h!=null&&f(s,["index"],h);const g=c(i,["logprobsResult"]);g!=null&&f(s,["logprobsResult"],g);const A=c(i,["safetyRatings"]);if(A!=null){let R=A;Array.isArray(R)&&(R=R.map(C=>C)),f(s,["safetyRatings"],R)}const E=c(i,["urlContextMetadata"]);return E!=null&&f(s,["urlContextMetadata"],E),s}function DE(i,e){const s={},o=c(i,["citationSources"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>u)),f(s,["citations"],r)}return s}function LE(i,e,s){const o={},r=c(e,["model"]);r!=null&&f(o,["_url","model"],se(i,r));const u=c(e,["contents"]);if(u!=null){let d=Sn(u);Array.isArray(d)&&(d=d.map(p=>p)),f(o,["contents"],d)}return o}function PE(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&f(s,["sdkHttpResponse"],o);const r=c(i,["tokensInfo"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),f(s,["tokensInfo"],u)}return s}function kE(i,e){const s={},o=c(i,["values"]);o!=null&&f(s,["values"],o);const r=c(i,["statistics"]);return r!=null&&f(s,["statistics"],FE(r)),s}function FE(i,e){const s={},o=c(i,["truncated"]);o!=null&&f(s,["truncated"],o);const r=c(i,["token_count"]);return r!=null&&f(s,["tokenCount"],r),s}function Sr(i,e){const s={},o=c(i,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>Yb(d))),f(s,["parts"],u)}const r=c(i,["role"]);return r!=null&&f(s,["role"],r),s}function UE(i,e){const s={},o=c(i,["controlType"]);o!=null&&f(s,["controlType"],o);const r=c(i,["enableControlImageComputation"]);return r!=null&&f(s,["computeControl"],r),s}function OE(i,e){const s={};if(c(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return s}function GE(i,e,s){const o={},r=c(i,["systemInstruction"]);e!==void 0&&r!=null&&f(e,["systemInstruction"],Be(r));const u=c(i,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(y=>pv(y))),f(e,["tools"],p)}const d=c(i,["generationConfig"]);return e!==void 0&&d!=null&&f(e,["generationConfig"],Ib(d)),o}function HE(i,e,s){const o={},r=c(e,["model"]);r!=null&&f(o,["_url","model"],se(i,r));const u=c(e,["contents"]);if(u!=null){let p=Sn(u);Array.isArray(p)&&(p=p.map(y=>Sr(y))),f(o,["contents"],p)}const d=c(e,["config"]);return d!=null&&OE(d),o}function VE(i,e,s){const o={},r=c(e,["model"]);r!=null&&f(o,["_url","model"],se(i,r));const u=c(e,["contents"]);if(u!=null){let p=Sn(u);Array.isArray(p)&&(p=p.map(y=>y)),f(o,["contents"],p)}const d=c(e,["config"]);return d!=null&&GE(d,o),o}function zE(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&f(s,["sdkHttpResponse"],o);const r=c(i,["totalTokens"]);r!=null&&f(s,["totalTokens"],r);const u=c(i,["cachedContentTokenCount"]);return u!=null&&f(s,["cachedContentTokenCount"],u),s}function qE(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&f(s,["sdkHttpResponse"],o);const r=c(i,["totalTokens"]);return r!=null&&f(s,["totalTokens"],r),s}function BE(i,e,s){const o={},r=c(e,["model"]);return r!=null&&f(o,["_url","name"],se(i,r)),o}function YE(i,e,s){const o={},r=c(e,["model"]);return r!=null&&f(o,["_url","name"],se(i,r)),o}function XE(i,e){const s={},o=c(i,["sdkHttpResponse"]);return o!=null&&f(s,["sdkHttpResponse"],o),s}function JE(i,e){const s={},o=c(i,["sdkHttpResponse"]);return o!=null&&f(s,["sdkHttpResponse"],o),s}function $E(i,e,s){const o={},r=c(i,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const u=c(i,["negativePrompt"]);e!==void 0&&u!=null&&f(e,["parameters","negativePrompt"],u);const d=c(i,["numberOfImages"]);e!==void 0&&d!=null&&f(e,["parameters","sampleCount"],d);const p=c(i,["aspectRatio"]);e!==void 0&&p!=null&&f(e,["parameters","aspectRatio"],p);const y=c(i,["guidanceScale"]);e!==void 0&&y!=null&&f(e,["parameters","guidanceScale"],y);const h=c(i,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const g=c(i,["safetyFilterLevel"]);e!==void 0&&g!=null&&f(e,["parameters","safetySetting"],g);const A=c(i,["personGeneration"]);e!==void 0&&A!=null&&f(e,["parameters","personGeneration"],A);const E=c(i,["includeSafetyAttributes"]);e!==void 0&&E!=null&&f(e,["parameters","includeSafetyAttributes"],E);const R=c(i,["includeRaiReason"]);e!==void 0&&R!=null&&f(e,["parameters","includeRaiReason"],R);const C=c(i,["language"]);e!==void 0&&C!=null&&f(e,["parameters","language"],C);const _=c(i,["outputMimeType"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","mimeType"],_);const v=c(i,["outputCompressionQuality"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","compressionQuality"],v);const x=c(i,["addWatermark"]);e!==void 0&&x!=null&&f(e,["parameters","addWatermark"],x);const I=c(i,["labels"]);e!==void 0&&I!=null&&f(e,["labels"],I);const P=c(i,["editMode"]);e!==void 0&&P!=null&&f(e,["parameters","editMode"],P);const k=c(i,["baseSteps"]);return e!==void 0&&k!=null&&f(e,["parameters","editConfig","baseSteps"],k),o}function KE(i,e,s){const o={},r=c(e,["model"]);r!=null&&f(o,["_url","model"],se(i,r));const u=c(e,["prompt"]);u!=null&&f(o,["instances[0]","prompt"],u);const d=c(e,["referenceImages"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(h=>Wb(h))),f(o,["instances[0]","referenceImages"],y)}const p=c(e,["config"]);return p!=null&&$E(p,o),o}function QE(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&f(s,["sdkHttpResponse"],o);const r=c(i,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>Tr(d))),f(s,["generatedImages"],u)}return s}function WE(i,e,s){const o={},r=c(i,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const u=c(i,["title"]);e!==void 0&&u!=null&&f(e,["requests[]","title"],u);const d=c(i,["outputDimensionality"]);if(e!==void 0&&d!=null&&f(e,["requests[]","outputDimensionality"],d),c(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function ZE(i,e,s){const o={},r=c(i,["taskType"]);e!==void 0&&r!=null&&f(e,["instances[]","task_type"],r);const u=c(i,["title"]);e!==void 0&&u!=null&&f(e,["instances[]","title"],u);const d=c(i,["outputDimensionality"]);e!==void 0&&d!=null&&f(e,["parameters","outputDimensionality"],d);const p=c(i,["mimeType"]);e!==void 0&&p!=null&&f(e,["instances[]","mimeType"],p);const y=c(i,["autoTruncate"]);return e!==void 0&&y!=null&&f(e,["parameters","autoTruncate"],y),o}function jE(i,e,s){const o={},r=c(e,["model"]);r!=null&&f(o,["_url","model"],se(i,r));const u=c(e,["contents"]);if(u!=null){let y=Lc(i,u);Array.isArray(y)&&(y=y.map(h=>h)),f(o,["requests[]","content"],y)}const d=c(e,["config"]);d!=null&&WE(d,o);const p=c(e,["model"]);return p!==void 0&&f(o,["requests[]","model"],se(i,p)),o}function tb(i,e,s){const o={},r=c(e,["model"]);r!=null&&f(o,["_url","model"],se(i,r));const u=c(e,["contents"]);if(u!=null){let p=Lc(i,u);Array.isArray(p)&&(p=p.map(y=>y)),f(o,["instances[]","content"],p)}const d=c(e,["config"]);return d!=null&&ZE(d,o),o}function eb(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&f(s,["sdkHttpResponse"],o);const r=c(i,["embeddings"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(s,["embeddings"],d)}const u=c(i,["metadata"]);return u!=null&&f(s,["metadata"],u),s}function nb(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&f(s,["sdkHttpResponse"],o);const r=c(i,["predictions[]","embeddings"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>kE(p))),f(s,["embeddings"],d)}const u=c(i,["metadata"]);return u!=null&&f(s,["metadata"],u),s}function ib(i,e){const s={},o=c(i,["endpoint"]);o!=null&&f(s,["name"],o);const r=c(i,["deployedModelId"]);return r!=null&&f(s,["deployedModelId"],r),s}function sb(i,e){const s={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["fileUri"]);o!=null&&f(s,["fileUri"],o);const r=c(i,["mimeType"]);return r!=null&&f(s,["mimeType"],r),s}function ob(i,e){const s={},o=c(i,["id"]);o!=null&&f(s,["id"],o);const r=c(i,["args"]);r!=null&&f(s,["args"],r);const u=c(i,["name"]);if(u!=null&&f(s,["name"],u),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return s}function ab(i,e){const s={},o=c(i,["allowedFunctionNames"]);o!=null&&f(s,["allowedFunctionNames"],o);const r=c(i,["mode"]);if(r!=null&&f(s,["mode"],r),c(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return s}function rb(i,e){const s={},o=c(i,["description"]);o!=null&&f(s,["description"],o);const r=c(i,["name"]);r!=null&&f(s,["name"],r);const u=c(i,["parameters"]);u!=null&&f(s,["parameters"],u);const d=c(i,["parametersJsonSchema"]);d!=null&&f(s,["parametersJsonSchema"],d);const p=c(i,["response"]);p!=null&&f(s,["response"],p);const y=c(i,["responseJsonSchema"]);if(y!=null&&f(s,["responseJsonSchema"],y),c(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return s}function lb(i,e,s,o){const r={},u=c(e,["systemInstruction"]);s!==void 0&&u!=null&&f(s,["systemInstruction"],Sr(Be(u)));const d=c(e,["temperature"]);d!=null&&f(r,["temperature"],d);const p=c(e,["topP"]);p!=null&&f(r,["topP"],p);const y=c(e,["topK"]);y!=null&&f(r,["topK"],y);const h=c(e,["candidateCount"]);h!=null&&f(r,["candidateCount"],h);const g=c(e,["maxOutputTokens"]);g!=null&&f(r,["maxOutputTokens"],g);const A=c(e,["stopSequences"]);A!=null&&f(r,["stopSequences"],A);const E=c(e,["responseLogprobs"]);E!=null&&f(r,["responseLogprobs"],E);const R=c(e,["logprobs"]);R!=null&&f(r,["logprobs"],R);const C=c(e,["presencePenalty"]);C!=null&&f(r,["presencePenalty"],C);const _=c(e,["frequencyPenalty"]);_!=null&&f(r,["frequencyPenalty"],_);const v=c(e,["seed"]);v!=null&&f(r,["seed"],v);const x=c(e,["responseMimeType"]);x!=null&&f(r,["responseMimeType"],x);const I=c(e,["responseSchema"]);I!=null&&f(r,["responseSchema"],Pc(I));const P=c(e,["responseJsonSchema"]);if(P!=null&&f(r,["responseJsonSchema"],P),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=c(e,["safetySettings"]);if(s!==void 0&&k!=null){let Tt=k;Array.isArray(Tt)&&(Tt=Tt.map(j=>Zb(j))),f(s,["safetySettings"],Tt)}const V=c(e,["tools"]);if(s!==void 0&&V!=null){let Tt=Ys(V);Array.isArray(Tt)&&(Tt=Tt.map(j=>oC(Bs(j)))),f(s,["tools"],Tt)}const O=c(e,["toolConfig"]);if(s!==void 0&&O!=null&&f(s,["toolConfig"],sC(O)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=c(e,["cachedContent"]);s!==void 0&&q!=null&&f(s,["cachedContent"],ei(i,q));const et=c(e,["responseModalities"]);et!=null&&f(r,["responseModalities"],et);const W=c(e,["mediaResolution"]);W!=null&&f(r,["mediaResolution"],W);const lt=c(e,["speechConfig"]);if(lt!=null&&f(r,["speechConfig"],kc(lt)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const gt=c(e,["thinkingConfig"]);gt!=null&&f(r,["thinkingConfig"],gt);const Rt=c(e,["imageConfig"]);Rt!=null&&f(r,["imageConfig"],kb(Rt));const _t=c(e,["enableEnhancedCivicAnswers"]);if(_t!=null&&f(r,["enableEnhancedCivicAnswers"],_t),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function ub(i,e,s,o){const r={},u=c(e,["systemInstruction"]);s!==void 0&&u!=null&&f(s,["systemInstruction"],Be(u));const d=c(e,["temperature"]);d!=null&&f(r,["temperature"],d);const p=c(e,["topP"]);p!=null&&f(r,["topP"],p);const y=c(e,["topK"]);y!=null&&f(r,["topK"],y);const h=c(e,["candidateCount"]);h!=null&&f(r,["candidateCount"],h);const g=c(e,["maxOutputTokens"]);g!=null&&f(r,["maxOutputTokens"],g);const A=c(e,["stopSequences"]);A!=null&&f(r,["stopSequences"],A);const E=c(e,["responseLogprobs"]);E!=null&&f(r,["responseLogprobs"],E);const R=c(e,["logprobs"]);R!=null&&f(r,["logprobs"],R);const C=c(e,["presencePenalty"]);C!=null&&f(r,["presencePenalty"],C);const _=c(e,["frequencyPenalty"]);_!=null&&f(r,["frequencyPenalty"],_);const v=c(e,["seed"]);v!=null&&f(r,["seed"],v);const x=c(e,["responseMimeType"]);x!=null&&f(r,["responseMimeType"],x);const I=c(e,["responseSchema"]);I!=null&&f(r,["responseSchema"],Pc(I));const P=c(e,["responseJsonSchema"]);P!=null&&f(r,["responseJsonSchema"],P);const k=c(e,["routingConfig"]);k!=null&&f(r,["routingConfig"],k);const V=c(e,["modelSelectionConfig"]);V!=null&&f(r,["modelConfig"],V);const O=c(e,["safetySettings"]);if(s!==void 0&&O!=null){let vt=O;Array.isArray(vt)&&(vt=vt.map(ot=>ot)),f(s,["safetySettings"],vt)}const q=c(e,["tools"]);if(s!==void 0&&q!=null){let vt=Ys(q);Array.isArray(vt)&&(vt=vt.map(ot=>pv(Bs(ot)))),f(s,["tools"],vt)}const et=c(e,["toolConfig"]);s!==void 0&&et!=null&&f(s,["toolConfig"],et);const W=c(e,["labels"]);s!==void 0&&W!=null&&f(s,["labels"],W);const lt=c(e,["cachedContent"]);s!==void 0&&lt!=null&&f(s,["cachedContent"],ei(i,lt));const gt=c(e,["responseModalities"]);gt!=null&&f(r,["responseModalities"],gt);const Rt=c(e,["mediaResolution"]);Rt!=null&&f(r,["mediaResolution"],Rt);const _t=c(e,["speechConfig"]);_t!=null&&f(r,["speechConfig"],kc(_t));const Tt=c(e,["audioTimestamp"]);Tt!=null&&f(r,["audioTimestamp"],Tt);const j=c(e,["thinkingConfig"]);j!=null&&f(r,["thinkingConfig"],j);const X=c(e,["imageConfig"]);if(X!=null&&f(r,["imageConfig"],Fb(X)),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const dt=c(e,["modelArmorConfig"]);return s!==void 0&&dt!=null&&f(s,["modelArmorConfig"],dt),r}function dg(i,e,s){const o={},r=c(e,["model"]);r!=null&&f(o,["_url","model"],se(i,r));const u=c(e,["contents"]);if(u!=null){let p=Sn(u);Array.isArray(p)&&(p=p.map(y=>Sr(y))),f(o,["contents"],p)}const d=c(e,["config"]);return d!=null&&f(o,["generationConfig"],lb(i,d,o)),o}function fg(i,e,s){const o={},r=c(e,["model"]);r!=null&&f(o,["_url","model"],se(i,r));const u=c(e,["contents"]);if(u!=null){let p=Sn(u);Array.isArray(p)&&(p=p.map(y=>y)),f(o,["contents"],p)}const d=c(e,["config"]);return d!=null&&f(o,["generationConfig"],ub(i,d,o)),o}function hg(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&f(s,["sdkHttpResponse"],o);const r=c(i,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(g=>NE(g))),f(s,["candidates"],h)}const u=c(i,["modelVersion"]);u!=null&&f(s,["modelVersion"],u);const d=c(i,["promptFeedback"]);d!=null&&f(s,["promptFeedback"],d);const p=c(i,["responseId"]);p!=null&&f(s,["responseId"],p);const y=c(i,["usageMetadata"]);return y!=null&&f(s,["usageMetadata"],y),s}function pg(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&f(s,["sdkHttpResponse"],o);const r=c(i,["candidates"]);if(r!=null){let g=r;Array.isArray(g)&&(g=g.map(A=>A)),f(s,["candidates"],g)}const u=c(i,["createTime"]);u!=null&&f(s,["createTime"],u);const d=c(i,["modelVersion"]);d!=null&&f(s,["modelVersion"],d);const p=c(i,["promptFeedback"]);p!=null&&f(s,["promptFeedback"],p);const y=c(i,["responseId"]);y!=null&&f(s,["responseId"],y);const h=c(i,["usageMetadata"]);return h!=null&&f(s,["usageMetadata"],h),s}function cb(i,e,s){const o={};if(c(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=c(i,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const u=c(i,["aspectRatio"]);e!==void 0&&u!=null&&f(e,["parameters","aspectRatio"],u);const d=c(i,["guidanceScale"]);if(e!==void 0&&d!=null&&f(e,["parameters","guidanceScale"],d),c(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const p=c(i,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const y=c(i,["personGeneration"]);e!==void 0&&y!=null&&f(e,["parameters","personGeneration"],y);const h=c(i,["includeSafetyAttributes"]);e!==void 0&&h!=null&&f(e,["parameters","includeSafetyAttributes"],h);const g=c(i,["includeRaiReason"]);e!==void 0&&g!=null&&f(e,["parameters","includeRaiReason"],g);const A=c(i,["language"]);e!==void 0&&A!=null&&f(e,["parameters","language"],A);const E=c(i,["outputMimeType"]);e!==void 0&&E!=null&&f(e,["parameters","outputOptions","mimeType"],E);const R=c(i,["outputCompressionQuality"]);if(e!==void 0&&R!=null&&f(e,["parameters","outputOptions","compressionQuality"],R),c(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=c(i,["imageSize"]);if(e!==void 0&&C!=null&&f(e,["parameters","sampleImageSize"],C),c(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function db(i,e,s){const o={},r=c(i,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const u=c(i,["negativePrompt"]);e!==void 0&&u!=null&&f(e,["parameters","negativePrompt"],u);const d=c(i,["numberOfImages"]);e!==void 0&&d!=null&&f(e,["parameters","sampleCount"],d);const p=c(i,["aspectRatio"]);e!==void 0&&p!=null&&f(e,["parameters","aspectRatio"],p);const y=c(i,["guidanceScale"]);e!==void 0&&y!=null&&f(e,["parameters","guidanceScale"],y);const h=c(i,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const g=c(i,["safetyFilterLevel"]);e!==void 0&&g!=null&&f(e,["parameters","safetySetting"],g);const A=c(i,["personGeneration"]);e!==void 0&&A!=null&&f(e,["parameters","personGeneration"],A);const E=c(i,["includeSafetyAttributes"]);e!==void 0&&E!=null&&f(e,["parameters","includeSafetyAttributes"],E);const R=c(i,["includeRaiReason"]);e!==void 0&&R!=null&&f(e,["parameters","includeRaiReason"],R);const C=c(i,["language"]);e!==void 0&&C!=null&&f(e,["parameters","language"],C);const _=c(i,["outputMimeType"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","mimeType"],_);const v=c(i,["outputCompressionQuality"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","compressionQuality"],v);const x=c(i,["addWatermark"]);e!==void 0&&x!=null&&f(e,["parameters","addWatermark"],x);const I=c(i,["labels"]);e!==void 0&&I!=null&&f(e,["labels"],I);const P=c(i,["imageSize"]);e!==void 0&&P!=null&&f(e,["parameters","sampleImageSize"],P);const k=c(i,["enhancePrompt"]);return e!==void 0&&k!=null&&f(e,["parameters","enhancePrompt"],k),o}function fb(i,e,s){const o={},r=c(e,["model"]);r!=null&&f(o,["_url","model"],se(i,r));const u=c(e,["prompt"]);u!=null&&f(o,["instances[0]","prompt"],u);const d=c(e,["config"]);return d!=null&&cb(d,o),o}function hb(i,e,s){const o={},r=c(e,["model"]);r!=null&&f(o,["_url","model"],se(i,r));const u=c(e,["prompt"]);u!=null&&f(o,["instances[0]","prompt"],u);const d=c(e,["config"]);return d!=null&&db(d,o),o}function pb(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&f(s,["sdkHttpResponse"],o);const r=c(i,["predictions"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>wb(p))),f(s,["generatedImages"],d)}const u=c(i,["positivePromptSafetyAttributes"]);return u!=null&&f(s,["positivePromptSafetyAttributes"],fv(u)),s}function mb(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&f(s,["sdkHttpResponse"],o);const r=c(i,["predictions"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>Tr(p))),f(s,["generatedImages"],d)}const u=c(i,["positivePromptSafetyAttributes"]);return u!=null&&f(s,["positivePromptSafetyAttributes"],hv(u)),s}function gb(i,e,s){const o={},r=c(i,["numberOfVideos"]);if(e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r),c(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const u=c(i,["durationSeconds"]);if(e!==void 0&&u!=null&&f(e,["parameters","durationSeconds"],u),c(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=c(i,["aspectRatio"]);e!==void 0&&d!=null&&f(e,["parameters","aspectRatio"],d);const p=c(i,["resolution"]);e!==void 0&&p!=null&&f(e,["parameters","resolution"],p);const y=c(i,["personGeneration"]);if(e!==void 0&&y!=null&&f(e,["parameters","personGeneration"],y),c(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=c(i,["negativePrompt"]);e!==void 0&&h!=null&&f(e,["parameters","negativePrompt"],h);const g=c(i,["enhancePrompt"]);if(e!==void 0&&g!=null&&f(e,["parameters","enhancePrompt"],g),c(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const A=c(i,["lastFrame"]);e!==void 0&&A!=null&&f(e,["instances[0]","lastFrame"],Er(A));const E=c(i,["referenceImages"]);if(e!==void 0&&E!=null){let R=E;Array.isArray(R)&&(R=R.map(C=>yC(C))),f(e,["instances[0]","referenceImages"],R)}if(c(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function vb(i,e,s){const o={},r=c(i,["numberOfVideos"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const u=c(i,["outputGcsUri"]);e!==void 0&&u!=null&&f(e,["parameters","storageUri"],u);const d=c(i,["fps"]);e!==void 0&&d!=null&&f(e,["parameters","fps"],d);const p=c(i,["durationSeconds"]);e!==void 0&&p!=null&&f(e,["parameters","durationSeconds"],p);const y=c(i,["seed"]);e!==void 0&&y!=null&&f(e,["parameters","seed"],y);const h=c(i,["aspectRatio"]);e!==void 0&&h!=null&&f(e,["parameters","aspectRatio"],h);const g=c(i,["resolution"]);e!==void 0&&g!=null&&f(e,["parameters","resolution"],g);const A=c(i,["personGeneration"]);e!==void 0&&A!=null&&f(e,["parameters","personGeneration"],A);const E=c(i,["pubsubTopic"]);e!==void 0&&E!=null&&f(e,["parameters","pubsubTopic"],E);const R=c(i,["negativePrompt"]);e!==void 0&&R!=null&&f(e,["parameters","negativePrompt"],R);const C=c(i,["enhancePrompt"]);e!==void 0&&C!=null&&f(e,["parameters","enhancePrompt"],C);const _=c(i,["generateAudio"]);e!==void 0&&_!=null&&f(e,["parameters","generateAudio"],_);const v=c(i,["lastFrame"]);e!==void 0&&v!=null&&f(e,["instances[0]","lastFrame"],Rn(v));const x=c(i,["referenceImages"]);if(e!==void 0&&x!=null){let k=x;Array.isArray(k)&&(k=k.map(V=>AC(V))),f(e,["instances[0]","referenceImages"],k)}const I=c(i,["mask"]);e!==void 0&&I!=null&&f(e,["instances[0]","mask"],vC(I));const P=c(i,["compressionQuality"]);return e!==void 0&&P!=null&&f(e,["parameters","compressionQuality"],P),o}function yb(i,e){const s={},o=c(i,["name"]);o!=null&&f(s,["name"],o);const r=c(i,["metadata"]);r!=null&&f(s,["metadata"],r);const u=c(i,["done"]);u!=null&&f(s,["done"],u);const d=c(i,["error"]);d!=null&&f(s,["error"],d);const p=c(i,["response","generateVideoResponse"]);return p!=null&&f(s,["response"],Eb(p)),s}function Ab(i,e){const s={},o=c(i,["name"]);o!=null&&f(s,["name"],o);const r=c(i,["metadata"]);r!=null&&f(s,["metadata"],r);const u=c(i,["done"]);u!=null&&f(s,["done"],u);const d=c(i,["error"]);d!=null&&f(s,["error"],d);const p=c(i,["response"]);return p!=null&&f(s,["response"],bb(p)),s}function Sb(i,e,s){const o={},r=c(e,["model"]);r!=null&&f(o,["_url","model"],se(i,r));const u=c(e,["prompt"]);u!=null&&f(o,["instances[0]","prompt"],u);const d=c(e,["image"]);d!=null&&f(o,["instances[0]","image"],Er(d));const p=c(e,["video"]);p!=null&&f(o,["instances[0]","video"],mv(p));const y=c(e,["source"]);y!=null&&Cb(y,o);const h=c(e,["config"]);return h!=null&&gb(h,o),o}function Tb(i,e,s){const o={},r=c(e,["model"]);r!=null&&f(o,["_url","model"],se(i,r));const u=c(e,["prompt"]);u!=null&&f(o,["instances[0]","prompt"],u);const d=c(e,["image"]);d!=null&&f(o,["instances[0]","image"],Rn(d));const p=c(e,["video"]);p!=null&&f(o,["instances[0]","video"],gv(p));const y=c(e,["source"]);y!=null&&xb(y,o);const h=c(e,["config"]);return h!=null&&vb(h,o),o}function Eb(i,e){const s={},o=c(i,["generatedSamples"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(p=>_b(p))),f(s,["generatedVideos"],d)}const r=c(i,["raiMediaFilteredCount"]);r!=null&&f(s,["raiMediaFilteredCount"],r);const u=c(i,["raiMediaFilteredReasons"]);return u!=null&&f(s,["raiMediaFilteredReasons"],u),s}function bb(i,e){const s={},o=c(i,["videos"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(p=>Mb(p))),f(s,["generatedVideos"],d)}const r=c(i,["raiMediaFilteredCount"]);r!=null&&f(s,["raiMediaFilteredCount"],r);const u=c(i,["raiMediaFilteredReasons"]);return u!=null&&f(s,["raiMediaFilteredReasons"],u),s}function Cb(i,e,s){const o={},r=c(i,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const u=c(i,["image"]);e!==void 0&&u!=null&&f(e,["instances[0]","image"],Er(u));const d=c(i,["video"]);return e!==void 0&&d!=null&&f(e,["instances[0]","video"],mv(d)),o}function xb(i,e,s){const o={},r=c(i,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const u=c(i,["image"]);e!==void 0&&u!=null&&f(e,["instances[0]","image"],Rn(u));const d=c(i,["video"]);return e!==void 0&&d!=null&&f(e,["instances[0]","video"],gv(d)),o}function wb(i,e){const s={},o=c(i,["_self"]);o!=null&&f(s,["image"],Ub(o));const r=c(i,["raiFilteredReason"]);r!=null&&f(s,["raiFilteredReason"],r);const u=c(i,["_self"]);return u!=null&&f(s,["safetyAttributes"],fv(u)),s}function Tr(i,e){const s={},o=c(i,["_self"]);o!=null&&f(s,["image"],dv(o));const r=c(i,["raiFilteredReason"]);r!=null&&f(s,["raiFilteredReason"],r);const u=c(i,["_self"]);u!=null&&f(s,["safetyAttributes"],hv(u));const d=c(i,["prompt"]);return d!=null&&f(s,["enhancedPrompt"],d),s}function Rb(i,e){const s={},o=c(i,["_self"]);o!=null&&f(s,["mask"],dv(o));const r=c(i,["labels"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),f(s,["labels"],u)}return s}function _b(i,e){const s={},o=c(i,["video"]);return o!=null&&f(s,["video"],mC(o)),s}function Mb(i,e){const s={},o=c(i,["_self"]);return o!=null&&f(s,["video"],gC(o)),s}function Ib(i,e){const s={},o=c(i,["modelSelectionConfig"]);o!=null&&f(s,["modelConfig"],o);const r=c(i,["responseJsonSchema"]);r!=null&&f(s,["responseJsonSchema"],r);const u=c(i,["audioTimestamp"]);u!=null&&f(s,["audioTimestamp"],u);const d=c(i,["candidateCount"]);d!=null&&f(s,["candidateCount"],d);const p=c(i,["enableAffectiveDialog"]);p!=null&&f(s,["enableAffectiveDialog"],p);const y=c(i,["frequencyPenalty"]);y!=null&&f(s,["frequencyPenalty"],y);const h=c(i,["logprobs"]);h!=null&&f(s,["logprobs"],h);const g=c(i,["maxOutputTokens"]);g!=null&&f(s,["maxOutputTokens"],g);const A=c(i,["mediaResolution"]);A!=null&&f(s,["mediaResolution"],A);const E=c(i,["presencePenalty"]);E!=null&&f(s,["presencePenalty"],E);const R=c(i,["responseLogprobs"]);R!=null&&f(s,["responseLogprobs"],R);const C=c(i,["responseMimeType"]);C!=null&&f(s,["responseMimeType"],C);const _=c(i,["responseModalities"]);_!=null&&f(s,["responseModalities"],_);const v=c(i,["responseSchema"]);v!=null&&f(s,["responseSchema"],v);const x=c(i,["routingConfig"]);x!=null&&f(s,["routingConfig"],x);const I=c(i,["seed"]);I!=null&&f(s,["seed"],I);const P=c(i,["speechConfig"]);P!=null&&f(s,["speechConfig"],P);const k=c(i,["stopSequences"]);k!=null&&f(s,["stopSequences"],k);const V=c(i,["temperature"]);V!=null&&f(s,["temperature"],V);const O=c(i,["thinkingConfig"]);O!=null&&f(s,["thinkingConfig"],O);const q=c(i,["topK"]);q!=null&&f(s,["topK"],q);const et=c(i,["topP"]);if(et!=null&&f(s,["topP"],et),c(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function Nb(i,e,s){const o={},r=c(e,["model"]);return r!=null&&f(o,["_url","name"],se(i,r)),o}function Db(i,e,s){const o={},r=c(e,["model"]);return r!=null&&f(o,["_url","name"],se(i,r)),o}function Lb(i,e){const s={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(i,["enableWidget"]);return o!=null&&f(s,["enableWidget"],o),s}function Pb(i,e){const s={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(i,["timeRangeFilter"]);return o!=null&&f(s,["timeRangeFilter"],o),s}function kb(i,e){const s={},o=c(i,["aspectRatio"]);o!=null&&f(s,["aspectRatio"],o);const r=c(i,["imageSize"]);if(r!=null&&f(s,["imageSize"],r),c(i,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return s}function Fb(i,e){const s={},o=c(i,["aspectRatio"]);o!=null&&f(s,["aspectRatio"],o);const r=c(i,["imageSize"]);r!=null&&f(s,["imageSize"],r);const u=c(i,["personGeneration"]);u!=null&&f(s,["personGeneration"],u);const d=c(i,["outputMimeType"]);d!=null&&f(s,["imageOutputOptions","mimeType"],d);const p=c(i,["outputCompressionQuality"]);return p!=null&&f(s,["imageOutputOptions","compressionQuality"],p),s}function Ub(i,e){const s={},o=c(i,["bytesBase64Encoded"]);o!=null&&f(s,["imageBytes"],Ii(o));const r=c(i,["mimeType"]);return r!=null&&f(s,["mimeType"],r),s}function dv(i,e){const s={},o=c(i,["gcsUri"]);o!=null&&f(s,["gcsUri"],o);const r=c(i,["bytesBase64Encoded"]);r!=null&&f(s,["imageBytes"],Ii(r));const u=c(i,["mimeType"]);return u!=null&&f(s,["mimeType"],u),s}function Er(i,e){const s={};if(c(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=c(i,["imageBytes"]);o!=null&&f(s,["bytesBase64Encoded"],Ii(o));const r=c(i,["mimeType"]);return r!=null&&f(s,["mimeType"],r),s}function Rn(i,e){const s={},o=c(i,["gcsUri"]);o!=null&&f(s,["gcsUri"],o);const r=c(i,["imageBytes"]);r!=null&&f(s,["bytesBase64Encoded"],Ii(r));const u=c(i,["mimeType"]);return u!=null&&f(s,["mimeType"],u),s}function Ob(i,e,s,o){const r={},u=c(e,["pageSize"]);s!==void 0&&u!=null&&f(s,["_query","pageSize"],u);const d=c(e,["pageToken"]);s!==void 0&&d!=null&&f(s,["_query","pageToken"],d);const p=c(e,["filter"]);s!==void 0&&p!=null&&f(s,["_query","filter"],p);const y=c(e,["queryBase"]);return s!==void 0&&y!=null&&f(s,["_url","models_url"],sv(i,y)),r}function Gb(i,e,s,o){const r={},u=c(e,["pageSize"]);s!==void 0&&u!=null&&f(s,["_query","pageSize"],u);const d=c(e,["pageToken"]);s!==void 0&&d!=null&&f(s,["_query","pageToken"],d);const p=c(e,["filter"]);s!==void 0&&p!=null&&f(s,["_query","filter"],p);const y=c(e,["queryBase"]);return s!==void 0&&y!=null&&f(s,["_url","models_url"],sv(i,y)),r}function Hb(i,e,s){const o={},r=c(e,["config"]);return r!=null&&Ob(i,r,o),o}function Vb(i,e,s){const o={},r=c(e,["config"]);return r!=null&&Gb(i,r,o),o}function zb(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&f(s,["sdkHttpResponse"],o);const r=c(i,["nextPageToken"]);r!=null&&f(s,["nextPageToken"],r);const u=c(i,["_self"]);if(u!=null){let d=ov(u);Array.isArray(d)&&(d=d.map(p=>Ac(p))),f(s,["models"],d)}return s}function qb(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&f(s,["sdkHttpResponse"],o);const r=c(i,["nextPageToken"]);r!=null&&f(s,["nextPageToken"],r);const u=c(i,["_self"]);if(u!=null){let d=ov(u);Array.isArray(d)&&(d=d.map(p=>Sc(p))),f(s,["models"],d)}return s}function Bb(i,e){const s={},o=c(i,["maskMode"]);o!=null&&f(s,["maskMode"],o);const r=c(i,["segmentationClasses"]);r!=null&&f(s,["maskClasses"],r);const u=c(i,["maskDilation"]);return u!=null&&f(s,["dilation"],u),s}function Ac(i,e){const s={},o=c(i,["name"]);o!=null&&f(s,["name"],o);const r=c(i,["displayName"]);r!=null&&f(s,["displayName"],r);const u=c(i,["description"]);u!=null&&f(s,["description"],u);const d=c(i,["version"]);d!=null&&f(s,["version"],d);const p=c(i,["_self"]);p!=null&&f(s,["tunedModelInfo"],aC(p));const y=c(i,["inputTokenLimit"]);y!=null&&f(s,["inputTokenLimit"],y);const h=c(i,["outputTokenLimit"]);h!=null&&f(s,["outputTokenLimit"],h);const g=c(i,["supportedGenerationMethods"]);g!=null&&f(s,["supportedActions"],g);const A=c(i,["temperature"]);A!=null&&f(s,["temperature"],A);const E=c(i,["maxTemperature"]);E!=null&&f(s,["maxTemperature"],E);const R=c(i,["topP"]);R!=null&&f(s,["topP"],R);const C=c(i,["topK"]);C!=null&&f(s,["topK"],C);const _=c(i,["thinking"]);return _!=null&&f(s,["thinking"],_),s}function Sc(i,e){const s={},o=c(i,["name"]);o!=null&&f(s,["name"],o);const r=c(i,["displayName"]);r!=null&&f(s,["displayName"],r);const u=c(i,["description"]);u!=null&&f(s,["description"],u);const d=c(i,["versionId"]);d!=null&&f(s,["version"],d);const p=c(i,["deployedModels"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(R=>ib(R))),f(s,["endpoints"],E)}const y=c(i,["labels"]);y!=null&&f(s,["labels"],y);const h=c(i,["_self"]);h!=null&&f(s,["tunedModelInfo"],rC(h));const g=c(i,["defaultCheckpointId"]);g!=null&&f(s,["defaultCheckpointId"],g);const A=c(i,["checkpoints"]);if(A!=null){let E=A;Array.isArray(E)&&(E=E.map(R=>R)),f(s,["checkpoints"],E)}return s}function Yb(i,e){const s={},o=c(i,["mediaResolution"]);o!=null&&f(s,["mediaResolution"],o);const r=c(i,["codeExecutionResult"]);r!=null&&f(s,["codeExecutionResult"],r);const u=c(i,["executableCode"]);u!=null&&f(s,["executableCode"],u);const d=c(i,["fileData"]);d!=null&&f(s,["fileData"],sb(d));const p=c(i,["functionCall"]);p!=null&&f(s,["functionCall"],ob(p));const y=c(i,["functionResponse"]);y!=null&&f(s,["functionResponse"],y);const h=c(i,["inlineData"]);h!=null&&f(s,["inlineData"],IE(h));const g=c(i,["text"]);g!=null&&f(s,["text"],g);const A=c(i,["thought"]);A!=null&&f(s,["thought"],A);const E=c(i,["thoughtSignature"]);E!=null&&f(s,["thoughtSignature"],E);const R=c(i,["videoMetadata"]);return R!=null&&f(s,["videoMetadata"],R),s}function Xb(i,e){const s={},o=c(i,["productImage"]);return o!=null&&f(s,["image"],Rn(o)),s}function Jb(i,e,s){const o={},r=c(i,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const u=c(i,["baseSteps"]);e!==void 0&&u!=null&&f(e,["parameters","baseSteps"],u);const d=c(i,["outputGcsUri"]);e!==void 0&&d!=null&&f(e,["parameters","storageUri"],d);const p=c(i,["seed"]);e!==void 0&&p!=null&&f(e,["parameters","seed"],p);const y=c(i,["safetyFilterLevel"]);e!==void 0&&y!=null&&f(e,["parameters","safetySetting"],y);const h=c(i,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const g=c(i,["addWatermark"]);e!==void 0&&g!=null&&f(e,["parameters","addWatermark"],g);const A=c(i,["outputMimeType"]);e!==void 0&&A!=null&&f(e,["parameters","outputOptions","mimeType"],A);const E=c(i,["outputCompressionQuality"]);e!==void 0&&E!=null&&f(e,["parameters","outputOptions","compressionQuality"],E);const R=c(i,["enhancePrompt"]);e!==void 0&&R!=null&&f(e,["parameters","enhancePrompt"],R);const C=c(i,["labels"]);return e!==void 0&&C!=null&&f(e,["labels"],C),o}function $b(i,e,s){const o={},r=c(e,["model"]);r!=null&&f(o,["_url","model"],se(i,r));const u=c(e,["source"]);u!=null&&Qb(u,o);const d=c(e,["config"]);return d!=null&&Jb(d,o),o}function Kb(i,e){const s={},o=c(i,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>Tr(u))),f(s,["generatedImages"],r)}return s}function Qb(i,e,s){const o={},r=c(i,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const u=c(i,["personImage"]);e!==void 0&&u!=null&&f(e,["instances[0]","personImage","image"],Rn(u));const d=c(i,["productImages"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(y=>Xb(y))),f(e,["instances[0]","productImages"],p)}return o}function Wb(i,e){const s={},o=c(i,["referenceImage"]);o!=null&&f(s,["referenceImage"],Rn(o));const r=c(i,["referenceId"]);r!=null&&f(s,["referenceId"],r);const u=c(i,["referenceType"]);u!=null&&f(s,["referenceType"],u);const d=c(i,["maskImageConfig"]);d!=null&&f(s,["maskImageConfig"],Bb(d));const p=c(i,["controlImageConfig"]);p!=null&&f(s,["controlImageConfig"],UE(p));const y=c(i,["styleImageConfig"]);y!=null&&f(s,["styleImageConfig"],y);const h=c(i,["subjectImageConfig"]);return h!=null&&f(s,["subjectImageConfig"],h),s}function fv(i,e){const s={},o=c(i,["safetyAttributes","categories"]);o!=null&&f(s,["categories"],o);const r=c(i,["safetyAttributes","scores"]);r!=null&&f(s,["scores"],r);const u=c(i,["contentType"]);return u!=null&&f(s,["contentType"],u),s}function hv(i,e){const s={},o=c(i,["safetyAttributes","categories"]);o!=null&&f(s,["categories"],o);const r=c(i,["safetyAttributes","scores"]);r!=null&&f(s,["scores"],r);const u=c(i,["contentType"]);return u!=null&&f(s,["contentType"],u),s}function Zb(i,e){const s={},o=c(i,["category"]);if(o!=null&&f(s,["category"],o),c(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=c(i,["threshold"]);return r!=null&&f(s,["threshold"],r),s}function jb(i,e){const s={},o=c(i,["image"]);return o!=null&&f(s,["image"],Rn(o)),s}function tC(i,e,s){const o={},r=c(i,["mode"]);e!==void 0&&r!=null&&f(e,["parameters","mode"],r);const u=c(i,["maxPredictions"]);e!==void 0&&u!=null&&f(e,["parameters","maxPredictions"],u);const d=c(i,["confidenceThreshold"]);e!==void 0&&d!=null&&f(e,["parameters","confidenceThreshold"],d);const p=c(i,["maskDilation"]);e!==void 0&&p!=null&&f(e,["parameters","maskDilation"],p);const y=c(i,["binaryColorThreshold"]);e!==void 0&&y!=null&&f(e,["parameters","binaryColorThreshold"],y);const h=c(i,["labels"]);return e!==void 0&&h!=null&&f(e,["labels"],h),o}function eC(i,e,s){const o={},r=c(e,["model"]);r!=null&&f(o,["_url","model"],se(i,r));const u=c(e,["source"]);u!=null&&iC(u,o);const d=c(e,["config"]);return d!=null&&tC(d,o),o}function nC(i,e){const s={},o=c(i,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>Rb(u))),f(s,["generatedMasks"],r)}return s}function iC(i,e,s){const o={},r=c(i,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const u=c(i,["image"]);e!==void 0&&u!=null&&f(e,["instances[0]","image"],Rn(u));const d=c(i,["scribbleImage"]);return e!==void 0&&d!=null&&f(e,["instances[0]","scribble"],jb(d)),o}function sC(i,e){const s={},o=c(i,["retrievalConfig"]);o!=null&&f(s,["retrievalConfig"],o);const r=c(i,["functionCallingConfig"]);return r!=null&&f(s,["functionCallingConfig"],ab(r)),s}function oC(i,e){const s={};if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(i,["computerUse"]);o!=null&&f(s,["computerUse"],o);const r=c(i,["fileSearch"]);r!=null&&f(s,["fileSearch"],r);const u=c(i,["codeExecution"]);if(u!=null&&f(s,["codeExecution"],u),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=c(i,["functionDeclarations"]);if(d!=null){let A=d;Array.isArray(A)&&(A=A.map(E=>E)),f(s,["functionDeclarations"],A)}const p=c(i,["googleMaps"]);p!=null&&f(s,["googleMaps"],Lb(p));const y=c(i,["googleSearch"]);y!=null&&f(s,["googleSearch"],Pb(y));const h=c(i,["googleSearchRetrieval"]);h!=null&&f(s,["googleSearchRetrieval"],h);const g=c(i,["urlContext"]);return g!=null&&f(s,["urlContext"],g),s}function pv(i,e){const s={},o=c(i,["retrieval"]);o!=null&&f(s,["retrieval"],o);const r=c(i,["computerUse"]);if(r!=null&&f(s,["computerUse"],r),c(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=c(i,["codeExecution"]);u!=null&&f(s,["codeExecution"],u);const d=c(i,["enterpriseWebSearch"]);d!=null&&f(s,["enterpriseWebSearch"],d);const p=c(i,["functionDeclarations"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(R=>rb(R))),f(s,["functionDeclarations"],E)}const y=c(i,["googleMaps"]);y!=null&&f(s,["googleMaps"],y);const h=c(i,["googleSearch"]);h!=null&&f(s,["googleSearch"],h);const g=c(i,["googleSearchRetrieval"]);g!=null&&f(s,["googleSearchRetrieval"],g);const A=c(i,["urlContext"]);return A!=null&&f(s,["urlContext"],A),s}function aC(i,e){const s={},o=c(i,["baseModel"]);o!=null&&f(s,["baseModel"],o);const r=c(i,["createTime"]);r!=null&&f(s,["createTime"],r);const u=c(i,["updateTime"]);return u!=null&&f(s,["updateTime"],u),s}function rC(i,e){const s={},o=c(i,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&f(s,["baseModel"],o);const r=c(i,["createTime"]);r!=null&&f(s,["createTime"],r);const u=c(i,["updateTime"]);return u!=null&&f(s,["updateTime"],u),s}function lC(i,e,s){const o={},r=c(i,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const u=c(i,["description"]);e!==void 0&&u!=null&&f(e,["description"],u);const d=c(i,["defaultCheckpointId"]);return e!==void 0&&d!=null&&f(e,["defaultCheckpointId"],d),o}function uC(i,e,s){const o={},r=c(i,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const u=c(i,["description"]);e!==void 0&&u!=null&&f(e,["description"],u);const d=c(i,["defaultCheckpointId"]);return e!==void 0&&d!=null&&f(e,["defaultCheckpointId"],d),o}function cC(i,e,s){const o={},r=c(e,["model"]);r!=null&&f(o,["_url","name"],se(i,r));const u=c(e,["config"]);return u!=null&&lC(u,o),o}function dC(i,e,s){const o={},r=c(e,["model"]);r!=null&&f(o,["_url","model"],se(i,r));const u=c(e,["config"]);return u!=null&&uC(u,o),o}function fC(i,e,s){const o={},r=c(i,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const u=c(i,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const d=c(i,["personGeneration"]);e!==void 0&&d!=null&&f(e,["parameters","personGeneration"],d);const p=c(i,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const y=c(i,["outputMimeType"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","mimeType"],y);const h=c(i,["outputCompressionQuality"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","compressionQuality"],h);const g=c(i,["enhanceInputImage"]);e!==void 0&&g!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],g);const A=c(i,["imagePreservationFactor"]);e!==void 0&&A!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],A);const E=c(i,["labels"]);e!==void 0&&E!=null&&f(e,["labels"],E);const R=c(i,["numberOfImages"]);e!==void 0&&R!=null&&f(e,["parameters","sampleCount"],R);const C=c(i,["mode"]);return e!==void 0&&C!=null&&f(e,["parameters","mode"],C),o}function hC(i,e,s){const o={},r=c(e,["model"]);r!=null&&f(o,["_url","model"],se(i,r));const u=c(e,["image"]);u!=null&&f(o,["instances[0]","image"],Rn(u));const d=c(e,["upscaleFactor"]);d!=null&&f(o,["parameters","upscaleConfig","upscaleFactor"],d);const p=c(e,["config"]);return p!=null&&fC(p,o),o}function pC(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&f(s,["sdkHttpResponse"],o);const r=c(i,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>Tr(d))),f(s,["generatedImages"],u)}return s}function mC(i,e){const s={},o=c(i,["uri"]);o!=null&&f(s,["uri"],o);const r=c(i,["encodedVideo"]);r!=null&&f(s,["videoBytes"],Ii(r));const u=c(i,["encoding"]);return u!=null&&f(s,["mimeType"],u),s}function gC(i,e){const s={},o=c(i,["gcsUri"]);o!=null&&f(s,["uri"],o);const r=c(i,["bytesBase64Encoded"]);r!=null&&f(s,["videoBytes"],Ii(r));const u=c(i,["mimeType"]);return u!=null&&f(s,["mimeType"],u),s}function vC(i,e){const s={},o=c(i,["image"]);o!=null&&f(s,["_self"],Rn(o));const r=c(i,["maskMode"]);return r!=null&&f(s,["maskMode"],r),s}function yC(i,e){const s={},o=c(i,["image"]);o!=null&&f(s,["image"],Er(o));const r=c(i,["referenceType"]);return r!=null&&f(s,["referenceType"],r),s}function AC(i,e){const s={},o=c(i,["image"]);o!=null&&f(s,["image"],Rn(o));const r=c(i,["referenceType"]);return r!=null&&f(s,["referenceType"],r),s}function mv(i,e){const s={},o=c(i,["uri"]);o!=null&&f(s,["uri"],o);const r=c(i,["videoBytes"]);r!=null&&f(s,["encodedVideo"],Ii(r));const u=c(i,["mimeType"]);return u!=null&&f(s,["encoding"],u),s}function gv(i,e){const s={},o=c(i,["uri"]);o!=null&&f(s,["gcsUri"],o);const r=c(i,["videoBytes"]);r!=null&&f(s,["bytesBase64Encoded"],Ii(r));const u=c(i,["mimeType"]);return u!=null&&f(s,["mimeType"],u),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SC(i,e){const s={},o=c(i,["displayName"]);return e!==void 0&&o!=null&&f(e,["displayName"],o),s}function TC(i){const e={},s=c(i,["config"]);return s!=null&&SC(s,e),e}function EC(i,e){const s={},o=c(i,["force"]);return e!==void 0&&o!=null&&f(e,["_query","force"],o),s}function bC(i){const e={},s=c(i,["name"]);s!=null&&f(e,["_url","name"],s);const o=c(i,["config"]);return o!=null&&EC(o,e),e}function CC(i){const e={},s=c(i,["name"]);return s!=null&&f(e,["_url","name"],s),e}function xC(i,e){const s={},o=c(i,["customMetadata"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["customMetadata"],u)}const r=c(i,["chunkingConfig"]);return e!==void 0&&r!=null&&f(e,["chunkingConfig"],r),s}function wC(i){const e={},s=c(i,["name"]);s!=null&&f(e,["name"],s);const o=c(i,["metadata"]);o!=null&&f(e,["metadata"],o);const r=c(i,["done"]);r!=null&&f(e,["done"],r);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response"]);return d!=null&&f(e,["response"],_C(d)),e}function RC(i){const e={},s=c(i,["fileSearchStoreName"]);s!=null&&f(e,["_url","file_search_store_name"],s);const o=c(i,["fileName"]);o!=null&&f(e,["fileName"],o);const r=c(i,["config"]);return r!=null&&xC(r,e),e}function _C(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&f(e,["sdkHttpResponse"],s);const o=c(i,["parent"]);o!=null&&f(e,["parent"],o);const r=c(i,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function MC(i,e){const s={},o=c(i,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const r=c(i,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),s}function IC(i){const e={},s=c(i,["config"]);return s!=null&&MC(s,e),e}function NC(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&f(e,["sdkHttpResponse"],s);const o=c(i,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const r=c(i,["fileSearchStores"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["fileSearchStores"],u)}return e}function vv(i,e){const s={},o=c(i,["mimeType"]);e!==void 0&&o!=null&&f(e,["mimeType"],o);const r=c(i,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const u=c(i,["customMetadata"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(y=>y)),f(e,["customMetadata"],p)}const d=c(i,["chunkingConfig"]);return e!==void 0&&d!=null&&f(e,["chunkingConfig"],d),s}function DC(i){const e={},s=c(i,["fileSearchStoreName"]);s!=null&&f(e,["_url","file_search_store_name"],s);const o=c(i,["config"]);return o!=null&&vv(o,e),e}function LC(i){const e={},s=c(i,["sdkHttpResponse"]);return s!=null&&f(e,["sdkHttpResponse"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PC="Content-Type",kC="X-Server-Timeout",FC="User-Agent",Tc="x-goog-api-client",UC="1.41.0",OC=`google-genai-sdk/${UC}`,GC="v1beta1",HC="v1beta",VC=5,zC=[408,429,500,502,503,504];class qC{constructor(e){var s,o,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(s=e.httpOptions)===null||s===void 0?void 0:s.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const u={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const p=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!p?(u.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?u.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(u.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),u.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:GC}else{if(!this.clientOptions.apiKey)throw new qo({message:"API key must be set when using the Gemini API.",status:403});u.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:HC,u.baseUrl="https://generativelanguage.googleapis.com/"}u.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=u,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(u,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),s=new URL(e);return s.protocol=s.protocol=="http:"?"ws":"wss",s.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,s,o){const r=[this.getRequestUrlInternal(s)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,s){return!(s.baseUrl&&s.baseUrlResourceScope===mc.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,s),r=this.constructUrl(e.path,s,o);if(e.queryParams)for(const[d,p]of Object.entries(e.queryParams))r.searchParams.append(d,String(p));let u={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else u.body=e.body;return u=await this.includeExtraHttpOptionsToRequestInit(u,s,r.toString(),e.abortSignal),this.unaryApiCall(r,u,e.httpMethod)}patchHttpOptions(e,s){const o=JSON.parse(JSON.stringify(e));for(const[r,u]of Object.entries(s))typeof u=="object"?o[r]=Object.assign(Object.assign({},o[r]),u):u!==void 0&&(o[r]=u);return o}async requestStream(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,s),r=this.constructUrl(e.path,s,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let u={};return u.body=e.body,u=await this.includeExtraHttpOptionsToRequestInit(u,s,r.toString(),e.abortSignal),this.streamApiCall(r,u,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,s,o,r){if(s&&s.timeout||r){const u=new AbortController,d=u.signal;if(s.timeout&&s?.timeout>0){const p=setTimeout(()=>u.abort(),s.timeout);p&&typeof p.unref=="function"&&p.unref()}r&&r.addEventListener("abort",()=>{u.abort()}),e.signal=d}return s&&s.extraBody!==null&&BC(e,s.extraBody),e.headers=await this.getHeadersInternal(s,o),e}async unaryApiCall(e,s,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:o})).then(async r=>(await mg(r),new gc(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,s,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:o})).then(async r=>(await mg(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return xn(this,arguments,function*(){var o;const r=(o=e?.body)===null||o===void 0?void 0:o.getReader(),u=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let d="";const p="data:",y=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:g}=yield zt(r.read());if(h){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const A=u.decode(g,{stream:!0});try{const C=JSON.parse(A);if("error"in C){const _=JSON.parse(JSON.stringify(C.error)),v=_.status,x=_.code,I=`got status: ${v}. ${JSON.stringify(C)}`;if(x>=400&&x<600)throw new qo({message:I,status:x})}}catch(C){if(C.name==="ApiError")throw C}d+=A;let E=-1,R=0;for(;;){E=-1,R=0;for(const v of y){const x=d.indexOf(v);x!==-1&&(E===-1||x<E)&&(E=x,R=v.length)}if(E===-1)break;const C=d.substring(0,E);d=d.substring(E+R);const _=C.trim();if(_.startsWith(p)){const v=_.substring(p.length).trim();try{const x=new Response(v,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield zt(new gc(x))}catch(x){throw new Error(`exception parsing stream chunk ${v}. ${x}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,s){var o;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,s);const r=this.clientOptions.httpOptions.retryOptions;return LA(async()=>{const d=await fetch(e,s);if(d.ok)return d;throw zC.includes(d.status)?new Error(`Retryable HTTP Error: ${d.statusText}`):new Kg(`Non-retryable exception ${d.statusText} sending request`)},{retries:((o=r.attempts)!==null&&o!==void 0?o:VC)-1})}getDefaultHeaders(){const e={},s=OC+" "+this.clientOptions.userAgentExtra;return e[FC]=s,e[Tc]=s,e[PC]="application/json",e}async getHeadersInternal(e,s){const o=new Headers;if(e&&e.headers){for(const[r,u]of Object.entries(e.headers))o.append(r,u);e.timeout&&e.timeout>0&&o.append(kC,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,s),o}getFileName(e){var s;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(s=o.split(/[/\\]/).pop())!==null&&s!==void 0?s:""),o}async uploadFile(e,s){var o;const r={};s!=null&&(r.mimeType=s.mimeType,r.name=s.name,r.displayName=s.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const u=this.clientOptions.uploader,d=await u.stat(e);r.sizeBytes=String(d.size);const p=(o=s?.mimeType)!==null&&o!==void 0?o:d.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=p;const y={file:r},h=this.getFileName(e),g=It("upload/v1beta/files",y._url),A=await this.fetchUploadUrl(g,r.sizeBytes,r.mimeType,h,y,s?.httpOptions);return u.upload(e,A,this)}async uploadFileToFileSearchStore(e,s,o){var r;const u=this.clientOptions.uploader,d=await u.stat(s),p=String(d.size),y=(r=o?.mimeType)!==null&&r!==void 0?r:d.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,g=this.getFileName(s),A={};o!=null&&vv(o,A);const E=await this.fetchUploadUrl(h,p,y,g,A,o?.httpOptions);return u.uploadToFileSearchStore(s,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,s,o,r,u,d){var p;let y={};d?y=d:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(u),httpMethod:"POST",httpOptions:y});if(!h||!h?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(p=h?.headers)===null||p===void 0?void 0:p["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function mg(i){var e;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const s=i.status;let o;!((e=i.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await i.json():o={error:{message:await i.text(),code:i.status,status:i.statusText}};const r=JSON.stringify(o);throw s>=400&&s<600?new qo({message:r,status:s}):new Error(r)}}function BC(i,e){if(!e||Object.keys(e).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let s={};if(typeof i.body=="string"&&i.body.length>0)try{const u=JSON.parse(i.body);if(typeof u=="object"&&u!==null&&!Array.isArray(u))s=u;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(u,d){const p=Object.assign({},u);for(const y in d)if(Object.prototype.hasOwnProperty.call(d,y)){const h=d[y],g=p[y];h&&typeof h=="object"&&!Array.isArray(h)&&g&&typeof g=="object"&&!Array.isArray(g)?p[y]=o(g,h):(g&&h&&typeof g!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof g}, New type: ${typeof h}. Overwriting.`),p[y]=h)}return p}const r=o(s,e);i.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YC="mcp_used/unknown";let XC=!1;function yv(i){for(const e of i)if(JC(e)||typeof e=="object"&&"inputSchema"in e)return!0;return XC}function Av(i){var e;const s=(e=i[Tc])!==null&&e!==void 0?e:"";i[Tc]=(s+` ${YC}`).trimStart()}function JC(i){return i!==null&&typeof i=="object"&&i instanceof Uc}function $C(i){return xn(this,arguments,function*(s,o=100){let r,u=0;for(;u<o;){const d=yield zt(s.listTools({cursor:r}));for(const p of d.tools)yield yield zt(p),u++;if(!d.nextCursor)break;r=d.nextCursor}})}class Uc{constructor(e=[],s){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=s}static create(e,s){return new Uc(e,s)}async initialize(){var e,s,o,r;if(this.mcpTools.length>0)return;const u={},d=[];for(const g of this.mcpClients)try{for(var p=!0,y=(s=void 0,wn($C(g))),h;h=await y.next(),e=h.done,!e;p=!0){r=h.value,p=!1;const A=r;d.push(A);const E=A.name;if(u[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);u[E]=g}}catch(A){s={error:A}}finally{try{!p&&!e&&(o=y.return)&&await o.call(y)}finally{if(s)throw s.error}}this.mcpTools=d,this.functionNameToMcpClient=u}async tool(){return await this.initialize(),TS(this.mcpTools,this.config)}async callTool(e){await this.initialize();const s=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let u;this.config.timeout&&(u={timeout:this.config.timeout});const d=await r.callTool({name:o.name,arguments:o.args},void 0,u);s.push({functionResponse:{name:o.name,response:d.isError?{error:d}:d}})}return s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function KC(i,e,s){const o=new hS;let r;s.data instanceof Blob?r=JSON.parse(await s.data.text()):r=JSON.parse(s.data),Object.assign(o,r),e(o)}class QC{constructor(e,s,o){this.apiClient=e,this.auth=s,this.webSocketFactory=o}async connect(e){var s,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),d=jC(this.apiClient.getDefaultHeaders()),p=this.apiClient.getApiKey(),y=`${r}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateMusic?key=${p}`;let h=()=>{};const g=new Promise(P=>{h=P}),A=e.callbacks,E=function(){h({})},R=this.apiClient,C={onopen:E,onmessage:P=>{KC(R,A.onmessage,P)},onerror:(s=A?.onerror)!==null&&s!==void 0?s:function(P){},onclose:(o=A?.onclose)!==null&&o!==void 0?o:function(P){}},_=this.webSocketFactory.create(y,ZC(d),C);_.connect(),await g;const I={setup:{model:se(this.apiClient,e.model)}};return _.send(JSON.stringify(I)),new WC(_,this.apiClient)}}class WC{constructor(e,s){this.conn=e,this.apiClient=s}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const s=SE(e);this.conn.send(JSON.stringify({clientContent:s}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const s=AE(e);this.conn.send(JSON.stringify(s))}sendPlaybackControl(e){const s={playbackControl:e};this.conn.send(JSON.stringify(s))}play(){this.sendPlaybackControl(Hs.PLAY)}pause(){this.sendPlaybackControl(Hs.PAUSE)}stop(){this.sendPlaybackControl(Hs.STOP)}resetContext(){this.sendPlaybackControl(Hs.RESET_CONTEXT)}close(){this.conn.close()}}function ZC(i){const e={};return i.forEach((s,o)=>{e[o]=s}),e}function jC(i){const e=new Headers;for(const[s,o]of Object.entries(i))e.append(s,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tx="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function ex(i,e,s){const o=new fS;let r;s.data instanceof Blob?r=await s.data.text():s.data instanceof ArrayBuffer?r=new TextDecoder().decode(s.data):r=s.data;const u=JSON.parse(r);if(i.isVertexAI()){const d=bE(u);Object.assign(o,d)}else Object.assign(o,u);e(o)}class nx{constructor(e,s,o){this.apiClient=e,this.auth=s,this.webSocketFactory=o,this.music=new QC(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var s,o,r,u,d,p;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let g;const A=this.apiClient.getHeaders();e.config&&e.config.tools&&yv(e.config.tools)&&Av(A);const E=ax(A);if(this.apiClient.isVertexAI()){const W=this.apiClient.getProject(),lt=this.apiClient.getLocation(),gt=this.apiClient.getApiKey(),Rt=!!W&&!!lt||!!gt;this.apiClient.getCustomBaseUrl()&&!Rt?g=y:(g=`${y}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,g))}else{const W=this.apiClient.getApiKey();let lt="BidiGenerateContent",gt="key";W?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),lt="BidiGenerateContentConstrained",gt="access_token"),g=`${y}/ws/google.ai.generativelanguage.${h}.GenerativeService.${lt}?${gt}=${W}`}let R=()=>{};const C=new Promise(W=>{R=W}),_=e.callbacks,v=function(){var W;(W=_?.onopen)===null||W===void 0||W.call(_),R({})},x=this.apiClient,I={onopen:v,onmessage:W=>{ex(x,_.onmessage,W)},onerror:(s=_?.onerror)!==null&&s!==void 0?s:function(W){},onclose:(o=_?.onclose)!==null&&o!==void 0?o:function(W){}},P=this.webSocketFactory.create(g,ox(E),I);P.connect(),await C;let k=se(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&k.startsWith("publishers/")){const W=this.apiClient.getProject(),lt=this.apiClient.getLocation();W&&lt&&(k=`projects/${W}/locations/${lt}/`+k)}let V={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[pr.AUDIO]}:e.config.responseModalities=[pr.AUDIO]),!((u=e.config)===null||u===void 0)&&u.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const O=(p=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&p!==void 0?p:[],q=[];for(const W of O)if(this.isCallableTool(W)){const lt=W;q.push(await lt.tool())}else q.push(W);q.length>0&&(e.config.tools=q);const et={model:k,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?V=yE(this.apiClient,et):V=vE(this.apiClient,et),delete V.config,P.send(JSON.stringify(V)),new sx(P,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const ix={turnComplete:!0};class sx{constructor(e,s){this.conn=e,this.apiClient=s}tLiveClientContent(e,s){if(s.turns!==null&&s.turns!==void 0){let o=[];try{o=Sn(s.turns),e.isVertexAI()||(o=o.map(r=>Sr(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof s.turns}'`)}return{clientContent:{turns:o,turnComplete:s.turnComplete}}}return{clientContent:{turnComplete:s.turnComplete}}}tLiveClienttToolResponse(e,s){let o=[];if(s.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(s.functionResponses)?o=s.functionResponses:o=[s.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const u of o){if(typeof u!="object"||u===null||!("name"in u)||!("response"in u))throw new Error(`Could not parse function response, type '${typeof u}'.`);if(!e.isVertexAI()&&!("id"in u))throw new Error(tx)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},ix),e);const s=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(s))}sendRealtimeInput(e){let s={};this.apiClient.isVertexAI()?s={realtimeInput:EE(e)}:s={realtimeInput:TE(e)},this.conn.send(JSON.stringify(s))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const s=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(s))}close(){this.conn.close()}}function ox(i){const e={};return i.forEach((s,o)=>{e[o]=s}),e}function ax(i){const e=new Headers;for(const[s,o]of Object.entries(i))e.append(s,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gg=10;function vg(i){var e,s,o;if(!((e=i?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const d of(s=i?.tools)!==null&&s!==void 0?s:[])if(qs(d)){r=!0;break}if(!r)return!0;const u=(o=i?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return u&&(u<0||!Number.isInteger(u))||u==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",u),!0):!1}function qs(i){return"callTool"in i&&typeof i.callTool=="function"}function rx(i){var e,s,o;return(o=(s=(e=i.config)===null||e===void 0?void 0:e.tools)===null||s===void 0?void 0:s.some(r=>qs(r)))!==null&&o!==void 0?o:!1}function yg(i){var e;const s=[];return!((e=i?.config)===null||e===void 0)&&e.tools&&i.config.tools.forEach((o,r)=>{if(qs(o))return;const u=o;u.functionDeclarations&&u.functionDeclarations.length>0&&s.push(r)}),s}function Ag(i){var e;return!(!((e=i?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lx extends ti{constructor(e){super(),this.apiClient=e,this.generateContent=async s=>{var o,r,u,d,p;const y=await this.processParamsMaybeAddMcpUsage(s);if(this.maybeMoveToResponseJsonSchem(s),!rx(s)||vg(s.config))return await this.generateContentInternal(y);const h=yg(s);if(h.length>0){const _=h.map(v=>`tools[${v}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${_}.`)}let g,A;const E=Sn(y.contents),R=(u=(r=(o=y.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&u!==void 0?u:gg;let C=0;for(;C<R&&(g=await this.generateContentInternal(y),!(!g.functionCalls||g.functionCalls.length===0));){const _=g.candidates[0].content,v=[];for(const x of(p=(d=s.config)===null||d===void 0?void 0:d.tools)!==null&&p!==void 0?p:[])if(qs(x)){const P=await x.callTool(g.functionCalls);v.push(...P)}C++,A={role:"user",parts:v},y.contents=Sn(y.contents),y.contents.push(_),y.contents.push(A),Ag(y.config)&&(E.push(_),E.push(A))}return Ag(y.config)&&(g.automaticFunctionCallingHistory=E),g},this.generateContentStream=async s=>{var o,r,u,d,p;if(this.maybeMoveToResponseJsonSchem(s),vg(s.config)){const A=await this.processParamsMaybeAddMcpUsage(s);return await this.generateContentStreamInternal(A)}const y=yg(s);if(y.length>0){const A=y.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${A}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(u=(r=(o=s?.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||u===void 0?void 0:u.streamFunctionCallArguments,g=(p=(d=s?.config)===null||d===void 0?void 0:d.automaticFunctionCalling)===null||p===void 0?void 0:p.disable;if(h&&!g)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(s)},this.generateImages=async s=>await this.generateImagesInternal(s).then(o=>{var r;let u;const d=[];if(o?.generatedImages)for(const y of o.generatedImages)y&&y?.safetyAttributes&&((r=y?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?u=y?.safetyAttributes:d.push(y);let p;return u?p={generatedImages:d,positivePromptSafetyAttributes:u,sdkHttpResponse:o.sdkHttpResponse}:p={generatedImages:d,sdkHttpResponse:o.sdkHttpResponse},p}),this.list=async s=>{var o;const d={config:Object.assign(Object.assign({},{queryBase:!0}),s?.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((o=d.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new Wi(jn.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(d),d)},this.editImage=async s=>{const o={model:s.model,prompt:s.prompt,referenceImages:[],config:s.config};return s.referenceImages&&s.referenceImages&&(o.referenceImages=s.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async s=>{let o={numberOfImages:1,mode:"upscale"};s.config&&(o=Object.assign(Object.assign({},o),s.config));const r={model:s.model,image:s.image,upscaleFactor:s.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async s=>{var o,r,u,d,p,y;if((s.prompt||s.image||s.video)&&s.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=s.video)===null||o===void 0)&&o.uri&&(!((r=s.video)===null||r===void 0)&&r.videoBytes)?s.video={uri:s.video.uri,mimeType:s.video.mimeType}:!((d=(u=s.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.uri&&(!((y=(p=s.source)===null||p===void 0?void 0:p.video)===null||y===void 0)&&y.videoBytes)&&(s.source.video={uri:s.source.video.uri,mimeType:s.source.video.mimeType})),await this.generateVideosInternal(s)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var s,o,r;const u=(s=e.config)===null||s===void 0?void 0:s.tools;if(!u)return e;const d=await Promise.all(u.map(async y=>qs(y)?await y.tool():y)),p={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(p.config.tools=d,e.config&&e.config.tools&&yv(e.config.tools)){const y=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},y);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),Av(h),p.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return p}async initAfcToolsMap(e){var s,o,r;const u=new Map;for(const d of(o=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&o!==void 0?o:[])if(qs(d)){const p=d,y=await p.tool();for(const h of(r=y.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(u.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);u.set(h.name,p)}}return u}async processAfcStream(e){var s,o,r;const u=(r=(o=(s=e.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:gg;let d=!1,p=0;const y=await this.initAfcToolsMap(e);return(function(h,g,A){return xn(this,arguments,function*(){for(var E,R,C,_,v,x;p<u;){d&&(p++,d=!1);const V=yield zt(h.processParamsMaybeAddMcpUsage(A)),O=yield zt(h.generateContentStreamInternal(V)),q=[],et=[];try{for(var I=!0,P=(R=void 0,wn(O)),k;k=yield zt(P.next()),E=k.done,!E;I=!0){_=k.value,I=!1;const W=_;if(yield yield zt(W),W.candidates&&(!((v=W.candidates[0])===null||v===void 0)&&v.content)){et.push(W.candidates[0].content);for(const lt of(x=W.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(p<u&&lt.functionCall){if(!lt.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(lt.functionCall.name)){const gt=yield zt(g.get(lt.functionCall.name).callTool([lt.functionCall]));q.push(...gt)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${lt.functionCall.name}`)}}}}catch(W){R={error:W}}finally{try{!I&&!E&&(C=P.return)&&(yield zt(C.call(P)))}finally{if(R)throw R.error}}if(q.length>0){d=!0;const W=new Go;W.candidates=[{content:{role:"user",parts:q}}],yield yield zt(W);const lt=[];lt.push(...et),lt.push({role:"user",parts:q});const gt=Sn(A.contents).concat(lt);A.contents=gt}else break}})})(this,y,e)}async generateContentInternal(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=fg(this.apiClient,e);return p=It("{model}:generateContent",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=pg(g),E=new Go;return Object.assign(E,A),E})}else{const h=dg(this.apiClient,e);return p=It("{model}:generateContent",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=hg(g),E=new Go;return Object.assign(E,A),E})}}async generateContentStreamInternal(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=fg(this.apiClient,e);return p=It("{model}:streamGenerateContent?alt=sse",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.requestStream({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),d.then(function(A){return xn(this,arguments,function*(){var E,R,C,_;try{for(var v=!0,x=wn(A),I;I=yield zt(x.next()),E=I.done,!E;v=!0){_=I.value,v=!1;const P=_,k=pg(yield zt(P.json()),e);k.sdkHttpResponse={headers:P.headers};const V=new Go;Object.assign(V,k),yield yield zt(V)}}catch(P){R={error:P}}finally{try{!v&&!E&&(C=x.return)&&(yield zt(C.call(x)))}finally{if(R)throw R.error}}})})}else{const h=dg(this.apiClient,e);return p=It("{model}:streamGenerateContent?alt=sse",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.requestStream({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}),d.then(function(A){return xn(this,arguments,function*(){var E,R,C,_;try{for(var v=!0,x=wn(A),I;I=yield zt(x.next()),E=I.done,!E;v=!0){_=I.value,v=!1;const P=_,k=hg(yield zt(P.json()),e);k.sdkHttpResponse={headers:P.headers};const V=new Go;Object.assign(V,k),yield yield zt(V)}}catch(P){R={error:P}}finally{try{!v&&!E&&(C=x.return)&&(yield zt(C.call(x)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=tb(this.apiClient,e);return p=It("{model}:predict",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=nb(g),E=new $m;return Object.assign(E,A),E})}else{const h=jE(this.apiClient,e);return p=It("{model}:batchEmbedContents",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=eb(g),E=new $m;return Object.assign(E,A),E})}}async generateImagesInternal(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=hb(this.apiClient,e);return p=It("{model}:predict",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=mb(g),E=new Km;return Object.assign(E,A),E})}else{const h=fb(this.apiClient,e);return p=It("{model}:predict",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=pb(g),E=new Km;return Object.assign(E,A),E})}}async editImageInternal(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI()){const p=KE(this.apiClient,e);return u=It("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:y.headers},g})),r.then(y=>{const h=QE(y),g=new tS;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI()){const p=hC(this.apiClient,e);return u=It("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:y.headers},g})),r.then(y=>{const h=pC(y),g=new eS;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI()){const p=$b(this.apiClient,e);return u=It("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const h=Kb(y),g=new nS;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI()){const p=eC(this.apiClient,e);return u=It("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const h=nC(y),g=new iS;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=Db(this.apiClient,e);return p=It("{name}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),d.then(g=>Sc(g))}else{const h=Nb(this.apiClient,e);return p=It("{name}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json()),d.then(g=>Ac(g))}}async listInternal(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=Vb(this.apiClient,e);return p=It("{models_url}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=qb(g),E=new Qm;return Object.assign(E,A),E})}else{const h=Hb(this.apiClient,e);return p=It("{models_url}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=zb(g),E=new Qm;return Object.assign(E,A),E})}}async update(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=dC(this.apiClient,e);return p=It("{model}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),d.then(g=>Sc(g))}else{const h=cC(this.apiClient,e);return p=It("{name}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json()),d.then(g=>Ac(g))}}async delete(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=YE(this.apiClient,e);return p=It("{name}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=JE(g),E=new Wm;return Object.assign(E,A),E})}else{const h=BE(this.apiClient,e);return p=It("{name}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=XE(g),E=new Wm;return Object.assign(E,A),E})}}async countTokens(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=VE(this.apiClient,e);return p=It("{model}:countTokens",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=qE(g),E=new Zm;return Object.assign(E,A),E})}else{const h=HE(this.apiClient,e);return p=It("{model}:countTokens",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=zE(g),E=new Zm;return Object.assign(E,A),E})}}async computeTokens(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI()){const p=LE(this.apiClient,e);return u=It("{model}:computeTokens",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:y.headers},g})),r.then(y=>{const h=PE(y),g=new sS;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=Tb(this.apiClient,e);return p=It("{model}:predictLongRunning",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),d.then(g=>{const A=Ab(g),E=new mr;return Object.assign(E,A),E})}else{const h=Sb(this.apiClient,e);return p=It("{model}:predictLongRunning",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json()),d.then(g=>{const A=yb(g),E=new mr;return Object.assign(E,A),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ux extends ti{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const s=e.operation,o=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=s.name.split("/operations/")[0];let u;o&&"httpOptions"in o&&(u=o.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:r,config:{httpOptions:u}});return s._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:s.name,config:o});return s._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const s=e.operation,o=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=s.name.split("/operations/")[0];let u;o&&"httpOptions"in o&&(u=o.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:r,config:{httpOptions:u}});return s._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:s.name,config:o});return s._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=$A(e);return p=It("{operationName}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),d}else{const h=JA(e);return p=It("{operationName}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json()),d}}async fetchPredictVideosOperationInternal(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI()){const p=HA(e);return u=It("{resourceName}:fetchPredictOperation",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cx(i){const e={},s=c(i,["data"]);if(s!=null&&f(e,["data"],s),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function dx(i){const e={},s=c(i,["parts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>Sx(u))),f(e,["parts"],r)}const o=c(i,["role"]);return o!=null&&f(e,["role"],o),e}function fx(i,e,s){const o={},r=c(e,["expireTime"]);s!==void 0&&r!=null&&f(s,["expireTime"],r);const u=c(e,["newSessionExpireTime"]);s!==void 0&&u!=null&&f(s,["newSessionExpireTime"],u);const d=c(e,["uses"]);s!==void 0&&d!=null&&f(s,["uses"],d);const p=c(e,["liveConnectConstraints"]);s!==void 0&&p!=null&&f(s,["bidiGenerateContentSetup"],Ax(i,p));const y=c(e,["lockAdditionalFields"]);return s!==void 0&&y!=null&&f(s,["fieldMask"],y),o}function hx(i,e){const s={},o=c(e,["config"]);return o!=null&&f(s,["config"],fx(i,o,s)),s}function px(i){const e={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(i,["fileUri"]);s!=null&&f(e,["fileUri"],s);const o=c(i,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function mx(i){const e={},s=c(i,["id"]);s!=null&&f(e,["id"],s);const o=c(i,["args"]);o!=null&&f(e,["args"],o);const r=c(i,["name"]);if(r!=null&&f(e,["name"],r),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function gx(i){const e={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=c(i,["enableWidget"]);return s!=null&&f(e,["enableWidget"],s),e}function vx(i){const e={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=c(i,["timeRangeFilter"]);return s!=null&&f(e,["timeRangeFilter"],s),e}function yx(i,e){const s={},o=c(i,["generationConfig"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig"],o);const r=c(i,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const u=c(i,["temperature"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","temperature"],u);const d=c(i,["topP"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","topP"],d);const p=c(i,["topK"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","topK"],p);const y=c(i,["maxOutputTokens"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","maxOutputTokens"],y);const h=c(i,["mediaResolution"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","mediaResolution"],h);const g=c(i,["seed"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","seed"],g);const A=c(i,["speechConfig"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","speechConfig"],Fc(A));const E=c(i,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const R=c(i,["enableAffectiveDialog"]);e!==void 0&&R!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],R);const C=c(i,["systemInstruction"]);e!==void 0&&C!=null&&f(e,["setup","systemInstruction"],dx(Be(C)));const _=c(i,["tools"]);if(e!==void 0&&_!=null){let O=Ys(_);Array.isArray(O)&&(O=O.map(q=>Ex(Bs(q)))),f(e,["setup","tools"],O)}const v=c(i,["sessionResumption"]);e!==void 0&&v!=null&&f(e,["setup","sessionResumption"],Tx(v));const x=c(i,["inputAudioTranscription"]);e!==void 0&&x!=null&&f(e,["setup","inputAudioTranscription"],x);const I=c(i,["outputAudioTranscription"]);e!==void 0&&I!=null&&f(e,["setup","outputAudioTranscription"],I);const P=c(i,["realtimeInputConfig"]);e!==void 0&&P!=null&&f(e,["setup","realtimeInputConfig"],P);const k=c(i,["contextWindowCompression"]);e!==void 0&&k!=null&&f(e,["setup","contextWindowCompression"],k);const V=c(i,["proactivity"]);if(e!==void 0&&V!=null&&f(e,["setup","proactivity"],V),c(i,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return s}function Ax(i,e){const s={},o=c(e,["model"]);o!=null&&f(s,["setup","model"],se(i,o));const r=c(e,["config"]);return r!=null&&f(s,["config"],yx(r,s)),s}function Sx(i){const e={},s=c(i,["mediaResolution"]);s!=null&&f(e,["mediaResolution"],s);const o=c(i,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const r=c(i,["executableCode"]);r!=null&&f(e,["executableCode"],r);const u=c(i,["fileData"]);u!=null&&f(e,["fileData"],px(u));const d=c(i,["functionCall"]);d!=null&&f(e,["functionCall"],mx(d));const p=c(i,["functionResponse"]);p!=null&&f(e,["functionResponse"],p);const y=c(i,["inlineData"]);y!=null&&f(e,["inlineData"],cx(y));const h=c(i,["text"]);h!=null&&f(e,["text"],h);const g=c(i,["thought"]);g!=null&&f(e,["thought"],g);const A=c(i,["thoughtSignature"]);A!=null&&f(e,["thoughtSignature"],A);const E=c(i,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function Tx(i){const e={},s=c(i,["handle"]);if(s!=null&&f(e,["handle"],s),c(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ex(i){const e={};if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(i,["computerUse"]);s!=null&&f(e,["computerUse"],s);const o=c(i,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const r=c(i,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(i,["functionDeclarations"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(A=>A)),f(e,["functionDeclarations"],g)}const d=c(i,["googleMaps"]);d!=null&&f(e,["googleMaps"],gx(d));const p=c(i,["googleSearch"]);p!=null&&f(e,["googleSearch"],vx(p));const y=c(i,["googleSearchRetrieval"]);y!=null&&f(e,["googleSearchRetrieval"],y);const h=c(i,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bx(i){const e=[];for(const s in i)if(Object.prototype.hasOwnProperty.call(i,s)){const o=i[s];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(u=>`${s}.${u}`);e.push(...r)}else e.push(s)}return e.join(",")}function Cx(i,e){let s=null;const o=i.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const u=o.setup;typeof u=="object"&&u!==null?(i.bidiGenerateContentSetup=u,s=u):delete i.bidiGenerateContentSetup}else o!==void 0&&delete i.bidiGenerateContentSetup;const r=i.fieldMask;if(s){const u=bx(s);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)u?i.fieldMask=u:delete i.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let p=[];r.length>0&&(p=r.map(h=>d.includes(h)?`generationConfig.${h}`:h));const y=[];u&&y.push(u),p.length>0&&y.push(...p),y.length>0?i.fieldMask=y.join(","):delete i.fieldMask}else delete i.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?i.fieldMask=r.join(","):delete i.fieldMask;return i}class xx extends ti{constructor(e){super(),this.apiClient=e}async create(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const p=hx(this.apiClient,e);u=It("auth_tokens",p._url),d=p._query,delete p.config,delete p._url,delete p._query;const y=Cx(p,e.config);return r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wx(i,e){const s={},o=c(i,["force"]);return e!==void 0&&o!=null&&f(e,["_query","force"],o),s}function Rx(i){const e={},s=c(i,["name"]);s!=null&&f(e,["_url","name"],s);const o=c(i,["config"]);return o!=null&&wx(o,e),e}function _x(i){const e={},s=c(i,["name"]);return s!=null&&f(e,["_url","name"],s),e}function Mx(i,e){const s={},o=c(i,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const r=c(i,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),s}function Ix(i){const e={},s=c(i,["parent"]);s!=null&&f(e,["_url","parent"],s);const o=c(i,["config"]);return o!=null&&Mx(o,e),e}function Nx(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&f(e,["sdkHttpResponse"],s);const o=c(i,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const r=c(i,["documents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["documents"],u)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dx extends ti{constructor(e){super(),this.apiClient=e,this.list=async s=>new Wi(jn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:s.parent,config:o.config}),await this.listInternal(s),s)}async get(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=_x(e);return u=It("{name}",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var s,o;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Rx(e);r=It("{name}",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Ix(e);return u=It("{parent}/documents",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const h=Nx(y),g=new oS;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lx extends ti{constructor(e,s=new Dx(e)){super(),this.apiClient=e,this.documents=s,this.list=async(o={})=>new Wi(jn.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=TC(e);return u=It("fileSearchStores",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async get(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=CC(e);return u=It("{name}",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var s,o;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=bC(e);r=It("{name}",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=IC(e);return u=It("fileSearchStores",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const h=NC(y),g=new aS;return Object.assign(g,h),g})}}async uploadToFileSearchStoreInternal(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=DC(e);return u=It("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const h=LC(y),g=new rS;return Object.assign(g,h),g})}}async importFile(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=RC(e);return u=It("{file_search_store_name}:importFile",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const h=wC(y),g=new Nc;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Sv=function(){const{crypto:i}=globalThis;if(i?.randomUUID)return Sv=i.randomUUID.bind(i),i.randomUUID();const e=new Uint8Array(1),s=i?()=>i.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^s()&15>>+o/4).toString(16))};const Px=()=>Sv();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ec(i){return typeof i=="object"&&i!==null&&("name"in i&&i.name==="AbortError"||"message"in i&&String(i.message).includes("FetchRequestCanceledException"))}const bc=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null){try{if(Object.prototype.toString.call(i)==="[object Error]"){const e=new Error(i.message,i.cause?{cause:i.cause}:{});return i.stack&&(e.stack=i.stack),i.cause&&!e.cause&&(e.cause=i.cause),i.name&&(e.name=i.name),e}}catch{}try{return new Error(JSON.stringify(i))}catch{}}return new Error(i)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tn extends Error{}class Je extends Tn{constructor(e,s,o,r){super(`${Je.makeMessage(e,s,o)}`),this.status=e,this.headers=r,this.error=s}static makeMessage(e,s,o){const r=s?.message?typeof s.message=="string"?s.message:JSON.stringify(s.message):s?JSON.stringify(s):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,s,o,r){if(!e||!r)return new br({message:o,cause:bc(s)});const u=s;return e===400?new Ev(e,u,o,r):e===401?new bv(e,u,o,r):e===403?new Cv(e,u,o,r):e===404?new xv(e,u,o,r):e===409?new wv(e,u,o,r):e===422?new Rv(e,u,o,r):e===429?new _v(e,u,o,r):e>=500?new Mv(e,u,o,r):new Je(e,u,o,r)}}class Cc extends Je{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class br extends Je{constructor({message:e,cause:s}){super(void 0,void 0,e||"Connection error.",void 0),s&&(this.cause=s)}}class Tv extends br{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Ev extends Je{}class bv extends Je{}class Cv extends Je{}class xv extends Je{}class wv extends Je{}class Rv extends Je{}class _v extends Je{}class Mv extends Je{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kx=/^[a-z][a-z0-9+.-]*:/i,Fx=i=>kx.test(i);let xc=i=>(xc=Array.isArray,xc(i));const Ux=xc;let Ox=Ux;const Sg=Ox;function Gx(i){if(!i)return!0;for(const e in i)return!1;return!0}function Hx(i,e){return Object.prototype.hasOwnProperty.call(i,e)}const Vx=(i,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Tn(`${i} must be an integer`);if(e<0)throw new Tn(`${i} must be a positive integer`);return e},zx=i=>{try{return JSON.parse(i)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qx=i=>new Promise(e=>setTimeout(e,i));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gs="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bx(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Yx=()=>{var i,e,s,o,r;const u=Bx();if(u==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gs,"X-Stainless-OS":Eg(Deno.build.os),"X-Stainless-Arch":Tg(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(i=Deno.version)===null||i===void 0?void 0:i.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(u==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gs,"X-Stainless-OS":Eg((s=globalThis.process.platform)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Arch":Tg((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const d=Xx();return d?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${d.browser}`,"X-Stainless-Runtime-Version":d.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Xx(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:s}of i){const o=s.exec(navigator.userAgent);if(o){const r=o[1]||0,u=o[2]||0,d=o[3]||0;return{browser:e,version:`${r}.${u}.${d}`}}}return null}const Tg=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",Eg=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let sr;const Jx=()=>sr??(sr=Yx());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $x(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Iv(...i){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...i)}function Kx(i){let e=Symbol.asyncIterator in i?i[Symbol.asyncIterator]():i[Symbol.iterator]();return Iv({start(){},async pull(s){const{done:o,value:r}=await e.next();o?s.close():s.enqueue(r)},async cancel(){var s;await((s=e.return)===null||s===void 0?void 0:s.call(e))}})}function Nv(i){if(i[Symbol.asyncIterator])return i;const e=i.getReader();return{async next(){try{const s=await e.read();return s?.done&&e.releaseLock(),s}catch(s){throw e.releaseLock(),s}},async return(){const s=e.cancel();return e.releaseLock(),await s,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Qx(i){var e,s;if(i===null||typeof i!="object")return;if(i[Symbol.asyncIterator]){await((s=(e=i[Symbol.asyncIterator]()).return)===null||s===void 0?void 0:s.call(e));return}const o=i.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wx=({headers:i,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dv=()=>{var i;if(typeof File>"u"){const{process:e}=globalThis,s=typeof((i=e?.versions)===null||i===void 0?void 0:i.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(s?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function qu(i,e,s){return Dv(),new File(i,e??"unknown_file",s)}function Zx(i){return(typeof i=="object"&&i!==null&&("name"in i&&i.name&&String(i.name)||"url"in i&&i.url&&String(i.url)||"filename"in i&&i.filename&&String(i.filename)||"path"in i&&i.path&&String(i.path))||"").split(/[\\/]/).pop()||void 0}const jx=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lv=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",tw=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&Lv(i),ew=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function";async function nw(i,e,s){if(Dv(),i=await i,tw(i))return i instanceof File?i:qu([await i.arrayBuffer()],i.name);if(ew(i)){const r=await i.blob();return e||(e=new URL(i.url).pathname.split(/[\\/]/).pop()),qu(await wc(r),e,s)}const o=await wc(i);if(e||(e=Zx(i)),!s?.type){const r=o.find(u=>typeof u=="object"&&"type"in u&&u.type);typeof r=="string"&&(s=Object.assign(Object.assign({},s),{type:r}))}return qu(o,e,s)}async function wc(i){var e,s,o,r,u;let d=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)d.push(i);else if(Lv(i))d.push(i instanceof Blob?i:await i.arrayBuffer());else if(jx(i))try{for(var p=!0,y=wn(i),h;h=await y.next(),e=h.done,!e;p=!0){r=h.value,p=!1;const g=r;d.push(...await wc(g))}}catch(g){s={error:g}}finally{try{!p&&!e&&(o=y.return)&&await o.call(y)}finally{if(s)throw s.error}}else{const g=(u=i?.constructor)===null||u===void 0?void 0:u.name;throw new Error(`Unexpected data type: ${typeof i}${g?`; constructor: ${g}`:""}${iw(i)}`)}return d}function iw(i){return typeof i!="object"||i===null?"":`; props: [${Object.getOwnPropertyNames(i).map(s=>`"${s}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pv{constructor(e){this._client=e}}Pv._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kv(i){return i.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const bg=Object.freeze(Object.create(null)),sw=(i=kv)=>(function(s,...o){if(s.length===1)return s[0];let r=!1;const u=[],d=s.reduce((g,A,E)=>{var R,C,_;/[?#]/.test(A)&&(r=!0);const v=o[E];let x=(r?encodeURIComponent:i)(""+v);return E!==o.length&&(v==null||typeof v=="object"&&v.toString===((_=Object.getPrototypeOf((C=Object.getPrototypeOf((R=v.hasOwnProperty)!==null&&R!==void 0?R:bg))!==null&&C!==void 0?C:bg))===null||_===void 0?void 0:_.toString))&&(x=v+"",u.push({start:g.length+A.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(v).slice(8,-1)} is not a valid path parameter`})),g+A+(E===o.length?"":x)},""),p=d.split(/[?#]/,1)[0],y=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let h;for(;(h=y.exec(p))!==null;)u.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(u.sort((g,A)=>g.start-A.start),u.length>0){let g=0;const A=u.reduce((E,R)=>{const C=" ".repeat(R.start-g),_="^".repeat(R.length);return g=R.start+R.length,E+C+_},"");throw new Tn(`Path parameters result in path with invalid segments:
${u.map(E=>E.error).join(`
`)}
${d}
${A}`)}return d}),or=sw(kv);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fv extends Pv{create(e,s){var o;const{api_version:r=this._client.apiVersion}=e,u=vr(e,["api_version"]);if("model"in u&&"agent_config"in u)throw new Tn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in u&&"generation_config"in u)throw new Tn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(or`/${r}/interactions`,Object.assign(Object.assign({body:u},s),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,s={},o){const{api_version:r=this._client.apiVersion}=s??{};return this._client.delete(or`/${r}/interactions/${e}`,o)}cancel(e,s={},o){const{api_version:r=this._client.apiVersion}=s??{};return this._client.post(or`/${r}/interactions/${e}/cancel`,o)}get(e,s={},o){var r;const u=s??{},{api_version:d=this._client.apiVersion}=u,p=vr(u,["api_version"]);return this._client.get(or`/${d}/interactions/${e}`,Object.assign(Object.assign({query:p},o),{stream:(r=s?.stream)!==null&&r!==void 0?r:!1}))}}Fv._key=Object.freeze(["interactions"]);class Uv extends Fv{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ow(i){let e=0;for(const r of i)e+=r.length;const s=new Uint8Array(e);let o=0;for(const r of i)s.set(r,o),o+=r.length;return s}let ar;function Oc(i){let e;return(ar??(e=new globalThis.TextEncoder,ar=e.encode.bind(e)))(i)}let rr;function Cg(i){let e;return(rr??(e=new globalThis.TextDecoder,rr=e.decode.bind(e)))(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cr{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const s=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Oc(e):e;this.buffer=ow([this.buffer,s]);const o=[];let r;for(;(r=aw(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(Cg(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const u=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,d=Cg(this.buffer.subarray(0,u));o.push(d),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Cr.NEWLINE_CHARS=new Set([`
`,"\r"]);Cr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function aw(i,e){for(let r=e??0;r<i.length;r++){if(i[r]===10)return{preceding:r,index:r+1,carriage:!1};if(i[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function rw(i){for(let o=0;o<i.length-1;o++){if(i[o]===10&&i[o+1]===10||i[o]===13&&i[o+1]===13)return o+2;if(i[o]===13&&i[o+1]===10&&o+3<i.length&&i[o+2]===13&&i[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yr={off:0,error:200,warn:300,info:400,debug:500},xg=(i,e,s)=>{if(i){if(Hx(yr,i))return i;Xe(s).warn(`${e} was set to ${JSON.stringify(i)}, expected one of ${JSON.stringify(Object.keys(yr))}`)}};function zo(){}function lr(i,e,s){return!e||yr[i]>yr[s]?zo:e[i].bind(e)}const lw={error:zo,warn:zo,info:zo,debug:zo};let wg=new WeakMap;function Xe(i){var e;const s=i.logger,o=(e=i.logLevel)!==null&&e!==void 0?e:"off";if(!s)return lw;const r=wg.get(s);if(r&&r[0]===o)return r[1];const u={error:lr("error",s,o),warn:lr("warn",s,o),info:lr("info",s,o),debug:lr("debug",s,o)};return wg.set(s,[o,u]),u}const Ki=i=>(i.options&&(i.options=Object.assign({},i.options),delete i.options.headers),i.headers&&(i.headers=Object.fromEntries((i.headers instanceof Headers?[...i.headers]:Object.entries(i.headers)).map(([e,s])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":s]))),"retryOfRequestLogID"in i&&(i.retryOfRequestLogID&&(i.retryOf=i.retryOfRequestLogID),delete i.retryOfRequestLogID),i);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vs{constructor(e,s,o){this.iterator=e,this.controller=s,this.client=o}static fromSSEResponse(e,s,o){let r=!1;const u=o?Xe(o):console;function d(){return xn(this,arguments,function*(){var y,h,g,A;if(r)throw new Tn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let E=!1;try{try{for(var R=!0,C=wn(uw(e,s)),_;_=yield zt(C.next()),y=_.done,!y;R=!0){A=_.value,R=!1;const v=A;if(!E)if(v.data.startsWith("[DONE]")){E=!0;continue}else try{yield yield zt(JSON.parse(v.data))}catch(x){throw u.error("Could not parse message into JSON:",v.data),u.error("From chunk:",v.raw),x}}}catch(v){h={error:v}}finally{try{!R&&!y&&(g=C.return)&&(yield zt(g.call(C)))}finally{if(h)throw h.error}}E=!0}catch(v){if(Ec(v))return yield zt(void 0);throw v}finally{E||s.abort()}})}return new Vs(d,s,o)}static fromReadableStream(e,s,o){let r=!1;function u(){return xn(this,arguments,function*(){var y,h,g,A;const E=new Cr,R=Nv(e);try{for(var C=!0,_=wn(R),v;v=yield zt(_.next()),y=v.done,!y;C=!0){A=v.value,C=!1;const x=A;for(const I of E.decode(x))yield yield zt(I)}}catch(x){h={error:x}}finally{try{!C&&!y&&(g=_.return)&&(yield zt(g.call(_)))}finally{if(h)throw h.error}}for(const x of E.flush())yield yield zt(x)})}function d(){return xn(this,arguments,function*(){var y,h,g,A;if(r)throw new Tn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let E=!1;try{try{for(var R=!0,C=wn(u()),_;_=yield zt(C.next()),y=_.done,!y;R=!0){A=_.value,R=!1;const v=A;E||v&&(yield yield zt(JSON.parse(v)))}}catch(v){h={error:v}}finally{try{!R&&!y&&(g=C.return)&&(yield zt(g.call(C)))}finally{if(h)throw h.error}}E=!0}catch(v){if(Ec(v))return yield zt(void 0);throw v}finally{E||s.abort()}})}return new Vs(d,s,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],s=[],o=this.iterator(),r=u=>({next:()=>{if(u.length===0){const d=o.next();e.push(d),s.push(d)}return u.shift()}});return[new Vs(()=>r(e),this.controller,this.client),new Vs(()=>r(s),this.controller,this.client)]}toReadableStream(){const e=this;let s;return Iv({async start(){s=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:u}=await s.next();if(u)return o.close();const d=Oc(JSON.stringify(r)+`
`);o.enqueue(d)}catch(r){o.error(r)}},async cancel(){var o;await((o=s.return)===null||o===void 0?void 0:o.call(s))}})}}function uw(i,e){return xn(this,arguments,function*(){var o,r,u,d;if(!i.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Tn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Tn("Attempted to iterate over a response with no body");const p=new dw,y=new Cr,h=Nv(i.body);try{for(var g=!0,A=wn(cw(h)),E;E=yield zt(A.next()),o=E.done,!o;g=!0){d=E.value,g=!1;const R=d;for(const C of y.decode(R)){const _=p.decode(C);_&&(yield yield zt(_))}}}catch(R){r={error:R}}finally{try{!g&&!o&&(u=A.return)&&(yield zt(u.call(A)))}finally{if(r)throw r.error}}for(const R of y.flush()){const C=p.decode(R);C&&(yield yield zt(C))}})}function cw(i){return xn(this,arguments,function*(){var s,o,r,u;let d=new Uint8Array;try{for(var p=!0,y=wn(i),h;h=yield zt(y.next()),s=h.done,!s;p=!0){u=h.value,p=!1;const g=u;if(g==null)continue;const A=g instanceof ArrayBuffer?new Uint8Array(g):typeof g=="string"?Oc(g):g;let E=new Uint8Array(d.length+A.length);E.set(d),E.set(A,d.length),d=E;let R;for(;(R=rw(d))!==-1;)yield yield zt(d.slice(0,R)),d=d.slice(R)}}catch(g){o={error:g}}finally{try{!p&&!s&&(r=y.return)&&(yield zt(r.call(y)))}finally{if(o)throw o.error}}d.length>0&&(yield yield zt(d))})}class dw{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(e),e.startsWith(":"))return null;let[s,o,r]=fw(e,":");return r.startsWith(" ")&&(r=r.substring(1)),s==="event"?this.event=r:s==="data"&&this.data.push(r),null}}function fw(i,e){const s=i.indexOf(e);return s!==-1?[i.substring(0,s),e,i.substring(s+e.length)]:[i,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function hw(i,e){const{response:s,requestLogID:o,retryOfRequestLogID:r,startTime:u}=e,d=await(async()=>{var p;if(e.options.stream)return Xe(i).debug("response",s.status,s.url,s.headers,s.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(s,e.controller,i):Vs.fromSSEResponse(s,e.controller,i);if(s.status===204)return null;if(e.options.__binaryResponse)return s;const y=s.headers.get("content-type"),h=(p=y?.split(";")[0])===null||p===void 0?void 0:p.trim();return h?.includes("application/json")||h?.endsWith("+json")?s.headers.get("content-length")==="0"?void 0:await s.json():await s.text()})();return Xe(i).debug(`[${o}] response parsed`,Ki({retryOfRequestLogID:r,url:s.url,status:s.status,body:d,durationMs:Date.now()-u})),d}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gc extends Promise{constructor(e,s,o=hw){super(r=>{r(null)}),this.responsePromise=s,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new Gc(this.client,this.responsePromise,async(s,o)=>e(await this.parseResponse(s,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,s]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:s}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,s){return this.parse().then(e,s)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ov=Symbol("brand.privateNullableHeaders");function*pw(i){if(!i)return;if(Ov in i){const{values:o,nulls:r}=i;yield*o.entries();for(const u of r)yield[u,null];return}let e=!1,s;i instanceof Headers?s=i.entries():Sg(i)?s=i:(e=!0,s=Object.entries(i??{}));for(let o of s){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const u=Sg(o[1])?o[1]:[o[1]];let d=!1;for(const p of u)p!==void 0&&(e&&!d&&(d=!0,yield[r,null]),yield[r,p])}}const Ho=i=>{const e=new Headers,s=new Set;for(const o of i){const r=new Set;for(const[u,d]of pw(o)){const p=u.toLowerCase();r.has(p)||(e.delete(u),r.add(p)),d===null?(e.delete(u),s.add(p)):(e.append(u,d),s.delete(p))}}return{[Ov]:!0,values:e,nulls:s}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bu=i=>{var e,s,o,r,u,d;if(typeof globalThis.process<"u")return(o=(s=(e=PA)===null||e===void 0?void 0:e[i])===null||s===void 0?void 0:s.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(d=(u=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||u===void 0?void 0:u.call(r,i))===null||d===void 0?void 0:d.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gv;class xr{constructor(e){var s,o,r,u,d,p,y,{baseURL:h=Bu("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:g=(s=Bu("GEMINI_API_KEY"))!==null&&s!==void 0?s:null,apiVersion:A="v1beta"}=e,E=vr(e,["baseURL","apiKey","apiVersion"]);const R=Object.assign(Object.assign({apiKey:g,apiVersion:A},E),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=R.baseURL,this.timeout=(o=R.timeout)!==null&&o!==void 0?o:xr.DEFAULT_TIMEOUT,this.logger=(r=R.logger)!==null&&r!==void 0?r:console;const C="warn";this.logLevel=C,this.logLevel=(d=(u=xg(R.logLevel,"ClientOptions.logLevel",this))!==null&&u!==void 0?u:xg(Bu("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&d!==void 0?d:C,this.fetchOptions=R.fetchOptions,this.maxRetries=(p=R.maxRetries)!==null&&p!==void 0?p:2,this.fetch=(y=R.fetch)!==null&&y!==void 0?y:$x(),this.encoder=Wx,this._options=R,this.apiKey=g,this.apiVersion=A,this.clientAdapter=R.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:s}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!s.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const s=Ho([e.headers]);if(!(s.values.has("authorization")||s.values.has("x-goog-api-key"))){if(this.apiKey)return Ho([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ho([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([s,o])=>typeof o<"u").map(([s,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(s)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(s)}=`;throw new Tn(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Gs}`}defaultIdempotencyKey(){return`stainless-node-retry-${Px()}`}makeStatusError(e,s,o,r){return Je.generate(e,s,o,r)}buildURL(e,s,o){const r=!this.baseURLOverridden()&&o||this.baseURL,u=Fx(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),d=this.defaultQuery();return Gx(d)||(s=Object.assign(Object.assign({},d),s)),typeof s=="object"&&s&&!Array.isArray(s)&&(u.search=this.stringifyQuery(s)),u.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const s=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${s}`}}async prepareRequest(e,{url:s,options:o}){}get(e,s){return this.methodRequest("get",e,s)}post(e,s){return this.methodRequest("post",e,s)}patch(e,s){return this.methodRequest("patch",e,s)}put(e,s){return this.methodRequest("put",e,s)}delete(e,s){return this.methodRequest("delete",e,s)}methodRequest(e,s,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:s},r)))}request(e,s=null){return new Gc(this,this.makeRequest(e,s,void 0))}async makeRequest(e,s,o){var r,u,d;const p=await e,y=(r=p.maxRetries)!==null&&r!==void 0?r:this.maxRetries;s==null&&(s=y),await this.prepareOptions(p);const{req:h,url:g,timeout:A}=await this.buildRequest(p,{retryCount:y-s});await this.prepareRequest(h,{url:g,options:p});const E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),R=o===void 0?"":`, retryOf: ${o}`,C=Date.now();if(Xe(this).debug(`[${E}] sending request`,Ki({retryOfRequestLogID:o,method:p.method,url:g,options:p,headers:h.headers})),!((u=p.signal)===null||u===void 0)&&u.aborted)throw new Cc;const _=new AbortController,v=await this.fetchWithTimeout(g,h,A,_).catch(bc),x=Date.now();if(v instanceof globalThis.Error){const P=`retrying, ${s} attempts remaining`;if(!((d=p.signal)===null||d===void 0)&&d.aborted)throw new Cc;const k=Ec(v)||/timed? ?out/i.test(String(v)+("cause"in v?String(v.cause):""));if(s)return Xe(this).info(`[${E}] connection ${k?"timed out":"failed"} - ${P}`),Xe(this).debug(`[${E}] connection ${k?"timed out":"failed"} (${P})`,Ki({retryOfRequestLogID:o,url:g,durationMs:x-C,message:v.message})),this.retryRequest(p,s,o??E);throw Xe(this).info(`[${E}] connection ${k?"timed out":"failed"} - error; no more retries left`),Xe(this).debug(`[${E}] connection ${k?"timed out":"failed"} (error; no more retries left)`,Ki({retryOfRequestLogID:o,url:g,durationMs:x-C,message:v.message})),k?new Tv:new br({cause:v})}const I=`[${E}${R}] ${h.method} ${g} ${v.ok?"succeeded":"failed"} with status ${v.status} in ${x-C}ms`;if(!v.ok){const P=await this.shouldRetry(v);if(s&&P){const W=`retrying, ${s} attempts remaining`;return await Qx(v.body),Xe(this).info(`${I} - ${W}`),Xe(this).debug(`[${E}] response error (${W})`,Ki({retryOfRequestLogID:o,url:v.url,status:v.status,headers:v.headers,durationMs:x-C})),this.retryRequest(p,s,o??E,v.headers)}const k=P?"error; no more retries left":"error; not retryable";Xe(this).info(`${I} - ${k}`);const V=await v.text().catch(W=>bc(W).message),O=zx(V),q=O?void 0:V;throw Xe(this).debug(`[${E}] response error (${k})`,Ki({retryOfRequestLogID:o,url:v.url,status:v.status,headers:v.headers,message:q,durationMs:Date.now()-C})),this.makeStatusError(v.status,O,q,v.headers)}return Xe(this).info(I),Xe(this).debug(`[${E}] response start`,Ki({retryOfRequestLogID:o,url:v.url,status:v.status,headers:v.headers,durationMs:x-C})),{response:v,options:p,controller:_,requestLogID:E,retryOfRequestLogID:o,startTime:C}}async fetchWithTimeout(e,s,o,r){const u=s||{},{signal:d,method:p}=u,y=vr(u,["signal","method"]),h=this._makeAbort(r);d&&d.addEventListener("abort",h,{once:!0});const g=setTimeout(h,o),A=globalThis.ReadableStream&&y.body instanceof globalThis.ReadableStream||typeof y.body=="object"&&y.body!==null&&Symbol.asyncIterator in y.body,E=Object.assign(Object.assign(Object.assign({signal:r.signal},A?{duplex:"half"}:{}),{method:"GET"}),y);p&&(E.method=p.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(g)}}async shouldRetry(e){const s=e.headers.get("x-should-retry");return s==="true"?!0:s==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,s,o,r){var u;let d;const p=r?.get("retry-after-ms");if(p){const h=parseFloat(p);Number.isNaN(h)||(d=h)}const y=r?.get("retry-after");if(y&&!d){const h=parseFloat(y);Number.isNaN(h)?d=Date.parse(y)-Date.now():d=h*1e3}if(!(d&&0<=d&&d<60*1e3)){const h=(u=e.maxRetries)!==null&&u!==void 0?u:this.maxRetries;d=this.calculateDefaultRetryTimeoutMillis(s,h)}return await qx(d),this.makeRequest(e,s-1,o)}calculateDefaultRetryTimeoutMillis(e,s){const u=s-e,d=Math.min(.5*Math.pow(2,u),8),p=1-Math.random()*.25;return d*p*1e3}async buildRequest(e,{retryCount:s=0}={}){var o,r,u;const d=Object.assign({},e),{method:p,path:y,query:h,defaultBaseURL:g}=d,A=this.buildURL(y,h,g);"timeout"in d&&Vx("timeout",d.timeout),d.timeout=(o=d.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:E,body:R}=this.buildBody({options:d}),C=await this.buildHeaders({options:e,method:p,bodyHeaders:E,retryCount:s});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:p,headers:C},d.signal&&{signal:d.signal}),globalThis.ReadableStream&&R instanceof globalThis.ReadableStream&&{duplex:"half"}),R&&{body:R}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(u=d.fetchOptions)!==null&&u!==void 0?u:{}),url:A,timeout:d.timeout}}async buildHeaders({options:e,method:s,bodyHeaders:o,retryCount:r}){let u={};this.idempotencyHeader&&s!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=e.idempotencyKey);const d=await this.authHeaders(e);let p=Ho([u,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Jx()),this._options.defaultHeaders,o,e.headers,d]);return this.validateHeaders(p),p.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:s}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Ho([s]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Kx(e)}:this.encoder({body:e,headers:o})}}xr.DEFAULT_TIMEOUT=6e4;class Pe extends xr{constructor(){super(...arguments),this.interactions=new Uv(this)}}Gv=Pe;Pe.GeminiNextGenAPIClient=Gv;Pe.GeminiNextGenAPIClientError=Tn;Pe.APIError=Je;Pe.APIConnectionError=br;Pe.APIConnectionTimeoutError=Tv;Pe.APIUserAbortError=Cc;Pe.NotFoundError=xv;Pe.ConflictError=wv;Pe.RateLimitError=_v;Pe.BadRequestError=Ev;Pe.AuthenticationError=bv;Pe.InternalServerError=Mv;Pe.PermissionDeniedError=Cv;Pe.UnprocessableEntityError=Rv;Pe.toFile=nw;Pe.Interactions=Uv;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mw(i,e){const s={},o=c(i,["name"]);return o!=null&&f(s,["_url","name"],o),s}function gw(i,e){const s={},o=c(i,["name"]);return o!=null&&f(s,["_url","name"],o),s}function vw(i,e){const s={},o=c(i,["sdkHttpResponse"]);return o!=null&&f(s,["sdkHttpResponse"],o),s}function yw(i,e){const s={},o=c(i,["sdkHttpResponse"]);return o!=null&&f(s,["sdkHttpResponse"],o),s}function Aw(i,e,s){const o={};if(c(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(i,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&f(e,["displayName"],r),c(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const u=c(i,["epochCount"]);e!==void 0&&u!=null&&f(e,["tuningTask","hyperparameters","epochCount"],u);const d=c(i,["learningRateMultiplier"]);if(d!=null&&f(o,["tuningTask","hyperparameters","learningRateMultiplier"],d),c(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(c(i,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(c(i,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const p=c(i,["batchSize"]);e!==void 0&&p!=null&&f(e,["tuningTask","hyperparameters","batchSize"],p);const y=c(i,["learningRate"]);if(e!==void 0&&y!=null&&f(e,["tuningTask","hyperparameters","learningRate"],y),c(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(i,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(c(i,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(c(i,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(c(i,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(c(i,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(c(i,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return o}function Sw(i,e,s){const o={};let r=c(s,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const O=c(i,["validationDataset"]);e!==void 0&&O!=null&&f(e,["supervisedTuningSpec"],Yu(O))}else if(r==="PREFERENCE_TUNING"){const O=c(i,["validationDataset"]);e!==void 0&&O!=null&&f(e,["preferenceOptimizationSpec"],Yu(O))}else if(r==="DISTILLATION"){const O=c(i,["validationDataset"]);e!==void 0&&O!=null&&f(e,["distillationSpec"],Yu(O))}const u=c(i,["tunedModelDisplayName"]);e!==void 0&&u!=null&&f(e,["tunedModelDisplayName"],u);const d=c(i,["description"]);e!==void 0&&d!=null&&f(e,["description"],d);let p=c(s,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const O=c(i,["epochCount"]);e!==void 0&&O!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],O)}else if(p==="PREFERENCE_TUNING"){const O=c(i,["epochCount"]);e!==void 0&&O!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],O)}else if(p==="DISTILLATION"){const O=c(i,["epochCount"]);e!==void 0&&O!=null&&f(e,["distillationSpec","hyperParameters","epochCount"],O)}let y=c(s,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const O=c(i,["learningRateMultiplier"]);e!==void 0&&O!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],O)}else if(y==="PREFERENCE_TUNING"){const O=c(i,["learningRateMultiplier"]);e!==void 0&&O!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],O)}else if(y==="DISTILLATION"){const O=c(i,["learningRateMultiplier"]);e!==void 0&&O!=null&&f(e,["distillationSpec","hyperParameters","learningRateMultiplier"],O)}let h=c(s,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const O=c(i,["exportLastCheckpointOnly"]);e!==void 0&&O!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],O)}else if(h==="PREFERENCE_TUNING"){const O=c(i,["exportLastCheckpointOnly"]);e!==void 0&&O!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],O)}else if(h==="DISTILLATION"){const O=c(i,["exportLastCheckpointOnly"]);e!==void 0&&O!=null&&f(e,["distillationSpec","exportLastCheckpointOnly"],O)}let g=c(s,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const O=c(i,["adapterSize"]);e!==void 0&&O!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],O)}else if(g==="PREFERENCE_TUNING"){const O=c(i,["adapterSize"]);e!==void 0&&O!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],O)}else if(g==="DISTILLATION"){const O=c(i,["adapterSize"]);e!==void 0&&O!=null&&f(e,["distillationSpec","hyperParameters","adapterSize"],O)}let A=c(s,["config","method"]);if(A===void 0&&(A="SUPERVISED_FINE_TUNING"),A==="SUPERVISED_FINE_TUNING"){const O=c(i,["tuningMode"]);e!==void 0&&O!=null&&f(e,["supervisedTuningSpec","tuningMode"],O)}const E=c(i,["customBaseModel"]);e!==void 0&&E!=null&&f(e,["customBaseModel"],E);let R=c(s,["config","method"]);if(R===void 0&&(R="SUPERVISED_FINE_TUNING"),R==="SUPERVISED_FINE_TUNING"){const O=c(i,["batchSize"]);e!==void 0&&O!=null&&f(e,["supervisedTuningSpec","hyperParameters","batchSize"],O)}let C=c(s,["config","method"]);if(C===void 0&&(C="SUPERVISED_FINE_TUNING"),C==="SUPERVISED_FINE_TUNING"){const O=c(i,["learningRate"]);e!==void 0&&O!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRate"],O)}const _=c(i,["labels"]);e!==void 0&&_!=null&&f(e,["labels"],_);const v=c(i,["beta"]);e!==void 0&&v!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],v);const x=c(i,["baseTeacherModel"]);e!==void 0&&x!=null&&f(e,["distillationSpec","baseTeacherModel"],x);const I=c(i,["tunedTeacherModelSource"]);e!==void 0&&I!=null&&f(e,["distillationSpec","tunedTeacherModelSource"],I);const P=c(i,["sftLossWeightMultiplier"]);e!==void 0&&P!=null&&f(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],P);const k=c(i,["outputUri"]);e!==void 0&&k!=null&&f(e,["outputUri"],k);const V=c(i,["encryptionSpec"]);return e!==void 0&&V!=null&&f(e,["encryptionSpec"],V),o}function Tw(i,e){const s={},o=c(i,["baseModel"]);o!=null&&f(s,["baseModel"],o);const r=c(i,["preTunedModel"]);r!=null&&f(s,["preTunedModel"],r);const u=c(i,["trainingDataset"]);u!=null&&Dw(u);const d=c(i,["config"]);return d!=null&&Aw(d,s),s}function Ew(i,e){const s={},o=c(i,["baseModel"]);o!=null&&f(s,["baseModel"],o);const r=c(i,["preTunedModel"]);r!=null&&f(s,["preTunedModel"],r);const u=c(i,["trainingDataset"]);u!=null&&Lw(u,s,e);const d=c(i,["config"]);return d!=null&&Sw(d,s,e),s}function bw(i,e){const s={},o=c(i,["name"]);return o!=null&&f(s,["_url","name"],o),s}function Cw(i,e){const s={},o=c(i,["name"]);return o!=null&&f(s,["_url","name"],o),s}function xw(i,e,s){const o={},r=c(i,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const u=c(i,["pageToken"]);e!==void 0&&u!=null&&f(e,["_query","pageToken"],u);const d=c(i,["filter"]);return e!==void 0&&d!=null&&f(e,["_query","filter"],d),o}function ww(i,e,s){const o={},r=c(i,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const u=c(i,["pageToken"]);e!==void 0&&u!=null&&f(e,["_query","pageToken"],u);const d=c(i,["filter"]);return e!==void 0&&d!=null&&f(e,["_query","filter"],d),o}function Rw(i,e){const s={},o=c(i,["config"]);return o!=null&&xw(o,s),s}function _w(i,e){const s={},o=c(i,["config"]);return o!=null&&ww(o,s),s}function Mw(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&f(s,["sdkHttpResponse"],o);const r=c(i,["nextPageToken"]);r!=null&&f(s,["nextPageToken"],r);const u=c(i,["tunedModels"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(p=>Hv(p))),f(s,["tuningJobs"],d)}return s}function Iw(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&f(s,["sdkHttpResponse"],o);const r=c(i,["nextPageToken"]);r!=null&&f(s,["nextPageToken"],r);const u=c(i,["tuningJobs"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(p=>Rc(p))),f(s,["tuningJobs"],d)}return s}function Nw(i,e){const s={},o=c(i,["name"]);o!=null&&f(s,["model"],o);const r=c(i,["name"]);return r!=null&&f(s,["endpoint"],r),s}function Dw(i,e){const s={};if(c(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=c(i,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>u)),f(s,["examples","examples"],r)}return s}function Lw(i,e,s){const o={};let r=c(s,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const d=c(i,["gcsUri"]);e!==void 0&&d!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(r==="PREFERENCE_TUNING"){const d=c(i,["gcsUri"]);e!==void 0&&d!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}else if(r==="DISTILLATION"){const d=c(i,["gcsUri"]);e!==void 0&&d!=null&&f(e,["distillationSpec","promptDatasetUri"],d)}let u=c(s,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const d=c(i,["vertexDatasetResource"]);e!==void 0&&d!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(u==="PREFERENCE_TUNING"){const d=c(i,["vertexDatasetResource"]);e!==void 0&&d!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}else if(u==="DISTILLATION"){const d=c(i,["vertexDatasetResource"]);e!==void 0&&d!=null&&f(e,["distillationSpec","promptDatasetUri"],d)}if(c(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Hv(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&f(s,["sdkHttpResponse"],o);const r=c(i,["name"]);r!=null&&f(s,["name"],r);const u=c(i,["state"]);u!=null&&f(s,["state"],nv(u));const d=c(i,["createTime"]);d!=null&&f(s,["createTime"],d);const p=c(i,["tuningTask","startTime"]);p!=null&&f(s,["startTime"],p);const y=c(i,["tuningTask","completeTime"]);y!=null&&f(s,["endTime"],y);const h=c(i,["updateTime"]);h!=null&&f(s,["updateTime"],h);const g=c(i,["description"]);g!=null&&f(s,["description"],g);const A=c(i,["baseModel"]);A!=null&&f(s,["baseModel"],A);const E=c(i,["_self"]);return E!=null&&f(s,["tunedModel"],Nw(E)),s}function Rc(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&f(s,["sdkHttpResponse"],o);const r=c(i,["name"]);r!=null&&f(s,["name"],r);const u=c(i,["state"]);u!=null&&f(s,["state"],nv(u));const d=c(i,["createTime"]);d!=null&&f(s,["createTime"],d);const p=c(i,["startTime"]);p!=null&&f(s,["startTime"],p);const y=c(i,["endTime"]);y!=null&&f(s,["endTime"],y);const h=c(i,["updateTime"]);h!=null&&f(s,["updateTime"],h);const g=c(i,["error"]);g!=null&&f(s,["error"],g);const A=c(i,["description"]);A!=null&&f(s,["description"],A);const E=c(i,["baseModel"]);E!=null&&f(s,["baseModel"],E);const R=c(i,["tunedModel"]);R!=null&&f(s,["tunedModel"],R);const C=c(i,["preTunedModel"]);C!=null&&f(s,["preTunedModel"],C);const _=c(i,["supervisedTuningSpec"]);_!=null&&f(s,["supervisedTuningSpec"],_);const v=c(i,["preferenceOptimizationSpec"]);v!=null&&f(s,["preferenceOptimizationSpec"],v);const x=c(i,["distillationSpec"]);x!=null&&f(s,["distillationSpec"],x);const I=c(i,["tuningDataStats"]);I!=null&&f(s,["tuningDataStats"],I);const P=c(i,["encryptionSpec"]);P!=null&&f(s,["encryptionSpec"],P);const k=c(i,["partnerModelTuningSpec"]);k!=null&&f(s,["partnerModelTuningSpec"],k);const V=c(i,["customBaseModel"]);V!=null&&f(s,["customBaseModel"],V);const O=c(i,["experiment"]);O!=null&&f(s,["experiment"],O);const q=c(i,["labels"]);q!=null&&f(s,["labels"],q);const et=c(i,["outputUri"]);et!=null&&f(s,["outputUri"],et);const W=c(i,["pipelineJob"]);W!=null&&f(s,["pipelineJob"],W);const lt=c(i,["serviceAccount"]);lt!=null&&f(s,["serviceAccount"],lt);const gt=c(i,["tunedModelDisplayName"]);gt!=null&&f(s,["tunedModelDisplayName"],gt);const Rt=c(i,["veoTuningSpec"]);return Rt!=null&&f(s,["veoTuningSpec"],Rt),s}function Pw(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&f(s,["sdkHttpResponse"],o);const r=c(i,["name"]);r!=null&&f(s,["name"],r);const u=c(i,["metadata"]);u!=null&&f(s,["metadata"],u);const d=c(i,["done"]);d!=null&&f(s,["done"],d);const p=c(i,["error"]);return p!=null&&f(s,["error"],p),s}function Yu(i,e){const s={},o=c(i,["gcsUri"]);o!=null&&f(s,["validationDatasetUri"],o);const r=c(i,["vertexDatasetResource"]);return r!=null&&f(s,["validationDatasetUri"],r),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kw extends ti{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new Wi(jn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(s),s),this.get=async s=>await this.getInternal(s),this.tune=async s=>{var o;if(this.apiClient.isVertexAI())if(s.baseModel.startsWith("projects/")){const r={tunedModelName:s.baseModel};!((o=s.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=s.config.preTunedModelCheckpointId);const u=Object.assign(Object.assign({},s),{preTunedModel:r});return u.baseModel=void 0,await this.tuneInternal(u)}else{const r=Object.assign({},s);return await this.tuneInternal(r)}else{const r=Object.assign({},s),u=await this.tuneMldevInternal(r);let d="";return u.metadata!==void 0&&u.metadata.tunedModel!==void 0?d=u.metadata.tunedModel:u.name!==void 0&&u.name.includes("/operations/")&&(d=u.name.split("/operations/")[0]),{name:d,state:pc.JOB_STATE_QUEUED}}}}async getInternal(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=Cw(e);return p=It("{name}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>Rc(g))}else{const h=bw(e);return p=It("{name}",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>Hv(g))}}async listInternal(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=_w(e);return p=It("tuningJobs",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=Iw(g),E=new jm;return Object.assign(E,A),E})}else{const h=Rw(e);return p=It("tunedModels",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=Mw(g),E=new jm;return Object.assign(E,A),E})}}async cancel(e){var s,o,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const h=gw(e);return p=It("{name}:cancel",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=yw(g),E=new tg;return Object.assign(E,A),E})}else{const h=mw(e);return p=It("{name}:cancel",h._url),y=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const E=A;return E.sdkHttpResponse={headers:g.headers},E})),d.then(g=>{const A=vw(g),E=new tg;return Object.assign(E,A),E})}}async tuneInternal(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI()){const p=Ew(e,e);return u=It("tuningJobs",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:y.headers},g})),r.then(y=>Rc(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var s,o;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Tw(e);return u=It("tunedModels",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:y.headers},g})),r.then(y=>Pw(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fw{async download(e,s){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Uw=1024*1024*8,Ow=3,Gw=1e3,Hw=2,Ar="x-goog-upload-status";async function Vw(i,e,s){var o;const r=await Vv(i,e,s),u=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Ar])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function zw(i,e,s){var o;const r=await Vv(i,e,s),u=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Ar])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const d=Qg(u),p=new Dc;return Object.assign(p,d),p}async function Vv(i,e,s){var o,r;let u=0,d=0,p=new gc(new Response),y="upload";for(u=i.size;d<u;){const h=Math.min(Uw,u-d),g=i.slice(d,d+h);d+h>=u&&(y+=", finalize");let A=0,E=Gw;for(;A<Ow&&(p=await s.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(d),"Content-Length":String(h)}}}),!(!((o=p?.headers)===null||o===void 0)&&o[Ar]));)A++,await Bw(E),E=E*Hw;if(d+=h,((r=p?.headers)===null||r===void 0?void 0:r[Ar])!=="active")break;if(u<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return p}async function qw(i){return{size:i.size,type:i.type}}function Bw(i){return new Promise(e=>setTimeout(e,i))}class Yw{async upload(e,s,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Vw(e,s,o)}async uploadToFileSearchStore(e,s,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await zw(e,s,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await qw(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xw{create(e,s,o){return new Jw(e,s,o)}}class Jw{constructor(e,s,o){this.url=e,this.headers=s,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rg="x-goog-api-key";class $w{constructor(e){this.apiKey=e}async addAuthHeaders(e,s){if(e.get(Rg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Rg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kw="gl-node/";class zv{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const s=this.httpOptions;s?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new Pe({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:s?.timeout,maxRetries:(e=s?.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=o.interactions,this._interactions}constructor(e){var s;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(s=e.vertexai)!==null&&s!==void 0?s:!1,this.apiKey=e.apiKey;const o=OA(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new $w(this.apiKey);this.apiClient=new qC({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Kw+"web",uploader:new Yw,downloader:new Fw}),this.models=new lx(this.apiClient),this.live=new nx(this.apiClient,r,new Xw),this.batches=new pT(this.apiClient),this.chats=new KT(this.models,this.apiClient),this.caches=new XT(this.apiClient),this.files=new rE(this.apiClient),this.operations=new ux(this.apiClient),this.authTokens=new xx(this.apiClient),this.tunings=new kw(this.apiClient),this.fileSearchStores=new Lx(this.apiClient)}}const wr=`You are an expert academic coding assistant for the "GENAI TRANSPARENCY CODING PROTOCOL VERSION 2.0 (REVISED)".
Your task is to analyze the provided academic article and code it STRICTLY according to the following rules, scales, and decision rules.

You must provide DETAILED explanations and FULL quotes. Do not summarize briefly; explain the reasoning based on the specific decision rules applied.

--- PROTOCOL START ---

GENERAL CODING RULES:
RULE 1: When disclosure appears in MULTIPLE LOCATIONS, code the HIGHEST transparency level observed.
RULE 2: When MULTIPLE GenAI TOOLS are used, code the MOST SPECIFICALLY identified tool and note others.
RULE 3: When GenAI is used for MULTIPLE PURPOSES, code the MOST CONSEQUENTIAL use for the research.
RULE 4: Code based on AUTHOR SELF-DECLARATION only (not AI detection tools).

VARIABLES & SCALES:

V1. LOCATION OF STATEMENT (1-5)
Research Question: Where is GenAI use reported in the article?
1 = Footnotes / Brief Notes | Ref Terms: Footnote, First page note, Author notes, Parenthetical mention | Explanation: Not in main text flow; compressed in margins, footnotes, or parentheses within sentences
2 = Standard End Sections | Ref Terms: Acknowledgments, Statement, Disclosure | Explanation: Traditional acknowledgment or disclosure section at the end of the article
3 = Formal GenAI Declaration | Ref Terms: Declaration of Generative AI, AI Statement, AI Disclosure | Explanation: Dedicated GenAI declaration section with a specific heading
4 = Main Text Integration | Ref Terms: Methodology, Data Analysis, Results, Findings | Explanation: GenAI use described as part of the methodology or findings in the main body
5 = Full Transparency + Evidence | Ref Terms: Appendix, Supplementary Material, Web Appendix | Explanation: GenAI outputs, prompts, or detailed processes provided as documentary evidence
*Decision Rule: If disclosures appear in multiple locations (e.g., both methodology AND appendix), code the HIGHEST level (e.g., 5).

V2. TOOL SPECIFICITY (1-5)
Research Question: Which GenAI tool was used and how specifically was it identified?
1 = Generic Terms Only | Ref Terms: LLM, Generative AI, GenAI, Large Language Model, AI tool | Explanation: No brand or model name mentioned; only general GenAI reference
2 = Brand/Model Name | Ref Terms: ChatGPT, Gemini, Claude, Mistral, DALL-E, Midjourney, Copilot | Explanation: Brand or product name specified without version number
3 = Version Number | Ref Terms: ChatGPT 4.0, GPT-3.5, ChatGPT 4o, Llama-2, Claude 3 | Explanation: Name with version or number suffix (4.0, 4o, 3.5, v3)
4 = Version + Access Date | Ref Terms: ChatGPT 4.0 (March 2024), GPT-4o (accessed May 2024) | Explanation: Version plus the date when the author ACCESSED/USED the tool (not release date)
5 = Technical Identifier / API | Ref Terms: gpt-4o-2024-05-13, GPT-3.5-turbo, gemini-1.5-pro-128k, custom GPT links | Explanation: Technical API codes, model identifiers, or custom GPT access links
*Decision Rule: If multiple tools are mentioned, code the tool used for the MOST CONSEQUENTIAL purpose (highest V3 score). If same V3 level, code the most specific. Note all other tools in warnings.
*NOTE: Distinguish between web interface use (less reproducible) and API/terminal use (more reproducible) when relevant to interpretation.

V3. PURPOSE OF USE (0-5)
Research Question: What was GenAI used for in the research process?
0 = No Specific Action | Ref Terms: "ChatGPT was used", "We utilized GenAI tools", "AI was employed" | Explanation: No action verb specified; only generic 'used/employed' stated
1 = Language Editing (Passive) | Ref Terms: Grammar, spelling, polish, readability, proofreading, flow | Explanation: Only grammar/spelling/flow corrections; content remains unchanged
2 = Writing Support (Active) | Ref Terms: Paraphrasing, summarizing, rewriting, restructuring, drafting sections | Explanation: Content being reshaped, restructured, or rephrased by GenAI
3 = Content/Stimuli Generation | Ref Terms: Generating scenarios, images, ads, stimuli, survey items, vignettes | Explanation: GenAI-generated content used directly as research materials
4 = Analytic/Technical Tasks | Ref Terms: Text classification, sentiment analysis, thematic coding, code writing | Explanation: GenAI used for data classification, coding, or programming tasks
5 = Methodological Integration | Ref Terms: Synthetic data, simulated participants, GPT-as-respondent | Explanation: GenAI used as a data source, participant simulator, or core method
*Decision Rule: If GenAI output goes DIRECTLY into research data, stimuli, or findings -> code >= 3. If output only improves existing author content -> code <= 2.
*MULTIPLE PURPOSES: When GenAI is used for multiple purposes, code the MOST CONSEQUENTIAL use for the research outcomes.

V4. PROMPT DISCLOSURE (0-5)
Research Question: Were prompts or instructions shared to enable reproducibility?
0 = No Prompt Information | Ref Terms: "Used to improve readability" (no prompt mention) | Explanation: No mention of prompt, instruction, command, or query given to GenAI
1 = General Statement | Ref Terms: "Prompts were given", "Instructions provided", "We asked ChatGPT" | Explanation: States that commands were given but provides no examples
2 = Single Example | Ref Terms: "We asked: 'Can you analyze these reviews?'" | Explanation: One quoted command or single summarized prompt provided
3 = Multiple Examples | Ref Terms: "First asked to draft, then asked to 'revise for clarity'" | Explanation: Two or more different prompt examples presented
4 = Prompt + Rationale | Ref Terms: "Prompt structure: [Context] + [Task] + [Format]" | Explanation: Prompts plus explanation of prompt design logic or strategy
5 = Complete Prompt Archive | Ref Terms: "Full prompts in appendix", "ChatGPT conversation link shared" | Explanation: Complete prompt sequence in supplementary material or accessible link
*N/A CONSIDERATION: For language editing only (V3=1), Code 0 for V4 may be appropriate and not necessarily a deficiency. Note this in the warnings field.

V5. HUMAN VERIFICATION (0-5)
Research Question: Did humans verify, review, or validate GenAI outputs?
0 = No Statement | Ref Terms: Only "X tool was used" with no follow-up | Explanation: No mention of control, responsibility, review, or verification
1 = General Statement | Ref Terms: "Outputs were checked", "Content was reviewed" | Explanation: Passive statement of control; no subject or method specified
2 = Author-Specific Statement | Ref Terms: "The authors reviewed and edited the content" | Explanation: Authors explicitly stated as verification subject
3 = Procedural Detail | Ref Terms: "Manual check line-by-line", "Edits did not exceed 10%" | Explanation: Numerical threshold or procedural description of verification method
4 = Multiple Verification Methods | Ref Terms: "Reviewed by authors AND checked by external editor" | Explanation: Two or more distinct verification approaches applied (internal + external, or two different methods)
5 = Systematic Validation | Ref Terms: "Compared GenAI output with human coders; 95% agreement" | Explanation: Formal comparison with human benchmark or systematic accuracy testing
*Decision Rule: Code based on the MOST RIGOROUS verification described. Multiple methods (internal + external) = Code 4. Scientific testing/comparison = Code 5.

V6. LIMITATION ACKNOWLEDGMENT (0-5)
Research Question: Were GenAI limitations, risks, or potential biases acknowledged?
0 = No Information | Ref Terms: (Only those who disclose use but add nothing else) | Explanation: No mention of error, risk, limitation, or bias
1 = General Warning | Ref Terms: "GenAI can make mistakes", "AI is not perfect" | Explanation: Vague acknowledgment that errors are possible
2 = Specific Limitation Type | Ref Terms: "GenAI may hallucinate", "Potential for bias exists" | Explanation: Specific limitation type mentioned (hallucination, bias, etc.)
3 = Tool-Specific Limitation | Ref Terms: "GPT-4 has known limitations in...", "Claude may not..." | Explanation: Specific model/tool paired with specific limitation statement
4 = Research Impact Statement | Ref Terms: "Biases may have affected diversity of responses" | Explanation: Explicit statement of how limitation may have impacted THIS specific study
5 = Comprehensive Risk Analysis | Ref Terms: "Ethical considerations regarding...", "Privacy implications..." | Explanation: Extended discussion of risks including ethical, privacy, or validity concerns

--- PROTOCOL END ---

OUTPUT INSTRUCTIONS:
1.  **explanation_en**: Write a detailed paragraph (3-4 sentences). Explicitly state WHICH keywords were found, WHERE they were found, and WHY they fit the specific category based on the Decision Rules.
2.  **explanation_tr**: Translate the detailed explanation above into professional Turkish.
3.  **quote**: Extract the FULL sentence(s) or paragraph that serves as evidence. Do not just cut a few words; provide enough context to prove the score.
4.  **location**: Be specific (e.g., "Page 3, Methodology Section, Paragraph 2").

OUTPUT FORMAT (JSON):
{
  "found_genai_disclosure": boolean,
  "v1": { "score": number|null, "confidence": "HIGH", "explanation_en": "Detailed reasoning...", "explanation_tr": "Detayl aklama...", "quote": "Full context quote...", "location": "Specific location..." },
  "v2": { ... },
  "v3": { ... },
  "v4": { ... },
  "v5": { ... },
  "v6": { ... },
  "total_score": number|null,
  "category": "Low (2-12) / Moderate (13-21) / High (22-30) / N/A",
  "overall_confidence": "HIGH",
  "warnings": ["Notes"]
}

If NO disclosure found, set "found_genai_disclosure": false.
BE CONSERVATIVE. IF EVIDENCE IS NOT EXPLICIT, DO NOT CODE HIGHER.`,Qw=async(i,e,s)=>{const o=new zv({apiKey:s});try{const d=((await o.models.generateContent({model:i,contents:{parts:[{text:`Analyze this academic article for GenAI transparency disclosure based on Protocol v2.0 (Revised). Provide detailed evidence and reasoning:

${e.substring(0,95e3)}`}]},config:{systemInstruction:wr,temperature:0,maxOutputTokens:8192,responseMimeType:"application/json"}})).text||"{}").replace(/```json\n?|\n?```/g,"").trim();return JSON.parse(d)}catch(r){throw console.error("Gemini API Error:",r),new Error(r.message||"Failed to analyze document")}},Ww=async(i,e,s,o,r)=>{const u=new zv({apiKey:r}),p=`You are an expert, persuasive, and highly intelligent academic coding assistant for the "GENAI TRANSPARENCY CODING PROTOCOL VERSION 2.0 (REVISED)".
  You are chatting with a user who is analyzing an academic article using this protocol.
  
  Your goal is to provide PERFECT, FOCUSED, CLEAR, and PERSUASIVE answers.
  
  You have access to the full text of the document (provided below) and the full protocol (provided in system instructions).
  
  STRICTLY FOLLOW THE PROTOCOL RULES.
  
  STYLE GUIDELINES:
  1. DO NOT use excessive bolding (avoid **text** unless absolutely necessary for a single key term). The user dislikes "star star" formatting.
  2. Write in a natural, professional, and persuasive flow. Avoid robotic lists if a paragraph explains it better.
  3. Be authoritative and convincing. Use your knowledge of the protocol to justify your answers definitively.
  4. If the user asks about the model, confirm you are using the advanced Gemini model selected in the application (e.g., Gemini 3.0 Pro).
  
  --- PROTOCOL START ---
  ${wr.split("--- PROTOCOL START ---")[1]?.split("--- PROTOCOL END ---")[0]||""}
  --- PROTOCOL END ---
  
  DOCUMENT CONTEXT:
  ${e.substring(0,5e5)}... (truncated if too long)
  `;try{return(await u.chats.create({model:i,history:s,config:{systemInstruction:p,temperature:.3}}).sendMessage({message:o})).text}catch(y){throw console.error("Gemini Chat Error:",y),new Error(y.message||"Failed to send message")}},qv="https://api.anthropic.com/v1/messages",Zw=async(i,e,s)=>{const o=await fetch(qv,{method:"POST",headers:{"x-api-key":s,"anthropic-version":"2023-06-01","content-type":"application/json","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:i,max_tokens:8192,temperature:.1,system:wr,messages:[{role:"user",content:`Analyze this academic article for GenAI transparency disclosure based on Protocol v2.0 (Revised). Provide detailed evidence and reasoning:

${e.substring(0,95e3)}`}]})});if(!o.ok){const p=await o.json().catch(()=>({}));throw new Error(p?.error?.message||`Claude API error: ${o.status}`)}const d=((await o.json())?.content?.[0]?.text||"{}").replace(/```json\n?|\n?```/g,"").trim();return JSON.parse(d)},jw=async(i,e,s,o,r)=>{const d=`You are an expert, persuasive, and highly intelligent academic coding assistant for the "GENAI TRANSPARENCY CODING PROTOCOL VERSION 2.0 (REVISED)".
  You are chatting with a user who is analyzing an academic article using this protocol.

  Your goal is to provide PERFECT, FOCUSED, CLEAR, and PERSUASIVE answers.

  STRICTLY FOLLOW THE PROTOCOL RULES.

  STYLE GUIDELINES:
  1. DO NOT use excessive bolding. Write in a natural, professional, and persuasive flow.
  2. Be authoritative and convincing. Use your knowledge of the protocol to justify your answers definitively.

  --- PROTOCOL START ---
  ${wr.split("--- PROTOCOL START ---")[1]?.split("--- PROTOCOL END ---")[0]||""}
  --- PROTOCOL END ---

  DOCUMENT CONTEXT:
  ${e.substring(0,5e5)}`,p=[...s,{role:"user",content:o}],y=await fetch(qv,{method:"POST",headers:{"x-api-key":r,"anthropic-version":"2023-06-01","content-type":"application/json","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:i,max_tokens:4096,temperature:.3,system:d,messages:p})});if(!y.ok){const g=await y.json().catch(()=>({}));throw new Error(g?.error?.message||`Claude API error: ${y.status}`)}return(await y.json())?.content?.[0]?.text||"No response"},tR=({documentText:i,model:e,apiKey:s})=>{const[o,r]=te.useState([]),[u,d]=te.useState(""),[p,y]=te.useState(!1),h=te.useRef(null),g=()=>{h.current?.scrollIntoView({behavior:"smooth"})};te.useEffect(()=>{g()},[o]);const A=async()=>{if(!u.trim()||p)return;const C=u.trim();d(""),r(_=>[..._,{role:"user",text:C}]),y(!0);try{let _;if(e.startsWith("claude")){const v=o.map(x=>({role:x.role==="model"?"assistant":"user",content:x.text}));_=await jw(e,i,v,C,s)}else{const v=o.map(x=>({role:x.role,parts:[{text:x.text}]}));_=await Ww(e,i,v,C,s)}r(v=>[...v,{role:"model",text:_||"No response"}])}catch(_){console.error("Chat error:",_),r(v=>[...v,{role:"model",text:"Sorry, I encountered an error. Please try again."}])}finally{y(!1)}},E=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),A())},R=C=>({"gemini-2.5-pro":"Gemini 2.5 Pro","gemini-2.5-flash":"Gemini 2.5 Flash","gemini-2.5-flash-lite":"Gemini 2.5 Flash Lite","gemini-2.0-flash":"Gemini 2.0 Flash","gemini-2.0-flash-lite":"Gemini 2.0 Flash Lite","gemini-1.5-pro":"Gemini 1.5 Pro","gemini-1.5-flash":"Gemini 1.5 Flash","gemini-1.5-flash-8b":"Gemini 1.5 Flash 8B","claude-opus-4-6":"Claude Opus 4.6","claude-sonnet-4-6":"Claude Sonnet 4.6","claude-opus-4-5":"Claude Opus 4.5","claude-sonnet-4-5":"Claude Sonnet 4.5","claude-haiku-4-5":"Claude Haiku 4.5","claude-opus-4-1":"Claude Opus 4.1","claude-sonnet-4-0":"Claude Sonnet 4.0","claude-opus-4-0":"Claude Opus 4.0","claude-3-7-sonnet-20250219":"Claude 3.7 Sonnet","claude-3-haiku-20240307":"Claude 3 Haiku"})[C]??C;return B.jsxs("div",{className:"flex flex-col h-full bg-card overflow-hidden",children:[B.jsxs("div",{className:"p-4 border-b border-border font-bold text-sm bg-card/50 flex justify-between items-center",children:[B.jsxs("div",{className:"flex items-center gap-2",children:[B.jsx("span",{children:" Protocol Assistant"}),B.jsx("span",{className:"text-[10px] bg-primary/10 text-primary px-2 py-0.5 rounded-full border border-primary/20",children:R(e)})]}),B.jsx("span",{className:"text-xs text-muted font-normal hidden sm:inline",children:"Ask about the protocol or document"})]}),B.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar bg-bg/50",children:[o.length===0&&B.jsxs("div",{className:"text-center text-muted text-sm mt-8 px-4",children:[B.jsx("div",{className:"mb-2 text-2xl",children:""}),B.jsx("p",{children:"Hi! I'm your coding assistant."}),B.jsx("p",{className:"mt-1",children:"I know the full transparency protocol and have read the document."}),B.jsx("p",{className:"mt-4 text-xs text-dim",children:"Try asking:"}),B.jsxs("ul",{className:"text-xs text-dim mt-2 space-y-1",children:[B.jsx("li",{children:'"Does this article mention specific prompts?"'}),B.jsx("li",{children:'"How should I code V3 if they used it for editing?"'}),B.jsx("li",{children:'"Is there a limitations section?"'})]})]}),o.map((C,_)=>B.jsx("div",{className:`flex ${C.role==="user"?"justify-end":"justify-start"}`,children:B.jsx("div",{className:`max-w-[85%] rounded-lg px-4 py-2.5 text-sm leading-relaxed ${C.role==="user"?"bg-primary text-white rounded-br-none":"bg-input text-text rounded-bl-none border border-border"}`,children:C.text})},_)),p&&B.jsx("div",{className:"flex justify-start",children:B.jsx("div",{className:"bg-input text-text rounded-lg rounded-bl-none border border-border px-4 py-3",children:B.jsxs("div",{className:"flex gap-1.5",children:[B.jsx("div",{className:"w-2 h-2 bg-dim rounded-full animate-bounce",style:{animationDelay:"0ms"}}),B.jsx("div",{className:"w-2 h-2 bg-dim rounded-full animate-bounce",style:{animationDelay:"150ms"}}),B.jsx("div",{className:"w-2 h-2 bg-dim rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),B.jsx("div",{ref:h})]}),B.jsx("div",{className:"p-3 border-t border-border bg-card",children:B.jsxs("div",{className:"flex gap-2",children:[B.jsx("input",{type:"text",value:u,onChange:C=>d(C.target.value),onKeyDown:E,placeholder:"Ask a question...",disabled:p,className:"flex-1 bg-input border border-border rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-primary transition-colors disabled:opacity-50"}),B.jsx("button",{onClick:A,disabled:p||!u.trim(),className:"bg-primary text-white p-2 rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:B.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:B.jsx("path",{d:"M3.105 2.289a.75.75 0 00-.826.95l1.414 4.925A1.5 1.5 0 005.135 9.25h6.115a.75.75 0 010 1.5H5.135a1.5 1.5 0 00-1.442 1.086l-1.414 4.926a.75.75 0 00.826.95 28.896 28.896 0 0015.293-7.154.75.75 0 000-1.115A28.897 28.897 0 003.105 2.289z"})})})]})})]})};var Xu={exports:{}},_g;function eR(){return _g||(_g=1,(function(i){var e=(function(s){var o=Object.prototype,r=o.hasOwnProperty,u=Object.defineProperty||function(ot,ct,z){ot[ct]=z.value},d,p=typeof Symbol=="function"?Symbol:{},y=p.iterator||"@@iterator",h=p.asyncIterator||"@@asyncIterator",g=p.toStringTag||"@@toStringTag";function A(ot,ct,z){return Object.defineProperty(ot,ct,{value:z,enumerable:!0,configurable:!0,writable:!0}),ot[ct]}try{A({},"")}catch{A=function(ct,z,K){return ct[z]=K}}function E(ot,ct,z,K){var at=ct&&ct.prototype instanceof P?ct:P,ft=Object.create(at.prototype),Ct=new X(K||[]);return u(ft,"_invoke",{value:Rt(ot,z,Ct)}),ft}s.wrap=E;function R(ot,ct,z){try{return{type:"normal",arg:ot.call(ct,z)}}catch(K){return{type:"throw",arg:K}}}var C="suspendedStart",_="suspendedYield",v="executing",x="completed",I={};function P(){}function k(){}function V(){}var O={};A(O,y,function(){return this});var q=Object.getPrototypeOf,et=q&&q(q(dt([])));et&&et!==o&&r.call(et,y)&&(O=et);var W=V.prototype=P.prototype=Object.create(O);k.prototype=V,u(W,"constructor",{value:V,configurable:!0}),u(V,"constructor",{value:k,configurable:!0}),k.displayName=A(V,g,"GeneratorFunction");function lt(ot){["next","throw","return"].forEach(function(ct){A(ot,ct,function(z){return this._invoke(ct,z)})})}s.isGeneratorFunction=function(ot){var ct=typeof ot=="function"&&ot.constructor;return ct?ct===k||(ct.displayName||ct.name)==="GeneratorFunction":!1},s.mark=function(ot){return Object.setPrototypeOf?Object.setPrototypeOf(ot,V):(ot.__proto__=V,A(ot,g,"GeneratorFunction")),ot.prototype=Object.create(W),ot},s.awrap=function(ot){return{__await:ot}};function gt(ot,ct){function z(ft,Ct,yt,F){var N=R(ot[ft],ot,Ct);if(N.type==="throw")F(N.arg);else{var b=N.arg,T=b.value;return T&&typeof T=="object"&&r.call(T,"__await")?ct.resolve(T.__await).then(function(w){z("next",w,yt,F)},function(w){z("throw",w,yt,F)}):ct.resolve(T).then(function(w){b.value=w,yt(b)},function(w){return z("throw",w,yt,F)})}}var K;function at(ft,Ct){function yt(){return new ct(function(F,N){z(ft,Ct,F,N)})}return K=K?K.then(yt,yt):yt()}u(this,"_invoke",{value:at})}lt(gt.prototype),A(gt.prototype,h,function(){return this}),s.AsyncIterator=gt,s.async=function(ot,ct,z,K,at){at===void 0&&(at=Promise);var ft=new gt(E(ot,ct,z,K),at);return s.isGeneratorFunction(ct)?ft:ft.next().then(function(Ct){return Ct.done?Ct.value:ft.next()})};function Rt(ot,ct,z){var K=C;return function(ft,Ct){if(K===v)throw new Error("Generator is already running");if(K===x){if(ft==="throw")throw Ct;return vt()}for(z.method=ft,z.arg=Ct;;){var yt=z.delegate;if(yt){var F=_t(yt,z);if(F){if(F===I)continue;return F}}if(z.method==="next")z.sent=z._sent=z.arg;else if(z.method==="throw"){if(K===C)throw K=x,z.arg;z.dispatchException(z.arg)}else z.method==="return"&&z.abrupt("return",z.arg);K=v;var N=R(ot,ct,z);if(N.type==="normal"){if(K=z.done?x:_,N.arg===I)continue;return{value:N.arg,done:z.done}}else N.type==="throw"&&(K=x,z.method="throw",z.arg=N.arg)}}}function _t(ot,ct){var z=ct.method,K=ot.iterator[z];if(K===d)return ct.delegate=null,z==="throw"&&ot.iterator.return&&(ct.method="return",ct.arg=d,_t(ot,ct),ct.method==="throw")||z!=="return"&&(ct.method="throw",ct.arg=new TypeError("The iterator does not provide a '"+z+"' method")),I;var at=R(K,ot.iterator,ct.arg);if(at.type==="throw")return ct.method="throw",ct.arg=at.arg,ct.delegate=null,I;var ft=at.arg;if(!ft)return ct.method="throw",ct.arg=new TypeError("iterator result is not an object"),ct.delegate=null,I;if(ft.done)ct[ot.resultName]=ft.value,ct.next=ot.nextLoc,ct.method!=="return"&&(ct.method="next",ct.arg=d);else return ft;return ct.delegate=null,I}lt(W),A(W,g,"Generator"),A(W,y,function(){return this}),A(W,"toString",function(){return"[object Generator]"});function Tt(ot){var ct={tryLoc:ot[0]};1 in ot&&(ct.catchLoc=ot[1]),2 in ot&&(ct.finallyLoc=ot[2],ct.afterLoc=ot[3]),this.tryEntries.push(ct)}function j(ot){var ct=ot.completion||{};ct.type="normal",delete ct.arg,ot.completion=ct}function X(ot){this.tryEntries=[{tryLoc:"root"}],ot.forEach(Tt,this),this.reset(!0)}s.keys=function(ot){var ct=Object(ot),z=[];for(var K in ct)z.push(K);return z.reverse(),function at(){for(;z.length;){var ft=z.pop();if(ft in ct)return at.value=ft,at.done=!1,at}return at.done=!0,at}};function dt(ot){if(ot){var ct=ot[y];if(ct)return ct.call(ot);if(typeof ot.next=="function")return ot;if(!isNaN(ot.length)){var z=-1,K=function at(){for(;++z<ot.length;)if(r.call(ot,z))return at.value=ot[z],at.done=!1,at;return at.value=d,at.done=!0,at};return K.next=K}}return{next:vt}}s.values=dt;function vt(){return{value:d,done:!0}}return X.prototype={constructor:X,reset:function(ot){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(j),!ot)for(var ct in this)ct.charAt(0)==="t"&&r.call(this,ct)&&!isNaN(+ct.slice(1))&&(this[ct]=d)},stop:function(){this.done=!0;var ot=this.tryEntries[0],ct=ot.completion;if(ct.type==="throw")throw ct.arg;return this.rval},dispatchException:function(ot){if(this.done)throw ot;var ct=this;function z(F,N){return ft.type="throw",ft.arg=ot,ct.next=F,N&&(ct.method="next",ct.arg=d),!!N}for(var K=this.tryEntries.length-1;K>=0;--K){var at=this.tryEntries[K],ft=at.completion;if(at.tryLoc==="root")return z("end");if(at.tryLoc<=this.prev){var Ct=r.call(at,"catchLoc"),yt=r.call(at,"finallyLoc");if(Ct&&yt){if(this.prev<at.catchLoc)return z(at.catchLoc,!0);if(this.prev<at.finallyLoc)return z(at.finallyLoc)}else if(Ct){if(this.prev<at.catchLoc)return z(at.catchLoc,!0)}else if(yt){if(this.prev<at.finallyLoc)return z(at.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(ot,ct){for(var z=this.tryEntries.length-1;z>=0;--z){var K=this.tryEntries[z];if(K.tryLoc<=this.prev&&r.call(K,"finallyLoc")&&this.prev<K.finallyLoc){var at=K;break}}at&&(ot==="break"||ot==="continue")&&at.tryLoc<=ct&&ct<=at.finallyLoc&&(at=null);var ft=at?at.completion:{};return ft.type=ot,ft.arg=ct,at?(this.method="next",this.next=at.finallyLoc,I):this.complete(ft)},complete:function(ot,ct){if(ot.type==="throw")throw ot.arg;return ot.type==="break"||ot.type==="continue"?this.next=ot.arg:ot.type==="return"?(this.rval=this.arg=ot.arg,this.method="return",this.next="end"):ot.type==="normal"&&ct&&(this.next=ct),I},finish:function(ot){for(var ct=this.tryEntries.length-1;ct>=0;--ct){var z=this.tryEntries[ct];if(z.finallyLoc===ot)return this.complete(z.completion,z.afterLoc),j(z),I}},catch:function(ot){for(var ct=this.tryEntries.length-1;ct>=0;--ct){var z=this.tryEntries[ct];if(z.tryLoc===ot){var K=z.completion;if(K.type==="throw"){var at=K.arg;j(z)}return at}}throw new Error("illegal catch attempt")},delegateYield:function(ot,ct,z){return this.delegate={iterator:dt(ot),resultName:ct,nextLoc:z},this.method==="next"&&(this.arg=d),I}},s})(i.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(Xu)),Xu.exports}var Ju,Mg;function Hc(){return Mg||(Mg=1,Ju=(i,e)=>`${i}-${e}-${Math.random().toString(16).slice(3,8)}`),Ju}var $u,Ig;function Bv(){if(Ig)return $u;Ig=1;const i=Hc();let e=0;return $u=({id:s,action:o,payload:r={}})=>{let u=s;return typeof u>"u"&&(u=i("Job",e),e+=1),{id:u,action:o,payload:r}},$u}var Vo={},Ng;function Vc(){if(Ng)return Vo;Ng=1;let i=!1;return Vo.logging=i,Vo.setLogging=e=>{i=e},Vo.log=(...e)=>i?console.log.apply(this,e):null,Vo}var Ku,Dg;function nR(){if(Dg)return Ku;Dg=1;const i=Bv(),{log:e}=Vc(),s=Hc();let o=0;return Ku=()=>{const r=s("Scheduler",o),u={},d={};let p=[];o+=1;const y=()=>p.length,h=()=>Object.keys(u).length,g=()=>{if(p.length!==0){const _=Object.keys(u);for(let v=0;v<_.length;v+=1)if(typeof d[_[v]]>"u"){p[0](u[_[v]]);break}}},A=(_,v)=>new Promise((x,I)=>{const P=i({action:_,payload:v});p.push(async k=>{p.shift(),d[k.id]=P;try{x(await k[_].apply(this,[...v,P.id]))}catch(V){I(V)}finally{delete d[k.id],g()}}),e(`[${r}]: Add ${P.id} to JobQueue`),e(`[${r}]: JobQueue length=${p.length}`),g()});return{addWorker:_=>(u[_.id]=_,e(`[${r}]: Add ${_.id}`),e(`[${r}]: Number of workers=${h()}`),g(),_.id),addJob:async(_,...v)=>{if(h()===0)throw Error(`[${r}]: You need to have at least one worker before adding jobs`);return A(_,v)},terminate:async()=>{Object.keys(u).forEach(async _=>{await u[_].terminate()}),p=[]},getQueueLen:y,getNumWorkers:h}},Ku}function iR(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Qu,Lg;function sR(){return Lg||(Lg=1,Qu=i=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof iR=="function"&&(e.type="node"),typeof i>"u"?e:e[i]}),Qu}var Wu,Pg;function oR(){if(Pg)return Wu;Pg=1;const e=sR()("type")==="browser"?s=>new URL(s,window.location.href).href:s=>s;return Wu=s=>{const o={...s};return["corePath","workerPath","langPath"].forEach(r=>{s[r]&&(o[r]=e(o[r]))}),o},Wu}var Zu,kg;function Yv(){return kg||(kg=1,Zu={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),Zu}const aR="7.0.0",rR={version:aR};var ju,Fg;function lR(){return Fg||(Fg=1,ju={workerBlobURL:!0,logger:()=>{}}),ju}var tc,Ug;function uR(){if(Ug)return tc;Ug=1;const i=rR.version;return tc={...lR(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${i}/dist/worker.min.js`},tc}var ec,Og;function cR(){return Og||(Og=1,ec=({workerPath:i,workerBlobURL:e})=>{let s;if(Blob&&URL&&e){const o=new Blob([`importScripts("${i}");`],{type:"application/javascript"});s=new Worker(URL.createObjectURL(o))}else s=new Worker(i);return s}),ec}var nc,Gg;function dR(){return Gg||(Gg=1,nc=i=>{i.terminate()}),nc}var ic,Hg;function fR(){return Hg||(Hg=1,ic=(i,e)=>{i.onmessage=({data:s})=>{e(s)}}),ic}var sc,Vg;function hR(){return Vg||(Vg=1,sc=async(i,e)=>{i.postMessage(e)}),sc}var oc,zg;function pR(){if(zg)return oc;zg=1;const i=s=>new Promise((o,r)=>{const u=new FileReader;u.onload=()=>{o(u.result)},u.onerror=({target:{error:{code:d}}})=>{r(Error(`File could not be read! Code=${d}`))},u.readAsArrayBuffer(s)}),e=async s=>{let o=s;if(typeof s>"u")return"undefined";if(typeof s=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(s)?o=atob(s.split(",")[1]).split("").map(r=>r.charCodeAt(0)):o=await(await fetch(s)).arrayBuffer();else if(typeof HTMLElement<"u"&&s instanceof HTMLElement)s.tagName==="IMG"&&(o=await e(s.src)),s.tagName==="VIDEO"&&(o=await e(s.poster)),s.tagName==="CANVAS"&&await new Promise(r=>{s.toBlob(async u=>{o=await i(u),r()})});else if(typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas){const r=await s.convertToBlob();o=await i(r)}else(s instanceof File||s instanceof Blob)&&(o=await i(s));return new Uint8Array(o)};return oc=e,oc}var ac,qg;function mR(){if(qg)return ac;qg=1;const i=uR(),e=cR(),s=dR(),o=fR(),r=hR(),u=pR();return ac={defaultOptions:i,spawnWorker:e,terminateWorker:s,onMessage:o,send:r,loadImage:u},ac}var rc,Bg;function Xv(){if(Bg)return rc;Bg=1;const i=oR(),e=Bv(),{log:s}=Vc(),o=Hc(),r=Yv(),{defaultOptions:u,spawnWorker:d,terminateWorker:p,onMessage:y,loadImage:h,send:g}=mR();let A=0;return rc=async(E="eng",R=r.LSTM_ONLY,C={},_={})=>{const v=o("Worker",A),{logger:x,errorHandler:I,...P}=i({...u,...C}),k={},V=typeof E=="string"?E.split("+"):E;let O=R,q=_;const et=[r.DEFAULT,r.LSTM_ONLY].includes(R)&&!P.legacyCore;let W,lt;const gt=new Promise((b,T)=>{lt=b,W=T}),Rt=b=>{W(b.message)};let _t=d(P);_t.onerror=Rt,A+=1;const Tt=({id:b,action:T,payload:w})=>new Promise((M,L)=>{s(`[${v}]: Start ${b}, action=${T}`);const U=`${T}-${b}`;k[U]={resolve:M,reject:L},g(_t,{workerId:v,jobId:b,action:T,payload:w})}),j=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),X=b=>Tt(e({id:b,action:"load",payload:{options:{lstmOnly:et,corePath:P.corePath,logging:P.logging}}})),dt=(b,T,w)=>Tt(e({id:w,action:"FS",payload:{method:"writeFile",args:[b,T]}})),vt=(b,T)=>Tt(e({id:T,action:"FS",payload:{method:"readFile",args:[b,{encoding:"utf8"}]}})),ot=(b,T)=>Tt(e({id:T,action:"FS",payload:{method:"unlink",args:[b]}})),ct=(b,T,w)=>Tt(e({id:w,action:"FS",payload:{method:b,args:T}})),z=(b,T)=>Tt(e({id:T,action:"loadLanguage",payload:{langs:b,options:{langPath:P.langPath,dataPath:P.dataPath,cachePath:P.cachePath,cacheMethod:P.cacheMethod,gzip:P.gzip,lstmOnly:[r.DEFAULT,r.LSTM_ONLY].includes(O)&&!P.legacyLang}}})),K=(b,T,w,M)=>Tt(e({id:M,action:"initialize",payload:{langs:b,oem:T,config:w}})),at=(b="eng",T,w,M)=>{if(et&&[r.TESSERACT_ONLY,r.TESSERACT_LSTM_COMBINED].includes(T))throw Error("Legacy model requested but code missing.");const L=T||O;O=L;const U=w||q;q=U;const Y=(typeof b=="string"?b.split("+"):b).filter($=>!V.includes($));return V.push(...Y),Y.length>0?z(Y,M).then(()=>K(b,L,U,M)):K(b,L,U,M)},ft=(b={},T)=>Tt(e({id:T,action:"setParameters",payload:{params:b}})),Ct=async(b,T={},w={text:!0},M)=>Tt(e({id:M,action:"recognize",payload:{image:await h(b),options:T,output:w}})),yt=async(b,T)=>{if(et)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return Tt(e({id:T,action:"detect",payload:{image:await h(b)}}))},F=async()=>(_t!==null&&(p(_t),_t=null),Promise.resolve());y(_t,({workerId:b,jobId:T,status:w,action:M,data:L})=>{const U=`${M}-${T}`;if(w==="resolve")s(`[${b}]: Complete ${T}`),k[U].resolve({jobId:T,data:L}),delete k[U];else if(w==="reject")if(k[U].reject(L),delete k[U],M==="load"&&W(L),I)I(L);else throw Error(L);else w==="progress"&&x({...L,userJobId:T})});const N={id:v,worker:_t,load:j,writeText:dt,readText:vt,removeFile:ot,FS:ct,reinitialize:at,setParameters:ft,recognize:Ct,detect:yt,terminate:F};return X().then(()=>z(E)).then(()=>K(E,R,_)).then(()=>lt(N)).catch(()=>{}),gt},rc}var lc,Yg;function gR(){if(Yg)return lc;Yg=1;const i=Xv();return lc={recognize:async(o,r,u)=>{const d=await i(r,1,u);return d.recognize(o).finally(async()=>{await d.terminate()})},detect:async(o,r)=>{const u=await i("osd",0,r);return u.detect(o).finally(async()=>{await u.terminate()})}},lc}var uc,Xg;function vR(){return Xg||(Xg=1,uc={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),uc}var cc,Jg;function yR(){return Jg||(Jg=1,cc={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),cc}var dc,$g;function AR(){if($g)return dc;$g=1,eR();const i=nR(),e=Xv(),s=gR(),o=vR(),r=Yv(),u=yR(),{setLogging:d}=Vc();return dc={languages:o,OEM:r,PSM:u,createScheduler:i,createWorker:e,setLogging:d,...s},dc}var SR=AR();const TR=_c(SR),ER=async(i,e,s)=>{let o="";const r=Math.min(e,15);for(let u=1;u<=r;u++)try{const d=await i.getPage(u);if((await d.getTextContent()).items.map(h=>h.str).join("").length<300){s(50+u/e*40,`Running OCR on page ${u}...`);const h=d.getViewport({scale:2}),g=document.createElement("canvas"),A=g.getContext("2d");if(A){g.height=h.height,g.width=h.width,await d.render({canvasContext:A,viewport:h}).promise;const E=await TR.recognize(g,"eng");E.data.text.trim().length>30&&(o+=`
[OCR PAGE ${u}]
${E.data.text}`)}}}catch(d){console.warn(`OCR failed for page ${u}`,d)}return o},ur="GEMINI_API_KEY",cr="CLAUDE_API_KEY",bR=i=>i.startsWith("claude")?"claude":"gemini",CR=({isOpen:i,onClose:e,onSaveGemini:s,onSaveClaude:o,currentGeminiKey:r,currentClaudeKey:u})=>{const[d,p]=te.useState("gemini"),[y,h]=te.useState(r),[g,A]=te.useState(u),[E,R]=te.useState(!1);if(te.useEffect(()=>{i&&(h(r),A(u),R(!1),p(!r&&u?"gemini":r&&!u?"claude":"gemini"))},[i,r,u]),!i)return null;const C=d==="gemini",_=C?y:g,v=C?h:A,x=C?r:u,I=()=>{C?s(y.trim()):o(g.trim())},P=()=>{C?(h(""),s("")):(A(""),o(""))};return B.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:B.jsxs("div",{className:"bg-card border border-border rounded-2xl shadow-2xl w-full max-w-md",children:[B.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-border",children:[B.jsx("h2",{className:"text-base font-bold flex items-center gap-2",children:" API Key Settings"}),B.jsx("button",{onClick:e,className:"text-muted hover:text-text transition-colors text-xl leading-none",children:""})]}),B.jsxs("div",{className:"p-5 space-y-4",children:[B.jsxs("p",{className:"text-xs text-muted leading-relaxed",children:["Only ",B.jsx("span",{className:"text-primary font-semibold",children:"one key"})," is needed  choose your preferred provider. Keys are saved in your browser's localStorage only."]}),B.jsxs("div",{className:"flex rounded-xl overflow-hidden border border-border text-sm font-bold",children:[B.jsxs("button",{onClick:()=>p("gemini"),className:`flex-1 py-2.5 flex items-center justify-center gap-2 transition-colors ${d==="gemini"?"bg-blue-600 text-white":"hover:bg-input text-muted"}`,children:[" Gemini",r&&B.jsx("span",{className:"text-[9px] bg-white/20 px-1.5 py-0.5 rounded-full",children:" saved"})]}),B.jsxs("button",{onClick:()=>p("claude"),className:`flex-1 py-2.5 flex items-center justify-center gap-2 transition-colors ${d==="claude"?"bg-purple-600 text-white":"hover:bg-input text-muted"}`,children:[" Claude",u&&B.jsx("span",{className:"text-[9px] bg-white/20 px-1.5 py-0.5 rounded-full",children:" saved"})]})]}),B.jsxs("div",{className:`rounded-xl border p-4 space-y-3 ${C?"border-blue-500/20 bg-blue-500/5":"border-purple-500/20 bg-purple-500/5"}`,children:[B.jsxs("div",{className:"flex items-center gap-2",children:[B.jsxs("span",{className:"text-sm font-bold",children:[C?" Gemini":" Claude"," API Key"]}),x&&B.jsxs("span",{className:"text-[10px] text-success bg-success/10 px-2 py-0.5 rounded-full border border-success/20",children:["saved ",x.slice(-6)]})]}),B.jsxs("div",{className:"relative",children:[B.jsx("input",{type:E?"text":"password",value:_,onChange:k=>v(k.target.value),onKeyDown:k=>k.key==="Enter"&&_.trim()&&I(),placeholder:C?"AIza...":"sk-ant-...",className:"w-full bg-bg border border-border rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-primary transition-colors pr-10 font-mono"}),B.jsx("button",{onClick:()=>R(k=>!k),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted hover:text-text text-xs",type:"button",children:E?"":""})]}),B.jsxs("div",{className:"flex gap-2",children:[B.jsx("button",{onClick:I,disabled:!_.trim(),className:`flex-1 text-white py-1.5 rounded-lg text-xs font-bold transition-colors disabled:opacity-40 ${C?"bg-blue-600 hover:bg-blue-700":"bg-purple-600 hover:bg-purple-700"}`,children:"Save Key"}),x&&B.jsx("button",{onClick:P,className:"px-3 py-1.5 rounded-lg text-xs font-semibold border border-danger/40 text-danger hover:bg-danger/10 transition-colors",children:"Clear"})]}),B.jsx("p",{className:"text-[10px] text-dim",children:C?"Get a free key  aistudio.google.com":"Get a key  console.anthropic.com"})]}),B.jsx("button",{onClick:e,className:"w-full py-2 rounded-lg text-sm font-semibold border border-border hover:bg-input transition-colors",children:"Done"})]})]})})},fc=(i,e,s)=>{const o=new Blob([i],{type:s}),r=URL.createObjectURL(o),u=document.createElement("a");u.href=r,u.download=e,u.click(),URL.revokeObjectURL(r)};function xR(){const[i,e]=te.useState("gemini-2.5-pro"),[s,o]=te.useState("idle"),[r,u]=te.useState("Waiting for document..."),[d,p]=te.useState(0),[y,h]=te.useState(null),[g,A]=te.useState(null),[E,R]=te.useState(!1),[C,_]=te.useState(!1),[v,x]=te.useState("results"),[I,P]=te.useState([]),[k,V]=te.useState(null),[O,q]=te.useState(()=>localStorage.getItem(ur)||""),[et,W]=te.useState(()=>localStorage.getItem(cr)||""),lt=bR(i),gt=lt==="claude"?et:O,Rt=te.useRef(null);te.useEffect(()=>{!localStorage.getItem(ur)&&!localStorage.getItem(cr)&&_(!0)},[]);const _t=K=>{q(K),K?(localStorage.setItem(ur,K),j("Gemini API Key saved!","success")):(localStorage.removeItem(ur),j("Gemini API Key cleared","info"))},Tt=K=>{W(K),K?(localStorage.setItem(cr,K),j("Claude API Key saved!","success")):(localStorage.removeItem(cr),j("Claude API Key cleared","info"))},j=(K,at="info")=>{const ft=Date.now();P(Ct=>[...Ct,{id:ft,message:K,type:at}]),setTimeout(()=>{P(Ct=>Ct.filter(yt=>yt.id!==ft))},4e3)},X=K=>{if(K.target.files&&K.target.files[0]){const at=K.target.files[0];if(at.type!=="application/pdf"){j("Please upload a PDF file","error");return}h({file:at,pageCount:0,extractedText:"",ocrText:""}),A(null),o("loading"),u("Loading document...")}},dt=te.useCallback((K,at,ft)=>{h(Ct=>Ct?{...Ct,extractedText:K,pageCount:at}:null),V(ft),o("idle"),u('Document ready. Click "Analyze" to start.'),j("PDF loaded successfully","success")},[]),vt=async()=>{if(!y){j("No document loaded","error");return}if(!gt){_(!0),j(`Please enter your ${lt==="claude"?"Claude":"Gemini"} API Key first`,"warning");return}o("ocr"),u("Checking for OCR needs..."),p(10);try{const K=await ER(k,y.pageCount,(Ct,yt)=>{p(Ct),u(yt)});h(Ct=>Ct?{...Ct,ocrText:K}:null),o("analyzing"),u(`Sending to ${i}...`),p(75);const at=y.extractedText+`
`+K,ft=lt==="claude"?await Zw(i,at,gt):await Qw(i,at,gt);A(ft),p(100),o("complete"),u("Analysis complete"),j("Coding completed!","success"),ft.found_genai_disclosure===!1&&j(ft.message_en||"No GenAI disclosure found","warning")}catch(K){console.error(K),o("error"),u("Failed to analyze"),j("Error: "+K.message,"error")}},ot=()=>{if(!g||!y)return;const K=JSON.stringify({file:y.file.name,date:new Date().toISOString(),model:i,results:g},null,2);fc(K,`coding_${y.file.name.replace(".pdf","")}.json`,"application/json"),j("JSON exported","success")},ct=()=>{if(!g||!y)return;const K=["File","V1","V2","V3","V4","V5","V6","Total","Category"],at=[y.file.name,g.v1?.score??"",g.v2?.score??"",g.v3?.score??"",g.v4?.score??"",g.v5?.score??"",g.v6?.score??"",g.total_score??"",g.category??""],ft=K.join(",")+`
`+at.join(",");fc(ft,`coding_${y.file.name.replace(".pdf","")}.csv`,"text/csv"),j("CSV exported","success")},z=()=>{if(!g||!y)return;const K=`<!DOCTYPE html><html><head><title>GenAI Transparency Report - ${y.file.name}</title>
<style>body{font-family:Arial,sans-serif;max-width:800px;margin:40px auto;padding:20px;background:#f8fafc;color:#1e293b}h1{color:#1e293b;border-bottom:2px solid #e2e8f0;padding-bottom:10px}.score-box{background:linear-gradient(135deg,#3b82f6,#ef4444);color:white;padding:30px;border-radius:12px;text-align:center;margin:30px 0;box-shadow:0 10px 15px -3px rgba(0,0,0,0.1)}.total{font-size:56px;font-weight:bold;line-height:1}.var{margin:20px 0;padding:20px;background:white;border-left:5px solid #3b82f6;border-radius:0 8px 8px 0;box-shadow:0 1px 3px rgba(0,0,0,0.1)}.var h3{margin:0 0 10px;color:#3b82f6}.quote{background:#f1f5f9;padding:15px;border-radius:6px;font-family:monospace;font-size:0.9rem;margin-top:15px;border:1px solid #e2e8f0;color:#334155}</style></head>
<body><h1>GenAI Transparency Coding Report</h1>
<p><strong>File:</strong> ${y.file.name}<br><strong>Model:</strong> ${i}<br><strong>Date:</strong> ${new Date().toLocaleString()}</p>
<div class="score-box"><div class="total">${g.total_score??"N/A"}</div><div style="font-size:1.2rem;margin-top:10px;opacity:0.9">${g.category||""} Transparency</div></div>
${["v1","v2","v3","v4","v5","v6"].map(at=>{const ft=g[at];return`<div class="var"><h3>${{v1:"V1. Location",v2:"V2. Tool",v3:"V3. Purpose",v4:"V4. Prompt",v5:"V5. Verification",v6:"V6. Limitation"}[at]}: ${ft?.score??"N/F"}</h3><p><strong>EN:</strong> ${ft?.explanation_en||"N/A"}</p><p><strong>TR:</strong> ${ft?.explanation_tr||"N/A"}</p>${ft?.quote?`<div class="quote">"${ft.quote}"</div>`:""}</div>`}).join("")}
</body></html>`;fc(K,`report_${y.file.name.replace(".pdf","")}.html`,"text/html"),j("Report exported","success")};return B.jsxs("div",{className:"min-h-screen bg-bg text-text font-sans flex flex-col",children:[B.jsx(vA,{onOpenProtocol:()=>R(!0),onUploadClick:()=>Rt.current?.click(),onOpenSettings:()=>_(!0),hasApiKey:!!gt}),B.jsxs("main",{className:"flex-1 p-4 lg:p-6 grid grid-cols-1 xl:grid-cols-[1fr_460px] gap-6 max-w-[1800px] mx-auto w-full",children:[B.jsxs("section",{className:"bg-card border border-border rounded-xl overflow-hidden flex flex-col h-[85vh]",children:[B.jsx("div",{className:"p-4 border-b border-border font-semibold text-sm flex justify-between items-center bg-card/50",children:B.jsxs("span",{className:"flex items-center gap-2",children:[" Document ",B.jsx("span",{className:"text-muted font-normal",children:y?.file.name})]})}),B.jsxs("div",{className:"flex-1 overflow-hidden relative bg-bg",children:[B.jsx("input",{type:"file",ref:Rt,accept:".pdf",className:"hidden",onChange:X}),y?B.jsx(xA,{file:y.file,onTextExtracted:dt}):B.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center cursor-pointer hover:bg-white/5 transition-colors border-2 border-dashed border-border m-4 rounded-xl",onClick:()=>Rt.current?.click(),onDragOver:K=>{K.preventDefault(),K.currentTarget.classList.add("border-primary","bg-blue-500/10")},onDragLeave:K=>{K.currentTarget.classList.remove("border-primary","bg-blue-500/10")},onDrop:K=>{if(K.preventDefault(),K.currentTarget.classList.remove("border-primary","bg-blue-500/10"),K.dataTransfer.files[0]?.type==="application/pdf"){const at=K.dataTransfer.files[0];h({file:at,pageCount:0,extractedText:"",ocrText:""}),A(null),o("loading"),u("Loading document...")}else j("Please upload a PDF file","error")},children:[B.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-red-500 rounded-full flex items-center justify-center text-3xl mb-4 shadow-xl",children:""}),B.jsx("h3",{className:"text-lg font-bold",children:"Upload PDF Article"}),B.jsx("p",{className:"text-muted text-sm mt-1",children:"Drag & drop or click to browse"}),B.jsx("p",{className:"text-xs text-dim mt-4",children:"OCR enabled for image-based content"})]})]})]}),B.jsxs("div",{className:"flex flex-col gap-4 h-[85vh]",children:[B.jsx("div",{className:"bg-card border border-border rounded-xl p-4 shadow-lg",children:B.jsx("div",{className:"mb-2",children:B.jsxs("div",{children:[B.jsx("label",{className:"block text-xs font-bold text-dim mb-1.5 uppercase tracking-wide",children:" Model"}),O||et?B.jsxs(B.Fragment,{children:[O&&et&&B.jsxs("div",{className:"flex rounded-lg overflow-hidden border border-border mb-2 text-xs font-bold",children:[B.jsx("button",{onClick:()=>{e("gemini-2.5-pro")},className:`flex-1 py-1.5 transition-colors ${lt==="gemini"?"bg-blue-600 text-white":"hover:bg-input text-muted"}`,children:" Gemini"}),B.jsx("button",{onClick:()=>{e("claude-sonnet-4-6")},className:`flex-1 py-1.5 transition-colors ${lt==="claude"?"bg-purple-600 text-white":"hover:bg-input text-muted"}`,children:" Claude"})]}),B.jsxs("select",{value:i,onChange:K=>e(K.target.value),className:"w-full bg-input border border-border rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-primary transition-colors",children:[O&&(!et||lt==="gemini")&&B.jsxs(B.Fragment,{children:[B.jsxs("optgroup",{label:" Gemini 2.5 (Latest)",children:[B.jsx("option",{value:"gemini-2.5-pro",children:"Gemini 2.5 Pro"}),B.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"}),B.jsx("option",{value:"gemini-2.5-flash-lite",children:"Gemini 2.5 Flash Lite"})]}),B.jsxs("optgroup",{label:" Gemini 2.0",children:[B.jsx("option",{value:"gemini-2.0-flash",children:"Gemini 2.0 Flash"}),B.jsx("option",{value:"gemini-2.0-flash-lite",children:"Gemini 2.0 Flash Lite"})]}),B.jsxs("optgroup",{label:" Gemini 1.5",children:[B.jsx("option",{value:"gemini-1.5-pro",children:"Gemini 1.5 Pro"}),B.jsx("option",{value:"gemini-1.5-flash",children:"Gemini 1.5 Flash"}),B.jsx("option",{value:"gemini-1.5-flash-8b",children:"Gemini 1.5 Flash 8B"})]})]}),et&&(!O||lt==="claude")&&B.jsxs(B.Fragment,{children:[B.jsxs("optgroup",{label:" Claude 4.6 (Latest)",children:[B.jsx("option",{value:"claude-opus-4-6",children:"Claude Opus 4.6"}),B.jsx("option",{value:"claude-sonnet-4-6",children:"Claude Sonnet 4.6"})]}),B.jsxs("optgroup",{label:" Claude 4.5",children:[B.jsx("option",{value:"claude-opus-4-5",children:"Claude Opus 4.5"}),B.jsx("option",{value:"claude-sonnet-4-5",children:"Claude Sonnet 4.5"}),B.jsx("option",{value:"claude-haiku-4-5",children:"Claude Haiku 4.5"})]}),B.jsxs("optgroup",{label:" Claude 4.1 / 4.0",children:[B.jsx("option",{value:"claude-opus-4-1",children:"Claude Opus 4.1"}),B.jsx("option",{value:"claude-sonnet-4-0",children:"Claude Sonnet 4.0"}),B.jsx("option",{value:"claude-opus-4-0",children:"Claude Opus 4.0"})]}),B.jsxs("optgroup",{label:" Claude 3.7 / 3.0",children:[B.jsx("option",{value:"claude-3-7-sonnet-20250219",children:"Claude 3.7 Sonnet"}),B.jsx("option",{value:"claude-3-haiku-20240307",children:"Claude 3 Haiku"})]})]})]})]}):B.jsxs("div",{className:"space-y-2",children:[B.jsx("div",{className:"text-[11px] text-muted bg-input rounded-lg p-3 text-center",children:"Add an API key to see available models"}),B.jsx("button",{onClick:()=>_(!0),className:"w-full py-2 rounded-lg text-xs font-bold border border-warning/60 text-warning hover:bg-warning/10 transition-colors animate-pulse",children:" Add API Key"})]}),lt==="claude"&&!et&&O&&B.jsxs("p",{className:"mt-1.5 text-[11px] text-warning flex items-center gap-1",children:[" Claude API Key required "," ",B.jsx("button",{onClick:()=>_(!0),className:"underline hover:text-text transition-colors",children:"add key"})]}),lt==="gemini"&&!O&&et&&B.jsxs("p",{className:"mt-1.5 text-[11px] text-warning flex items-center gap-1",children:[" Gemini API Key required "," ",B.jsx("button",{onClick:()=>_(!0),className:"underline hover:text-text transition-colors",children:"add key"})]})]})})}),B.jsxs("div",{className:"bg-card border border-border rounded-xl p-4 shadow-lg",children:[B.jsxs("div",{className:"flex items-center gap-3 bg-input px-4 py-3 rounded-lg",children:[B.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${s==="loading"||s==="ocr"||s==="analyzing"?"bg-warning animate-pulse":s==="complete"?"bg-success":s==="error"?"bg-danger":"bg-muted"}`}),B.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:r}),(s==="idle"||s==="complete"||s==="error")&&B.jsx("button",{onClick:vt,className:"text-xs bg-primary text-white px-3 py-1.5 rounded font-bold hover:bg-blue-600 transition-colors",children:s==="idle"?"START ":"RESTART "})]}),(s==="loading"||s==="ocr"||s==="analyzing")&&B.jsxs("div",{className:"mt-3",children:[B.jsx("div",{className:"h-1.5 bg-bg rounded-full overflow-hidden",children:B.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-red-500 transition-all duration-500 ease-out",style:{width:`${d}%`}})}),B.jsx("div",{className:"flex justify-between mt-1",children:B.jsxs("span",{className:"text-[10px] font-mono text-muted",children:[Math.round(d),"%"]})})]})]}),B.jsxs("div",{className:"bg-card border border-border rounded-xl flex-1 flex flex-col overflow-hidden shadow-lg",children:[B.jsxs("div",{className:"flex border-b border-border bg-card/50",children:[B.jsx("button",{onClick:()=>x("results"),className:`flex-1 py-3 text-sm font-bold transition-colors border-b-2 ${v==="results"?"border-primary text-primary bg-primary/5":"border-transparent text-muted hover:text-text hover:bg-white/5"}`,children:" Analysis Results"}),B.jsx("button",{onClick:()=>x("chat"),className:`flex-1 py-3 text-sm font-bold transition-colors border-b-2 ${v==="chat"?"border-primary text-primary bg-primary/5":"border-transparent text-muted hover:text-text hover:bg-white/5"}`,children:" Chat Assistant"})]}),B.jsx("div",{className:"flex-1 overflow-hidden relative",children:v==="results"?B.jsx("div",{className:"absolute inset-0 flex flex-col",children:B.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar",children:[B.jsx(Os,{label:"V1. Location of Statement",range:"1-5",desc:"Where is GenAI use reported?",data:g?.v1}),B.jsx(Os,{label:"V2. Tool Specificity",range:"1-5",desc:"Which tool was used and how specifically?",data:g?.v2}),B.jsx(Os,{label:"V3. Purpose of Use",range:"0-5",desc:"What was GenAI used for?",data:g?.v3}),B.jsx(Os,{label:"V4. Prompt Disclosure",range:"0-5",desc:"Were prompts or instructions shared?",data:g?.v4}),B.jsx(Os,{label:"V5. Human Verification",range:"0-5",desc:"Did humans verify or validate outputs?",data:g?.v5}),B.jsx(Os,{label:"V6. Limitation Acknowledgment",range:"0-5",desc:"Were limitations/risks acknowledged?",data:g?.v6}),g?.found_genai_disclosure===!1&&B.jsxs("div",{className:"bg-warning/10 border border-warning/40 rounded-xl p-5 text-center mt-2 animate-in fade-in duration-500",children:[B.jsx("div",{className:"text-3xl mb-2",children:""}),B.jsx("div",{className:"font-bold text-warning text-sm mb-1",children:"No GenAI Disclosure Found"}),B.jsxs("div",{className:"text-xs text-muted leading-relaxed",children:["The article contains no author self-declaration of GenAI use.",B.jsx("br",{}),"Per Protocol Rule 4: coding is based on author self-declaration only."]})]}),g?.warnings&&g.warnings.length>0&&B.jsxs("div",{className:"bg-warning/10 border border-warning/30 rounded-xl p-4 animate-in fade-in duration-500",children:[B.jsx("div",{className:"text-xs font-bold text-warning mb-2 flex items-center gap-1",children:" Coding Notes"}),B.jsx("ul",{className:"space-y-1",children:g.warnings.map((K,at)=>B.jsxs("li",{className:"text-[11px] text-muted leading-relaxed flex items-start gap-1.5",children:[B.jsx("span",{className:"text-warning mt-0.5",children:""}),K]},at))})]}),g?.total_score!=null&&B.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-red-600 rounded-xl p-6 text-center text-white mt-4 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[B.jsx("div",{className:"text-sm opacity-90 mb-1",children:"Total Transparency Score"}),B.jsx("div",{className:"text-5xl font-bold tracking-tight mb-2",children:g.total_score}),B.jsxs("div",{className:"inline-block px-4 py-1 bg-white/20 rounded-full text-sm font-bold backdrop-blur-sm",children:[g.category," Transparency"]}),g.overall_confidence&&B.jsx("div",{className:"mt-3",children:B.jsxs("span",{className:`inline-block px-3 py-0.5 rounded-full text-[11px] font-bold backdrop-blur-sm ${g.overall_confidence==="HIGH"?"bg-green-500/30 text-green-100":g.overall_confidence==="MEDIUM"?"bg-yellow-500/30 text-yellow-100":"bg-red-500/30 text-red-100"}`,children:["Overall Confidence: ",g.overall_confidence]})})]}),g&&B.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4 pt-2 border-t border-border",children:[B.jsx("button",{onClick:ot,className:"btn-outline text-xs py-2",children:" JSON"}),B.jsx("button",{onClick:ct,className:"btn-outline text-xs py-2",children:" CSV"}),B.jsx("button",{onClick:()=>{const K=`GenAI Transparency Coding
File: ${y?.file.name}
Total: ${g.total_score}
Category: ${g.category}`;navigator.clipboard.writeText(K),j("Copied to clipboard","success")},className:"btn-outline text-xs py-2",children:" Copy"}),B.jsx("button",{onClick:z,className:"btn-primary text-xs py-2 bg-primary text-white hover:bg-blue-600",children:" Report"})]})]})}):B.jsx("div",{className:"absolute inset-0 flex flex-col",children:y?B.jsx(tR,{documentText:(y.extractedText||"")+`
`+(y.ocrText||""),model:i,apiKey:gt}):B.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted p-8 text-center",children:[B.jsx("div",{className:"text-4xl mb-4",children:""}),B.jsx("p",{children:"Please upload a document to start chatting."})]})})})]})]})]}),B.jsx(yA,{isOpen:E,onClose:()=>R(!1)}),B.jsx(CR,{isOpen:C,onClose:()=>_(!1),onSaveGemini:_t,onSaveClaude:Tt,currentGeminiKey:O,currentClaudeKey:et}),(s==="ocr"||s==="analyzing")&&B.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-40 flex items-center justify-center",children:B.jsxs("div",{className:"text-center p-8 bg-card border border-border rounded-2xl shadow-2xl max-w-sm w-full mx-4",children:[B.jsx("div",{className:"w-12 h-12 border-4 border-input border-t-primary rounded-full animate-spin mx-auto mb-4"}),B.jsx("h3",{className:"text-lg font-bold mb-1",children:r}),B.jsx("p",{className:"text-sm text-muted",children:"This may take a minute..."}),B.jsxs("div",{className:"mt-4 text-xs font-mono text-dim",children:[Math.round(d),"% Complete"]})]})}),B.jsx("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-2 pointer-events-none",children:I.map(K=>B.jsxs("div",{className:`pointer-events-auto flex items-center gap-3 px-5 py-3 rounded-lg shadow-2xl border-l-4 animate-in slide-in-from-right duration-300 bg-card border border-border ${K.type==="success"?"border-l-success":K.type==="error"?"border-l-danger":K.type==="warning"?"border-l-warning":"border-l-primary"}`,children:[B.jsx("span",{children:K.type==="success"?"":K.type==="error"?"":K.type==="warning"?"":""}),B.jsx("span",{className:"text-sm font-medium",children:K.message})]},K.id))})]})}const Os=({label:i,range:e,desc:s,data:o})=>{const r=o&&o.score!==null,u=o&&o.score===null;return B.jsxs("div",{className:`p-4 rounded-xl border transition-all duration-200 ${r?"bg-input/50 border-success/30 hover:border-success/60":u?"bg-input/30 border-warning/30 hover:border-warning/60":"bg-input border-transparent hover:border-border"}`,children:[B.jsxs("div",{className:"flex justify-between items-start mb-2",children:[B.jsxs("div",{children:[B.jsxs("div",{className:"font-semibold text-sm flex items-center gap-2",children:[i,B.jsx("span",{className:"text-[10px] bg-bg px-1.5 py-0.5 rounded text-muted font-mono",children:e}),r&&o.confidence&&B.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded-full font-bold ${o.confidence==="HIGH"?"bg-success/15 text-success border border-success/20":o.confidence==="MEDIUM"?"bg-warning/15 text-warning border border-warning/20":"bg-danger/15 text-danger border border-danger/20"}`,children:o.confidence})]}),B.jsx("div",{className:"text-xs text-dim mt-0.5",children:s})]}),B.jsx("div",{className:`text-xl font-mono font-bold ${r?"text-primary":u?"text-warning text-sm mt-1":"text-muted/50"}`,children:r?o.score:u?"N/F":""})]}),(r||u)&&B.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50 text-xs space-y-3 animate-in fade-in duration-500",children:[B.jsxs("div",{children:[B.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-wider block mb-1",children:"Analysis (EN)"}),B.jsx("p",{className:"text-dim leading-relaxed whitespace-pre-wrap",children:o.explanation_en})]}),o.explanation_tr&&B.jsxs("div",{children:[B.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-wider block mb-1",children:"Analiz (TR)"}),B.jsx("p",{className:"text-dim leading-relaxed italic whitespace-pre-wrap",children:o.explanation_tr})]}),o.quote&&B.jsxs("div",{className:"bg-bg/50 p-2.5 rounded border-l-2 border-success mt-2",children:[B.jsx("div",{className:"text-[9px] text-muted uppercase mb-1",children:"Source Quote"}),B.jsxs("p",{className:"font-mono text-[11px] text-success/90 break-words leading-relaxed",children:['"',o.quote,'"']}),o.location&&B.jsxs("div",{className:"text-[10px] text-muted mt-2 text-right",children:[" ",o.location]})]})]})]})},Jv=document.getElementById("root");if(!Jv)throw new Error("Could not find root element to mount to");const wR=gA.createRoot(Jv);wR.render(B.jsx(lA.StrictMode,{children:B.jsx(xR,{})}));
